// ==========================================================================
// Project:   SproutCore - JavaScript Application Framework
// Copyright: ©2006-2011 Strobe Inc. and contributors.
//            Portions ©2008-2011 Apple Inc. All rights reserved.
// License:   Licensed under MIT license (see license.js)
// ==========================================================================

(function(a){UI={}})({}),function(a){UI.Button=SC.View.extend({toString:function(){return"UI.Button"}})}({}),function(a){}({}),function(a){var b=SC.get,c=SC.set;UI.ViewController=SC.Object.extend({rootNode:null,view:null,init:function(){c(this,"view",SC.View.create({elementId:"foobar"}))},appendViews:function(a){var c=b(this,"rootNode");if(!c)throw new SC.Error("Can't append views without a rootNode specified.");c.appendChild(b(this,"view"))}})}({}),function(a){var b=SC.get,c=SC.set;UI.NavigationController=UI.ViewController.extend({navigationView:null,_stack:null,init:function(){this._stack=[]},initWithRootView:function(a){this._stack=[a]},pushView:function(a,c){if(SC.View.detect(a)===!1)throw new Error("UI.NavigationController#pushView only takes SC.View objects");var d=b(this,"navigationView");a=d.pushView(a,c),this._stack.push(a)},popView:function(a){var c=this._stack.pop(),d=b(this,"navigationView");return d.popView(c,a),c},views:function(a,b){if(b!==undefined)return;return this._stack.slice(0)}.property(),destroy:function(){var a=b(this,"navigationView"),c=this._stack,d=c.length;for(var e=d-1;e>=0;e--)a.popView(c[e],!1);return this._super()}})}({}),function(a){var b=SC.set;Handlebars.registerHelper("ui",function(a,b){console.log("HELPER: path = ",a);var c=a.indexOf(".")>=0?SC.getPath(a):UI[a],d={},e=b.fn;return e&&(d.handlebarsBlock=e,delete b.fn),c=SC.Handlebars.ViewHelper.viewClassFromHTMLOptions(c,d),Handlebars.helpers.view.call(this,c,b)})}({}),function(a){var b=SC.get,c=SC.set;UI.THEMES={},UI._Templates=SC.Object.extend({themeTemplates:null,unknownProperty:function(a){var c=b(this,"themeTemplates"),d=c?c[a]:null;return d||SC.TEMPLATES[a]}}),SC.View.reopen({themeName:null,templates:function(a,c){var d=b(this,"themeName");return UI._Templates.create({themeTemplates:UI.THEMES[d]})}.property("themeName")})}({}),function(a){var b=SC.set,c=SC.get;UI.LayoutManager=SC.Object.extend({_direction:null,_anchors:null,_remainingSpace:null,_propertyMetadata:{remainingSpace:{neighbors:["top","right","bottom","left"]},top:{constraint:"height",direction:"vertical",neighbors:["left","right"]},right:{constraint:"width",direction:"horizontal",neighbors:["top","bottom"]},bottom:{constraint:"height",direction:"vertical",neighbors:["left","right"]},left:{constraint:"width",direction:"horizontal",neighbors:["top","bottom"]}},init:function(){return this._anchors={},this._super()},layoutForManagedView:function(a,b,c){return b==="remainingSpace"?this._layoutForContentView(a,b,c):this._layoutForAnchoredView(a,b,c)},destroy:function(){this._direction=null,this._anchors={},this._remainingSpace=null},_layoutForAnchoredView:function(a,b,c){var d=this._direction,e=this._propertyMetadata[b],f=e.neighbors,g=c.size,h=this._anchors,i={};if(d!==null&&d!==e.direction)throw new SC.Error("You can't setup a horizontal anchor in a vertical view and vice versa.");if(g===undefined||g===null)throw new SC.Error("Anchors require a size property");i[b]=0,i[e.constraint]=g;for(var j=0,k=f.length;j<k;j++){var l=f[j];i[l]=0}return this._direction=e.direction,this._anchors[b]={view:a,constraint:g},this._reflowContentView(),i},_layoutForContentView:function(a,b){var c=this._direction,d=this._anchors,e,f,g,h,i={view:a,before:null,after:null};c==="horizontal"?(e="left",f="right"):c==="vertical"&&(e="top",f="bottom"),g=d[e],i.before=g?g.constraint:0,h=d[f],i.after=h?h.constraint:0,this._remainingSpace=i;var j={},k=this._propertyMetadata[b].neighbors;for(var l=0,m=k.length;l<m;l++){var n=k[l];j[n]=0}return j[e]=i.before,j[f]=i.after,j},_reflowContentView:function(){var a=this._remainingSpace;if(!a)return;if(!a.view)return;var b=this._layoutForContentView(a,"remainingSpace"),d=c(a.view,"element");if(d)for(var e in b)$(d).css(e,b[e])}}),UI.rootLayoutManager=UI.LayoutManager.create({})}({}),function(a){var b=SC.set,c=SC.get;UI.LayoutSupport=SC.Mixin.create({hasLayoutSupport:!0,anchorTo:null,size:null,_layout:null,layoutManager:null,init:function(){return b(this,"layoutManager",UI.LayoutManager.create({})),this._super()},_getLayoutManager:function(){if(this._managerCache)return this._managerCache;var a=null,b=c(this,"parentView");while(b){a=c(b,"layoutManager");if(a)break;b=c(b,"parentView")}return a=this._managerCache=a||UI.rootLayoutManager,a},applyLayout:function(a,b){a.style("position","absolute");for(var c in b)a.style(c,b[c])},render:function(a){var b=this._getLayoutManager(),d=this._layout=b.layoutForManagedView(this,c(this,"anchorTo"),{size:c(this,"size")});return this.applyLayout(a,d),this._super(a)},destroy:function(){var a=this._getLayoutManager();return a.destroy(),this._managerCache=undefined,this._super()}})}({}),function(a){}({}),function(a){var b=SC.get,c=SC.set;UI.NavigationView=SC.View.extend({controller:null,init:function(){this._super();var a=b(this,"controller");SC.typeOf(a)==="string"&&(a=SC.getPath(a),c(this,"controller",a)),c(a,"navigationView",this)},didInsertElement:function(){var a=b(this,"controller"),c=b(this,"handlebarsBlock");if(c){var d=SC.View.extend({template:c});a.pushView(d)}},pushView:function(a,c){var d=b(this,"childViews"),e=b(this,"controller"),f="",a,g;return a=this.createChildView(a,{controller:e}),f=f+a.renderToBuffer().string(),g=SC.$(f),a._notifyWillInsertElement(),this.$().append(g),d.push(a),a._notifyDidInsertElement(),a},popView:function(a,b){a.destroy()},toString:function(){return"UI.NavigationView"}})}({}),function(a){}({}),function(a){}({})
