/*!
 * jQuery JavaScript Library v1.6.1
 * http://jquery.com/
 *
 * Copyright 2011, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2011, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Thu May 12 15:04:36 2011 -0400
 */
(function(bl,U){var aB=bl.document,bD=bl.navigator,bu=bl.location;var b=(function(){var bN=function(b7,b8){return new bN.fn.init(b7,b8,bL)},b2=bl.jQuery,bP=bl.$,bL,b6=/^(?:[^<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,bV=/\S/,bR=/^\s+/,bM=/\s+$/,bQ=/\d/,bJ=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,bW=/^[\],:{}\s]*$/,b4=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,bY=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,bS=/(?:^|:|,)(?:\s*\[)+/g,bH=/(webkit)[ \/]([\w.]+)/,b0=/(opera)(?:.*version)?[ \/]([\w.]+)/,bZ=/(msie) ([\w.]+)/,b1=/(mozilla)(?:.*? rv:([\w.]+))?/,b5=bD.userAgent,b3,bK,e,bU=Object.prototype.toString,bO=Object.prototype.hasOwnProperty,bI=Array.prototype.push,bT=Array.prototype.slice,bX=String.prototype.trim,bE=Array.prototype.indexOf,bG={};bN.fn=bN.prototype={constructor:bN,init:function(b7,cb,ca){var b9,cc,b8,cd;if(!b7){return this}if(b7.nodeType){this.context=this[0]=b7;this.length=1;return this}if(b7==="body"&&!cb&&aB.body){this.context=aB;this[0]=aB.body;this.selector=b7;this.length=1;return this}if(typeof b7==="string"){if(b7.charAt(0)==="<"&&b7.charAt(b7.length-1)===">"&&b7.length>=3){b9=[null,b7,null]}else{b9=b6.exec(b7)}if(b9&&(b9[1]||!cb)){if(b9[1]){cb=cb instanceof bN?cb[0]:cb;cd=(cb?cb.ownerDocument||cb:aB);b8=bJ.exec(b7);if(b8){if(bN.isPlainObject(cb)){b7=[aB.createElement(b8[1])];bN.fn.attr.call(b7,cb,true)}else{b7=[cd.createElement(b8[1])]}}else{b8=bN.buildFragment([b9[1]],[cd]);b7=(b8.cacheable?bN.clone(b8.fragment):b8.fragment).childNodes}return bN.merge(this,b7)}else{cc=aB.getElementById(b9[2]);if(cc&&cc.parentNode){if(cc.id!==b9[2]){return ca.find(b7)}this.length=1;this[0]=cc}this.context=aB;this.selector=b7;return this}}else{if(!cb||cb.jquery){return(cb||ca).find(b7)}else{return this.constructor(cb).find(b7)}}}else{if(bN.isFunction(b7)){return ca.ready(b7)}}if(b7.selector!==U){this.selector=b7.selector;this.context=b7.context}return bN.makeArray(b7,this)},selector:"",jquery:"1.6.1",length:0,size:function(){return this.length},toArray:function(){return bT.call(this,0)},get:function(b7){return b7==null?this.toArray():(b7<0?this[this.length+b7]:this[b7])},pushStack:function(b8,ca,b7){var b9=this.constructor();if(bN.isArray(b8)){bI.apply(b9,b8)}else{bN.merge(b9,b8)}b9.prevObject=this;b9.context=this.context;if(ca==="find"){b9.selector=this.selector+(this.selector?" ":"")+b7}else{if(ca){b9.selector=this.selector+"."+ca+"("+b7+")"}}return b9},each:function(b8,b7){return bN.each(this,b8,b7)},ready:function(b7){bN.bindReady();bK.done(b7);return this},eq:function(b7){return b7===-1?this.slice(b7):this.slice(b7,+b7+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(bT.apply(this,arguments),"slice",bT.call(arguments).join(","))},map:function(b7){return this.pushStack(bN.map(this,function(b9,b8){return b7.call(b9,b8,b9)}))},end:function(){return this.prevObject||this.constructor(null)},push:bI,sort:[].sort,splice:[].splice};bN.fn.init.prototype=bN.fn;bN.extend=bN.fn.extend=function(){var cg,b9,b7,b8,cd,ce,cc=arguments[0]||{},cb=1,ca=arguments.length,cf=false;if(typeof cc==="boolean"){cf=cc;cc=arguments[1]||{};cb=2}if(typeof cc!=="object"&&!bN.isFunction(cc)){cc={}}if(ca===cb){cc=this;--cb}for(;cb<ca;cb++){if((cg=arguments[cb])!=null){for(b9 in cg){b7=cc[b9];b8=cg[b9];if(cc===b8){continue}if(cf&&b8&&(bN.isPlainObject(b8)||(cd=bN.isArray(b8)))){if(cd){cd=false;ce=b7&&bN.isArray(b7)?b7:[]}else{ce=b7&&bN.isPlainObject(b7)?b7:{}}cc[b9]=bN.extend(cf,ce,b8)}else{if(b8!==U){cc[b9]=b8}}}}}return cc};bN.extend({noConflict:function(b7){if(bl.$===bN){bl.$=bP}if(b7&&bl.jQuery===bN){bl.jQuery=b2}return bN},isReady:false,readyWait:1,holdReady:function(b7){if(b7){bN.readyWait++}else{bN.ready(true)}},ready:function(b7){if((b7===true&&!--bN.readyWait)||(b7!==true&&!bN.isReady)){if(!aB.body){return setTimeout(bN.ready,1)}bN.isReady=true;if(b7!==true&&--bN.readyWait>0){return}bK.resolveWith(aB,[bN]);if(bN.fn.trigger){bN(aB).trigger("ready").unbind("ready")}}},bindReady:function(){if(bK){return}bK=bN._Deferred();if(aB.readyState==="complete"){return setTimeout(bN.ready,1)}if(aB.addEventListener){aB.addEventListener("DOMContentLoaded",e,false);bl.addEventListener("load",bN.ready,false)}else{if(aB.attachEvent){aB.attachEvent("onreadystatechange",e);bl.attachEvent("onload",bN.ready);var b7=false;try{b7=bl.frameElement==null}catch(b8){}if(aB.documentElement.doScroll&&b7){bF()}}}},isFunction:function(b7){return bN.type(b7)==="function"},isArray:Array.isArray||function(b7){return bN.type(b7)==="array"},isWindow:function(b7){return b7&&typeof b7==="object"&&"setInterval" in b7},isNaN:function(b7){return b7==null||!bQ.test(b7)||isNaN(b7)},type:function(b7){return b7==null?String(b7):bG[bU.call(b7)]||"object"},isPlainObject:function(b8){if(!b8||bN.type(b8)!=="object"||b8.nodeType||bN.isWindow(b8)){return false}if(b8.constructor&&!bO.call(b8,"constructor")&&!bO.call(b8.constructor.prototype,"isPrototypeOf")){return false}var b7;for(b7 in b8){}return b7===U||bO.call(b8,b7)},isEmptyObject:function(b8){for(var b7 in b8){return false}return true},error:function(b7){throw b7},parseJSON:function(b7){if(typeof b7!=="string"||!b7){return null}b7=bN.trim(b7);if(bl.JSON&&bl.JSON.parse){return bl.JSON.parse(b7)}if(bW.test(b7.replace(b4,"@").replace(bY,"]").replace(bS,""))){return(new Function("return "+b7))()}bN.error("Invalid JSON: "+b7)},parseXML:function(b9,b7,b8){if(bl.DOMParser){b8=new DOMParser();b7=b8.parseFromString(b9,"text/xml")}else{b7=new ActiveXObject("Microsoft.XMLDOM");b7.async="false";b7.loadXML(b9)}b8=b7.documentElement;if(!b8||!b8.nodeName||b8.nodeName==="parsererror"){bN.error("Invalid XML: "+b9)}return b7},noop:function(){},globalEval:function(b7){if(b7&&bV.test(b7)){(bl.execScript||function(b8){bl["eval"].call(bl,b8)})(b7)}},nodeName:function(b8,b7){return b8.nodeName&&b8.nodeName.toUpperCase()===b7.toUpperCase()},each:function(ca,cd,b9){var b8,cb=0,cc=ca.length,b7=cc===U||bN.isFunction(ca);if(b9){if(b7){for(b8 in ca){if(cd.apply(ca[b8],b9)===false){break}}}else{for(;cb<cc;){if(cd.apply(ca[cb++],b9)===false){break}}}}else{if(b7){for(b8 in ca){if(cd.call(ca[b8],b8,ca[b8])===false){break}}}else{for(;cb<cc;){if(cd.call(ca[cb],cb,ca[cb++])===false){break}}}}return ca},trim:bX?function(b7){return b7==null?"":bX.call(b7)}:function(b7){return b7==null?"":b7.toString().replace(bR,"").replace(bM,"")},makeArray:function(ca,b8){var b7=b8||[];if(ca!=null){var b9=bN.type(ca);if(ca.length==null||b9==="string"||b9==="function"||b9==="regexp"||bN.isWindow(ca)){bI.call(b7,ca)}else{bN.merge(b7,ca)}}return b7},inArray:function(b9,ca){if(bE){return bE.call(ca,b9)}for(var b7=0,b8=ca.length;b7<b8;b7++){if(ca[b7]===b9){return b7}}return -1},merge:function(cb,b9){var ca=cb.length,b8=0;if(typeof b9.length==="number"){for(var b7=b9.length;b8<b7;b8++){cb[ca++]=b9[b8]}}else{while(b9[b8]!==U){cb[ca++]=b9[b8++]}}cb.length=ca;return cb},grep:function(b8,cd,b7){var b9=[],cc;b7=!!b7;for(var ca=0,cb=b8.length;ca<cb;ca++){cc=!!cd(b8[ca],ca);if(b7!==cc){b9.push(b8[ca])}}return b9},map:function(b7,ce,cf){var cc,cd,cb=[],b9=0,b8=b7.length,ca=b7 instanceof bN||b8!==U&&typeof b8==="number"&&((b8>0&&b7[0]&&b7[b8-1])||b8===0||bN.isArray(b7));if(ca){for(;b9<b8;b9++){cc=ce(b7[b9],b9,cf);if(cc!=null){cb[cb.length]=cc}}}else{for(cd in b7){cc=ce(b7[cd],cd,cf);if(cc!=null){cb[cb.length]=cc}}}return cb.concat.apply([],cb)},guid:1,proxy:function(cb,ca){if(typeof ca==="string"){var b9=cb[ca];ca=cb;cb=b9}if(!bN.isFunction(cb)){return U}var b7=bT.call(arguments,2),b8=function(){return cb.apply(ca,b7.concat(bT.call(arguments)))};b8.guid=cb.guid=cb.guid||b8.guid||bN.guid++;return b8},access:function(b7,cf,cd,b9,cc,ce){var b8=b7.length;if(typeof cf==="object"){for(var ca in cf){bN.access(b7,ca,cf[ca],b9,cc,cd)}return b7}if(cd!==U){b9=!ce&&b9&&bN.isFunction(cd);for(var cb=0;cb<b8;cb++){cc(b7[cb],cf,b9?cd.call(b7[cb],cb,cc(b7[cb],cf)):cd,ce)}return b7}return b8?cc(b7[0],cf):U},now:function(){return(new Date()).getTime()},uaMatch:function(b8){b8=b8.toLowerCase();var b7=bH.exec(b8)||b0.exec(b8)||bZ.exec(b8)||b8.indexOf("compatible")<0&&b1.exec(b8)||[];return{browser:b7[1]||"",version:b7[2]||"0"}},sub:function(){function b7(ca,cb){return new b7.fn.init(ca,cb)}bN.extend(true,b7,this);b7.superclass=this;b7.fn=b7.prototype=this();b7.fn.constructor=b7;b7.sub=this.sub;b7.fn.init=function b9(ca,cb){if(cb&&cb instanceof bN&&!(cb instanceof b7)){cb=b7(cb)}return bN.fn.init.call(this,ca,cb,b8)};b7.fn.init.prototype=b7.fn;var b8=b7(aB);return b7},browser:{}});bN.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(b8,b7){bG["[object "+b7+"]"]=b7.toLowerCase()});b3=bN.uaMatch(b5);if(b3.browser){bN.browser[b3.browser]=true;bN.browser.version=b3.version}if(bN.browser.webkit){bN.browser.safari=true}if(bV.test("\xA0")){bR=/^[\s\xA0]+/;bM=/[\s\xA0]+$/}bL=bN(aB);if(aB.addEventListener){e=function(){aB.removeEventListener("DOMContentLoaded",e,false);bN.ready()}}else{if(aB.attachEvent){e=function(){if(aB.readyState==="complete"){aB.detachEvent("onreadystatechange",e);bN.ready()}}}}function bF(){if(bN.isReady){return}try{aB.documentElement.doScroll("left")}catch(b7){setTimeout(bF,1);return}bN.ready()}return bN})();var a="done fail isResolved isRejected promise then always pipe".split(" "),aQ=[].slice;b.extend({_Deferred:function(){var bG=[],bH,bE,bF,e={done:function(){if(!bF){var bJ=arguments,bK,bN,bM,bL,bI;if(bH){bI=bH;bH=0}for(bK=0,bN=bJ.length;bK<bN;bK++){bM=bJ[bK];bL=b.type(bM);if(bL==="array"){e.done.apply(e,bM)}else{if(bL==="function"){bG.push(bM)}}}if(bI){e.resolveWith(bI[0],bI[1])}}return this},resolveWith:function(bJ,bI){if(!bF&&!bH&&!bE){bI=bI||[];bE=1;try{while(bG[0]){bG.shift().apply(bJ,bI)}}finally{bH=[bJ,bI];bE=0}}return this},resolve:function(){e.resolveWith(this,arguments);return this},isResolved:function(){return !!(bE||bH)},cancel:function(){bF=1;bG=[];return this}};return e},Deferred:function(bE){var e=b._Deferred(),bG=b._Deferred(),bF;b.extend(e,{then:function(bI,bH){e.done(bI).fail(bH);return this},always:function(){return e.done.apply(e,arguments).fail.apply(this,arguments)},fail:bG.done,rejectWith:bG.resolveWith,reject:bG.resolve,isRejected:bG.isResolved,pipe:function(bI,bH){return b.Deferred(function(bJ){b.each({done:[bI,"resolve"],fail:[bH,"reject"]},function(bL,bO){var bK=bO[0],bN=bO[1],bM;if(b.isFunction(bK)){e[bL](function(){bM=bK.apply(this,arguments);if(bM&&b.isFunction(bM.promise)){bM.promise().then(bJ.resolve,bJ.reject)}else{bJ[bN](bM)}})}else{e[bL](bJ[bN])}})}).promise()},promise:function(bI){if(bI==null){if(bF){return bF}bF=bI={}}var bH=a.length;while(bH--){bI[a[bH]]=e[a[bH]]}return bI}});e.done(bG.cancel).fail(e.cancel);delete e.cancel;if(bE){bE.call(e,e)}return e},when:function(bJ){var bE=arguments,bF=0,bI=bE.length,bH=bI,e=bI<=1&&bJ&&b.isFunction(bJ.promise)?bJ:b.Deferred();function bG(bK){return function(bL){bE[bK]=arguments.length>1?aQ.call(arguments,0):bL;if(!(--bH)){e.resolveWith(e,aQ.call(bE,0))}}}if(bI>1){for(;bF<bI;bF++){if(bE[bF]&&b.isFunction(bE[bF].promise)){bE[bF].promise().then(bG(bF),e.reject)}else{--bH}}if(!bH){e.resolveWith(e,bE)}}else{if(e!==bJ){e.resolveWith(e,bI?[bJ]:[])}}return e.promise()}});b.support=(function(){var bO=aB.createElement("div"),bU=aB.documentElement,bI,bV,bP,bG,bN,bJ,bL,bF,bM,bE,bR,bH,bK,bS,bW;bO.setAttribute("className","t");bO.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>";bI=bO.getElementsByTagName("*");bV=bO.getElementsByTagName("a")[0];if(!bI||!bI.length||!bV){return{}}bP=aB.createElement("select");bG=bP.appendChild(aB.createElement("option"));bN=bO.getElementsByTagName("input")[0];bL={leadingWhitespace:(bO.firstChild.nodeType===3),tbody:!bO.getElementsByTagName("tbody").length,htmlSerialize:!!bO.getElementsByTagName("link").length,style:/top/.test(bV.getAttribute("style")),hrefNormalized:(bV.getAttribute("href")==="/a"),opacity:/^0.55$/.test(bV.style.opacity),cssFloat:!!bV.style.cssFloat,checkOn:(bN.value==="on"),optSelected:bG.selected,getSetAttribute:bO.className!=="t",submitBubbles:true,changeBubbles:true,focusinBubbles:false,deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true};bN.checked=true;bL.noCloneChecked=bN.cloneNode(true).checked;bP.disabled=true;bL.optDisabled=!bG.disabled;try{delete bO.test}catch(bT){bL.deleteExpando=false}if(!bO.addEventListener&&bO.attachEvent&&bO.fireEvent){bO.attachEvent("onclick",function bQ(){bL.noCloneEvent=false;bO.detachEvent("onclick",bQ)});bO.cloneNode(true).fireEvent("onclick")}bN=aB.createElement("input");bN.value="t";bN.setAttribute("type","radio");bL.radioValue=bN.value==="t";bN.setAttribute("checked","checked");bO.appendChild(bN);bF=aB.createDocumentFragment();bF.appendChild(bO.firstChild);bL.checkClone=bF.cloneNode(true).cloneNode(true).lastChild.checked;bO.innerHTML="";bO.style.width=bO.style.paddingLeft="1px";bM=aB.createElement("body");bE={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};for(bS in bE){bM.style[bS]=bE[bS]}bM.appendChild(bO);bU.insertBefore(bM,bU.firstChild);bL.appendChecked=bN.checked;bL.boxModel=bO.offsetWidth===2;if("zoom" in bO.style){bO.style.display="inline";bO.style.zoom=1;bL.inlineBlockNeedsLayout=(bO.offsetWidth===2);bO.style.display="";bO.innerHTML="<div style='width:4px;'></div>";bL.shrinkWrapBlocks=(bO.offsetWidth!==2)}bO.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>";bR=bO.getElementsByTagName("td");bW=(bR[0].offsetHeight===0);bR[0].style.display="";bR[1].style.display="none";bL.reliableHiddenOffsets=bW&&(bR[0].offsetHeight===0);bO.innerHTML="";if(aB.defaultView&&aB.defaultView.getComputedStyle){bJ=aB.createElement("div");bJ.style.width="0";bJ.style.marginRight="0";bO.appendChild(bJ);bL.reliableMarginRight=(parseInt((aB.defaultView.getComputedStyle(bJ,null)||{marginRight:0}).marginRight,10)||0)===0}bM.innerHTML="";bU.removeChild(bM);if(bO.attachEvent){for(bS in {submit:1,change:1,focusin:1}){bK="on"+bS;bW=(bK in bO);if(!bW){bO.setAttribute(bK,"return;");bW=(typeof bO[bK]==="function")}bL[bS+"Bubbles"]=bW}}return bL})();b.boxModel=b.support.boxModel;var aX=/^(?:\{.*\}|\[.*\])$/,aG=/([a-z])([A-Z])/g;b.extend({cache:{},uuid:0,expando:"jQuery"+(b.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},hasData:function(e){e=e.nodeType?b.cache[e[b.expando]]:e[b.expando];return !!e&&!ad(e)},data:function(bG,bE,bI,bH){if(!b.acceptData(bG)){return}var bL=b.expando,bK=typeof bE==="string",bJ,bM=bG.nodeType,e=bM?b.cache:bG,bF=bM?bG[b.expando]:bG[b.expando]&&b.expando;if((!bF||(bH&&bF&&!e[bF][bL]))&&bK&&bI===U){return}if(!bF){if(bM){bG[b.expando]=bF=++b.uuid}else{bF=b.expando}}if(!e[bF]){e[bF]={};if(!bM){e[bF].toJSON=b.noop}}if(typeof bE==="object"||typeof bE==="function"){if(bH){e[bF][bL]=b.extend(e[bF][bL],bE)}else{e[bF]=b.extend(e[bF],bE)}}bJ=e[bF];if(bH){if(!bJ[bL]){bJ[bL]={}}bJ=bJ[bL]}if(bI!==U){bJ[b.camelCase(bE)]=bI}if(bE==="events"&&!bJ[bE]){return bJ[bL]&&bJ[bL].events}return bK?bJ[b.camelCase(bE)]:bJ},removeData:function(bH,bF,bI){if(!b.acceptData(bH)){return}var bK=b.expando,bL=bH.nodeType,bE=bL?b.cache:bH,bG=bL?bH[b.expando]:b.expando;if(!bE[bG]){return}if(bF){var bJ=bI?bE[bG][bK]:bE[bG];if(bJ){delete bJ[bF];if(!ad(bJ)){return}}}if(bI){delete bE[bG][bK];if(!ad(bE[bG])){return}}var e=bE[bG][bK];if(b.support.deleteExpando||bE!=bl){delete bE[bG]}else{bE[bG]=null}if(e){bE[bG]={};if(!bL){bE[bG].toJSON=b.noop}bE[bG][bK]=e}else{if(bL){if(b.support.deleteExpando){delete bH[b.expando]}else{if(bH.removeAttribute){bH.removeAttribute(b.expando)}else{bH[b.expando]=null}}}}},_data:function(bE,e,bF){return b.data(bE,e,bF,true)},acceptData:function(bE){if(bE.nodeName){var e=b.noData[bE.nodeName.toLowerCase()];if(e){return !(e===true||bE.getAttribute("classid")!==e)}}return true}});b.fn.extend({data:function(bH,bJ){var bI=null;if(typeof bH==="undefined"){if(this.length){bI=b.data(this[0]);if(this[0].nodeType===1){var e=this[0].attributes,bF;for(var bG=0,bE=e.length;bG<bE;bG++){bF=e[bG].name;if(bF.indexOf("data-")===0){bF=b.camelCase(bF.substring(5));be(this[0],bF,bI[bF])}}}}return bI}else{if(typeof bH==="object"){return this.each(function(){b.data(this,bH)})}}var bK=bH.split(".");bK[1]=bK[1]?"."+bK[1]:"";if(bJ===U){bI=this.triggerHandler("getData"+bK[1]+"!",[bK[0]]);if(bI===U&&this.length){bI=b.data(this[0],bH);bI=be(this[0],bH,bI)}return bI===U&&bK[1]?this.data(bK[0]):bI}else{return this.each(function(){var bM=b(this),bL=[bK[0],bJ];bM.triggerHandler("setData"+bK[1]+"!",bL);b.data(this,bH,bJ);bM.triggerHandler("changeData"+bK[1]+"!",bL)})}},removeData:function(e){return this.each(function(){b.removeData(this,e)})}});function be(bG,bF,bH){if(bH===U&&bG.nodeType===1){var bE="data-"+bF.replace(aG,"$1-$2").toLowerCase();bH=bG.getAttribute(bE);if(typeof bH==="string"){try{bH=bH==="true"?true:bH==="false"?false:bH==="null"?null:!b.isNaN(bH)?parseFloat(bH):aX.test(bH)?b.parseJSON(bH):bH}catch(bI){}b.data(bG,bF,bH)}else{bH=U}}return bH}function ad(bE){for(var e in bE){if(e!=="toJSON"){return false}}return true}function bq(bH,bG,bJ){var bF=bG+"defer",bE=bG+"queue",e=bG+"mark",bI=b.data(bH,bF,U,true);if(bI&&(bJ==="queue"||!b.data(bH,bE,U,true))&&(bJ==="mark"||!b.data(bH,e,U,true))){setTimeout(function(){if(!b.data(bH,bE,U,true)&&!b.data(bH,e,U,true)){b.removeData(bH,bF,true);bI.resolve()}},0)}}b.extend({_mark:function(bE,e){if(bE){e=(e||"fx")+"mark";b.data(bE,e,(b.data(bE,e,U,true)||0)+1,true)}},_unmark:function(bH,bG,bE){if(bH!==true){bE=bG;bG=bH;bH=false}if(bG){bE=bE||"fx";var e=bE+"mark",bF=bH?0:((b.data(bG,e,U,true)||1)-1);if(bF){b.data(bG,e,bF,true)}else{b.removeData(bG,e,true);bq(bG,bE,"mark")}}},queue:function(bE,e,bG){if(bE){e=(e||"fx")+"queue";var bF=b.data(bE,e,U,true);if(bG){if(!bF||b.isArray(bG)){bF=b.data(bE,e,b.makeArray(bG),true)}else{bF.push(bG)}}return bF||[]}},dequeue:function(bG,bF){bF=bF||"fx";var e=b.queue(bG,bF),bE=e.shift(),bH;if(bE==="inprogress"){bE=e.shift()}if(bE){if(bF==="fx"){e.unshift("inprogress")}bE.call(bG,function(){b.dequeue(bG,bF)})}if(!e.length){b.removeData(bG,bF+"queue",true);bq(bG,bF,"queue")}}});b.fn.extend({queue:function(e,bE){if(typeof e!=="string"){bE=e;e="fx"}if(bE===U){return b.queue(this[0],e)}return this.each(function(){var bF=b.queue(this,e,bE);if(e==="fx"&&bF[0]!=="inprogress"){b.dequeue(this,e)}})},dequeue:function(e){return this.each(function(){b.dequeue(this,e)})},delay:function(bE,e){bE=b.fx?b.fx.speeds[bE]||bE:bE;e=e||"fx";return this.queue(e,function(){var bF=this;setTimeout(function(){b.dequeue(bF,e)},bE)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(bM,bF){if(typeof bM!=="string"){bF=bM;bM=U}bM=bM||"fx";var e=b.Deferred(),bE=this,bH=bE.length,bK=1,bI=bM+"defer",bJ=bM+"queue",bL=bM+"mark",bG;function bN(){if(!(--bK)){e.resolveWith(bE,[bE])}}while(bH--){if((bG=b.data(bE[bH],bI,U,true)||(b.data(bE[bH],bJ,U,true)||b.data(bE[bH],bL,U,true))&&b.data(bE[bH],bI,b._Deferred(),true))){bK++;bG.done(bN)}}bN();return e.promise()}});var aV=/[\n\t\r]/g,am=/\s+/,aZ=/\r/g,j=/^(?:button|input)$/i,N=/^(?:button|input|object|select|textarea)$/i,q=/^a(?:rea)?$/i,av=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,bh=/\:/,bc,a6;b.fn.extend({attr:function(e,bE){return b.access(this,e,bE,true,b.attr)},removeAttr:function(e){return this.each(function(){b.removeAttr(this,e)})},prop:function(e,bE){return b.access(this,e,bE,true,b.prop)},removeProp:function(e){e=b.propFix[e]||e;return this.each(function(){try{this[e]=U;delete this[e]}catch(bE){}})},addClass:function(bK){if(b.isFunction(bK)){return this.each(function(bN){var bM=b(this);bM.addClass(bK.call(this,bN,bM.attr("class")||""))})}if(bK&&typeof bK==="string"){var e=(bK||"").split(am);for(var bG=0,bF=this.length;bG<bF;bG++){var bE=this[bG];if(bE.nodeType===1){if(!bE.className){bE.className=bK}else{var bH=" "+bE.className+" ",bJ=bE.className;for(var bI=0,bL=e.length;bI<bL;bI++){if(bH.indexOf(" "+e[bI]+" ")<0){bJ+=" "+e[bI]}}bE.className=b.trim(bJ)}}}}return this},removeClass:function(bI){if(b.isFunction(bI)){return this.each(function(bM){var bL=b(this);bL.removeClass(bI.call(this,bM,bL.attr("class")))})}if((bI&&typeof bI==="string")||bI===U){var bJ=(bI||"").split(am);for(var bF=0,bE=this.length;bF<bE;bF++){var bH=this[bF];if(bH.nodeType===1&&bH.className){if(bI){var bG=(" "+bH.className+" ").replace(aV," ");for(var bK=0,e=bJ.length;bK<e;bK++){bG=bG.replace(" "+bJ[bK]+" "," ")}bH.className=b.trim(bG)}else{bH.className=""}}}}return this},toggleClass:function(bG,bE){var bF=typeof bG,e=typeof bE==="boolean";if(b.isFunction(bG)){return this.each(function(bI){var bH=b(this);bH.toggleClass(bG.call(this,bI,bH.attr("class"),bE),bE)})}return this.each(function(){if(bF==="string"){var bJ,bI=0,bH=b(this),bK=bE,bL=bG.split(am);while((bJ=bL[bI++])){bK=e?bK:!bH.hasClass(bJ);bH[bK?"addClass":"removeClass"](bJ)}}else{if(bF==="undefined"||bF==="boolean"){if(this.className){b._data(this,"__className__",this.className)}this.className=this.className||bG===false?"":b._data(this,"__className__")||""}}})},hasClass:function(e){var bG=" "+e+" ";for(var bF=0,bE=this.length;bF<bE;bF++){if((" "+this[bF].className+" ").replace(aV," ").indexOf(bG)>-1){return true}}return false},val:function(bG){var e,bE,bF=this[0];if(!arguments.length){if(bF){e=b.valHooks[bF.nodeName.toLowerCase()]||b.valHooks[bF.type];if(e&&"get" in e&&(bE=e.get(bF,"value"))!==U){return bE}return(bF.value||"").replace(aZ,"")}return U}var bH=b.isFunction(bG);return this.each(function(bJ){var bI=b(this),bK;if(this.nodeType!==1){return}if(bH){bK=bG.call(this,bJ,bI.val())}else{bK=bG}if(bK==null){bK=""}else{if(typeof bK==="number"){bK+=""}else{if(b.isArray(bK)){bK=b.map(bK,function(bL){return bL==null?"":bL+""})}}}e=b.valHooks[this.nodeName.toLowerCase()]||b.valHooks[this.type];if(!e||!("set" in e)||e.set(this,bK,"value")===U){this.value=bK}})}});b.extend({valHooks:{option:{get:function(e){var bE=e.attributes.value;return !bE||bE.specified?e.value:e.text}},select:{get:function(e){var bJ,bH=e.selectedIndex,bK=[],bL=e.options,bG=e.type==="select-one";if(bH<0){return null}for(var bE=bG?bH:0,bI=bG?bH+1:bL.length;bE<bI;bE++){var bF=bL[bE];if(bF.selected&&(b.support.optDisabled?!bF.disabled:bF.getAttribute("disabled")===null)&&(!bF.parentNode.disabled||!b.nodeName(bF.parentNode,"optgroup"))){bJ=b(bF).val();if(bG){return bJ}bK.push(bJ)}}if(bG&&!bK.length&&bL.length){return b(bL[bH]).val()}return bK},set:function(bE,bF){var e=b.makeArray(bF);b(bE).find("option").each(function(){this.selected=b.inArray(b(this).val(),e)>=0});if(!e.length){bE.selectedIndex=-1}return e}}},attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attrFix:{tabindex:"tabIndex"},attr:function(bJ,bG,bK,bI){var bE=bJ.nodeType;if(!bJ||bE===3||bE===8||bE===2){return U}if(bI&&bG in b.attrFn){return b(bJ)[bG](bK)}if(!("getAttribute" in bJ)){return b.prop(bJ,bG,bK)}var bF,e,bH=bE!==1||!b.isXMLDoc(bJ);bG=bH&&b.attrFix[bG]||bG;e=b.attrHooks[bG];if(!e){if(av.test(bG)&&(typeof bK==="boolean"||bK===U||bK.toLowerCase()===bG.toLowerCase())){e=a6}else{if(bc&&(b.nodeName(bJ,"form")||bh.test(bG))){e=bc}}}if(bK!==U){if(bK===null){b.removeAttr(bJ,bG);return U}else{if(e&&"set" in e&&bH&&(bF=e.set(bJ,bK,bG))!==U){return bF}else{bJ.setAttribute(bG,""+bK);return bK}}}else{if(e&&"get" in e&&bH){return e.get(bJ,bG)}else{bF=bJ.getAttribute(bG);return bF===null?U:bF}}},removeAttr:function(bE,e){var bF;if(bE.nodeType===1){e=b.attrFix[e]||e;if(b.support.getSetAttribute){bE.removeAttribute(e)}else{b.attr(bE,e,"");bE.removeAttributeNode(bE.getAttributeNode(e))}if(av.test(e)&&(bF=b.propFix[e]||e) in bE){bE[bF]=false}}},attrHooks:{type:{set:function(e,bE){if(j.test(e.nodeName)&&e.parentNode){b.error("type property can't be changed")}else{if(!b.support.radioValue&&bE==="radio"&&b.nodeName(e,"input")){var bF=e.value;e.setAttribute("type",bE);if(bF){e.value=bF}return bE}}}},tabIndex:{get:function(bE){var e=bE.getAttributeNode("tabIndex");return e&&e.specified?parseInt(e.value,10):N.test(bE.nodeName)||q.test(bE.nodeName)&&bE.href?0:U}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(bI,bG,bJ){var bE=bI.nodeType;if(!bI||bE===3||bE===8||bE===2){return U}var bF,e,bH=bE!==1||!b.isXMLDoc(bI);bG=bH&&b.propFix[bG]||bG;e=b.propHooks[bG];if(bJ!==U){if(e&&"set" in e&&(bF=e.set(bI,bJ,bG))!==U){return bF}else{return(bI[bG]=bJ)}}else{if(e&&"get" in e&&(bF=e.get(bI,bG))!==U){return bF}else{return bI[bG]}}},propHooks:{}});a6={get:function(bE,e){return bE[b.propFix[e]||e]?e.toLowerCase():U},set:function(bE,bG,e){var bF;if(bG===false){b.removeAttr(bE,e)}else{bF=b.propFix[e]||e;if(bF in bE){bE[bF]=bG}bE.setAttribute(e,e.toLowerCase())}return e}};b.attrHooks.value={get:function(bE,e){if(bc&&b.nodeName(bE,"button")){return bc.get(bE,e)}return bE.value},set:function(bE,bF,e){if(bc&&b.nodeName(bE,"button")){return bc.set(bE,bF,e)}bE.value=bF}};if(!b.support.getSetAttribute){b.attrFix=b.propFix;bc=b.attrHooks.name=b.valHooks.button={get:function(bF,bE){var e;e=bF.getAttributeNode(bE);return e&&e.nodeValue!==""?e.nodeValue:U},set:function(bF,bG,bE){var e=bF.getAttributeNode(bE);if(e){e.nodeValue=bG;return bG}}};b.each(["width","height"],function(bE,e){b.attrHooks[e]=b.extend(b.attrHooks[e],{set:function(bF,bG){if(bG===""){bF.setAttribute(e,"auto");return bG}}})})}if(!b.support.hrefNormalized){b.each(["href","src","width","height"],function(bE,e){b.attrHooks[e]=b.extend(b.attrHooks[e],{get:function(bG){var bF=bG.getAttribute(e,2);return bF===null?U:bF}})})}if(!b.support.style){b.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||U},set:function(e,bE){return(e.style.cssText=""+bE)}}}if(!b.support.optSelected){b.propHooks.selected=b.extend(b.propHooks.selected,{get:function(bE){var e=bE.parentNode;if(e){e.selectedIndex;if(e.parentNode){e.parentNode.selectedIndex}}}})}if(!b.support.checkOn){b.each(["radio","checkbox"],function(){b.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}})}b.each(["radio","checkbox"],function(){b.valHooks[this]=b.extend(b.valHooks[this],{set:function(e,bE){if(b.isArray(bE)){return(e.checked=b.inArray(b(e).val(),bE)>=0)}}})});var aN=Object.prototype.hasOwnProperty,a8=/\.(.*)$/,bn=/^(?:textarea|input|select)$/i,X=/\./g,br=/ /g,aM=/[^\w\s.|`]/g,Q=function(e){return e.replace(aM,"\\$&")};b.event={add:function(bG,bK,bP,bI){if(bG.nodeType===3||bG.nodeType===8){return}if(bP===false){bP=bt}else{if(!bP){return}}var bE,bO;if(bP.handler){bE=bP;bP=bE.handler}if(!bP.guid){bP.guid=b.guid++}var bL=b._data(bG);if(!bL){return}var bQ=bL.events,bJ=bL.handle;if(!bQ){bL.events=bQ={}}if(!bJ){bL.handle=bJ=function(bR){return typeof b!=="undefined"&&(!bR||b.event.triggered!==bR.type)?b.event.handle.apply(bJ.elem,arguments):U}}bJ.elem=bG;bK=bK.split(" ");var bN,bH=0,e;while((bN=bK[bH++])){bO=bE?b.extend({},bE):{handler:bP,data:bI};if(bN.indexOf(".")>-1){e=bN.split(".");bN=e.shift();bO.namespace=e.slice(0).sort().join(".")}else{e=[];bO.namespace=""}bO.type=bN;if(!bO.guid){bO.guid=bP.guid}var bF=bQ[bN],bM=b.event.special[bN]||{};if(!bF){bF=bQ[bN]=[];if(!bM.setup||bM.setup.call(bG,bI,e,bJ)===false){if(bG.addEventListener){bG.addEventListener(bN,bJ,false)}else{if(bG.attachEvent){bG.attachEvent("on"+bN,bJ)}}}}if(bM.add){bM.add.call(bG,bO);if(!bO.handler.guid){bO.handler.guid=bP.guid}}bF.push(bO);b.event.global[bN]=true}bG=null},global:{},remove:function(bS,bN,bF,bJ){if(bS.nodeType===3||bS.nodeType===8){return}if(bF===false){bF=bt}var bV,bI,bK,bP,bQ=0,bG,bL,bO,bH,bM,e,bU,bR=b.hasData(bS)&&b._data(bS),bE=bR&&bR.events;if(!bR||!bE){return}if(bN&&bN.type){bF=bN.handler;bN=bN.type}if(!bN||typeof bN==="string"&&bN.charAt(0)==="."){bN=bN||"";for(bI in bE){b.event.remove(bS,bI+bN)}return}bN=bN.split(" ");while((bI=bN[bQ++])){bU=bI;e=null;bG=bI.indexOf(".")<0;bL=[];if(!bG){bL=bI.split(".");bI=bL.shift();bO=new RegExp("(^|\\.)"+b.map(bL.slice(0).sort(),Q).join("\\.(?:.*\\.)?")+"(\\.|$)")}bM=bE[bI];if(!bM){continue}if(!bF){for(bP=0;bP<bM.length;bP++){e=bM[bP];if(bG||bO.test(e.namespace)){b.event.remove(bS,bU,e.handler,bP);bM.splice(bP--,1)}}continue}bH=b.event.special[bI]||{};for(bP=bJ||0;bP<bM.length;bP++){e=bM[bP];if(bF.guid===e.guid){if(bG||bO.test(e.namespace)){if(bJ==null){bM.splice(bP--,1)}if(bH.remove){bH.remove.call(bS,e)}}if(bJ!=null){break}}}if(bM.length===0||bJ!=null&&bM.length===1){if(!bH.teardown||bH.teardown.call(bS,bL)===false){b.removeEvent(bS,bI,bR.handle)}bV=null;delete bE[bI]}}if(b.isEmptyObject(bE)){var bT=bR.handle;if(bT){bT.elem=null}delete bR.events;delete bR.handle;if(b.isEmptyObject(bR)){b.removeData(bS,U,true)}}},customEvent:{getData:true,setData:true,changeData:true},trigger:function(e,bK,bI,bP){var bN=e.type||e,bF=[],bE;if(bN.indexOf("!")>=0){bN=bN.slice(0,-1);bE=true}if(bN.indexOf(".")>=0){bF=bN.split(".");bN=bF.shift();bF.sort()}if((!bI||b.event.customEvent[bN])&&!b.event.global[bN]){return}e=typeof e==="object"?e[b.expando]?e:new b.Event(bN,e):new b.Event(bN);e.type=bN;e.exclusive=bE;e.namespace=bF.join(".");e.namespace_re=new RegExp("(^|\\.)"+bF.join("\\.(?:.*\\.)?")+"(\\.|$)");if(bP||!bI){e.preventDefault();e.stopPropagation()}if(!bI){b.each(b.cache,function(){var bR=b.expando,bQ=this[bR];if(bQ&&bQ.events&&bQ.events[bN]){b.event.trigger(e,bK,bQ.handle.elem)}});return}if(bI.nodeType===3||bI.nodeType===8){return}e.result=U;e.target=bI;bK=bK?b.makeArray(bK):[];bK.unshift(e);var bO=bI,bG=bN.indexOf(":")<0?"on"+bN:"";do{var bL=b._data(bO,"handle");e.currentTarget=bO;if(bL){bL.apply(bO,bK)}if(bG&&b.acceptData(bO)&&bO[bG]&&bO[bG].apply(bO,bK)===false){e.result=false;e.preventDefault()}bO=bO.parentNode||bO.ownerDocument||bO===e.target.ownerDocument&&bl}while(bO&&!e.isPropagationStopped());if(!e.isDefaultPrevented()){var bH,bM=b.event.special[bN]||{};if((!bM._default||bM._default.call(bI.ownerDocument,e)===false)&&!(bN==="click"&&b.nodeName(bI,"a"))&&b.acceptData(bI)){try{if(bG&&bI[bN]){bH=bI[bG];if(bH){bI[bG]=null}b.event.triggered=bN;bI[bN]()}}catch(bJ){}if(bH){bI[bG]=bH}b.event.triggered=U}}return e.result},handle:function(bK){bK=b.event.fix(bK||bl.event);var bE=((b._data(this,"events")||{})[bK.type]||[]).slice(0),bJ=!bK.exclusive&&!bK.namespace,bH=Array.prototype.slice.call(arguments,0);bH[0]=bK;bK.currentTarget=this;for(var bG=0,e=bE.length;bG<e;bG++){var bI=bE[bG];if(bJ||bK.namespace_re.test(bI.namespace)){bK.handler=bI.handler;bK.data=bI.data;bK.handleObj=bI;var bF=bI.handler.apply(this,bH);if(bF!==U){bK.result=bF;if(bF===false){bK.preventDefault();bK.stopPropagation()}}if(bK.isImmediatePropagationStopped()){break}}}return bK.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(bH){if(bH[b.expando]){return bH}var bE=bH;bH=b.Event(bE);for(var bF=this.props.length,bJ;bF;){bJ=this.props[--bF];bH[bJ]=bE[bJ]}if(!bH.target){bH.target=bH.srcElement||aB}if(bH.target.nodeType===3){bH.target=bH.target.parentNode}if(!bH.relatedTarget&&bH.fromElement){bH.relatedTarget=bH.fromElement===bH.target?bH.toElement:bH.fromElement}if(bH.pageX==null&&bH.clientX!=null){var bG=bH.target.ownerDocument||aB,bI=bG.documentElement,e=bG.body;bH.pageX=bH.clientX+(bI&&bI.scrollLeft||e&&e.scrollLeft||0)-(bI&&bI.clientLeft||e&&e.clientLeft||0);bH.pageY=bH.clientY+(bI&&bI.scrollTop||e&&e.scrollTop||0)-(bI&&bI.clientTop||e&&e.clientTop||0)}if(bH.which==null&&(bH.charCode!=null||bH.keyCode!=null)){bH.which=bH.charCode!=null?bH.charCode:bH.keyCode}if(!bH.metaKey&&bH.ctrlKey){bH.metaKey=bH.ctrlKey}if(!bH.which&&bH.button!==U){bH.which=(bH.button&1?1:(bH.button&2?3:(bH.button&4?2:0)))}return bH},guid:100000000,proxy:b.proxy,special:{ready:{setup:b.bindReady,teardown:b.noop},live:{add:function(e){b.event.add(this,z(e.origType,e.selector),b.extend({},e,{handler:at,guid:e.handler.guid}))},remove:function(e){b.event.remove(this,z(e.origType,e.selector),e)}},beforeunload:{setup:function(bF,bE,e){if(b.isWindow(this)){this.onbeforeunload=e}},teardown:function(bE,e){if(this.onbeforeunload===e){this.onbeforeunload=null}}}}};b.removeEvent=aB.removeEventListener?function(bE,e,bF){if(bE.removeEventListener){bE.removeEventListener(e,bF,false)}}:function(bE,e,bF){if(bE.detachEvent){bE.detachEvent("on"+e,bF)}};b.Event=function(bE,e){if(!this.preventDefault){return new b.Event(bE,e)}if(bE&&bE.type){this.originalEvent=bE;this.type=bE.type;this.isDefaultPrevented=(bE.defaultPrevented||bE.returnValue===false||bE.getPreventDefault&&bE.getPreventDefault())?n:bt}else{this.type=bE}if(e){b.extend(this,e)}this.timeStamp=b.now();this[b.expando]=true};function bt(){return false}function n(){return true}b.Event.prototype={preventDefault:function(){this.isDefaultPrevented=n;var bE=this.originalEvent;if(!bE){return}if(bE.preventDefault){bE.preventDefault()}else{bE.returnValue=false}},stopPropagation:function(){this.isPropagationStopped=n;var bE=this.originalEvent;if(!bE){return}if(bE.stopPropagation){bE.stopPropagation()}bE.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=n;this.stopPropagation()},isDefaultPrevented:bt,isPropagationStopped:bt,isImmediatePropagationStopped:bt};var al=function(bF){var bE=bF.relatedTarget;bF.type=bF.data;try{if(bE&&bE!==aB&&!bE.parentNode){return}while(bE&&bE!==this){bE=bE.parentNode}if(bE!==this){b.event.handle.apply(this,arguments)}}catch(bG){}},a2=function(e){e.type=e.data;b.event.handle.apply(this,arguments)};b.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(bE,e){b.event.special[bE]={setup:function(bF){b.event.add(this,e,bF&&bF.selector?a2:al,bE)},teardown:function(bF){b.event.remove(this,e,bF&&bF.selector?a2:al)}}});if(!b.support.submitBubbles){b.event.special.submit={setup:function(bE,e){if(!b.nodeName(this,"form")){b.event.add(this,"click.specialSubmit",function(bH){var bG=bH.target,bF=bG.type;if((bF==="submit"||bF==="image")&&b(bG).closest("form").length){a5("submit",this,arguments)}});b.event.add(this,"keypress.specialSubmit",function(bH){var bG=bH.target,bF=bG.type;if((bF==="text"||bF==="password")&&b(bG).closest("form").length&&bH.keyCode===13){a5("submit",this,arguments)}})}else{return false}},teardown:function(e){b.event.remove(this,".specialSubmit")}}}if(!b.support.changeBubbles){var bw,p=function(bE){var e=bE.type,bF=bE.value;if(e==="radio"||e==="checkbox"){bF=bE.checked}else{if(e==="select-multiple"){bF=bE.selectedIndex>-1?b.map(bE.options,function(bG){return bG.selected}).join("-"):""}else{if(b.nodeName(bE,"select")){bF=bE.selectedIndex}}}return bF},aj=function aj(bG){var bE=bG.target,bF,bH;if(!bn.test(bE.nodeName)||bE.readOnly){return}bF=b._data(bE,"_change_data");bH=p(bE);if(bG.type!=="focusout"||bE.type!=="radio"){b._data(bE,"_change_data",bH)}if(bF===U||bH===bF){return}if(bF!=null||bH){bG.type="change";bG.liveFired=U;b.event.trigger(bG,arguments[1],bE)}};b.event.special.change={filters:{focusout:aj,beforedeactivate:aj,click:function(bG){var bF=bG.target,bE=b.nodeName(bF,"input")?bF.type:"";if(bE==="radio"||bE==="checkbox"||b.nodeName(bF,"select")){aj.call(this,bG)}},keydown:function(bG){var bF=bG.target,bE=b.nodeName(bF,"input")?bF.type:"";if((bG.keyCode===13&&!b.nodeName(bF,"textarea"))||(bG.keyCode===32&&(bE==="checkbox"||bE==="radio"))||bE==="select-multiple"){aj.call(this,bG)}},beforeactivate:function(bF){var bE=bF.target;b._data(bE,"_change_data",p(bE))}},setup:function(bF,bE){if(this.type==="file"){return false}for(var e in bw){b.event.add(this,e+".specialChange",bw[e])}return bn.test(this.nodeName)},teardown:function(e){b.event.remove(this,".specialChange");return bn.test(this.nodeName)}};bw=b.event.special.change.filters;bw.focus=bw.beforeactivate}function a5(bE,bG,e){var bF=b.extend({},e[0]);bF.type=bE;bF.originalEvent={};bF.liveFired=U;b.event.handle.call(bG,bF);if(bF.isDefaultPrevented()){e[0].preventDefault()}}if(!b.support.focusinBubbles){b.each({focus:"focusin",blur:"focusout"},function(bG,e){var bE=0;b.event.special[e]={setup:function(){if(bE++===0){aB.addEventListener(bG,bF,true)}},teardown:function(){if(--bE===0){aB.removeEventListener(bG,bF,true)}}};function bF(bH){var bI=b.event.fix(bH);bI.type=e;bI.originalEvent={};b.event.trigger(bI,null,bI.target);if(bI.isDefaultPrevented()){bH.preventDefault()}}})}b.each(["bind","one"],function(bE,e){b.fn[e]=function(bK,bL,bJ){var bI;if(typeof bK==="object"){for(var bH in bK){this[e](bH,bL,bK[bH],bJ)}return this}if(arguments.length===2||bL===false){bJ=bL;bL=U}if(e==="one"){bI=function(bM){b(this).unbind(bM,bI);return bJ.apply(this,arguments)};bI.guid=bJ.guid||b.guid++}else{bI=bJ}if(bK==="unload"&&e!=="one"){this.one(bK,bL,bJ)}else{for(var bG=0,bF=this.length;bG<bF;bG++){b.event.add(this[bG],bK,bI,bL)}}return this}});b.fn.extend({unbind:function(bH,bG){if(typeof bH==="object"&&!bH.preventDefault){for(var bF in bH){this.unbind(bF,bH[bF])}}else{for(var bE=0,e=this.length;bE<e;bE++){b.event.remove(this[bE],bH,bG)}}return this},delegate:function(e,bE,bG,bF){return this.live(bE,bG,bF,e)},undelegate:function(e,bE,bF){if(arguments.length===0){return this.unbind("live")}else{return this.die(bE,null,bF,e)}},trigger:function(e,bE){return this.each(function(){b.event.trigger(e,bE,this)})},triggerHandler:function(e,bE){if(this[0]){return b.event.trigger(e,bE,this[0],true)}},toggle:function(bG){var bE=arguments,e=bG.guid||b.guid++,bF=0,bH=function(bI){var bJ=(b.data(this,"lastToggle"+bG.guid)||0)%bF;b.data(this,"lastToggle"+bG.guid,bJ+1);bI.preventDefault();return bE[bJ].apply(this,arguments)||false};bH.guid=e;while(bF<bE.length){bE[bF++].guid=e}return this.click(bH)},hover:function(e,bE){return this.mouseenter(e).mouseleave(bE||e)}});var a0={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};b.each(["live","die"],function(bE,e){b.fn[e]=function(bO,bL,bQ,bH){var bP,bM=0,bN,bG,bS,bJ=bH||this.selector,bF=bH?this:b(this.context);if(typeof bO==="object"&&!bO.preventDefault){for(var bR in bO){bF[e](bR,bL,bO[bR],bJ)}return this}if(e==="die"&&!bO&&bH&&bH.charAt(0)==="."){bF.unbind(bH);return this}if(bL===false||b.isFunction(bL)){bQ=bL||bt;bL=U}bO=(bO||"").split(" ");while((bP=bO[bM++])!=null){bN=a8.exec(bP);bG="";if(bN){bG=bN[0];bP=bP.replace(a8,"")}if(bP==="hover"){bO.push("mouseenter"+bG,"mouseleave"+bG);continue}bS=bP;if(a0[bP]){bO.push(a0[bP]+bG);bP=bP+bG}else{bP=(a0[bP]||bP)+bG}if(e==="live"){for(var bK=0,bI=bF.length;bK<bI;bK++){b.event.add(bF[bK],"live."+z(bP,bJ),{data:bL,selector:bJ,handler:bQ,origType:bP,origHandler:bQ,preType:bS})}}else{bF.unbind("live."+z(bP,bJ),bQ)}}return this}});function at(bO){var bL,bG,bU,bI,e,bQ,bN,bP,bM,bT,bK,bJ,bS,bR=[],bH=[],bE=b._data(this,"events");if(bO.liveFired===this||!bE||!bE.live||bO.target.disabled||bO.button&&bO.type==="click"){return}if(bO.namespace){bJ=new RegExp("(^|\\.)"+bO.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)")}bO.liveFired=this;var bF=bE.live.slice(0);for(bN=0;bN<bF.length;bN++){e=bF[bN];if(e.origType.replace(a8,"")===bO.type){bH.push(e.selector)}else{bF.splice(bN--,1)}}bI=b(bO.target).closest(bH,bO.currentTarget);for(bP=0,bM=bI.length;bP<bM;bP++){bK=bI[bP];for(bN=0;bN<bF.length;bN++){e=bF[bN];if(bK.selector===e.selector&&(!bJ||bJ.test(e.namespace))&&!bK.elem.disabled){bQ=bK.elem;bU=null;if(e.preType==="mouseenter"||e.preType==="mouseleave"){bO.type=e.preType;bU=b(bO.relatedTarget).closest(e.selector)[0];if(bU&&b.contains(bQ,bU)){bU=bQ}}if(!bU||bU!==bQ){bR.push({elem:bQ,handleObj:e,level:bK.level})}}}}for(bP=0,bM=bR.length;bP<bM;bP++){bI=bR[bP];if(bG&&bI.level>bG){break}bO.currentTarget=bI.elem;bO.data=bI.handleObj.data;bO.handleObj=bI.handleObj;bS=bI.handleObj.origHandler.apply(bI.elem,arguments);if(bS===false||bO.isPropagationStopped()){bG=bI.level;if(bS===false){bL=false}if(bO.isImmediatePropagationStopped()){break}}}return bL}function z(bE,e){return(bE&&bE!=="*"?bE+".":"")+e.replace(X,"`").replace(br,"&")}b.each(("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error").split(" "),function(bE,e){b.fn[e]=function(bG,bF){if(bF==null){bF=bG;bG=null}return arguments.length>0?this.bind(e,bG,bF):this.trigger(e)};if(b.attrFn){b.attrFn[e]=true}});
/*!
 * Sizzle CSS Selector Engine
 *  Copyright 2011, The Dojo Foundation
 *  Released under the MIT, BSD, and GPL Licenses.
 *  More information: http://sizzlejs.com/
 */
(function(){var bO=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,bP=0,bS=Object.prototype.toString,bJ=false,bI=true,bQ=/\\/g,bW=/\W/;[0,0].sort(function(){bI=false;return 0});var bG=function(b1,e,b4,b5){b4=b4||[];e=e||aB;var b7=e;if(e.nodeType!==1&&e.nodeType!==9){return[]}if(!b1||typeof b1!=="string"){return b4}var bY,b9,cc,bX,b8,cb,ca,b3,b0=true,bZ=bG.isXML(e),b2=[],b6=b1;do{bO.exec("");bY=bO.exec(b6);if(bY){b6=bY[3];b2.push(bY[1]);if(bY[2]){bX=bY[3];break}}}while(bY);if(b2.length>1&&bK.exec(b1)){if(b2.length===2&&bL.relative[b2[0]]){b9=bT(b2[0]+b2[1],e)}else{b9=bL.relative[b2[0]]?[e]:bG(b2.shift(),e);while(b2.length){b1=b2.shift();if(bL.relative[b1]){b1+=b2.shift()}b9=bT(b1,b9)}}}else{if(!b5&&b2.length>1&&e.nodeType===9&&!bZ&&bL.match.ID.test(b2[0])&&!bL.match.ID.test(b2[b2.length-1])){b8=bG.find(b2.shift(),e,bZ);e=b8.expr?bG.filter(b8.expr,b8.set)[0]:b8.set[0]}if(e){b8=b5?{expr:b2.pop(),set:bM(b5)}:bG.find(b2.pop(),b2.length===1&&(b2[0]==="~"||b2[0]==="+")&&e.parentNode?e.parentNode:e,bZ);b9=b8.expr?bG.filter(b8.expr,b8.set):b8.set;if(b2.length>0){cc=bM(b9)}else{b0=false}while(b2.length){cb=b2.pop();ca=cb;if(!bL.relative[cb]){cb=""}else{ca=b2.pop()}if(ca==null){ca=e}bL.relative[cb](cc,ca,bZ)}}else{cc=b2=[]}}if(!cc){cc=b9}if(!cc){bG.error(cb||b1)}if(bS.call(cc)==="[object Array]"){if(!b0){b4.push.apply(b4,cc)}else{if(e&&e.nodeType===1){for(b3=0;cc[b3]!=null;b3++){if(cc[b3]&&(cc[b3]===true||cc[b3].nodeType===1&&bG.contains(e,cc[b3]))){b4.push(b9[b3])}}}else{for(b3=0;cc[b3]!=null;b3++){if(cc[b3]&&cc[b3].nodeType===1){b4.push(b9[b3])}}}}}else{bM(cc,b4)}if(bX){bG(bX,b7,b4,b5);bG.uniqueSort(b4)}return b4};bG.uniqueSort=function(bX){if(bR){bJ=bI;bX.sort(bR);if(bJ){for(var e=1;e<bX.length;e++){if(bX[e]===bX[e-1]){bX.splice(e--,1)}}}}return bX};bG.matches=function(e,bX){return bG(e,null,null,bX)};bG.matchesSelector=function(e,bX){return bG(bX,null,null,[e]).length>0};bG.find=function(b3,e,b4){var b2;if(!b3){return[]}for(var bZ=0,bY=bL.order.length;bZ<bY;bZ++){var b0,b1=bL.order[bZ];if((b0=bL.leftMatch[b1].exec(b3))){var bX=b0[1];b0.splice(1,1);if(bX.substr(bX.length-1)!=="\\"){b0[1]=(b0[1]||"").replace(bQ,"");b2=bL.find[b1](b0,e,b4);if(b2!=null){b3=b3.replace(bL.match[b1],"");break}}}}if(!b2){b2=typeof e.getElementsByTagName!=="undefined"?e.getElementsByTagName("*"):[]}return{set:b2,expr:b3}};bG.filter=function(b7,b6,ca,b0){var b2,e,bY=b7,cc=[],b4=b6,b3=b6&&b6[0]&&bG.isXML(b6[0]);while(b7&&b6.length){for(var b5 in bL.filter){if((b2=bL.leftMatch[b5].exec(b7))!=null&&b2[2]){var cb,b9,bX=bL.filter[b5],bZ=b2[1];e=false;b2.splice(1,1);if(bZ.substr(bZ.length-1)==="\\"){continue}if(b4===cc){cc=[]}if(bL.preFilter[b5]){b2=bL.preFilter[b5](b2,b4,ca,cc,b0,b3);if(!b2){e=cb=true}else{if(b2===true){continue}}}if(b2){for(var b1=0;(b9=b4[b1])!=null;b1++){if(b9){cb=bX(b9,b2,b1,b4);var b8=b0^!!cb;if(ca&&cb!=null){if(b8){e=true}else{b4[b1]=false}}else{if(b8){cc.push(b9);e=true}}}}}if(cb!==U){if(!ca){b4=cc}b7=b7.replace(bL.match[b5],"");if(!e){return[]}break}}}if(b7===bY){if(e==null){bG.error(b7)}else{break}}bY=b7}return b4};bG.error=function(e){throw"Syntax error, unrecognized expression: "+e};var bL=bG.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")},type:function(e){return e.getAttribute("type")}},relative:{"+":function(b2,bX){var bZ=typeof bX==="string",b1=bZ&&!bW.test(bX),b3=bZ&&!b1;if(b1){bX=bX.toLowerCase()}for(var bY=0,e=b2.length,b0;bY<e;bY++){if((b0=b2[bY])){while((b0=b0.previousSibling)&&b0.nodeType!==1){}b2[bY]=b3||b0&&b0.nodeName.toLowerCase()===bX?b0||false:b0===bX}}if(b3){bG.filter(bX,b2,true)}},">":function(b2,bX){var b1,b0=typeof bX==="string",bY=0,e=b2.length;if(b0&&!bW.test(bX)){bX=bX.toLowerCase();for(;bY<e;bY++){b1=b2[bY];if(b1){var bZ=b1.parentNode;b2[bY]=bZ.nodeName.toLowerCase()===bX?bZ:false}}}else{for(;bY<e;bY++){b1=b2[bY];if(b1){b2[bY]=b0?b1.parentNode:b1.parentNode===bX}}if(b0){bG.filter(bX,b2,true)}}},"":function(bZ,bX,b1){var b0,bY=bP++,e=bU;if(typeof bX==="string"&&!bW.test(bX)){bX=bX.toLowerCase();b0=bX;e=bE}e("parentNode",bX,bY,bZ,b0,b1)},"~":function(bZ,bX,b1){var b0,bY=bP++,e=bU;if(typeof bX==="string"&&!bW.test(bX)){bX=bX.toLowerCase();b0=bX;e=bE}e("previousSibling",bX,bY,bZ,b0,b1)}},find:{ID:function(bX,bY,bZ){if(typeof bY.getElementById!=="undefined"&&!bZ){var e=bY.getElementById(bX[1]);return e&&e.parentNode?[e]:[]}},NAME:function(bY,b1){if(typeof b1.getElementsByName!=="undefined"){var bX=[],b0=b1.getElementsByName(bY[1]);for(var bZ=0,e=b0.length;bZ<e;bZ++){if(b0[bZ].getAttribute("name")===bY[1]){bX.push(b0[bZ])}}return bX.length===0?null:bX}},TAG:function(e,bX){if(typeof bX.getElementsByTagName!=="undefined"){return bX.getElementsByTagName(e[1])}}},preFilter:{CLASS:function(bZ,bX,bY,e,b2,b3){bZ=" "+bZ[1].replace(bQ,"")+" ";if(b3){return bZ}for(var b0=0,b1;(b1=bX[b0])!=null;b0++){if(b1){if(b2^(b1.className&&(" "+b1.className+" ").replace(/[\t\n\r]/g," ").indexOf(bZ)>=0)){if(!bY){e.push(b1)}}else{if(bY){bX[b0]=false}}}}return false},ID:function(e){return e[1].replace(bQ,"")},TAG:function(bX,e){return bX[1].replace(bQ,"").toLowerCase()},CHILD:function(e){if(e[1]==="nth"){if(!e[2]){bG.error(e[0])}e[2]=e[2].replace(/^\+|\s*/g,"");var bX=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(e[2]==="even"&&"2n"||e[2]==="odd"&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=(bX[1]+(bX[2]||1))-0;e[3]=bX[3]-0}else{if(e[2]){bG.error(e[0])}}e[0]=bP++;return e},ATTR:function(b0,bX,bY,e,b1,b2){var bZ=b0[1]=b0[1].replace(bQ,"");if(!b2&&bL.attrMap[bZ]){b0[1]=bL.attrMap[bZ]}b0[4]=(b0[4]||b0[5]||"").replace(bQ,"");if(b0[2]==="~="){b0[4]=" "+b0[4]+" "}return b0},PSEUDO:function(b0,bX,bY,e,b1){if(b0[1]==="not"){if((bO.exec(b0[3])||"").length>1||/^\w/.test(b0[3])){b0[3]=bG(b0[3],null,null,bX)}else{var bZ=bG.filter(b0[3],bX,bY,true^b1);if(!bY){e.push.apply(e,bZ)}return false}}else{if(bL.match.POS.test(b0[0])||bL.match.CHILD.test(b0[0])){return true}}return b0},POS:function(e){e.unshift(true);return e}},filters:{enabled:function(e){return e.disabled===false&&e.type!=="hidden"},disabled:function(e){return e.disabled===true},checked:function(e){return e.checked===true},selected:function(e){if(e.parentNode){e.parentNode.selectedIndex}return e.selected===true},parent:function(e){return !!e.firstChild},empty:function(e){return !e.firstChild},has:function(bY,bX,e){return !!bG(e[3],bY).length},header:function(e){return(/h\d/i).test(e.nodeName)},text:function(bY){var e=bY.getAttribute("type"),bX=bY.type;return bY.nodeName.toLowerCase()==="input"&&"text"===bX&&(e===bX||e===null)},radio:function(e){return e.nodeName.toLowerCase()==="input"&&"radio"===e.type},checkbox:function(e){return e.nodeName.toLowerCase()==="input"&&"checkbox"===e.type},file:function(e){return e.nodeName.toLowerCase()==="input"&&"file"===e.type},password:function(e){return e.nodeName.toLowerCase()==="input"&&"password"===e.type},submit:function(bX){var e=bX.nodeName.toLowerCase();return(e==="input"||e==="button")&&"submit"===bX.type},image:function(e){return e.nodeName.toLowerCase()==="input"&&"image"===e.type},reset:function(bX){var e=bX.nodeName.toLowerCase();return(e==="input"||e==="button")&&"reset"===bX.type},button:function(bX){var e=bX.nodeName.toLowerCase();return e==="input"&&"button"===bX.type||e==="button"},input:function(e){return(/input|select|textarea|button/i).test(e.nodeName)},focus:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(bX,e){return e===0},last:function(bY,bX,e,bZ){return bX===bZ.length-1},even:function(bX,e){return e%2===0},odd:function(bX,e){return e%2===1},lt:function(bY,bX,e){return bX<e[3]-0},gt:function(bY,bX,e){return bX>e[3]-0},nth:function(bY,bX,e){return e[3]-0===bX},eq:function(bY,bX,e){return e[3]-0===bX}},filter:{PSEUDO:function(bY,b3,b2,b4){var e=b3[1],bX=bL.filters[e];if(bX){return bX(bY,b2,b3,b4)}else{if(e==="contains"){return(bY.textContent||bY.innerText||bG.getText([bY])||"").indexOf(b3[3])>=0}else{if(e==="not"){var bZ=b3[3];for(var b1=0,b0=bZ.length;b1<b0;b1++){if(bZ[b1]===bY){return false}}return true}else{bG.error(e)}}}},CHILD:function(e,bZ){var b2=bZ[1],bX=e;switch(b2){case"only":case"first":while((bX=bX.previousSibling)){if(bX.nodeType===1){return false}}if(b2==="first"){return true}bX=e;case"last":while((bX=bX.nextSibling)){if(bX.nodeType===1){return false}}return true;case"nth":var bY=bZ[2],b5=bZ[3];if(bY===1&&b5===0){return true}var b1=bZ[0],b4=e.parentNode;if(b4&&(b4.sizcache!==b1||!e.nodeIndex)){var b0=0;for(bX=b4.firstChild;bX;bX=bX.nextSibling){if(bX.nodeType===1){bX.nodeIndex=++b0}}b4.sizcache=b1}var b3=e.nodeIndex-b5;if(bY===0){return b3===0}else{return(b3%bY===0&&b3/bY>=0)}}},ID:function(bX,e){return bX.nodeType===1&&bX.getAttribute("id")===e},TAG:function(bX,e){return(e==="*"&&bX.nodeType===1)||bX.nodeName.toLowerCase()===e},CLASS:function(bX,e){return(" "+(bX.className||bX.getAttribute("class"))+" ").indexOf(e)>-1},ATTR:function(b1,bZ){var bY=bZ[1],e=bL.attrHandle[bY]?bL.attrHandle[bY](b1):b1[bY]!=null?b1[bY]:b1.getAttribute(bY),b2=e+"",b0=bZ[2],bX=bZ[4];return e==null?b0==="!=":b0==="="?b2===bX:b0==="*="?b2.indexOf(bX)>=0:b0==="~="?(" "+b2+" ").indexOf(bX)>=0:!bX?b2&&e!==false:b0==="!="?b2!==bX:b0==="^="?b2.indexOf(bX)===0:b0==="$="?b2.substr(b2.length-bX.length)===bX:b0==="|="?b2===bX||b2.substr(0,bX.length+1)===bX+"-":false},POS:function(b0,bX,bY,b1){var e=bX[2],bZ=bL.setFilters[e];if(bZ){return bZ(b0,bY,bX,b1)}}}};var bK=bL.match.POS,bF=function(bX,e){return"\\"+(e-0+1)};for(var bH in bL.match){bL.match[bH]=new RegExp(bL.match[bH].source+(/(?![^\[]*\])(?![^\(]*\))/.source));bL.leftMatch[bH]=new RegExp(/(^(?:.|\r|\n)*?)/.source+bL.match[bH].source.replace(/\\(\d+)/g,bF))}var bM=function(bX,e){bX=Array.prototype.slice.call(bX,0);if(e){e.push.apply(e,bX);return e}return bX};try{Array.prototype.slice.call(aB.documentElement.childNodes,0)[0].nodeType}catch(bV){bM=function(b0,bZ){var bY=0,bX=bZ||[];if(bS.call(b0)==="[object Array]"){Array.prototype.push.apply(bX,b0)}else{if(typeof b0.length==="number"){for(var e=b0.length;bY<e;bY++){bX.push(b0[bY])}}else{for(;b0[bY];bY++){bX.push(b0[bY])}}}return bX}}var bR,bN;if(aB.documentElement.compareDocumentPosition){bR=function(bX,e){if(bX===e){bJ=true;return 0}if(!bX.compareDocumentPosition||!e.compareDocumentPosition){return bX.compareDocumentPosition?-1:1}return bX.compareDocumentPosition(e)&4?-1:1}}else{bR=function(b4,b3){if(b4===b3){bJ=true;return 0}else{if(b4.sourceIndex&&b3.sourceIndex){return b4.sourceIndex-b3.sourceIndex}}var b1,bX,bY=[],e=[],b0=b4.parentNode,b2=b3.parentNode,b5=b0;if(b0===b2){return bN(b4,b3)}else{if(!b0){return -1}else{if(!b2){return 1}}}while(b5){bY.unshift(b5);b5=b5.parentNode}b5=b2;while(b5){e.unshift(b5);b5=b5.parentNode}b1=bY.length;bX=e.length;for(var bZ=0;bZ<b1&&bZ<bX;bZ++){if(bY[bZ]!==e[bZ]){return bN(bY[bZ],e[bZ])}}return bZ===b1?bN(b4,e[bZ],-1):bN(bY[bZ],b3,1)};bN=function(bX,e,bY){if(bX===e){return bY}var bZ=bX.nextSibling;while(bZ){if(bZ===e){return -1}bZ=bZ.nextSibling}return 1}}bG.getText=function(e){var bX="",bZ;for(var bY=0;e[bY];bY++){bZ=e[bY];if(bZ.nodeType===3||bZ.nodeType===4){bX+=bZ.nodeValue}else{if(bZ.nodeType!==8){bX+=bG.getText(bZ.childNodes)}}}return bX};(function(){var bX=aB.createElement("div"),bY="script"+(new Date()).getTime(),e=aB.documentElement;bX.innerHTML="<a name='"+bY+"'/>";e.insertBefore(bX,e.firstChild);if(aB.getElementById(bY)){bL.find.ID=function(b0,b1,b2){if(typeof b1.getElementById!=="undefined"&&!b2){var bZ=b1.getElementById(b0[1]);return bZ?bZ.id===b0[1]||typeof bZ.getAttributeNode!=="undefined"&&bZ.getAttributeNode("id").nodeValue===b0[1]?[bZ]:U:[]}};bL.filter.ID=function(b1,bZ){var b0=typeof b1.getAttributeNode!=="undefined"&&b1.getAttributeNode("id");return b1.nodeType===1&&b0&&b0.nodeValue===bZ}}e.removeChild(bX);e=bX=null})();(function(){var e=aB.createElement("div");e.appendChild(aB.createComment(""));if(e.getElementsByTagName("*").length>0){bL.find.TAG=function(bX,b1){var b0=b1.getElementsByTagName(bX[1]);if(bX[1]==="*"){var bZ=[];for(var bY=0;b0[bY];bY++){if(b0[bY].nodeType===1){bZ.push(b0[bY])}}b0=bZ}return b0}}e.innerHTML="<a href='#'></a>";if(e.firstChild&&typeof e.firstChild.getAttribute!=="undefined"&&e.firstChild.getAttribute("href")!=="#"){bL.attrHandle.href=function(bX){return bX.getAttribute("href",2)}}e=null})();if(aB.querySelectorAll){(function(){var e=bG,bZ=aB.createElement("div"),bY="__sizzle__";bZ.innerHTML="<p class='TEST'></p>";if(bZ.querySelectorAll&&bZ.querySelectorAll(".TEST").length===0){return}bG=function(ca,b1,b5,b9){b1=b1||aB;if(!b9&&!bG.isXML(b1)){var b8=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(ca);if(b8&&(b1.nodeType===1||b1.nodeType===9)){if(b8[1]){return bM(b1.getElementsByTagName(ca),b5)}else{if(b8[2]&&bL.find.CLASS&&b1.getElementsByClassName){return bM(b1.getElementsByClassName(b8[2]),b5)}}}if(b1.nodeType===9){if(ca==="body"&&b1.body){return bM([b1.body],b5)}else{if(b8&&b8[3]){var b4=b1.getElementById(b8[3]);if(b4&&b4.parentNode){if(b4.id===b8[3]){return bM([b4],b5)}}else{return bM([],b5)}}}try{return bM(b1.querySelectorAll(ca),b5)}catch(b6){}}else{if(b1.nodeType===1&&b1.nodeName.toLowerCase()!=="object"){var b2=b1,b3=b1.getAttribute("id"),b0=b3||bY,cc=b1.parentNode,cb=/^\s*[+~]/.test(ca);if(!b3){b1.setAttribute("id",b0)}else{b0=b0.replace(/'/g,"\\$&")}if(cb&&cc){b1=b1.parentNode}try{if(!cb||cc){return bM(b1.querySelectorAll("[id='"+b0+"'] "+ca),b5)}}catch(b7){}finally{if(!b3){b2.removeAttribute("id")}}}}}return e(ca,b1,b5,b9)};for(var bX in e){bG[bX]=e[bX]}bZ=null})()}(function(){var e=aB.documentElement,bY=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.msMatchesSelector;if(bY){var b0=!bY.call(aB.createElement("div"),"div"),bX=false;try{bY.call(aB.documentElement,"[test!='']:sizzle")}catch(bZ){bX=true}bG.matchesSelector=function(b2,b4){b4=b4.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!bG.isXML(b2)){try{if(bX||!bL.match.PSEUDO.test(b4)&&!/!=/.test(b4)){var b1=bY.call(b2,b4);if(b1||!b0||b2.document&&b2.document.nodeType!==11){return b1}}}catch(b3){}}return bG(b4,null,null,[b2]).length>0}}})();(function(){var e=aB.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>";if(!e.getElementsByClassName||e.getElementsByClassName("e").length===0){return}e.lastChild.className="e";if(e.getElementsByClassName("e").length===1){return}bL.order.splice(1,0,"CLASS");bL.find.CLASS=function(bX,bY,bZ){if(typeof bY.getElementsByClassName!=="undefined"&&!bZ){return bY.getElementsByClassName(bX[1])}};e=null})();function bE(bX,b2,b1,b5,b3,b4){for(var bZ=0,bY=b5.length;bZ<bY;bZ++){var e=b5[bZ];if(e){var b0=false;e=e[bX];while(e){if(e.sizcache===b1){b0=b5[e.sizset];break}if(e.nodeType===1&&!b4){e.sizcache=b1;e.sizset=bZ}if(e.nodeName.toLowerCase()===b2){b0=e;break}e=e[bX]}b5[bZ]=b0}}}function bU(bX,b2,b1,b5,b3,b4){for(var bZ=0,bY=b5.length;bZ<bY;bZ++){var e=b5[bZ];if(e){var b0=false;e=e[bX];while(e){if(e.sizcache===b1){b0=b5[e.sizset];break}if(e.nodeType===1){if(!b4){e.sizcache=b1;e.sizset=bZ}if(typeof b2!=="string"){if(e===b2){b0=true;break}}else{if(bG.filter(b2,[e]).length>0){b0=e;break}}}e=e[bX]}b5[bZ]=b0}}}if(aB.documentElement.contains){bG.contains=function(bX,e){return bX!==e&&(bX.contains?bX.contains(e):true)}}else{if(aB.documentElement.compareDocumentPosition){bG.contains=function(bX,e){return !!(bX.compareDocumentPosition(e)&16)}}else{bG.contains=function(){return false}}}bG.isXML=function(e){var bX=(e?e.ownerDocument||e:0).documentElement;return bX?bX.nodeName!=="HTML":false};var bT=function(e,b3){var b1,bZ=[],b0="",bY=b3.nodeType?[b3]:b3;while((b1=bL.match.PSEUDO.exec(e))){b0+=b1[0];e=e.replace(bL.match.PSEUDO,"")}e=bL.relative[e]?e+"*":e;for(var b2=0,bX=bY.length;b2<bX;b2++){bG(e,bY[b2],bZ)}return bG.filter(b0,bZ)};b.find=bG;b.expr=bG.selectors;b.expr[":"]=b.expr.filters;b.unique=bG.uniqueSort;b.text=bG.getText;b.isXMLDoc=bG.isXML;b.contains=bG.contains})();var ai=/Until$/,ax=/^(?:parents|prevUntil|prevAll)/,bj=/,/,bz=/^.[^:#\[\.,]*$/,Z=Array.prototype.slice,R=b.expr.match.POS,aE={children:true,contents:true,next:true,prev:true};b.fn.extend({find:function(e){var bF=this,bH,bE;if(typeof e!=="string"){return b(e).filter(function(){for(bH=0,bE=bF.length;bH<bE;bH++){if(b.contains(bF[bH],this)){return true}}})}var bG=this.pushStack("","find",e),bJ,bK,bI;for(bH=0,bE=this.length;bH<bE;bH++){bJ=bG.length;b.find(e,this[bH],bG);if(bH>0){for(bK=bJ;bK<bG.length;bK++){for(bI=0;bI<bJ;bI++){if(bG[bI]===bG[bK]){bG.splice(bK--,1);break}}}}}return bG},has:function(bE){var e=b(bE);return this.filter(function(){for(var bG=0,bF=e.length;bG<bF;bG++){if(b.contains(this,e[bG])){return true}}})},not:function(e){return this.pushStack(aL(this,e,false),"not",e)},filter:function(e){return this.pushStack(aL(this,e,true),"filter",e)},is:function(e){return !!e&&(typeof e==="string"?b.filter(e,this).length>0:this.filter(e).length>0)},closest:function(bN,bE){var bK=[],bH,bF,bM=this[0];if(b.isArray(bN)){var bJ,bG,bI={},e=1;if(bM&&bN.length){for(bH=0,bF=bN.length;bH<bF;bH++){bG=bN[bH];if(!bI[bG]){bI[bG]=R.test(bG)?b(bG,bE||this.context):bG}}while(bM&&bM.ownerDocument&&bM!==bE){for(bG in bI){bJ=bI[bG];if(bJ.jquery?bJ.index(bM)>-1:b(bM).is(bJ)){bK.push({selector:bG,elem:bM,level:e})}}bM=bM.parentNode;e++}}return bK}var bL=R.test(bN)||typeof bN!=="string"?b(bN,bE||this.context):0;for(bH=0,bF=this.length;bH<bF;bH++){bM=this[bH];while(bM){if(bL?bL.index(bM)>-1:b.find.matchesSelector(bM,bN)){bK.push(bM);break}else{bM=bM.parentNode;if(!bM||!bM.ownerDocument||bM===bE||bM.nodeType===11){break}}}}bK=bK.length>1?b.unique(bK):bK;return this.pushStack(bK,"closest",bN)},index:function(e){if(!e||typeof e==="string"){return b.inArray(this[0],e?b(e):this.parent().children())}return b.inArray(e.jquery?e[0]:e,this)},add:function(e,bE){var bG=typeof e==="string"?b(e,bE):b.makeArray(e&&e.nodeType?[e]:e),bF=b.merge(this.get(),bG);return this.pushStack(M(bG[0])||M(bF[0])?bF:b.unique(bF))},andSelf:function(){return this.add(this.prevObject)}});function M(e){return !e||!e.parentNode||e.parentNode.nodeType===11}b.each({parent:function(bE){var e=bE.parentNode;return e&&e.nodeType!==11?e:null},parents:function(e){return b.dir(e,"parentNode")},parentsUntil:function(bE,e,bF){return b.dir(bE,"parentNode",bF)},next:function(e){return b.nth(e,2,"nextSibling")},prev:function(e){return b.nth(e,2,"previousSibling")},nextAll:function(e){return b.dir(e,"nextSibling")},prevAll:function(e){return b.dir(e,"previousSibling")},nextUntil:function(bE,e,bF){return b.dir(bE,"nextSibling",bF)},prevUntil:function(bE,e,bF){return b.dir(bE,"previousSibling",bF)},siblings:function(e){return b.sibling(e.parentNode.firstChild,e)},children:function(e){return b.sibling(e.firstChild)},contents:function(e){return b.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:b.makeArray(e.childNodes)}},function(e,bE){b.fn[e]=function(bI,bF){var bH=b.map(this,bE,bI),bG=Z.call(arguments);if(!ai.test(e)){bF=bI}if(bF&&typeof bF==="string"){bH=b.filter(bF,bH)}bH=this.length>1&&!aE[e]?b.unique(bH):bH;if((this.length>1||bj.test(bF))&&ax.test(e)){bH=bH.reverse()}return this.pushStack(bH,e,bG.join(","))}});b.extend({filter:function(bF,e,bE){if(bE){bF=":not("+bF+")"}return e.length===1?b.find.matchesSelector(e[0],bF)?[e[0]]:[]:b.find.matches(bF,e)},dir:function(bF,bE,bH){var e=[],bG=bF[bE];while(bG&&bG.nodeType!==9&&(bH===U||bG.nodeType!==1||!b(bG).is(bH))){if(bG.nodeType===1){e.push(bG)}bG=bG[bE]}return e},nth:function(bH,e,bF,bG){e=e||1;var bE=0;for(;bH;bH=bH[bF]){if(bH.nodeType===1&&++bE===e){break}}return bH},sibling:function(bF,bE){var e=[];for(;bF;bF=bF.nextSibling){if(bF.nodeType===1&&bF!==bE){e.push(bF)}}return e}});function aL(bG,bF,e){bF=bF||0;if(b.isFunction(bF)){return b.grep(bG,function(bI,bH){var bJ=!!bF.call(bI,bH,bI);return bJ===e})}else{if(bF.nodeType){return b.grep(bG,function(bI,bH){return(bI===bF)===e})}else{if(typeof bF==="string"){var bE=b.grep(bG,function(bH){return bH.nodeType===1});if(bz.test(bF)){return b.filter(bF,bE,!e)}else{bF=b.filter(bF,bE)}}}}return b.grep(bG,function(bI,bH){return(b.inArray(bI,bF)>=0)===e})}var an=/ jQuery\d+="(?:\d+|null)"/g,ay=/^\s+/,ac=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,f=/<([\w:]+)/,G=/<tbody/i,af=/<|&#?\w+;/,Y=/<(?:script|object|embed|option|style)/i,v=/checked\s*(?:[^=]|=\s*.checked.)/i,bv=/\/(java|ecma)script/i,aU=/^\s*<!(?:\[CDATA\[|\-\-)/,aD={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};aD.optgroup=aD.option;aD.tbody=aD.tfoot=aD.colgroup=aD.caption=aD.thead;aD.th=aD.td;if(!b.support.htmlSerialize){aD._default=[1,"div<div>","</div>"]}b.fn.extend({text:function(e){if(b.isFunction(e)){return this.each(function(bF){var bE=b(this);bE.text(e.call(this,bF,bE.text()))})}if(typeof e!=="object"&&e!==U){return this.empty().append((this[0]&&this[0].ownerDocument||aB).createTextNode(e))}return b.text(this)},wrapAll:function(e){if(b.isFunction(e)){return this.each(function(bF){b(this).wrapAll(e.call(this,bF))})}if(this[0]){var bE=b(e,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){bE.insertBefore(this[0])}bE.map(function(){var bF=this;while(bF.firstChild&&bF.firstChild.nodeType===1){bF=bF.firstChild}return bF}).append(this)}return this},wrapInner:function(e){if(b.isFunction(e)){return this.each(function(bE){b(this).wrapInner(e.call(this,bE))})}return this.each(function(){var bE=b(this),bF=bE.contents();if(bF.length){bF.wrapAll(e)}else{bE.append(e)}})},wrap:function(e){return this.each(function(){b(this).wrapAll(e)})},unwrap:function(){return this.parent().each(function(){if(!b.nodeName(this,"body")){b(this).replaceWith(this.childNodes)}}).end()},append:function(){return this.domManip(arguments,true,function(e){if(this.nodeType===1){this.appendChild(e)}})},prepend:function(){return this.domManip(arguments,true,function(e){if(this.nodeType===1){this.insertBefore(e,this.firstChild)}})},before:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(bE){this.parentNode.insertBefore(bE,this)})}else{if(arguments.length){var e=b(arguments[0]);e.push.apply(e,this.toArray());return this.pushStack(e,"before",arguments)}}},after:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(bE){this.parentNode.insertBefore(bE,this.nextSibling)})}else{if(arguments.length){var e=this.pushStack(this,"after",arguments);e.push.apply(e,b(arguments[0]).toArray());return e}}},remove:function(e,bG){for(var bE=0,bF;(bF=this[bE])!=null;bE++){if(!e||b.filter(e,[bF]).length){if(!bG&&bF.nodeType===1){b.cleanData(bF.getElementsByTagName("*"));b.cleanData([bF])}if(bF.parentNode){bF.parentNode.removeChild(bF)}}}return this},empty:function(){for(var e=0,bE;(bE=this[e])!=null;e++){if(bE.nodeType===1){b.cleanData(bE.getElementsByTagName("*"))}while(bE.firstChild){bE.removeChild(bE.firstChild)}}return this},clone:function(bE,e){bE=bE==null?false:bE;e=e==null?bE:e;return this.map(function(){return b.clone(this,bE,e)})},html:function(bG){if(bG===U){return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(an,""):null}else{if(typeof bG==="string"&&!Y.test(bG)&&(b.support.leadingWhitespace||!ay.test(bG))&&!aD[(f.exec(bG)||["",""])[1].toLowerCase()]){bG=bG.replace(ac,"<$1></$2>");try{for(var bF=0,bE=this.length;bF<bE;bF++){if(this[bF].nodeType===1){b.cleanData(this[bF].getElementsByTagName("*"));this[bF].innerHTML=bG}}}catch(bH){this.empty().append(bG)}}else{if(b.isFunction(bG)){this.each(function(bI){var e=b(this);e.html(bG.call(this,bI,e.html()))})}else{this.empty().append(bG)}}}return this},replaceWith:function(e){if(this[0]&&this[0].parentNode){if(b.isFunction(e)){return this.each(function(bG){var bF=b(this),bE=bF.html();bF.replaceWith(e.call(this,bG,bE))})}if(typeof e!=="string"){e=b(e).detach()}return this.each(function(){var bF=this.nextSibling,bE=this.parentNode;b(this).remove();if(bF){b(bF).before(e)}else{b(bE).append(e)}})}else{return this.length?this.pushStack(b(b.isFunction(e)?e():e),"replaceWith",e):this}},detach:function(e){return this.remove(e,true)},domManip:function(bK,bO,bN){var bG,bH,bJ,bM,bL=bK[0],bE=[];if(!b.support.checkClone&&arguments.length===3&&typeof bL==="string"&&v.test(bL)){return this.each(function(){b(this).domManip(bK,bO,bN,true)})}if(b.isFunction(bL)){return this.each(function(bQ){var bP=b(this);bK[0]=bL.call(this,bQ,bO?bP.html():U);bP.domManip(bK,bO,bN)})}if(this[0]){bM=bL&&bL.parentNode;if(b.support.parentNode&&bM&&bM.nodeType===11&&bM.childNodes.length===this.length){bG={fragment:bM}}else{bG=b.buildFragment(bK,this,bE)}bJ=bG.fragment;if(bJ.childNodes.length===1){bH=bJ=bJ.firstChild}else{bH=bJ.firstChild}if(bH){bO=bO&&b.nodeName(bH,"tr");for(var bF=0,e=this.length,bI=e-1;bF<e;bF++){bN.call(bO?bk(this[bF],bH):this[bF],bG.cacheable||(e>1&&bF<bI)?b.clone(bJ,true,true):bJ)}}if(bE.length){b.each(bE,by)}}return this}});function bk(e,bE){return b.nodeName(e,"table")?(e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody"))):e}function D(e,bK){if(bK.nodeType!==1||!b.hasData(e)){return}var bJ=b.expando,bG=b.data(e),bH=b.data(bK,bG);if((bG=bG[bJ])){var bL=bG.events;bH=bH[bJ]=b.extend({},bG);if(bL){delete bH.handle;bH.events={};for(var bI in bL){for(var bF=0,bE=bL[bI].length;bF<bE;bF++){b.event.add(bK,bI+(bL[bI][bF].namespace?".":"")+bL[bI][bF].namespace,bL[bI][bF],bL[bI][bF].data)}}}}}function ao(bE,e){var bF;if(e.nodeType!==1){return}if(e.clearAttributes){e.clearAttributes()}if(e.mergeAttributes){e.mergeAttributes(bE)}bF=e.nodeName.toLowerCase();if(bF==="object"){e.outerHTML=bE.outerHTML}else{if(bF==="input"&&(bE.type==="checkbox"||bE.type==="radio")){if(bE.checked){e.defaultChecked=e.checked=bE.checked}if(e.value!==bE.value){e.value=bE.value}}else{if(bF==="option"){e.selected=bE.defaultSelected}else{if(bF==="input"||bF==="textarea"){e.defaultValue=bE.defaultValue}}}}e.removeAttribute(b.expando)}b.buildFragment=function(bI,bG,bE){var bH,e,bF,bJ=(bG&&bG[0]?bG[0].ownerDocument||bG[0]:aB);if(bI.length===1&&typeof bI[0]==="string"&&bI[0].length<512&&bJ===aB&&bI[0].charAt(0)==="<"&&!Y.test(bI[0])&&(b.support.checkClone||!v.test(bI[0]))){e=true;bF=b.fragments[bI[0]];if(bF&&bF!==1){bH=bF}}if(!bH){bH=bJ.createDocumentFragment();b.clean(bI,bJ,bH,bE)}if(e){b.fragments[bI[0]]=bF?bH:1}return{fragment:bH,cacheable:e}};b.fragments={};b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,bE){b.fn[e]=function(bF){var bI=[],bL=b(bF),bK=this.length===1&&this[0].parentNode;if(bK&&bK.nodeType===11&&bK.childNodes.length===1&&bL.length===1){bL[bE](this[0]);return this}else{for(var bJ=0,bG=bL.length;bJ<bG;bJ++){var bH=(bJ>0?this.clone(true):this).get();b(bL[bJ])[bE](bH);bI=bI.concat(bH)}return this.pushStack(bI,e,bL.selector)}}});function bo(e){if("getElementsByTagName" in e){return e.getElementsByTagName("*")}else{if("querySelectorAll" in e){return e.querySelectorAll("*")}else{return[]}}}function aF(e){if(e.type==="checkbox"||e.type==="radio"){e.defaultChecked=e.checked}}function O(e){if(b.nodeName(e,"input")){aF(e)}else{if(e.getElementsByTagName){b.grep(e.getElementsByTagName("input"),aF)}}}b.extend({clone:function(bH,bJ,bF){var bI=bH.cloneNode(true),e,bE,bG;if((!b.support.noCloneEvent||!b.support.noCloneChecked)&&(bH.nodeType===1||bH.nodeType===11)&&!b.isXMLDoc(bH)){ao(bH,bI);e=bo(bH);bE=bo(bI);for(bG=0;e[bG];++bG){ao(e[bG],bE[bG])}}if(bJ){D(bH,bI);if(bF){e=bo(bH);bE=bo(bI);for(bG=0;e[bG];++bG){D(e[bG],bE[bG])}}}return bI},clean:function(bF,bH,bQ,bJ){var bO;bH=bH||aB;if(typeof bH.createElement==="undefined"){bH=bH.ownerDocument||bH[0]&&bH[0].ownerDocument||aB}var bR=[],bK;for(var bN=0,bI;(bI=bF[bN])!=null;bN++){if(typeof bI==="number"){bI+=""}if(!bI){continue}if(typeof bI==="string"){if(!af.test(bI)){bI=bH.createTextNode(bI)}else{bI=bI.replace(ac,"<$1></$2>");var bT=(f.exec(bI)||["",""])[1].toLowerCase(),bG=aD[bT]||aD._default,bM=bG[0],bE=bH.createElement("div");bE.innerHTML=bG[1]+bI+bG[2];while(bM--){bE=bE.lastChild}if(!b.support.tbody){var e=G.test(bI),bL=bT==="table"&&!e?bE.firstChild&&bE.firstChild.childNodes:bG[1]==="<table>"&&!e?bE.childNodes:[];for(bK=bL.length-1;bK>=0;--bK){if(b.nodeName(bL[bK],"tbody")&&!bL[bK].childNodes.length){bL[bK].parentNode.removeChild(bL[bK])}}}if(!b.support.leadingWhitespace&&ay.test(bI)){bE.insertBefore(bH.createTextNode(ay.exec(bI)[0]),bE.firstChild)}bI=bE.childNodes}}var bP;if(!b.support.appendChecked){if(bI[0]&&typeof(bP=bI.length)==="number"){for(bK=0;bK<bP;bK++){O(bI[bK])}}else{O(bI)}}if(bI.nodeType){bR.push(bI)}else{bR=b.merge(bR,bI)}}if(bQ){bO=function(bU){return !bU.type||bv.test(bU.type)};for(bN=0;bR[bN];bN++){if(bJ&&b.nodeName(bR[bN],"script")&&(!bR[bN].type||bR[bN].type.toLowerCase()==="text/javascript")){bJ.push(bR[bN].parentNode?bR[bN].parentNode.removeChild(bR[bN]):bR[bN])}else{if(bR[bN].nodeType===1){var bS=b.grep(bR[bN].getElementsByTagName("script"),bO);bR.splice.apply(bR,[bN+1,0].concat(bS))}bQ.appendChild(bR[bN])}}}return bR},cleanData:function(bE){var bH,bF,e=b.cache,bM=b.expando,bK=b.event.special,bJ=b.support.deleteExpando;for(var bI=0,bG;(bG=bE[bI])!=null;bI++){if(bG.nodeName&&b.noData[bG.nodeName.toLowerCase()]){continue}bF=bG[b.expando];if(bF){bH=e[bF]&&e[bF][bM];if(bH&&bH.events){for(var bL in bH.events){if(bK[bL]){b.event.remove(bG,bL)}else{b.removeEvent(bG,bL,bH.handle)}}if(bH.handle){bH.handle.elem=null}}if(bJ){delete bG[b.expando]}else{if(bG.removeAttribute){bG.removeAttribute(b.expando)}}delete e[bF]}}}});function by(e,bE){if(bE.src){b.ajax({url:bE.src,async:false,dataType:"script"})}else{b.globalEval((bE.text||bE.textContent||bE.innerHTML||"").replace(aU,"/*$0*/"))}if(bE.parentNode){bE.parentNode.removeChild(bE)}}var ar=/alpha\([^)]*\)/i,aA=/opacity=([^)]*)/,a4=/-([a-z])/ig,J=/([A-Z]|^ms)/g,bm=/^-?\d+(?:px)?$/i,bx=/^-?\d/,S=/^[+\-]=/,aq=/[^+\-\.\de]+/g,bg={position:"absolute",visibility:"hidden",display:"block"},au=["Left","Right"],ba=["Top","Bottom"],ag,aP,a3,u=function(e,bE){return bE.toUpperCase()};b.fn.css=function(e,bE){if(arguments.length===2&&bE===U){return this}return b.access(this,e,bE,true,function(bG,bF,bH){return bH!==U?b.style(bG,bF,bH):b.css(bG,bF)})};b.extend({cssHooks:{opacity:{get:function(bF,bE){if(bE){var e=ag(bF,"opacity","opacity");return e===""?"1":e}else{return bF.style.opacity}}}},cssNumber:{zIndex:true,fontWeight:true,opacity:true,zoom:true,lineHeight:true,widows:true,orphans:true},cssProps:{"float":b.support.cssFloat?"cssFloat":"styleFloat"},style:function(bG,bF,bM,bH){if(!bG||bG.nodeType===3||bG.nodeType===8||!bG.style){return}var bK,bL,bI=b.camelCase(bF),bE=bG.style,bN=b.cssHooks[bI];bF=b.cssProps[bI]||bI;if(bM!==U){bL=typeof bM;if(bL==="number"&&isNaN(bM)||bM==null){return}if(bL==="string"&&S.test(bM)){bM=+bM.replace(aq,"")+parseFloat(b.css(bG,bF))}if(bL==="number"&&!b.cssNumber[bI]){bM+="px"}if(!bN||!("set" in bN)||(bM=bN.set(bG,bM))!==U){try{bE[bF]=bM}catch(bJ){}}}else{if(bN&&"get" in bN&&(bK=bN.get(bG,false,bH))!==U){return bK}return bE[bF]}},css:function(bH,bG,bE){var bF,e;bG=b.camelCase(bG);e=b.cssHooks[bG];bG=b.cssProps[bG]||bG;if(bG==="cssFloat"){bG="float"}if(e&&"get" in e&&(bF=e.get(bH,true,bE))!==U){return bF}else{if(ag){return ag(bH,bG)}}},swap:function(bG,bF,bH){var e={};for(var bE in bF){e[bE]=bG.style[bE];bG.style[bE]=bF[bE]}bH.call(bG);for(bE in bF){bG.style[bE]=e[bE]}},camelCase:function(e){return e.replace(a4,u)}});b.curCSS=b.css;b.each(["height","width"],function(bE,e){b.cssHooks[e]={get:function(bH,bG,bF){var bI;if(bG){if(bH.offsetWidth!==0){bI=w(bH,e,bF)}else{b.swap(bH,bg,function(){bI=w(bH,e,bF)})}if(bI<=0){bI=ag(bH,e,e);if(bI==="0px"&&a3){bI=a3(bH,e,e)}if(bI!=null){return bI===""||bI==="auto"?"0px":bI}}if(bI<0||bI==null){bI=bH.style[e];return bI===""||bI==="auto"?"0px":bI}return typeof bI==="string"?bI:bI+"px"}},set:function(bF,bG){if(bm.test(bG)){bG=parseFloat(bG);if(bG>=0){return bG+"px"}}else{return bG}}}});if(!b.support.opacity){b.cssHooks.opacity={get:function(bE,e){return aA.test((e&&bE.currentStyle?bE.currentStyle.filter:bE.style.filter)||"")?(parseFloat(RegExp.$1)/100)+"":e?"1":""},set:function(bH,bI){var bG=bH.style,bE=bH.currentStyle;bG.zoom=1;var e=b.isNaN(bI)?"":"alpha(opacity="+bI*100+")",bF=bE&&bE.filter||bG.filter||"";bG.filter=ar.test(bF)?bF.replace(ar,e):bF+" "+e}}}b(function(){if(!b.support.reliableMarginRight){b.cssHooks.marginRight={get:function(bF,bE){var e;b.swap(bF,{display:"inline-block"},function(){if(bE){e=ag(bF,"margin-right","marginRight")}else{e=bF.style.marginRight}});return e}}}});if(aB.defaultView&&aB.defaultView.getComputedStyle){aP=function(bH,bF){var bE,bG,e;bF=bF.replace(J,"-$1").toLowerCase();if(!(bG=bH.ownerDocument.defaultView)){return U}if((e=bG.getComputedStyle(bH,null))){bE=e.getPropertyValue(bF);if(bE===""&&!b.contains(bH.ownerDocument.documentElement,bH)){bE=b.style(bH,bF)}}return bE}}if(aB.documentElement.currentStyle){a3=function(bH,bF){var bI,bE=bH.currentStyle&&bH.currentStyle[bF],e=bH.runtimeStyle&&bH.runtimeStyle[bF],bG=bH.style;if(!bm.test(bE)&&bx.test(bE)){bI=bG.left;if(e){bH.runtimeStyle.left=bH.currentStyle.left}bG.left=bF==="fontSize"?"1em":(bE||0);bE=bG.pixelLeft+"px";bG.left=bI;if(e){bH.runtimeStyle.left=e}}return bE===""?"auto":bE}}ag=aP||a3;function w(bF,bE,e){var bH=bE==="width"?au:ba,bG=bE==="width"?bF.offsetWidth:bF.offsetHeight;if(e==="border"){return bG}b.each(bH,function(){if(!e){bG-=parseFloat(b.css(bF,"padding"+this))||0}if(e==="margin"){bG+=parseFloat(b.css(bF,"margin"+this))||0}else{bG-=parseFloat(b.css(bF,"border"+this+"Width"))||0}});return bG}if(b.expr&&b.expr.filters){b.expr.filters.hidden=function(bF){var bE=bF.offsetWidth,e=bF.offsetHeight;return(bE===0&&e===0)||(!b.support.reliableHiddenOffsets&&(bF.style.display||b.css(bF,"display"))==="none")};b.expr.filters.visible=function(e){return !b.expr.filters.hidden(e)}}var o=/%20/g,aw=/\[\]$/,bC=/\r?\n/g,bA=/#.*$/,aJ=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,a7=/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,aT=/^(?:about|app|app\-storage|.+\-extension|file|widget):$/,aW=/^(?:GET|HEAD)$/,c=/^\/\//,V=/\?/,bf=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,A=/^(?:select|textarea)/i,k=/\s+/,bB=/([?&])_=[^&]*/,T=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,K=b.fn.load,ah={},B={},aK,C;try{aK=bu.href}catch(aC){aK=aB.createElement("a");aK.href="";aK=aK.href}C=T.exec(aK.toLowerCase())||[];function g(e){return function(bH,bJ){if(typeof bH!=="string"){bJ=bH;bH="*"}if(b.isFunction(bJ)){var bG=bH.toLowerCase().split(k),bF=0,bI=bG.length,bE,bK,bL;for(;bF<bI;bF++){bE=bG[bF];bL=/^\+/.test(bE);if(bL){bE=bE.substr(1)||"*"}bK=e[bE]=e[bE]||[];bK[bL?"unshift":"push"](bJ)}}}}function a1(bE,bN,bI,bM,bK,bG){bK=bK||bN.dataTypes[0];bG=bG||{};bG[bK]=true;var bJ=bE[bK],bF=0,e=bJ?bJ.length:0,bH=(bE===ah),bL;for(;bF<e&&(bH||!bL);bF++){bL=bJ[bF](bN,bI,bM);if(typeof bL==="string"){if(!bH||bG[bL]){bL=U}else{bN.dataTypes.unshift(bL);bL=a1(bE,bN,bI,bM,bL,bG)}}}if((bH||!bL)&&!bG["*"]){bL=a1(bE,bN,bI,bM,"*",bG)}return bL}b.fn.extend({load:function(bF,bI,bJ){if(typeof bF!=="string"&&K){return K.apply(this,arguments)}else{if(!this.length){return this}}var bH=bF.indexOf(" ");if(bH>=0){var e=bF.slice(bH,bF.length);bF=bF.slice(0,bH)}var bG="GET";if(bI){if(b.isFunction(bI)){bJ=bI;bI=U}else{if(typeof bI==="object"){bI=b.param(bI,b.ajaxSettings.traditional);bG="POST"}}}var bE=this;b.ajax({url:bF,type:bG,dataType:"html",data:bI,complete:function(bL,bK,bM){bM=bL.responseText;if(bL.isResolved()){bL.done(function(bN){bM=bN});bE.html(e?b("<div>").append(bM.replace(bf,"")).find(e):bM)}if(bJ){bE.each(bJ,[bM,bK,bL])}}});return this},serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?b.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||A.test(this.nodeName)||a7.test(this.type))}).map(function(e,bE){var bF=b(this).val();return bF==null?null:b.isArray(bF)?b.map(bF,function(bH,bG){return{name:bE.name,value:bH.replace(bC,"\r\n")}}):{name:bE.name,value:bF.replace(bC,"\r\n")}}).get()}});b.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,bE){b.fn[bE]=function(bF){return this.bind(bE,bF)}});b.each(["get","post"],function(e,bE){b[bE]=function(bF,bH,bI,bG){if(b.isFunction(bH)){bG=bG||bI;bI=bH;bH=U}return b.ajax({type:bE,url:bF,data:bH,success:bI,dataType:bG})}});b.extend({getScript:function(e,bE){return b.get(e,U,bE,"script")},getJSON:function(e,bE,bF){return b.get(e,bE,bF,"json")},ajaxSetup:function(bF,e){if(!e){e=bF;bF=b.extend(true,b.ajaxSettings,e)}else{b.extend(true,bF,b.ajaxSettings,e)}for(var bE in {context:1,url:1}){if(bE in e){bF[bE]=e[bE]}else{if(bE in b.ajaxSettings){bF[bE]=b.ajaxSettings[bE]}}}return bF},ajaxSettings:{url:aK,isLocal:aT.test(C[1]),global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":bl.String,"text html":true,"text json":b.parseJSON,"text xml":b.parseXML}},ajaxPrefilter:g(ah),ajaxTransport:g(B),ajax:function(bI,bG){if(typeof bI==="object"){bG=bI;bI=U}bG=bG||{};var bM=b.ajaxSetup({},bG),b1=bM.context||bM,bP=b1!==bM&&(b1.nodeType||b1 instanceof b)?b(b1):b.event,b0=b.Deferred(),bW=b._Deferred(),bK=bM.statusCode||{},bL,bQ={},bX={},bZ,bH,bU,bN,bR,bJ=0,bF,bT,bS={readyState:0,setRequestHeader:function(b2,b3){if(!bJ){var e=b2.toLowerCase();b2=bX[e]=bX[e]||b2;bQ[b2]=b3}return this},getAllResponseHeaders:function(){return bJ===2?bZ:null},getResponseHeader:function(b2){var e;if(bJ===2){if(!bH){bH={};while((e=aJ.exec(bZ))){bH[e[1].toLowerCase()]=e[2]}}e=bH[b2.toLowerCase()]}return e===U?null:e},overrideMimeType:function(e){if(!bJ){bM.mimeType=e}return this},abort:function(e){e=e||"abort";if(bU){bU.abort(e)}bO(0,e);return this}};function bO(b7,b5,b8,b4){if(bJ===2){return}bJ=2;if(bN){clearTimeout(bN)}bU=U;bZ=b4||"";bS.readyState=b7?4:0;var b2,cc,cb,b6=b8?bs(bM,bS,b8):U,b3,ca;if(b7>=200&&b7<300||b7===304){if(bM.ifModified){if((b3=bS.getResponseHeader("Last-Modified"))){b.lastModified[bL]=b3}if((ca=bS.getResponseHeader("Etag"))){b.etag[bL]=ca}}if(b7===304){b5="notmodified";b2=true}else{try{cc=P(bM,b6);b5="success";b2=true}catch(b9){b5="parsererror";cb=b9}}}else{cb=b5;if(!b5||b7){b5="error";if(b7<0){b7=0}}}bS.status=b7;bS.statusText=b5;if(b2){b0.resolveWith(b1,[cc,b5,bS])}else{b0.rejectWith(b1,[bS,b5,cb])}bS.statusCode(bK);bK=U;if(bF){bP.trigger("ajax"+(b2?"Success":"Error"),[bS,bM,b2?cc:cb])}bW.resolveWith(b1,[bS,b5]);if(bF){bP.trigger("ajaxComplete",[bS,bM]);if(!(--b.active)){b.event.trigger("ajaxStop")}}}b0.promise(bS);bS.success=bS.done;bS.error=bS.fail;bS.complete=bW.done;bS.statusCode=function(b2){if(b2){var e;if(bJ<2){for(e in b2){bK[e]=[bK[e],b2[e]]}}else{e=b2[bS.status];bS.then(e,e)}}return this};bM.url=((bI||bM.url)+"").replace(bA,"").replace(c,C[1]+"//");bM.dataTypes=b.trim(bM.dataType||"*").toLowerCase().split(k);if(bM.crossDomain==null){bR=T.exec(bM.url.toLowerCase());bM.crossDomain=!!(bR&&(bR[1]!=C[1]||bR[2]!=C[2]||(bR[3]||(bR[1]==="http:"?80:443))!=(C[3]||(C[1]==="http:"?80:443))))}if(bM.data&&bM.processData&&typeof bM.data!=="string"){bM.data=b.param(bM.data,bM.traditional)}a1(ah,bM,bG,bS);if(bJ===2){return false}bF=bM.global;bM.type=bM.type.toUpperCase();bM.hasContent=!aW.test(bM.type);if(bF&&b.active++===0){b.event.trigger("ajaxStart")}if(!bM.hasContent){if(bM.data){bM.url+=(V.test(bM.url)?"&":"?")+bM.data}bL=bM.url;if(bM.cache===false){var bE=b.now(),bY=bM.url.replace(bB,"$1_="+bE);bM.url=bY+((bY===bM.url)?(V.test(bM.url)?"&":"?")+"_="+bE:"")}}if(bM.data&&bM.hasContent&&bM.contentType!==false||bG.contentType){bS.setRequestHeader("Content-Type",bM.contentType)}if(bM.ifModified){bL=bL||bM.url;if(b.lastModified[bL]){bS.setRequestHeader("If-Modified-Since",b.lastModified[bL])}if(b.etag[bL]){bS.setRequestHeader("If-None-Match",b.etag[bL])}}bS.setRequestHeader("Accept",bM.dataTypes[0]&&bM.accepts[bM.dataTypes[0]]?bM.accepts[bM.dataTypes[0]]+(bM.dataTypes[0]!=="*"?", */*; q=0.01":""):bM.accepts["*"]);for(bT in bM.headers){bS.setRequestHeader(bT,bM.headers[bT])}if(bM.beforeSend&&(bM.beforeSend.call(b1,bS,bM)===false||bJ===2)){bS.abort();return false}for(bT in {success:1,error:1,complete:1}){bS[bT](bM[bT])}bU=a1(B,bM,bG,bS);if(!bU){bO(-1,"No Transport")}else{bS.readyState=1;if(bF){bP.trigger("ajaxSend",[bS,bM])}if(bM.async&&bM.timeout>0){bN=setTimeout(function(){bS.abort("timeout")},bM.timeout)}try{bJ=1;bU.send(bQ,bO)}catch(bV){if(status<2){bO(-1,bV)}else{b.error(bV)}}}return bS},param:function(e,bF){var bE=[],bH=function(bI,bJ){bJ=b.isFunction(bJ)?bJ():bJ;bE[bE.length]=encodeURIComponent(bI)+"="+encodeURIComponent(bJ)};if(bF===U){bF=b.ajaxSettings.traditional}if(b.isArray(e)||(e.jquery&&!b.isPlainObject(e))){b.each(e,function(){bH(this.name,this.value)})}else{for(var bG in e){F(bG,e[bG],bF,bH)}}return bE.join("&").replace(o,"+")}});function F(bF,bH,bE,bG){if(b.isArray(bH)){b.each(bH,function(bJ,bI){if(bE||aw.test(bF)){bG(bF,bI)}else{F(bF+"["+(typeof bI==="object"||b.isArray(bI)?bJ:"")+"]",bI,bE,bG)}})}else{if(!bE&&bH!=null&&typeof bH==="object"){for(var e in bH){F(bF+"["+e+"]",bH[e],bE,bG)}}else{bG(bF,bH)}}}b.extend({active:0,lastModified:{},etag:{}});function bs(bM,bL,bI){var bE=bM.contents,bK=bM.dataTypes,bF=bM.responseFields,bH,bJ,bG,e;for(bJ in bF){if(bJ in bI){bL[bF[bJ]]=bI[bJ]}}while(bK[0]==="*"){bK.shift();if(bH===U){bH=bM.mimeType||bL.getResponseHeader("content-type")}}if(bH){for(bJ in bE){if(bE[bJ]&&bE[bJ].test(bH)){bK.unshift(bJ);break}}}if(bK[0] in bI){bG=bK[0]}else{for(bJ in bI){if(!bK[0]||bM.converters[bJ+" "+bK[0]]){bG=bJ;break}if(!e){e=bJ}}bG=bG||e}if(bG){if(bG!==bK[0]){bK.unshift(bG)}return bI[bG]}}function P(bQ,bI){if(bQ.dataFilter){bI=bQ.dataFilter(bI,bQ.dataType)}var bM=bQ.dataTypes,bP={},bJ,bN,bF=bM.length,bK,bL=bM[0],bG,bH,bO,bE,e;for(bJ=1;bJ<bF;bJ++){if(bJ===1){for(bN in bQ.converters){if(typeof bN==="string"){bP[bN.toLowerCase()]=bQ.converters[bN]}}}bG=bL;bL=bM[bJ];if(bL==="*"){bL=bG}else{if(bG!=="*"&&bG!==bL){bH=bG+" "+bL;bO=bP[bH]||bP["* "+bL];if(!bO){e=U;for(bE in bP){bK=bE.split(" ");if(bK[0]===bG||bK[0]==="*"){e=bP[bK[1]+" "+bL];if(e){bE=bP[bE];if(bE===true){bO=e}else{if(e===true){bO=bE}}break}}}}if(!(bO||e)){b.error("No conversion from "+bH.replace(" "," to "))}if(bO!==true){bI=bO?bO(bI):e(bE(bI))}}}}return bI}var aI=b.now(),E=/(\=)\?(&|$)|\?\?/i;b.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return b.expando+"_"+(aI++)}});b.ajaxPrefilter("json jsonp",function(bM,bJ,bL){var bG=bM.contentType==="application/x-www-form-urlencoded"&&(typeof bM.data==="string");if(bM.dataTypes[0]==="jsonp"||bM.jsonp!==false&&(E.test(bM.url)||bG&&E.test(bM.data))){var bK,bF=bM.jsonpCallback=b.isFunction(bM.jsonpCallback)?bM.jsonpCallback():bM.jsonpCallback,bI=bl[bF],e=bM.url,bH=bM.data,bE="$1"+bF+"$2";if(bM.jsonp!==false){e=e.replace(E,bE);if(bM.url===e){if(bG){bH=bH.replace(E,bE)}if(bM.data===bH){e+=(/\?/.test(e)?"&":"?")+bM.jsonp+"="+bF}}}bM.url=e;bM.data=bH;bl[bF]=function(bN){bK=[bN]};bL.always(function(){bl[bF]=bI;if(bK&&b.isFunction(bI)){bl[bF](bK[0])}});bM.converters["script json"]=function(){if(!bK){b.error(bF+" was not called")}return bK[0]};bM.dataTypes[0]="json";return"script"}});b.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){b.globalEval(e);return e}}});b.ajaxPrefilter("script",function(e){if(e.cache===U){e.cache=false}if(e.crossDomain){e.type="GET";e.global=false}});b.ajaxTransport("script",function(bF){if(bF.crossDomain){var e,bE=aB.head||aB.getElementsByTagName("head")[0]||aB.documentElement;return{send:function(bG,bH){e=aB.createElement("script");e.async="async";if(bF.scriptCharset){e.charset=bF.scriptCharset}e.src=bF.url;e.onload=e.onreadystatechange=function(bJ,bI){if(bI||!e.readyState||/loaded|complete/.test(e.readyState)){e.onload=e.onreadystatechange=null;if(bE&&e.parentNode){bE.removeChild(e)}e=U;if(!bI){bH(200,"success")}}};bE.insertBefore(e,bE.firstChild)},abort:function(){if(e){e.onload(0,1)}}}}});var L=bl.ActiveXObject?function(){for(var e in W){W[e](0,1)}}:false,I=0,W;function aS(){try{return new bl.XMLHttpRequest()}catch(bE){}}function ap(){try{return new bl.ActiveXObject("Microsoft.XMLHTTP")}catch(bE){}}b.ajaxSettings.xhr=bl.ActiveXObject?function(){return !this.isLocal&&aS()||ap()}:aS;(function(e){b.extend(b.support,{ajax:!!e,cors:!!e&&("withCredentials" in e)})})(b.ajaxSettings.xhr());if(b.support.ajax){b.ajaxTransport(function(e){if(!e.crossDomain||b.support.cors){var bE;return{send:function(bK,bF){var bJ=e.xhr(),bI,bH;if(e.username){bJ.open(e.type,e.url,e.async,e.username,e.password)}else{bJ.open(e.type,e.url,e.async)}if(e.xhrFields){for(bH in e.xhrFields){bJ[bH]=e.xhrFields[bH]}}if(e.mimeType&&bJ.overrideMimeType){bJ.overrideMimeType(e.mimeType)}if(!e.crossDomain&&!bK["X-Requested-With"]){bK["X-Requested-With"]="XMLHttpRequest"}try{for(bH in bK){bJ.setRequestHeader(bH,bK[bH])}}catch(bG){}bJ.send((e.hasContent&&e.data)||null);bE=function(bT,bN){var bO,bM,bL,bR,bQ;try{if(bE&&(bN||bJ.readyState===4)){bE=U;if(bI){bJ.onreadystatechange=b.noop;if(L){delete W[bI]}}if(bN){if(bJ.readyState!==4){bJ.abort()}}else{bO=bJ.status;bL=bJ.getAllResponseHeaders();bR={};bQ=bJ.responseXML;if(bQ&&bQ.documentElement){bR.xml=bQ}bR.text=bJ.responseText;try{bM=bJ.statusText}catch(bS){bM=""}if(!bO&&e.isLocal&&!e.crossDomain){bO=bR.text?200:404}else{if(bO===1223){bO=204}}}}}catch(bP){if(!bN){bF(-1,bP)}}if(bR){bF(bO,bM,bR,bL)}};if(!e.async||bJ.readyState===4){bE()}else{bI=++I;if(L){if(!W){W={};b(bl).unload(L)}W[bI]=bE}bJ.onreadystatechange=bE}},abort:function(){if(bE){bE(0,1)}}}}})}var aa={},bi,t,aH=/^(?:toggle|show|hide)$/,aY=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,bb,aO=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],bd,ab=bl.webkitRequestAnimationFrame||bl.mozRequestAnimationFrame||bl.oRequestAnimationFrame;b.fn.extend({show:function(bG,bJ,bI){var bF,bH;if(bG||bG===0){return this.animate(a9("show",3),bG,bJ,bI)}else{for(var bE=0,e=this.length;bE<e;bE++){bF=this[bE];if(bF.style){bH=bF.style.display;if(!b._data(bF,"olddisplay")&&bH==="none"){bH=bF.style.display=""}if(bH===""&&b.css(bF,"display")==="none"){b._data(bF,"olddisplay",H(bF.nodeName))}}}for(bE=0;bE<e;bE++){bF=this[bE];if(bF.style){bH=bF.style.display;if(bH===""||bH==="none"){bF.style.display=b._data(bF,"olddisplay")||""}}}return this}},hide:function(bF,bI,bH){if(bF||bF===0){return this.animate(a9("hide",3),bF,bI,bH)}else{for(var bE=0,e=this.length;bE<e;bE++){if(this[bE].style){var bG=b.css(this[bE],"display");if(bG!=="none"&&!b._data(this[bE],"olddisplay")){b._data(this[bE],"olddisplay",bG)}}}for(bE=0;bE<e;bE++){if(this[bE].style){this[bE].style.display="none"}}return this}},_toggle:b.fn.toggle,toggle:function(bF,bE,bG){var e=typeof bF==="boolean";if(b.isFunction(bF)&&b.isFunction(bE)){this._toggle.apply(this,arguments)}else{if(bF==null||e){this.each(function(){var bH=e?bF:b(this).is(":hidden");b(this)[bH?"show":"hide"]()})}else{this.animate(a9("toggle",3),bF,bE,bG)}}return this},fadeTo:function(e,bG,bF,bE){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:bG},e,bF,bE)},animate:function(bH,bE,bG,bF){var e=b.speed(bE,bG,bF);if(b.isEmptyObject(bH)){return this.each(e.complete,[false])}bH=b.extend({},bH);return this[e.queue===false?"each":"queue"](function(){if(e.queue===false){b._mark(this)}var bL=b.extend({},e),bS=this.nodeType===1,bP=bS&&b(this).is(":hidden"),bI,bM,bK,bR,bQ,bO,bJ,bN,bT;bL.animatedProperties={};for(bK in bH){bI=b.camelCase(bK);if(bK!==bI){bH[bI]=bH[bK];delete bH[bK]}bM=bH[bI];if(b.isArray(bM)){bL.animatedProperties[bI]=bM[1];bM=bH[bI]=bM[0]}else{bL.animatedProperties[bI]=bL.specialEasing&&bL.specialEasing[bI]||bL.easing||"swing"}if(bM==="hide"&&bP||bM==="show"&&!bP){return bL.complete.call(this)}if(bS&&(bI==="height"||bI==="width")){bL.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY];if(b.css(this,"display")==="inline"&&b.css(this,"float")==="none"){if(!b.support.inlineBlockNeedsLayout){this.style.display="inline-block"}else{bR=H(this.nodeName);if(bR==="inline"){this.style.display="inline-block"}else{this.style.display="inline";this.style.zoom=1}}}}}if(bL.overflow!=null){this.style.overflow="hidden"}for(bK in bH){bQ=new b.fx(this,bL,bK);bM=bH[bK];if(aH.test(bM)){bQ[bM==="toggle"?bP?"show":"hide":bM]()}else{bO=aY.exec(bM);bJ=bQ.cur();if(bO){bN=parseFloat(bO[2]);bT=bO[3]||(b.cssNumber[bK]?"":"px");if(bT!=="px"){b.style(this,bK,(bN||1)+bT);bJ=((bN||1)/bQ.cur())*bJ;b.style(this,bK,bJ+bT)}if(bO[1]){bN=((bO[1]==="-="?-1:1)*bN)+bJ}bQ.custom(bJ,bN,bT)}else{bQ.custom(bJ,bM,"")}}}return true})},stop:function(bE,e){if(bE){this.queue([])}this.each(function(){var bG=b.timers,bF=bG.length;if(!e){b._unmark(true,this)}while(bF--){if(bG[bF].elem===this){if(e){bG[bF](true)}bG.splice(bF,1)}}});if(!e){this.dequeue()}return this}});function bp(){setTimeout(az,0);return(bd=b.now())}function az(){bd=U}function a9(bE,e){var bF={};b.each(aO.concat.apply([],aO.slice(0,e)),function(){bF[this]=bE});return bF}b.each({slideDown:a9("show",1),slideUp:a9("hide",1),slideToggle:a9("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,bE){b.fn[e]=function(bF,bH,bG){return this.animate(bE,bF,bH,bG)}});b.extend({speed:function(bF,bG,bE){var e=bF&&typeof bF==="object"?b.extend({},bF):{complete:bE||!bE&&bG||b.isFunction(bF)&&bF,duration:bF,easing:bE&&bG||bG&&!b.isFunction(bG)&&bG};e.duration=b.fx.off?0:typeof e.duration==="number"?e.duration:e.duration in b.fx.speeds?b.fx.speeds[e.duration]:b.fx.speeds._default;e.old=e.complete;e.complete=function(bH){if(e.queue!==false){b.dequeue(this)}else{if(bH!==false){b._unmark(this)}}if(b.isFunction(e.old)){e.old.call(this)}};return e},easing:{linear:function(bF,bG,e,bE){return e+bE*bF},swing:function(bF,bG,e,bE){return((-Math.cos(bF*Math.PI)/2)+0.5)*bE+e}},timers:[],fx:function(bE,e,bF){this.options=e;this.elem=bE;this.prop=bF;e.orig=e.orig||{}}});b.fx.prototype={update:function(){if(this.options.step){this.options.step.call(this.elem,this.now,this)}(b.fx.step[this.prop]||b.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop]}var e,bE=b.css(this.elem,this.prop);return isNaN(e=parseFloat(bE))?!bE||bE==="auto"?0:bE:e},custom:function(bJ,bI,bG){var e=this,bF=b.fx,bH;this.startTime=bd||bp();this.start=bJ;this.end=bI;this.unit=bG||this.unit||(b.cssNumber[this.prop]?"":"px");this.now=this.start;this.pos=this.state=0;function bE(bK){return e.step(bK)}bE.elem=this.elem;if(bE()&&b.timers.push(bE)&&!bb){if(ab){bb=1;bH=function(){if(bb){ab(bH);bF.tick()}};ab(bH)}else{bb=setInterval(bF.tick,bF.interval)}}},show:function(){this.options.orig[this.prop]=b.style(this.elem,this.prop);this.options.show=true;this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());b(this.elem).show()},hide:function(){this.options.orig[this.prop]=b.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(bH){var bG=bd||bp(),e=true,bI=this.elem,bE=this.options,bF,bK;if(bH||bG>=bE.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();bE.animatedProperties[this.prop]=true;for(bF in bE.animatedProperties){if(bE.animatedProperties[bF]!==true){e=false}}if(e){if(bE.overflow!=null&&!b.support.shrinkWrapBlocks){b.each(["","X","Y"],function(bL,bM){bI.style["overflow"+bM]=bE.overflow[bL]})}if(bE.hide){b(bI).hide()}if(bE.hide||bE.show){for(var bJ in bE.animatedProperties){b.style(bI,bJ,bE.orig[bJ])}}bE.complete.call(bI)}return false}else{if(bE.duration==Infinity){this.now=bG}else{bK=bG-this.startTime;this.state=bK/bE.duration;this.pos=b.easing[bE.animatedProperties[this.prop]](this.state,bK,0,1,bE.duration);this.now=this.start+((this.end-this.start)*this.pos)}this.update()}return true}};b.extend(b.fx,{tick:function(){for(var bE=b.timers,e=0;e<bE.length;++e){if(!bE[e]()){bE.splice(e--,1)}}if(!bE.length){b.fx.stop()}},interval:13,stop:function(){clearInterval(bb);bb=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(e){b.style(e.elem,"opacity",e.now)},_default:function(e){if(e.elem.style&&e.elem.style[e.prop]!=null){e.elem.style[e.prop]=(e.prop==="width"||e.prop==="height"?Math.max(0,e.now):e.now)+e.unit}else{e.elem[e.prop]=e.now}}}});if(b.expr&&b.expr.filters){b.expr.filters.animated=function(e){return b.grep(b.timers,function(bE){return e===bE.elem}).length}}function H(bF){if(!aa[bF]){var e=b("<"+bF+">").appendTo("body"),bE=e.css("display");e.remove();if(bE==="none"||bE===""){if(!bi){bi=aB.createElement("iframe");bi.frameBorder=bi.width=bi.height=0}aB.body.appendChild(bi);if(!t||!bi.createElement){t=(bi.contentWindow||bi.contentDocument).document;t.write("<!doctype><html><body></body></html>")}e=t.createElement(bF);t.body.appendChild(e);bE=b.css(e,"display");aB.body.removeChild(bi)}aa[bF]=bE}return aa[bF]}var ae=/^t(?:able|d|h)$/i,ak=/^(?:body|html)$/i;if("getBoundingClientRect" in aB.documentElement){b.fn.offset=function(bR){var bH=this[0],bK;if(bR){return this.each(function(e){b.offset.setOffset(this,bR,e)})}if(!bH||!bH.ownerDocument){return null}if(bH===bH.ownerDocument.body){return b.offset.bodyOffset(bH)}try{bK=bH.getBoundingClientRect()}catch(bO){}var bQ=bH.ownerDocument,bF=bQ.documentElement;if(!bK||!b.contains(bF,bH)){return bK?{top:bK.top,left:bK.left}:{top:0,left:0}}var bL=bQ.body,bM=aR(bQ),bJ=bF.clientTop||bL.clientTop||0,bN=bF.clientLeft||bL.clientLeft||0,bE=bM.pageYOffset||b.support.boxModel&&bF.scrollTop||bL.scrollTop,bI=bM.pageXOffset||b.support.boxModel&&bF.scrollLeft||bL.scrollLeft,bP=bK.top+bE-bJ,bG=bK.left+bI-bN;return{top:bP,left:bG}}}else{b.fn.offset=function(bO){var bI=this[0];if(bO){return this.each(function(bP){b.offset.setOffset(this,bO,bP)})}if(!bI||!bI.ownerDocument){return null}if(bI===bI.ownerDocument.body){return b.offset.bodyOffset(bI)}b.offset.initialize();var bL,bF=bI.offsetParent,bE=bI,bN=bI.ownerDocument,bG=bN.documentElement,bJ=bN.body,bK=bN.defaultView,e=bK?bK.getComputedStyle(bI,null):bI.currentStyle,bM=bI.offsetTop,bH=bI.offsetLeft;while((bI=bI.parentNode)&&bI!==bJ&&bI!==bG){if(b.offset.supportsFixedPosition&&e.position==="fixed"){break}bL=bK?bK.getComputedStyle(bI,null):bI.currentStyle;bM-=bI.scrollTop;bH-=bI.scrollLeft;if(bI===bF){bM+=bI.offsetTop;bH+=bI.offsetLeft;if(b.offset.doesNotAddBorder&&!(b.offset.doesAddBorderForTableAndCells&&ae.test(bI.nodeName))){bM+=parseFloat(bL.borderTopWidth)||0;bH+=parseFloat(bL.borderLeftWidth)||0}bE=bF;bF=bI.offsetParent}if(b.offset.subtractsBorderForOverflowNotVisible&&bL.overflow!=="visible"){bM+=parseFloat(bL.borderTopWidth)||0;bH+=parseFloat(bL.borderLeftWidth)||0}e=bL}if(e.position==="relative"||e.position==="static"){bM+=bJ.offsetTop;bH+=bJ.offsetLeft}if(b.offset.supportsFixedPosition&&e.position==="fixed"){bM+=Math.max(bG.scrollTop,bJ.scrollTop);bH+=Math.max(bG.scrollLeft,bJ.scrollLeft)}return{top:bM,left:bH}}}b.offset={initialize:function(){var e=aB.body,bE=aB.createElement("div"),bH,bJ,bI,bK,bF=parseFloat(b.css(e,"marginTop"))||0,bG="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";b.extend(bE.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"});bE.innerHTML=bG;e.insertBefore(bE,e.firstChild);bH=bE.firstChild;bJ=bH.firstChild;bK=bH.nextSibling.firstChild.firstChild;this.doesNotAddBorder=(bJ.offsetTop!==5);this.doesAddBorderForTableAndCells=(bK.offsetTop===5);bJ.style.position="fixed";bJ.style.top="20px";this.supportsFixedPosition=(bJ.offsetTop===20||bJ.offsetTop===15);bJ.style.position=bJ.style.top="";bH.style.overflow="hidden";bH.style.position="relative";this.subtractsBorderForOverflowNotVisible=(bJ.offsetTop===-5);this.doesNotIncludeMarginInBodyOffset=(e.offsetTop!==bF);e.removeChild(bE);b.offset.initialize=b.noop},bodyOffset:function(e){var bF=e.offsetTop,bE=e.offsetLeft;b.offset.initialize();if(b.offset.doesNotIncludeMarginInBodyOffset){bF+=parseFloat(b.css(e,"marginTop"))||0;bE+=parseFloat(b.css(e,"marginLeft"))||0}return{top:bF,left:bE}},setOffset:function(bG,bP,bJ){var bK=b.css(bG,"position");if(bK==="static"){bG.style.position="relative"}var bI=b(bG),bE=bI.offset(),e=b.css(bG,"top"),bN=b.css(bG,"left"),bO=(bK==="absolute"||bK==="fixed")&&b.inArray("auto",[e,bN])>-1,bM={},bL={},bF,bH;if(bO){bL=bI.position();bF=bL.top;bH=bL.left}else{bF=parseFloat(e)||0;bH=parseFloat(bN)||0}if(b.isFunction(bP)){bP=bP.call(bG,bJ,bE)}if(bP.top!=null){bM.top=(bP.top-bE.top)+bF}if(bP.left!=null){bM.left=(bP.left-bE.left)+bH}if("using" in bP){bP.using.call(bG,bM)}else{bI.css(bM)}}};b.fn.extend({position:function(){if(!this[0]){return null}var bF=this[0],bE=this.offsetParent(),bG=this.offset(),e=ak.test(bE[0].nodeName)?{top:0,left:0}:bE.offset();bG.top-=parseFloat(b.css(bF,"marginTop"))||0;bG.left-=parseFloat(b.css(bF,"marginLeft"))||0;e.top+=parseFloat(b.css(bE[0],"borderTopWidth"))||0;e.left+=parseFloat(b.css(bE[0],"borderLeftWidth"))||0;return{top:bG.top-e.top,left:bG.left-e.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||aB.body;while(e&&(!ak.test(e.nodeName)&&b.css(e,"position")==="static")){e=e.offsetParent}return e})}});b.each(["Left","Top"],function(bE,e){var bF="scroll"+e;b.fn[bF]=function(bI){var bG,bH;if(bI===U){bG=this[0];if(!bG){return null}bH=aR(bG);return bH?("pageXOffset" in bH)?bH[bE?"pageYOffset":"pageXOffset"]:b.support.boxModel&&bH.document.documentElement[bF]||bH.document.body[bF]:bG[bF]}return this.each(function(){bH=aR(this);if(bH){bH.scrollTo(!bE?bI:b(bH).scrollLeft(),bE?bI:b(bH).scrollTop())}else{this[bF]=bI}})}});function aR(e){return b.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:false}b.each(["Height","Width"],function(bE,e){var bF=e.toLowerCase();b.fn["inner"+e]=function(){return this[0]?parseFloat(b.css(this[0],bF,"padding")):null};b.fn["outer"+e]=function(bG){return this[0]?parseFloat(b.css(this[0],bF,bG?"margin":"border")):null};b.fn[bF]=function(bH){var bI=this[0];if(!bI){return bH==null?null:this}if(b.isFunction(bH)){return this.each(function(bM){var bL=b(this);bL[bF](bH.call(this,bM,bL[bF]()))})}if(b.isWindow(bI)){var bJ=bI.document.documentElement["client"+e];return bI.document.compatMode==="CSS1Compat"&&bJ||bI.document.body["client"+e]||bJ}else{if(bI.nodeType===9){return Math.max(bI.documentElement["client"+e],bI.body["scroll"+e],bI.documentElement["scroll"+e],bI.body["offset"+e],bI.documentElement["offset"+e])}else{if(bH===U){var bK=b.css(bI,bF),bG=parseFloat(bK);return b.isNaN(bG)?bK:bG}else{return this.css(bF,typeof bH==="string"?bH:bH+"px")}}}}});bl.jQuery=bl.$=b})(window);jQuery.Buffer=(function(){var b=function(c){if(c){this.assign(c)}this._bufferedCommandList=[];this._bufferedCommands={}};b._buffers=[];b._pool=[];b.bufferForElement=function(c){if(c._jquery_buffer){return c._jquery_buffer}return this.bufferFromPool().assign(c)};b.bufferFromPool=function(){var c=null;if(this._pool.length===0){c=new b()}else{c=this._pool.pop()}b._buffers.push(c);if(!this.flushingScheduled){this.scheduleFlushing()}return c};b.returnToPool=function(c){c.unassign();this._pool.push(c)};b.scheduleFlushing=function(){this.flushingScheduled=true};b.flush=function(){var f=this._buffers,e,c=f.length;for(e=0;e<c;e++){f[e].flush();this.returnToPool(f[e])}this._buffers=[];this.flushingScheduled=false};b.prototype.assign=function(c){if(this._el){this.unassign()}this._el=c;this._el._jquery_buffer=this;return this};b.prototype.unassign=function(){if(!this._el){return}this._el._jquery_buffer=undefined;this._el=undefined;return this};b.prototype.flush=function(){var g=this._bufferedCommandList,f=g.length,e,j;for(e=0;e<f;e++){j=g[e];this[j](this._bufferedCommands[j]);delete this._bufferedCommands[j]}this._bufferedCommandList.length=0;this.unassign()};b.prototype.$=function(c,e){if(!e){e=this._el}if(c===""||c===undefined){c=e;e=undefined}return jQuery(c,e)};b.prototype.bufferedCommand=function(c){if(!this._bufferedCommands[c]){this._bufferedCommands[c]={};this._bufferedCommandList.push(c)}return this._bufferedCommands[c]};b.prototype.hasBufferedCommand=function(c){return !!this._bufferedCommands[c]};b.prototype.html=function(e){var c=this.bufferedCommand("flushContent");if(e===undefined){return c.text||c.html||this.$().html()}c.text=undefined;c.html=e};b.prototype.text=function(e){var c=this.bufferedCommand("flushContent");if(e===undefined){return c.text||c.html||this.$().text()}c.text=e;c.html=undefined};b.prototype.flushContent=function(c){if(c.text!==undefined){this.$().text(c.text)}else{if(c.html!==undefined){this.$().html(c.html)}}};b.prototype.attr=function(g,j){if(typeof g==="object"){for(var e in g){this.attr(e,g[e])}return}if(g==="class"){if(j===undefined){return this.setClass().join(" ")}else{if(typeof j==="string"||jQuery.isArray(j)){var c=this.bufferedCommand("flushClassNames");c.classNames=this._hashFromClassNames(j);return}else{return this.setClass(j)}}}else{if(g==="html"){return this.html(j)}else{if(g==="text"){return this.text(j)}else{if(g==="style"){return this.resetStyles(j)}}}}var f=this.bufferedCommand("flushAttributes");if(!f.attr){f.attr={}}f.attr[g]=j};b.prototype.flushAttributes=function(g){var c=g.attr,j=this.$(),e;for(var f in c){if(!c.hasOwnProperty(f)){continue}e=c[f];if(e!==null){j.attr(f,e)}else{j.removeAttr(f)}}};b.prototype._STYLE_REGEX=/-?\s*([^:\s]+)\s*:\s*([^;]+)\s*;?/g;b.prototype._camelizeStyleName=function(c){var e=c.match(/^-(webkit|moz|o)-/),f=c.camelize();if(e){return f.substr(0,1).toUpperCase()+f.substr(1)}else{return f}};b.prototype._dasherizeStyleName=function(c){var e=SC.String.dasherize(c);if(e.match(/^(webkit|moz|ms|o)-/)){e="-"+e}return e};b.prototype._loadStyles=function(c){if(!c){c=this.$().attr("style")}if(c&&(c=c.toString()).length>0){if(SC.browser.msie){c=c.toLowerCase()}var g={};var f=this._STYLE_REGEX,e;f.lastIndex=0;while(e=f.exec(c)){g[this._camelizeStyleName(e[1])]=e[2]}return g}else{return{}}};b.prototype.resetStyles=function(e){var c=this.bufferedCommand("flushStyles");c._styles=this._loadStyles(e||" ")};b.prototype.styles=function(){var c=this.bufferedCommand("flushStyles");if(!c._styles){c._styles=this._loadStyles()}return c._styles};b.prototype.css=function(f,g){if(typeof f==="object"){for(var c in f){this.css(c,f[c])}return}var e=this.bufferedCommand("flushStyles");if(!e._styles){e._styles=this._loadStyles()}e._styles[f]=g};b.prototype.flushStyles=function(f){var j=f._styles;var n="";var e,k,g=[],c=0;for(e in j){if(!j.hasOwnProperty(e)){continue}k=j[e];if(k===null){continue}if(typeof k==="number"&&e!=="zIndex"&&e!=="fontWeight"&&e!=="opacity"){k+="px"}g[c++]=this._dasherizeStyleName(e)+": "+k}this.$().attr("style",g.join("; "))};b.prototype._hashFromClassNames=function(g){if(typeof g==="string"){g=g.split(" ")}var e,c=g.length,f={};for(e=0;e<c;e++){f[g[e]]=true}return f};b.prototype.setClass=function(j,c){var g=this.bufferedCommand("flushClassNames"),f;if(j===undefined){if(!g.classNames){g.classNames=this._hashFromClassNames(this._el.className)}var k=g.classNames,e=[];for(f in k){if(f&&k[f]){e.push(f)}}return e}if(typeof j==="object"){if(!g.classNames){g.classNames=this._hashFromClassNames(this._el.className)}for(f in j){g.classNames[f]=j[f]}return}if(!g.classNames){g.classNames=this._hashFromClassNames(this._el.className)}g.classNames[j]=c||false};b.prototype.hasClass=function(e){var c=this.bufferedCommand("flushClassNames");if(!c.classNames){c.classNames=this._hashFromClassNames(this._el.className)}return !!c.classNames[e]};b.prototype.addClass=function(g){if(!g){return}var f=this.bufferedCommand("flushClassNames");if(!f.classNames){f.classNames=this._hashFromClassNames(this._el.className)}if(typeof g==="string"){g=g.split(" ")}var e,c=g.length;for(e=0;e<c;e++){f.classNames[jQuery.trim(g[e])]=true}};b.prototype.removeClass=function(e){var c=this.bufferedCommand("flushClassNames");if(!c.classNames){c.classNames=this._hashFromClassNames(this._el.className)}c.classNames[e]=false};b.prototype.resetClassNames=function(e){var c=this.bufferedCommand("flushClassNames");c.classNames={}};b.prototype.flushClassNames=function(f){var g=[];var j=f.classNames,e;for(e in j){if(j[e]){g.push(e)}}this.$().attr("class",g.join(" "))};function a(e){for(var c in e){if(typeof e[c]==="function"){e[c].displayName=c}}}a(b);a(b.prototype);return b})();(function(){jQuery.buffer=jQuery.bufferedJQuery=jQuery.sub();jQuery.bufferedJQuery.fn.extend({html:function(e){if(e===undefined){if(this.length<1){return undefined}return jQuery.Buffer.bufferForElement(this[c]).html()}var a=this.length,c;for(c=0;c<a;c++){var b=jQuery.Buffer.bufferForElement(this[c]);b.html(e)}return this},text:function(e){if(e===undefined){if(this.length<1){return undefined}return jQuery.Buffer.bufferForElement(this[c]).text()}var a=this.length,c;for(c=0;c<a;c++){var b=jQuery.Buffer.bufferForElement(this[c]);b.text(e)}return this},attr:function(e,f){if(typeof f==="undefined"&&typeof e==="string"){if(this.length<1){return false}var b=jQuery.Buffer.bufferForElement(this[0]);return b.attr(e)}var a=this.length,c;for(c=0;c<a;c++){var b=jQuery.Buffer.bufferForElement(this[c]);b.attr(e,f)}return this},hasClass:function(a){if(this.length<1){return false}return jQuery.Buffer.bufferForElement(this[0]).hasClass(a)},setClass:function(f,c){var a=this.length,e;for(e=0;e<a;e++){var b=jQuery.Buffer.bufferForElement(this[e]);b.setClass(f,c)}return this},addClass:function(e){var a=this.length,c;for(c=0;c<a;c++){var b=jQuery.Buffer.bufferForElement(this[c]);b.addClass(e)}return this},removeClass:function(e){var a=this.length,c;for(c=0;c<a;c++){var b=jQuery.Buffer.bufferForElement(this[c]);b.removeClass(e)}return this},resetClassNames:function(){var a=this.length,c;for(c=0;c<a;c++){var b=jQuery.Buffer.bufferForElement(this[c]);b.resetClassNames()}return this},css:function(e,f){var a=this.length,c;for(c=0;c<a;c++){var b=jQuery.Buffer.bufferForElement(this[c]);b.css(e,f)}return this},styles:function(){if(this.length<1){return null}return jQuery.Buffer.bufferForElement(this[0]).styles()},resetStyles:function(){if(this.length<1){return null}jQuery.Buffer.bufferForElement(this[0]).resetStyles();return this}})})();jQuery.Buffer.scheduleFlushing=function(){SC.RunLoop.currentRunLoop.invokeOnce(function(){jQuery.Buffer.flush()});this.flushingScheduled=true};if(!window.require){window.require=function require(){}}if(!window.sc_require){window.sc_require=require}if(!window.sc_resource){window.sc_resource=function sc_resource(){}}sc_require("license");window.YES=true;window.NO=false;if(typeof console==="undefined"){window.console={};console.log=console.info=console.warn=console.error=function(){}}window.SC=window.SC||{};window.SproutCore=window.SproutCore||SC;SC=window.SC;SC.VERSION="1.6.0";SC._baseMixin=function(c){var g=Array.prototype.slice.call(arguments,1),a,f=g[0]||{},j=1,e=g.length,n,b,k;if(e===1){f=this||{};j=0}for(;j<e;j++){if(!(n=g[j])){continue}for(k in n){if(!n.hasOwnProperty(k)){continue}b=n[k];if(f===b){continue}if(b!==undefined&&(c||(f[k]===undefined))){f[k]=b}}}return f};SC.mixin=function(){var a=Array.prototype.slice.call(arguments);a.unshift(true);return SC._baseMixin.apply(this,a)};SC.supplement=function(){var a=Array.prototype.slice.call(arguments);a.unshift(false);return SC._baseMixin.apply(this,a)};SC.extend=SC.mixin;SC.mixin({T_ERROR:"error",T_OBJECT:"object",T_NULL:"null",T_CLASS:"class",T_HASH:"hash",T_FUNCTION:"function",T_UNDEFINED:"undefined",T_NUMBER:"number",T_BOOL:"boolean",T_ARRAY:"array",T_STRING:"string",typeOf:function(a){if(a===undefined){return SC.T_UNDEFINED}if(a===null){return SC.T_NULL}var b=jQuery.type(a);if(b==="function"){return a.isClass?SC.T_CLASS:SC.T_FUNCTION}else{if(b==="object"){if(SC.Error&&(a instanceof SC.Error)){return SC.T_ERROR}else{if(a instanceof SC.Object){return SC.T_OBJECT}else{return SC.T_HASH}}}}return b},none:function(a){return a==null},empty:function(a){return a===null||a===undefined||a===""},isArray:function(a){if(!a||a.setInterval){return false}if(Array.isArray&&Array.isArray(a)){return true}if(a.objectAt){return true}if(a.length!==undefined&&jQuery.type(a)==="object"){return true}return false},makeArray:function(a){return SC.isArray(a)?a:SC.A(a)},A:function(c){if(c===null||c===undefined){return[]}if(c.slice instanceof Function){if(typeof(c)==="string"){return[c]}else{return c.slice()}}if(c.toArray){return c.toArray()}if(!SC.isArray(c)){return[c]}var b=[],a=c.length;while(--a>=0){b[a]=c[a]}return b},guidKey:"SproutCore"+(SC.VERSION+Math.random()).replace(/\D/g,""),_guidPrefixes:{number:"nu",string:"st"},_guidCaches:{number:{},string:{}},_numberGuids:[],_stringGuids:{},_keyCache:{},guidFor:function(f){var b,c,e=typeof f;if(f===undefined){return"(undefined)"}if(f===null){return"(null)"}if(e===SC.T_NUMBER||e===SC.T_STRING){b=this._guidCaches[e];c=b[f];if(!c){c="st"+(jQuery.uuid++);b[f]=c}return c}else{if(e===SC.T_BOOL){return(f)?"(true)":"(false)"}}var a=this.guidKey;if(f[a]){return f[a]}if(f===Object){return"(Object)"}if(f===Array){return"(Array)"}return SC.generateGuid(f,"sc")},keyFor:function(e,c){var b,a=this._keyCache[e];if(!a){a=this._keyCache[e]={}}b=a[c];if(!b){b=a[c]=e+"_"+c}return b},generateGuid:function(c,b){var a=(b+(jQuery.uuid++));if(c){c[this.guidKey]=a}return a},hashFor:function(){var a=arguments.length,c="",g,e,b;for(b=0;b<a;++b){g=arguments[b];c+=(g&&(e=g.hash)&&(typeof e===SC.T_FUNCTION))?e.call(g):this.guidFor(g)}return c===""?null:c},isEqual:function(e,c){return this.hashFor(e)===this.hashFor(c)},compare:function(A,u){if(A===u){return 0}var n=SC.typeOf(A);var j=SC.typeOf(u);var b=SC.ORDER_DEFINITION_MAPPING;if(!b){var e=SC.ORDER_DEFINITION;b=SC.ORDER_DEFINITION_MAPPING={};var z,q;for(z=0,q=e.length;z<q;++z){b[e[z]]=z}delete SC.ORDER_DEFINITION}var B=b[n];var c=b[j];if(B<c){return -1}if(B>c){return 1}switch(n){case SC.T_BOOL:case SC.T_NUMBER:if(A<u){return -1}if(A>u){return 1}return 0;case SC.T_STRING:var o=A.localeCompare(u);if(o<0){return -1}if(o>0){return 1}return 0;case SC.T_ARRAY:var t=A.length;var p=u.length;var f=Math.min(t,p);var a=0;var k=0;var g=arguments.callee;while(a===0&&k<f){a=g(A[k],u[k]);k++}if(a!==0){return a}if(t<p){return -1}if(t>p){return 1}return 0;case SC.T_OBJECT:if(A.constructor.isComparable===YES){return A.constructor.compare(A,u)}return 0;default:return 0}},K:function(){return this},EMPTY_ARRAY:[],EMPTY_HASH:{},EMPTY_RANGE:{start:0,length:0},beget:function(c){if(c===null||c===undefined){return null}var a=SC.K;a.prototype=c;var b=new a();a.prototype=null;if(typeof c.didBeget==="function"){b=c.didBeget(b)}return b},copy:function(e,b){var c=e,a;if(e){if(e.isCopyable){return e.copy(b)}if(e.clone){return e.clone()}}switch(jQuery.type(e)){case"array":c=e.slice();if(b){a=c.length;while(a--){c[a]=SC.copy(c[a],true)}}break;case"object":c={};for(var f in e){c[f]=b?SC.copy(e[f],true):e[f]}}return c},merge:function(){var c={},b=arguments.length,a;for(a=0;a<b;a++){SC.mixin(c,arguments[a])}return c},keys:function(c){var a=[];for(var b in c){a.push(b)}return a},inspect:function(e){var a,b=[];for(var c in e){a=e[c];if(a==="toString"){continue}if(SC.typeOf(a)===SC.T_FUNCTION){a="function() { ... }"}b.push(c+": "+a)}return"{"+b.join(" , ")+"}"},tupleForPropertyPath:function(f,a){if(typeof f==="object"&&(f instanceof Array)){return f}var c;var b=f.indexOf("*");if(b<0){b=f.lastIndexOf(".")}c=(b>=0)?f.slice(b+1):f;var e=this.objectForPropertyPath(f,a,b);return(e&&c)?[e,c]:null},objectForPropertyPath:function(g,c,e){var j,b,f,a;if(!c){c=window}if(SC.typeOf(g)===SC.T_STRING){if(e===undefined){e=g.length}j=0;while((c)&&(j<e)){b=g.indexOf(".",j);if((b<0)||(b>e)){b=e}f=g.slice(j,b);c=c.get?c.get(f):c[f];j=b+1}if(j<e){c=undefined}}else{j=0;a=g.length;f=null;while((j<a)&&c){f=g[j++];if(f){c=(c.get)?c.get(f):c[f]}}if(j<a){c=undefined}}return c},requiredObjectForPropertyPath:function(c,a,b){var e=SC.objectForPropertyPath(c,a,b);if(!e){throw c+" could not be found"}return e}});SC.clone=SC.copy;SC.$A=SC.A;SC.didLoad=SC.K;SC.ORDER_DEFINITION=[SC.T_ERROR,SC.T_UNDEFINED,SC.T_NULL,SC.T_BOOL,SC.T_NUMBER,SC.T_STRING,SC.T_ARRAY,SC.T_HASH,SC.T_OBJECT,SC.T_FUNCTION,SC.T_CLASS];SC.Function={property:function(b,c){b.dependentKeys=SC.$A(c);var a=SC.guidFor(b);b.cacheKey="__cache__"+a;b.lastSetValueKey="__lastValue__"+a;b.isProperty=true;return b},cacheable:function(a,b){a.isProperty=true;if(!a.dependentKeys){a.dependentKeys=[]}a.isCacheable=(b===undefined)?true:b;return a},idempotent:function(a,b){a.isProperty=true;if(!a.dependentKeys){this.dependentKeys=[]}a.isVolatile=(b===undefined)?true:b;return a},enhance:function(a){a.isEnhancement=true;return a},observes:function(c,a){var g=a.length,b=null,f=null;while(--g>=0){var e=a[g];if((e.indexOf(".")<0)&&(e.indexOf("*")<0)){if(!b){b=c.localPropertyPaths=[]}b.push(e)}else{if(!f){f=c.propertyPaths=[]}f.push(e)}}return c}};sc_require("system/function");SC.mixin(Function.prototype,{property:function(){return SC.Function.property(this,arguments)},cacheable:function(a){return SC.Function.cacheable(this,a)},idempotent:function(a){return SC.Function.idempotent(this,a)},enhance:function(){return SC.Function.enhance(this)},observes:function(a){return SC.Function.observes(this,arguments)}});SC.ObserverSet={add:function(j,k,f){var g=SC.guidFor(j),c=SC.guidFor(k);var a=this._members,b=this.members;var e=a[g];if(!e){e=a[g]={}}if(e[c]===undefined){e[c]=b.length}else{return}b.push([j,k,f])},remove:function(j,k){var f=SC.guidFor(j),b=SC.guidFor(k);var e=this._members[f],a=this.members;if(!e){return false}var c=e[b];if(c===undefined){return false}if(c!==a.length-1){var g=(a[c]=a[a.length-1]);this._members[SC.guidFor(g[0])][SC.guidFor(g[1])]=c}a.pop();delete this._members[f][b];return true},invokeMethods:function(){var b=this.members,e;for(var c=0,a=b.length;c<a;c++){e=b[c];e[1].call(e[0])}},clone:function(){var c=SC.ObserverSet.create(),e=this.members;c._members=SC.clone(this._members);var f=c.members;for(var b=0,a=e.length;b<a;b++){f[b]=SC.clone(e[b]);f[b].length=3}return c},create:function(){return new SC.ObserverSet.constructor()},getMembers:function(){return this.members.slice(0)},constructor:function(){this._members={};this.members=[]}};SC.ObserverSet.constructor.prototype=SC.ObserverSet;SC.ObserverSet.slice=SC.ObserverSet.clone;SC._ChainObserver=function(b,a){this.property=b;this.root=a||this};SC._ChainObserver.createChain=function(g,p,j,a,b){var e=p.split("."),n=new SC._ChainObserver(e[0]),k=n;for(var f=1,c=e.length;f<c;f++){k=k.next=new SC._ChainObserver(e[f],n)}var o=n.tails=[k];n.objectDidChange(g);o.forEach(function(q){q.target=j;q.method=a;q.context=b});n.tails=null;return n};SC._ChainObserver.prototype={isChainObserver:true,object:null,property:null,next:null,root:null,target:null,method:null,tail:function(){if(this._tail){return this._tail}var a=this;while(a.next){a=a.next}this._tail=a;return a},objectDidChange:function(a){if(a===this.object){return}if(this.object){if(this.property==="@each"&&this.object._removeContentObserver){this.object._removeContentObserver(this)}else{if(this.object.removeObserver){this.object.removeObserver(this.property,this,this.propertyDidChange)}}}this.object=a;if(this.property==="@each"&&this.next){if(this.object&&this.object._addContentObserver){this.object._addContentObserver(this)}}else{if(this.object&&this.object.addObserver){this.object.addObserver(this.property,this,this.propertyDidChange)}this.propertyDidChange()}},propertyDidChange:function(){var b=this.object;var f=this.property;var e=(b&&b.get)?b.get(f):null;if(this.next){this.next.objectDidChange(e)}var g=this.target,j=this.method,c=this.context;if(g&&j){var a=b?b.propertyRevision:null;if(c){j.call(g,b,f,e,c,a)}else{j.call(g,b,f,e,a)}}},destroyChain:function(){var a=this.object;if(a&&a.removeObserver){a.removeObserver(this.property,this,this.propertyDidChange)}if(this.next){this.next.destroyChain()}this.next=this.target=this.method=this.object=this.context=null;return null}};sc_require("ext/function");sc_require("private/observer_set");sc_require("private/chain_observer");SC.LOG_OBSERVERS=NO;SC.Observable={isObservable:YES,automaticallyNotifiesObserversFor:function(a){return YES},get:function(c){var b=this[c],a;if(b===undefined){return this.unknownProperty(c)}else{if(b&&b.isProperty){if(b.isCacheable){a=this._kvo_cache;if(!a){a=this._kvo_cache={}}return(a[b.cacheKey]!==undefined)?a[b.cacheKey]:(a[b.cacheKey]=b.call(this,c))}else{return b.call(this,c)}}else{return b}}},set:function(n,j){var b=this[n],o=this.automaticallyNotifiesObserversFor(n),g=j,e,a,k,f;if(j===undefined&&SC.typeOf(n)===SC.T_HASH){var c=n;for(n in c){if(!c.hasOwnProperty(n)){continue}this.set(n,c[n])}return this}if(!o&&this._kvo_cacheable&&(a=this._kvo_cache)){e=this._kvo_cachedep;if(!e||(e=e[n])===undefined){e=this._kvo_computeCachedDependentsFor(n)}if(e){k=e.length;while(--k>=0){f=e[k];a[f.cacheKey]=a[f.lastSetValueKey]=undefined}}}if(b&&b.isProperty){a=this._kvo_cache;if(b.isVolatile||!a||(a[b.lastSetValueKey]!==j)){if(!a){a=this._kvo_cache={}}a[b.lastSetValueKey]=j;if(o){this.propertyWillChange(n)}g=b.call(this,n,j);if(b.isCacheable){a[b.cacheKey]=g}if(o){this.propertyDidChange(n,g,YES)}}}else{if(b===undefined){if(o){this.propertyWillChange(n)}this.unknownProperty(n,j);if(o){this.propertyDidChange(n,g)}}else{if(this[n]!==j){if(o){this.propertyWillChange(n)}g=this[n]=j;if(o){this.propertyDidChange(n,g)}}}}return this},unknownProperty:function(a,b){if(!(b===undefined)){this[a]=b}return b},beginPropertyChanges:function(){this._kvo_changeLevel=(this._kvo_changeLevel||0)+1;return this},endPropertyChanges:function(){this._kvo_changeLevel=(this._kvo_changeLevel||1)-1;var b=this._kvo_changeLevel,a=this._kvo_changes;if((b<=0)&&a&&(a.length>0)&&!SC.Observers.isObservingSuspended){this._notifyPropertyObservers()}return this},propertyWillChange:function(a){return this},propertyDidChange:function(u,q,c){this._kvo_revision=(this._kvo_revision||0)+1;var b=this._kvo_changeLevel||0,k,t,n,e,g=SC.LOG_OBSERVERS&&(this.LOG_OBSERVING!==NO);var o=this._kvo_property_chains;if(o){var j=o[u];if(j){this.beginPropertyChanges();j=SC.clone(j);j.forEach(function(v){v.notifyPropertyDidChange()});this.endPropertyChanges()}}var a=this._kvo_cache;if(a){if(!c){e=this[u];if(e&&e.isProperty){a[e.cacheKey]=a[e.lastSetValueKey]=undefined}}if(this._kvo_cacheable){k=this._kvo_cachedep;if(!k||(k=k[u])===undefined){k=this._kvo_computeCachedDependentsFor(u)}if(k){t=k.length;while(--t>=0){n=k[t];a[n.cacheKey]=a[n.lastSetValueKey]=undefined}}}}var f=SC.Observers.isObservingSuspended;if((b>0)||f){var p=this._kvo_changes;if(!p){p=this._kvo_changes=SC.CoreSet.create()}p.add(u);if(f){if(g){SC.Logger.log("%@%@: will not notify observers because observing is suspended".fmt(SC.KVO_SPACES,this))}SC.Observers.objectHasPendingChanges(this)}}else{this._notifyPropertyObservers(u)}return this},registerDependentKey:function(k,c){var f=this._kvo_dependents,n=this._kvo_chain_dependents,b=this[k],o,j,a,g,e;if(typeof c==="object"&&(c instanceof Array)){o=c;a=0}else{o=arguments;a=1}j=o.length;if(!f){this._kvo_dependents=f={}}while(--j>=a){g=o[j];if(g.indexOf(".")>=0){SC._PropertyChain.createChain(g,this,k).activate()}else{e=f[g];if(!e){e=f[g]=[]}e.push(k)}}},registerDependentKeyWithChain:function(c,a){var e=this._chainsFor(c),b;e.add(a)},removeDependentKeyWithChain:function(c,a){var e=this._chainsFor(c),b;e.remove(a);if(e.get("length")===0){delete this._kvo_property_chains[c]}},_chainsFor:function(a){this._kvo_property_chains=this._kvo_property_chains||{};var b=this._kvo_property_chains[a]||SC.CoreSet.create();this._kvo_property_chains[a]=b;return b},_kvo_addCachedDependents:function(b,g,k,c){var a=g.length,f,e,j;while(--a>=0){e=g[a];c.add(e);f=this[e];if(f&&(f instanceof Function)&&f.isProperty){if(f.isCacheable){b.push(f)}if((j=k[e])&&j.length>0){this._kvo_addCachedDependents(b,j,k,c)}}}},_kvo_computeCachedDependentsFor:function(c){var e=this._kvo_cachedep,g=this._kvo_dependents,f=g?g[c]:null,a,b;if(!e){e=this._kvo_cachedep={}}if(!f||f.length===0){return e[c]=null}a=e[c]=[];b=SC._TMP_SEEN_SET=(SC._TMP_SEEN_SET||SC.CoreSet.create());b.add(c);this._kvo_addCachedDependents(a,f,g,b);b.clear();if(a.length===0){a=e[c]=null}return a},_kvo_for:function(c,b){var a=this[c];if(!this._kvo_cloned){this._kvo_cloned={}}if(!a){a=this[c]=(b===undefined)?[]:b.create();this._kvo_cloned[c]=YES}else{if(!this._kvo_cloned[c]){a=this[c]=a.copy();this._kvo_cloned[c]=YES}}return a},addObserver:function(c,g,k,b){var e,a,f,j;if(k===undefined){k=g;g=this}if(!g){g=this}if(typeof k==="string"){k=g[k]}if(!k){throw"You must pass a method to addObserver()"}c=c.toString();if(c.indexOf(".")>=0){a=SC._ChainObserver.createChain(this,c,g,k,b);a.masterTarget=g;a.masterMethod=k;this._kvo_for(SC.keyFor("_kvo_chains",c)).push(a)}else{if((this[c]===undefined)&&(c.indexOf("@")===0)){this.get(c)}if(g===this){g=null}e=SC.keyFor("_kvo_observers",c);this._kvo_for(e,SC.ObserverSet).add(g,k,b);this._kvo_for("_kvo_observed_keys",SC.CoreSet).add(c)}if(this.didAddObserver){this.didAddObserver(c,g,k)}return this},removeObserver:function(c,g,k){var e,f,b,j,a;if(k===undefined){k=g;g=this}if(!g){g=this}if(typeof k==="string"){k=g[k]}if(!k){throw"You must pass a method to removeObserver()"}c=c.toString();if(c.indexOf(".")>=0){e=SC.keyFor("_kvo_chains",c);if(f=this[e]){f=this._kvo_for(e);a=f.length;while(--a>=0){b=f[a];if(b&&(b.masterTarget===g)&&(b.masterMethod===k)){f[a]=b.destroyChain()}}}}else{if(g===this){g=null}e=SC.keyFor("_kvo_observers",c);if(j=this[e]){j=this._kvo_for(e);j.remove(g,k);if(j.getMembers().length===0){this._kvo_for("_kvo_observed_keys",SC.CoreSet).remove(c)}}}if(this.didRemoveObserver){this.didRemoveObserver(c,g,k)}return this},hasObserverFor:function(b){SC.Observers.flush(this);var e=this[SC.keyFor("_kvo_observers",b)],c=this[SC.keyFor("_kvo_local",b)],a;if(c&&c.length>0){return YES}if(e&&e.getMembers().length>0){return YES}return NO},initObservable:function(){if(this._observableInited){return}this._observableInited=YES;var g,t,p,o,k,f,q,j,c,u,b,n,e,a;if(t=this._observers){j=t.length;for(g=0;g<j;g++){p=t[g];k=this[p];f=k.propertyPaths;q=(f)?f.length:0;for(c=0;c<q;c++){u=f[c];b=u.indexOf(".");if(b<0){this.addObserver(u,this,k)}else{if(u.indexOf("*")===0){this.addObserver(u.slice(1),this,k)}else{n=null;if(b===0){n=this;u=u.slice(1)}else{if(b===4&&u.slice(0,5)==="this."){n=this;u=u.slice(5)}else{if(b<0&&u.length===4&&u==="this"){n=this;u=""}}}SC.Observers.addObserver(u,this,k,n)}}}}}this.bindings=[];if(t=this._bindings){for(g=0,a=t.length;g<a;g++){p=t[g];o=this[p];e=p.slice(0,-7);this[p]=this.bind(e,o)}}if(t=this._properties){for(g=0,a=t.length;g<a;g++){p=t[g];if(o=this[p]){if(o.isCacheable){this._kvo_cacheable=YES}if(o.dependentKeys&&(o.dependentKeys.length>0)){this.registerDependentKey(p,o.dependentKeys)}}}}},observersForKey:function(a){SC.Observers.flush(this);var b=this[SC.keyFor("_kvo_observers",a)];return b?b.getMembers():[]},_notifyPropertyObservers:function(C){if(!this._observableInited){this.initObservable()}SC.Observers.flush(this);var j=SC.LOG_OBSERVERS&&!(this.LOG_OBSERVING===NO),v,A,t,e,u,q,z,w,o,a,g,B,c,n,f,b,k,p;if(j){k=SC.KVO_SPACES=(SC.KVO_SPACES||"")+"  ";SC.Logger.log('%@%@: notifying observers after change to key "%@"'.fmt(k,this,C))}e=this["_kvo_observers_*"];this._kvo_changeLevel=(this._kvo_changeLevel||0)+1;while(((A=this._kvo_changes)&&(A.length>0))||C){z=++this.propertyRevision;if(!A){A=SC.CoreSet.create()}this._kvo_changes=null;if(C==="*"){A.add("*");A.addEach(this._kvo_for("_kvo_observed_keys",SC.CoreSet))}else{if(C){A.add(C)}}if(t=this._kvo_dependents){for(u=0;u<A.length;u++){C=A[u];q=t[C];if(q&&(n=q.length)){if(j){SC.Logger.log("%@...including dependent keys for %@: %@".fmt(k,C,q))}p=this._kvo_cache;if(!p){p=this._kvo_cache={}}while(--n>=0){A.add(C=q[n]);if(f=this[C]){this[f.cacheKey]=undefined;p[f.cacheKey]=p[f.lastSetValueKey]=undefined}}}}}while(A.length>0){C=A.pop();v=this[SC.keyFor("_kvo_observers",C)];if(v){w=SC.clone(v.getMembers());o=w.length;for(g=0;g<o;g++){a=w[g];if(a[3]===z){continue}if(!a[1]){SC.Logger.log(a)}B=a[0]||this;c=a[1];b=a[2];a[3]=z;if(j){SC.Logger.log('%@...firing observer on %@ for key "%@"'.fmt(k,B,C))}if(b!==undefined){c.call(B,this,C,null,b,z)}else{c.call(B,this,C,null,z)}}}w=this[SC.keyFor("_kvo_local",C)];if(w){o=w.length;for(g=0;g<o;g++){a=w[g];c=this[a];if(c){if(j){SC.Logger.log('%@...firing local observer %@.%@ for key "%@"'.fmt(k,this,a,C))}c.call(this,this,C,null,z)}}}if(e&&C!=="*"){w=SC.clone(e.getMembers());o=w.length;for(g=0;g<o;g++){a=w[g];B=a[0]||this;c=a[1];b=a[2];if(j){SC.Logger.log('%@...firing * observer on %@ for key "%@"'.fmt(k,B,C))}if(b!==undefined){c.call(B,this,C,null,b,z)}else{c.call(B,this,C,null,z)}}}if(this.propertyObserver){if(j){SC.Logger.log('%@...firing %@.propertyObserver for key "%@"'.fmt(k,this,C))}this.propertyObserver(this,C,null,z)}}if(A){A.destroy()}C=null}this._kvo_changeLevel=(this._kvo_changeLevel||1)-1;if(j){SC.KVO_SPACES=k.slice(0,-2)}return YES},bind:function(a,c,f){var e,b;if(f!==undefined){c=[c,f]}b=typeof c;if(b==="string"||(b==="object"&&(c instanceof Array))){e=this[a+"BindingDefault"]||SC.Binding;e=e.beget().from(c)}else{e=c.beget()}e=e.to(a,this).connect();this.bindings.push(e);return e},didChangeFor:function(a){var b,g,f,o,e,c,k,n,j;a=SC.hashFor(a);b=this._kvo_didChange_valueCache;if(!b){b=this._kvo_didChange_valueCache={}}g=this._kvo_didChange_revisionCache;if(!g){g=this._kvo_didChange_revisionCache={}}f=b[a]||{};o=g[a]||{};e=false;c=this._kvo_revision||0;k=arguments.length;while(--k>=1){n=arguments[k];if(o[n]!=c){j=this.get(n);if(f[n]!==j){e=true;f[n]=j}}o[n]=c}b[a]=f;g[a]=o;return e},setIfChanged:function(a,b){if(b===undefined&&SC.typeOf(a)===SC.T_HASH){var c=a;for(a in c){if(!c.hasOwnProperty(a)){continue}this.setIfChanged(a,c[a])}return this}return(this.get(a)!==b)?this.set(a,b):this},getPath:function(b){var a=SC.tupleForPropertyPath(b,this);if(a===null||a[0]===null){return undefined}return SC.get(a[0],a[1])},setPath:function(c,b){if(c.indexOf(".")>=0){var a=SC.tupleForPropertyPath(c,this);if(!a||!a[0]){return null}a[0].set(a[1],b)}else{this.set(c,b)}return this},setPathIfChanged:function(c,b){if(c.indexOf(".")>=0){var a=SC.tupleForPropertyPath(c,this);if(!a||!a[0]){return null}if(a[0].get(a[1])!==b){a[0].set(a[1],b)}}else{this.setIfChanged(c,b)}return this},getEach:function(){var e=SC.A(arguments),c=[],a,b;for(a=0,b=e.length;a<b;a++){c[c.length]=this.getPath(e[a])}return c},incrementProperty:function(b,a){if(!a){a=1}this.set(b,(this.get(b)||0)+a);return this.get(b)},decrementProperty:function(b,a){if(!a){a=1}this.set(b,(this.get(b)||0)-a);return this.get(b)},toggleProperty:function(a,b,c){if(b===undefined){b=true}if(c===undefined){c=false}b=(this.get(a)==b)?c:b;this.set(a,b);return this.get(a)},notifyPropertyChange:function(a,b){this.propertyWillChange(a);this.propertyDidChange(a,b);return this},allPropertiesDidChange:function(){this._kvo_cache=null;this._notifyPropertyObservers("*");return this},addProbe:function(a){this.addObserver(a,SC.logChange)},removeProbe:function(a){this.removeObserver(a,SC.logChange)},logProperty:function(){var b=SC.$A(arguments),e,c,a;for(a=0,c=b.length;a<c;a++){e=b[a];SC.Logger.log("%@:%@: ".fmt(SC.guidFor(this),e),this.get(e))}},propertyRevision:1};SC.logChange=function logChange(c,a,b){SC.Logger.log("CHANGE: %@[%@] => %@".fmt(c,a,c.get(a)))};SC.mixin(SC,{get:function(a,b){if(!a){return undefined}if(b===undefined){return this[a]}if(a.get){return a.get(b)}return a[b]},getPath:function(a,b){if(b===undefined){b=a;a=window}return SC.objectForPropertyPath(b,a)}});SC.mixin(Array.prototype,SC.Observable);SC.Enumerator=function(a){this.enumerable=a;this.reset();return this};SC.Enumerator.prototype={nextObject:function(){var c=this._index;var a=this._length;if(c>=a){return undefined}var b=this.enumerable.nextObject(c,this._previousObject,this._context);this._previousObject=b;this._index=c+1;if(c>=a){this._context=SC.Enumerator._pushContext(this._context)}return b},reset:function(){var b=this.enumerable;if(!b){throw SC.$error("Enumerator has been destroyed")}this._length=b.get?b.get("length"):b.length;var a=this._length;this._index=0;this._previousObject=null;this._context=(a>0)?SC.Enumerator._popContext():null},destroy:function(){this.enumerable=this._length=this._index=this._previousObject=this._context=null}};SC.Enumerator.create=function(a){return new SC.Enumerator(a)};SC.Enumerator._popContext=function(){var a=this._contextCache?this._contextCache.pop():null;return a||{}};SC.Enumerator._pushContext=function(b){this._contextCache=this._contextCache||[];var a=this._contextCache;a.push(b);return null};sc_require("core");sc_require("ext/function");sc_require("system/enumerator");SC.Enumerable={isEnumerable:YES,nextObject:function(a,c,b){return this.objectAt?this.objectAt(a):this[a]},firstObject:function(){if(this.get("length")===0){return undefined}if(this.objectAt){return this.objectAt(0)}var b=SC.Enumerator._popContext(),a;a=this.nextObject(0,null,b);b=SC.Enumerator._pushContext(b);return a}.property(),lastObject:function(){var a=this.get("length");if(a===0){return undefined}if(this.objectAt){return this.objectAt(a-1)}}.property(),enumerator:function(){return SC.Enumerator.create(this)},forEach:function(j,g){if(typeof j!=="function"){throw new TypeError()}var b=this.get?this.get("length"):this.length;if(g===undefined){g=null}var f=null;var c=SC.Enumerator._popContext();for(var a=0;a<b;a++){var e=this.nextObject(a,f,c);j.call(g,e,a,this);f=e}f=null;c=SC.Enumerator._pushContext(c);return this},getEach:function(a){return this.map(function(b){return b?(b.get?b.get(a):b[a]):null},this)},setEach:function(a,b){this.forEach(function(c){if(c){if(c.set){c.set(a,b)}else{c[a]=b}}},this);return this},map:function(k,j){if(typeof k!=="function"){throw new TypeError()}var b=this.get?this.get("length"):this.length;if(j===undefined){j=null}var c=[];var g=null;var e=SC.Enumerator._popContext();for(var a=0;a<b;a++){var f=this.nextObject(a,g,e);c[a]=k.call(j,f,a,this);g=f}g=null;e=SC.Enumerator._pushContext(e);return c},mapProperty:function(a){return this.map(function(b){return b?(b.get?b.get(a):b[a]):null})},filter:function(k,j){if(typeof k!=="function"){throw new TypeError()}var b=this.get?this.get("length"):this.length;if(j===undefined){j=null}var c=[];var g=null;var e=SC.Enumerator._popContext();for(var a=0;a<b;a++){var f=this.nextObject(a,g,e);if(k.call(j,f,a,this)){c.push(f)}g=f}g=null;e=SC.Enumerator._pushContext(e);return c},sortProperty:function(b){var c=(typeof b===SC.T_STRING)?arguments:b,a=c.length,e;if(this instanceof Array){e=this}else{e=[];this.forEach(function(f){e.push(f)})}if(!e){return[]}return e.sort(function(j,g){var f,n,p,o,k=0;for(f=0;k===0&&f<a;f++){n=c[f];p=j?(j.get?j.get(n):j[n]):null;o=g?(g.get?g.get(n):g[n]):null;k=SC.compare(p,o)}return k})},filterProperty:function(o,g){var e=this.get?this.get("length"):this.length;var f=[];var n=null;var b=SC.Enumerator._popContext();for(var j=0;j<e;j++){var c=this.nextObject(j,n,b);var k=c?(c.get?c.get(o):c[o]):null;var a=(g===undefined)?!!k:SC.isEqual(k,g);if(a){f.push(c)}n=c}n=null;b=SC.Enumerator._pushContext(b);return f},find:function(k,e){var c=this.get?this.get("length"):this.length;if(e===undefined){e=null}var j=null,b,n=NO,f=null;var a=SC.Enumerator._popContext();for(var g=0;g<c&&!n;g++){b=this.nextObject(g,j,a);if(n=k.call(e,b,g,this)){f=b}j=b}b=j=null;a=SC.Enumerator._pushContext(a);return f},findProperty:function(n,g){var c=this.get?this.get("length"):this.length;var o=NO,e=null,k=null,b,j;var a=SC.Enumerator._popContext();for(var f=0;f<c&&!o;f++){b=this.nextObject(f,k,a);j=b?(b.get?b.get(n):b[n]):null;o=(g===undefined)?!!j:SC.isEqual(j,g);if(o){e=b}k=b}k=b=null;a=SC.Enumerator._pushContext(a);return e},every:function(k,j){if(typeof k!=="function"){throw new TypeError()}var b=this.get?this.get("length"):this.length;if(j===undefined){j=null}var c=YES;var g=null;var e=SC.Enumerator._popContext();for(var a=0;c&&(a<b);a++){var f=this.nextObject(a,g,e);if(!k.call(j,f,a,this)){c=NO}g=f}g=null;e=SC.Enumerator._pushContext(e);return c},everyProperty:function(n,f){var c=this.get?this.get("length"):this.length;var e=YES;var k=null;var a=SC.Enumerator._popContext();for(var g=0;e&&(g<c);g++){var b=this.nextObject(g,k,a);var j=b?(b.get?b.get(n):b[n]):null;e=(f===undefined)?!!j:SC.isEqual(j,f);k=b}k=null;a=SC.Enumerator._pushContext(a);return e},some:function(k,j){if(typeof k!=="function"){throw new TypeError()}var b=this.get?this.get("length"):this.length;if(j===undefined){j=null}var c=NO;var g=null;var e=SC.Enumerator._popContext();for(var a=0;(!c)&&(a<b);a++){var f=this.nextObject(a,g,e);if(k.call(j,f,a,this)){c=YES}g=f}g=null;e=SC.Enumerator._pushContext(e);return c},someProperty:function(n,f){var c=this.get?this.get("length"):this.length;var e=NO;var k=null;var a=SC.Enumerator._popContext();for(var g=0;!e&&(g<c);g++){var b=this.nextObject(g,k,a);var j=b?(b.get?b.get(n):b[n]):null;e=(f===undefined)?!!j:SC.isEqual(j,f);k=b}k=null;a=SC.Enumerator._pushContext(a);return e},reduce:function(j,k,n){if(typeof j!=="function"){throw new TypeError()}var c=this.get?this.get("length"):this.length;if(c===0&&k===undefined){throw new TypeError()}var e=k;var g=null;var a=SC.Enumerator._popContext();for(var f=0;f<c;f++){var b=this.nextObject(f,g,a);if(b!==null){if(e===undefined){e=b}else{e=j.call(null,e,b,f,this,n)}}g=b}g=null;a=SC.Enumerator._pushContext(a);if(e===undefined){throw new TypeError()}return e},invoke:function(k){var f=this.get?this.get("length"):this.length;if(f<=0){return[]}var n;var j=[];var c=arguments.length;if(c>1){for(n=1;n<c;n++){j.push(arguments[n])}}var g=[];var o=null;var b=SC.Enumerator._popContext();for(n=0;n<f;n++){var e=this.nextObject(n,o,b);var a=e?e[k]:null;if(a){g[n]=a.apply(e,j)}o=e}o=null;b=SC.Enumerator._pushContext(b);return g},invokeWhile:function(e,n){var g=this.get?this.get("length"):this.length;if(g<=0){return null}var o;var k=[];var c=arguments.length;if(c>2){for(o=2;o<c;o++){k.push(arguments[o])}}var j=e;var p=null;var b=SC.Enumerator._popContext();for(o=0;(j===e)&&(o<g);o++){var f=this.nextObject(o,p,b);var a=f?f[n]:null;if(a){j=a.apply(f,k)}p=f}p=null;b=SC.Enumerator._pushContext(b);return j},toArray:function(){var a=[];this.forEach(function(b){a.push(b)},this);return a},groupBy:function(n){var c=this.get?this.get("length"):this.length,e=[],k=null,a=SC.Enumerator._popContext(),f=[],o=[],g,b,j;for(g=0;g<c;g++){b=this.nextObject(g,k,a);j=b?(b.get?b.get(n):b[n]):null;if(SC.none(f[j])){f[j]=[];o.push(j)}f[j].push(b);k=b}k=null;a=SC.Enumerator._pushContext(a);for(g=0,c=o.length;g<c;g++){e.push(f[o[g]])}return e}};SC._buildReducerFor=function(a,b){return function(e,f){var g=this[a];if(SC.typeOf(g)!==SC.T_FUNCTION){return this.unknownProperty?this.unknownProperty(e,f):null}else{var c=SC.Enumerable.reduce.call(this,g,null,b);return c}}.property("[]")};SC.Reducers={"[]":function(a,b){return this}.property(),enumerableContentDidChange:function(c,a,b){this.notifyPropertyChange("[]")},reducedProperty:function(n,j,g){if(!n||typeof n!==SC.T_STRING||n.charAt(0)!=="@"){return undefined}var e=n.match(/^@([^(]*)(\(([^)]*)\))?$/);if(!e||e.length<2){return undefined}var k=e[1];var o=e[3];k="reduce"+k.slice(0,1).toUpperCase()+k.slice(1);var a=this[k];if(SC.typeOf(a)!==SC.T_FUNCTION){return undefined}if(g===NO){return SC.Enumerable.reduce.call(this,a,null,o)}var c=SC._buildReducerFor(k,o);var b=this.constructor.prototype;if(b){b[n]=c;var f=b._properties||[];f.push(n);b._properties=f;this.registerDependentKey(n,"[]")}return SC.Enumerable.reduce.call(this,a,null,o)},reduceMax:function(a,f,b,g,c){if(c&&f){f=f.get?f.get(c):f[c]}if(a===null){return f}return(f>a)?f:a},reduceMaxObject:function(b,g,c,j,f){var a=b,k=g;if(f){if(g){k=g.get?g.get(f):g[f]}if(b){a=b.get?b.get(f):b[f]}}if(a===null){return g}return(k>a)?g:b},reduceMin:function(a,f,b,g,c){if(c&&f){f=f.get?f.get(c):f[c]}if(a===null){return f}return(f<a)?f:a},reduceMinObject:function(b,g,c,j,f){var a=b,k=g;if(f){if(g){k=g.get?g.get(f):g[f]}if(b){a=b.get?b.get(f):b[f]}}if(a===null){return g}return(k<a)?g:b},reduceAverage:function(b,j,f,k,g){if(g&&j){j=j.get?j.get(g):j[g]}var c=(b||0)+j;var a=k.get?k.get("length"):k.length;if(f>=a-1){c=c/a}return c},reduceSum:function(a,f,b,g,c){if(c&&f){f=f.get?f.get(c):f[c]}return(a===null)?f:a+f}};SC.mixin(SC.Enumerable,SC.Reducers);SC.mixin(Array.prototype,SC.Reducers);Array.prototype.isEnumerable=YES;(function(){var a={nextObject:SC.Enumerable.nextObject,enumerator:SC.Enumerable.enumerator,firstObject:SC.Enumerable.firstObject,lastObject:SC.Enumerable.lastObject,sortProperty:SC.Enumerable.sortProperty,mapProperty:function(j){var f=this.length;var g=[];for(var e=0;e<f;e++){var k=this[e];g[e]=k?(k.get?k.get(j):k[j]):null}return g},filterProperty:function(k,o){var g=this.length;var j=[];for(var f=0;f<g;f++){var n=this[f];var p=n?(n.get?n.get(k):n[k]):null;var e=(o===undefined)?!!p:SC.isEqual(p,o);if(e){j.push(n)}}return j},groupBy:function(k){var f=this.length,j=[],o=[],g=[],e,n,p;for(e=0;e<f;e++){n=this[e];p=n?(n.get?n.get(k):n[k]):null;if(SC.none(o[p])){o[p]=[];g.push(p)}o[p].push(n)}for(e=0,f=g.length;e<f;e++){j.push(o[g[e]])}return j},find:function(o,n){if(typeof o!=="function"){throw new TypeError()}var f=this.length;if(n===undefined){n=null}var j,g=null,k=NO;for(var e=0;e<f&&!k;e++){j=this[e];if(k=o.call(n,j,e,this)){g=j}}j=null;return g},findProperty:function(j,o){var f=this.length;var k,p,n=NO,g=null;for(var e=0;e<f&&!n;e++){p=(k=this[e])?(k.get?k.get(j):k[j]):null;n=(o===undefined)?!!p:SC.isEqual(p,o);if(n){g=k}}k=null;return g},everyProperty:function(j,n){var f=this.length;var g=YES;for(var e=0;g&&(e<f);e++){var k=this[e];var o=k?(k.get?k.get(j):k[j]):null;g=(n===undefined)?!!o:SC.isEqual(o,n)}return g},someProperty:function(j,n){var f=this.length;var g=NO;for(var e=0;!g&&(e<f);e++){var k=this[e];var o=k?(k.get?k.get(j):k[j]):null;g=(n===undefined)?!!o:SC.isEqual(o,n)}return g},invoke:function(g){var f=this.length;if(f<=0){return[]}var e;var k=[];var o=arguments.length;if(o>1){for(e=1;e<o;e++){k.push(arguments[e])}}var j=[];for(e=0;e<f;e++){var n=this[e];var p=n?n[g]:null;if(p){j[e]=p.apply(n,k)}}return j},invokeWhile:function(g,p){var k=this.length;if(k<=0){return null}var q;var o=[];var f=arguments.length;if(f>2){for(q=2;q<f;q++){o.push(arguments[q])}}var n=g;for(q=0;(n===g)&&(q<k);q++){var j=this[q];var e=j?j[p]:null;if(e){n=e.apply(j,o)}}return n},toArray:function(){var f=this.length;if(f<=0){return[]}var g=[];for(var e=0;e<f;e++){var j=this[e];g.push(j)}return g},getEach:function(j){var g=[];var f=this.length;for(var e=0;e<f;e++){var k=this[e];g[e]=k?(k.get?k.get(j):k[j]):null}return g},setEach:function(g,j){var f=this.length;for(var e=0;e<f;e++){var k=this[e];if(k){if(k.set){k.set(g,j)}else{k[g]=j}}}return this}};var c={forEach:function(k,j){if(typeof k!=="function"){throw new TypeError()}if(j===undefined){j=null}for(var f=0,e=this.length;f<e;f++){var g=this[f];k.call(j,g,f,this)}return this},map:function(n,k){if(typeof n!=="function"){throw new TypeError()}if(k===undefined){k=null}var f=[];for(var g=0,e=this.length;g<e;g++){var j=this[g];f[g]=n.call(k,j,g,this)}return f},filter:function(n,k){if(typeof n!=="function"){throw new TypeError()}if(k===undefined){k=null}var f=[];for(var g=0,e=this.length;g<e;g++){var j=this[g];if(n.call(k,j,g,this)){f.push(j)}}return f},every:function(n,k){if(typeof n!=="function"){throw new TypeError()}var f=this.length;if(k===undefined){k=null}var g=YES;for(var e=0;g&&(e<f);e++){var j=this[e];if(!n.call(k,j,e,this)){g=NO}}return g},some:function(n,k){if(typeof n!=="function"){throw new TypeError()}var f=this.length;if(k===undefined){k=null}var g=NO;for(var e=0;(!g)&&(e<f);e++){var j=this[e];if(n.call(k,j,e,this)){g=YES}}return g},reduce:function(o,g,n){if(typeof o!=="function"){throw new TypeError()}var f=this.length;if(f===0&&g===undefined){throw new TypeError()}var j=g;for(var e=0;e<f;e++){var k=this[e];if(k!==null){if(j===undefined){j=k}else{j=o.call(null,j,k,e,this,n)}}}if(j===undefined){throw new TypeError()}return j}};for(var b in c){if(!c.hasOwnProperty(b)){continue}if(!Array.prototype[b]||((typeof Prototype==="object")&&Prototype.Version.match(/^1\.6/))){Array.prototype[b]=c[b]}}SC.mixin(Array.prototype,a)})();SC.RangeObserver={isRangeObserver:YES,toString:function(){var a=this.indexes?this.indexes.toString():"SC.IndexSet<..>";return a.replace("IndexSet","RangeObserver(%@)".fmt(SC.guidFor(this)))},create:function(e,g,f,j,c,a){var b=SC.beget(this);b.source=e;b.indexes=g?g.frozenCopy():null;b.target=f;b.method=(typeof j==="string")?f[j]:j;b.context=c;b.isDeep=a||false;b.beginObserving();return b},extend:function(e){var c=SC.beget(this),b=arguments;for(var f=0,a=b.length;f<a;f++){SC.mixin(c,b[f])}return c},destroy:function(a){this.endObserving();return this},update:function(a,b){if(this.indexes&&this.indexes.isEqual(b)){return this}this.indexes=b?b.frozenCopy():null;this.endObserving().beginObserving();return this},beginObserving:function(){if(!this.isDeep){return this}var c=this.observing=this.observing||SC.CoreSet.create();var a=this._beginObservingForEach,b=this.source;if(!a){a=this._beginObservingForEach=function(e){var f=b.objectAt(e);if(f&&f.addObserver){c.push(f);f._kvo_needsRangeObserver=true}}}this.indexes.forEach(a);this.isObserving=false;SC.Observers.addPendingRangeObserver(this);return this},setupPending:function(b){var f=this.observing;if(this.isObserving||!f||(f.get("length")===0)){return true}if(f.contains(b)){this.isObserving=true;var c=this._setupPendingForEach;if(!c){var e=this.source,g=this.objectPropertyDidChange,a=this;c=this._setupPendingForEach=function(j){var o=e.objectAt(j),k=SC.guidFor(o),n;if(o&&o.addObserver){f.push(o);o.addObserver("*",a,g);n=a[k];if(n==null){a[k]=j}else{if(n.isIndexSet){n.add(j)}else{a[k]=SC.IndexSet.create(n).add(j)}}}}}this.indexes.forEach(c);return true}else{return false}},endObserving:function(){if(!this.isDeep){return this}var f=this.observing;if(this.isObserving){var b=this.objectPropertyDidChange,c=this.source,a,g,e;if(f){g=f.length;for(a=0;a<g;a++){e=f[a];e.removeObserver("*",this,b);this[SC.guidFor(e)]=null}f.length=0}this.isObserving=false}if(f){f.clear()}return this},rangeDidChange:function(b){var a=this.indexes;if(!b||!a||a.intersects(b)){this.endObserving();this.method.call(this.target,this.source,null,"[]",b,this.context);this.beginObserving()}return this},objectPropertyDidChange:function(e,g,j,a){var f=this.context,k=this.method,c=SC.guidFor(e),b=this[c];if(b&&!b.isIndexSet){b=this[c]=SC.IndexSet.create(b).freeze()}k.call(this.target,this.source,e,g,b,f||a,a)}};sc_require("ext/function");sc_require("mixins/observable");sc_require("mixins/enumerable");sc_require("system/range_observer");SC.OUT_OF_RANGE_EXCEPTION="Index out of range";SC.CoreArray={isSCArray:YES,replace:function(a,c,b){throw"replace() must be implemented to support SC.Array"},indexOf:function(e,c){var b,a=this.get("length");if(c===undefined){c=0}else{c=(c<0)?Math.ceil(c):Math.floor(c)}if(c<0){c+=a}for(b=c;b<a;b++){if(this.objectAt(b,YES)===e){return b}}return -1},lastIndexOf:function(e,c){var b,a=this.get("length");if(c===undefined){c=a-1}else{c=(c<0)?Math.ceil(c):Math.floor(c)}if(c<0){c+=a}for(b=c;b>=0;b--){if(this.objectAt(b)===e){return b}}return -1},objectAt:function(a){if(a<0){return undefined}if(a>=this.get("length")){return undefined}return this.get(a)},"[]":function(a,b){if(b!==undefined){this.replace(0,this.get("length"),b)}return this}.property(),insertAt:function(a,b){if(a>this.get("length")){throw SC.OUT_OF_RANGE_EXCEPTION}this.replace(a,0,[b]);return this},removeAt:function(e,a){var c=0,b=[];if(typeof e===SC.T_NUMBER){if((e<0)||(e>=this.get("length"))){throw SC.OUT_OF_RANGE_EXCEPTION}if(a===undefined){this.replace(e,1,b);return this}else{e=SC.IndexSet.create(e,a)}}this.beginPropertyChanges();e.forEachRange(function(g,f){g-=c;c+=f;this.replace(g,f,b)},this);this.endPropertyChanges();return this},removeObject:function(b){var c=this.get("length")||0;while(--c>=0){var a=this.objectAt(c);if(a==b){this.removeAt(c)}}return this},removeObjects:function(a){this.beginPropertyChanges();a.forEach(function(b){this.removeObject(b)},this);this.endPropertyChanges();return this},slice:function(b,e){var a=[];var c=this.get("length");if(SC.none(b)){b=0}if(SC.none(e)||(e>c)){e=c}while(b<e){a[a.length]=this.objectAt(b++)}return a},pushObject:function(a){this.insertAt(this.get("length"),a);return a},pushObjects:function(a){this.beginPropertyChanges();a.forEach(function(b){this.pushObject(b)},this);this.endPropertyChanges();return this},popObject:function(){var a=this.get("length");if(a===0){return null}var b=this.objectAt(a-1);this.removeAt(a-1);return b},shiftObject:function(){if(this.get("length")===0){return null}var a=this.objectAt(0);this.removeAt(0);return a},unshiftObject:function(a){this.insertAt(0,a);return a},unshiftObjects:function(a){this.beginPropertyChanges();a.forEach(function(b){this.unshiftObject(b)},this);this.endPropertyChanges();return this},isEqual:function(a){if(!a){return false}if(a==this){return true}var b=a.get("length");if(b!=this.get("length")){return false}while(--b>=0){if(!SC.isEqual(a.objectAt(b),this.objectAt(b))){return false}}return true},compact:function(){return this.without(null)},without:function(b){if(this.indexOf(b)<0){return this}var a=[];this.forEach(function(c){if(c!==b){a[a.length]=c}});return a},uniq:function(){var a=[];this.forEach(function(b){if(a.indexOf(b)<0){a[a.length]=b}});return a},flatten:function(){var a=[];this.forEach(function(b){if(b&&b.isEnumerable){a=a.pushObjects(b.flatten())}else{a.pushObject(b)}});return a},max:function(){return Math.max.apply(Math,this)},min:function(){return Math.min.apply(Math,this)},rangeObserverClass:SC.RangeObserver,contains:function(a){return this.indexOf(a)>=0},addRangeObserver:function(e,g,k,f){var a=this._array_rangeObservers;if(!a){a=this._array_rangeObservers=SC.CoreSet.create()}if(this._array_oldLength===undefined){this._array_oldLength=this.get("length")}var j=this.rangeObserverClass;var b=NO;var c=j.create(this,e,g,k,f,b);a.add(c);if(!this._array_isNotifyingRangeObservers){this._array_isNotifyingRangeObservers=YES;this.addObserver("[]",this,this._array_notifyRangeObservers)}return c},updateRangeObserver:function(b,a){return b.update(this,a)},removeRangeObserver:function(c){var b=c.destroy(this);var a=this._array_rangeObservers;if(a){a.remove(c)}return b},addArrayObservers:function(a){this._modifyObserverSet("add",a)},removeArrayObservers:function(a){this._modifyObserverSet("remove",a)},_modifyObserverSet:function(k,c){var f,b;var j=c.target||this;var a=c.willChange||"arrayWillChange";var g=c.didChange||"arrayDidChange";var e=c.context;if(typeof a==="string"){a=j[a]}if(typeof g==="string"){g=j[g]}f=this._kvo_for("_kvo_array_will_change",SC.ObserverSet);b=this._kvo_for("_kvo_array_did_change",SC.ObserverSet);f[k](j,a,e);b[k](j,g,e)},arrayContentWillChange:function(b,n,a){this._teardownContentObservers(b,n);var g,e,k,o;var j,c;var f=this._kvo_array_will_change;if(f){e=f.members;k=e.length;for(o=0;o<k;o++){g=e[o];j=g[0];c=g[1];c.call(j,b,n,a,this)}}},arrayContentDidChange:function(b,u,a){var e=this._array_rangeObservers,k,c,q;this.beginPropertyChanges();this.notifyPropertyChange("length");if(e&&e.length>0){q=this._array_rangeChanges;if(!q){q=this._array_rangeChanges=SC.IndexSet.create()}if(u===a){c=u}else{c=this.get("length")-b;if(u>a){c+=(u-a)}}q.add(b,c)}this._setupContentObservers(b,a);var j,g,p,t;var n,f;var o=this._kvo_array_did_change;if(o){if(b===undefined){b=0;u=this.get("length");a=0}g=o.members;p=g.length;for(t=0;t<p;t++){j=g[t];n=j[0];f=j[1];f.call(n,b,u,a,this)}}this.notifyPropertyChange("[]");this.endPropertyChanges();return this},_setupContentObservers:function(g,f){var c=this._kvo_for("_kvo_content_observed_keys",SC.CoreSet);var e;var b;if(c.get("length")>0){e=this.slice(g,g+f);var a=this;c.forEach(function(j){b=SC.keyFor("_kvo_content_observers",j);a._kvo_for(b).forEach(function(k){e.forEach(function(n){a._resumeChainObservingForItemWithChainObserver(n,k)})})})}},_teardownContentObservers:function(f,a){var c=this._kvo_for("_kvo_content_observed_keys",SC.CoreSet);var e;var b;if(c.get("length")>0){e=this.slice(f,f+a);c.forEach(function(g){b=SC.keyFor("_kvo_content_observers",g);e.forEach(function(j){j._kvo_for(b).forEach(function(k){k.destroyChain()})})})}},teardownEnumerablePropertyChains:function(b){var a=this._kvo_enumerable_property_chains;if(a){a.forEach(function(j){var e,c=b.get("length"),n=SC.guidFor(j),g,k,f="_kvo_enumerable_property_clones";j.notifyPropertyDidChange();for(e=0;e<c;e++){k=b.objectAt(e);g=k[f][n];g.deactivate();delete k[f][n]}},this)}return this},setupEnumerablePropertyChains:function(b){var a=this._kvo_enumerable_property_chains;if(a){a.forEach(function(f){var e,c=b.get("length");f.notifyPropertyDidChange();c=b.get("length");for(e=0;e<c;e++){this._clonePropertyChainToItem(f,b.objectAt(e))}},this)}return this},registerDependentKeyWithChain:function(f,c){var b="_kvo_enumerable_property_chains",g,e,j,a;g=this._kvo_for(b,SC.CoreSet);g.add(c);this.forEach(function(k){this._clonePropertyChainToItem(c,k)},this)},_clonePropertyChainToItem:function(c,e){var f=SC.clone(c),b="_kvo_enumerable_property_clones",a;f.object=e;a=e[b]=e[b]||{};a[SC.guidFor(c)]=f;f.activate(e)},removeDependentKeyWithChain:function(g,e){var b="_kvo_enumerable_property_chains",c="_kvo_enumerable_property_clones",j,f,k,a;this.forEach(function(n){n.removeDependentKeyWithChain(g,e);a=n[c];k=a[SC.guidFor(e)];k.deactivate(n)},this)},_resumeChainObservingForItemWithChainObserver:function(e,a){var b=SC.clone(a.next);var c=b.property;b.object=e;e.addObserver(c,b,b.propertyDidChange);if(a.root.tails){a.root.tails.pushObject(b.tail())}b.propertyDidChange();e._kvo_for(SC.keyFor("_kvo_content_observers",c)).push(b)},_addContentObserver:function(a){var b=a.next.property;this._kvo_for("_kvo_content_observed_keys",SC.CoreSet).push(b);var c=SC.keyFor("_kvo_content_observers",b);this._kvo_for(c).push(a);this._setupContentObservers(0,a.object.get("length"))},_removeContentObserver:function(a){var f,c;var e=this._kvo_content_observed_keys;var b=a.next.property;if(e.contains(b)){c=SC.keyFor("_kvo_content_observers",b);f=this._kvo_for(c);f.removeObject(a);this._teardownContentObservers(0,a.object.get("length"));if(f.length===0){this._kvo_for("_kvo_content_observed_keys").remove(b)}}},_array_notifyRangeObservers:function(){var c=this._array_rangeObservers,e=this._array_rangeChanges,b=c?c.length:0,a,f;if(b>0&&e&&e.length>0){for(a=0;a<b;a++){c[a].rangeDidChange(e)}e.clear()}}};SC.Array=SC.mixin({},SC.Enumerable,SC.CoreArray);sc_require("mixins/array");SC.supplement(Array.prototype,SC.CoreArray);SC.mixin(Array.prototype,{replace:function(b,f,e){if(this.isFrozen){throw SC.FROZEN_ERROR}var c;var a=e?(e.get?e.get("length"):e.length):0;this.arrayContentWillChange(b,f,a);if(a===0){this.splice(b,f)}else{c=[b,f].concat(e);this.splice.apply(this,c)}this.arrayContentDidChange(b,f,a);this.enumerableContentDidChange(b,f,a-f);return this},unknownProperty:function(b,c){var a=this.reducedProperty(b,c);if((c!==undefined)&&a===undefined){a=this[b]=c}return a}});if(Array.prototype.indexOf===SC.CoreArray.indexOf){Array.prototype.indexOf=function(e,c){var b,a=this.length;if(c===undefined){c=0}else{c=(c<0)?Math.ceil(c):Math.floor(c)}if(c<0){c+=a}for(b=c;b<a;b++){if(this[b]===e){return b}}return -1}}if(Array.prototype.lastIndexOf===SC.CoreArray.lastIndexOf){Array.prototype.lastIndexOf=function(e,c){var b,a=this.length;if(c===undefined){c=a-1}else{c=(c<0)?Math.ceil(c):Math.floor(c)}if(c<0){c+=a}for(b=c;b>=0;b--){if(this[b]===e){return b}}return -1}}if(!Date.now){Date.now=function(){return new Date().getTime()}}SC.String={fmt:function(c,b){var a=0;return c.replace(/%@([0-9]+)?/g,function(e,f){f=(f)?parseInt(f,0)-1:a++;e=b[f];return((e===null)?"(null)":(e===undefined)?"":e).toString()})},w:function(g){var e=[],f=g.split(" "),b=f.length,c,a=0;for(a=0;a<b;++a){c=f[a];if(c.length!==0){e.push(c)}}return e}};sc_require("system/string");SC.mixin(String.prototype,{fmt:function(){return SC.String.fmt(this,arguments)},w:function(){return SC.String.w(this)}});SC.Comparable={isComparable:YES,compare:function(e,c){throw"%@.compare() is not implemented".fmt(this.toString())}};SC.Copyable={isCopyable:YES,copy:function(a){var b=SC._object_className(this.constructor);throw"%@.copy() is not implemented".fmt(b)},frozenCopy:function(){var a=this.get?this.get("isFrozen"):this.isFrozen;if(a===YES){return this}else{if(a===undefined){throw"%@ does not support freezing".fmt(this)}else{return this.copy().freeze()}}}};SC.mixin(Array.prototype,SC.Copyable);Array.prototype.copy=function(b){var c=this.slice(),a;if(b){a=c.length;while(a--){c[a]=SC.copy(c[a],true)}}return c};SC.FROZEN_ERROR=new Error("Cannot modify a frozen object");SC.Freezable={isFreezable:YES,isFrozen:NO,freeze:function(){if(this.set){this.set("isFrozen",YES)}else{this.isFrozen=YES}return this}};SC.mixin(Array.prototype,SC.Freezable);sc_require("mixins/enumerable");sc_require("mixins/observable");sc_require("mixins/freezable");sc_require("mixins/copyable");SC.Set=SC.mixin({},SC.Enumerable,SC.Observable,SC.Freezable,{create:function(c){var e,b,f=SC.Set._pool,g=this.isObservable,a;if(!g&&c===undefined&&f.length>0){return f.pop()}else{e=SC.beget(this);if(g){e.initObservable()}if(c&&c.isEnumerable&&c.get("length")>0){e.isObservable=NO;if(c.isSCArray){a=c.get("length");for(b=0;b<a;b++){e.add(c.objectAt(b))}}else{if(c.isSet){a=c.length;for(b=0;b<a;b++){e.add(c[b])}}else{c.forEach(function(j){e.add(j)},this)}}e.isObservable=g}}return e},isSet:YES,length:0,firstObject:function(){return(this.length>0)?this[0]:undefined}.property(),clear:function(){if(this.isFrozen){throw SC.FROZEN_ERROR}this.length=0;return this},contains:function(b){if(b===null){return NO}var a=this[SC.hashFor(b)];return(!SC.none(a)&&(a<this.length)&&(this[a]===b))},isEqual:function(a){if(!a||!a.isSet||(a.get("length")!==this.get("length"))){return NO}var b=this.get("length");while(--b>=0){if(!a.contains(this[b])){return NO}}return YES},addSetObserver:function(a){if(!this.setObservers){this.setObservers=SC.CoreSet.create()}this.setObservers.add(a)},removeSetObserver:function(a){if(!this.setObservers){return}this.setObservers.remove(a)},add:function(f){if(this.isFrozen){throw SC.FROZEN_ERROR}if(SC.none(f)){return this}var c,e=((c=f.hash)&&(typeof c==="function"))?c.call(f):SC.guidFor(f),b=this[e],a=this.length;if((b>=a)||(this[b]!==f)){this[a]=f;this[e]=a;this.length=a+1;if(this.setObservers){this.didAddItem(f)}}if(this.isObservable){this.enumerableContentDidChange()}return this},addEach:function(c){if(this.isFrozen){throw SC.FROZEN_ERROR}if(!c||!c.isEnumerable){throw"%@.addEach must pass enumerable".fmt(this)}var a,b=this.isObservable;if(b){this.beginPropertyChanges()}if(c.isSCArray){a=c.get("length");while(--a>=0){this.add(c.objectAt(a))}}else{if(c.isSet){a=c.length;while(--a>=0){this.add(c[a])}}else{c.forEach(function(e){this.add(e)},this)}}if(b){this.endPropertyChanges()}return this},remove:function(g){if(this.isFrozen){throw SC.FROZEN_ERROR}if(g===null||g===undefined){return this}var c,e=(g&&(c=g.hash)&&(typeof c===SC.T_FUNCTION))?c.call(g):SC.guidFor(g),b=this[e],a=this.length,f;if((b===null||b===undefined)||(b>=a)||(this[b]!==g)){return this}delete this[e];if(b<(a-1)){f=this[b]=this[a-1];e=(f&&(c=f.hash)&&(typeof c===SC.T_FUNCTION))?c.call(f):SC.guidFor(f);this[e]=b}this.length=a-1;if(this.isObservable){this.enumerableContentDidChange()}if(this.setObservers){this.didRemoveItem(g)}return this},pop:function(){if(this.isFrozen){throw SC.FROZEN_ERROR}var a=(this.length>0)?this[this.length-1]:null;this.remove(a);return a},removeEach:function(c){if(this.isFrozen){throw SC.FROZEN_ERROR}if(!c||!c.isEnumerable){throw"%@.addEach must pass enumerable".fmt(this)}var a,b=this.isObservable;if(b){this.beginPropertyChanges()}if(c.isSCArray){a=c.get("length");while(--a>=0){this.remove(c.objectAt(a))}}else{if(c.isSet){a=c.length;while(--a>=0){this.remove(c[a])}}else{c.forEach(function(e){this.remove(e)},this)}}if(b){this.endPropertyChanges()}return this},copy:function(){return this.constructor.create(this)},destroy:function(){this.isFrozen=NO;if(!this.isObservable){SC.Set._pool.push(this.clear())}return this},forEach:function(c,e){var b=this.length;if(!e){e=this}for(var a=0;a<b;a++){c.call(e,this[a],a,this)}return this},toString:function(){var b=this.length,a,c=[];for(a=0;a<b;a++){c[a]=this[a]}return"SC.Set<%@>".fmt(c.join(","))},didAddItem:function(c){var e=this.setObservers;if(!e){return}var b=e.length,a;for(a=0;a<b;a++){e[a].didAddItem(this,c)}},didRemoveItem:function(c){var e=this.setObservers;if(!e){return}var b=e.length,a;for(a=0;a<b;a++){e[a].didRemoveItem(this,c)}},_pool:[],isObservable:YES});SC.Set.constructor=SC.Set;SC.Set.clone=SC.Set.copy;SC.Set.push=SC.Set.unshift=SC.Set.add;SC.Set.shift=SC.Set.pop;SC.Set.addObject=SC.Set.add;SC.Set.removeObject=SC.Set.remove;SC.Set._pool=[];SC.CoreSet=SC.beget(SC.Set);SC.CoreSet.isObservable=NO;SC.CoreSet.constructor=SC.CoreSet;sc_require("mixins/observable");sc_require("system/set");SC.Observers={queue:[],addObserver:function(c,e,f,b){var a;if(typeof c==="string"){a=SC.tupleForPropertyPath(c,b)}else{a=c}if(a&&a[0].addObserver){a[0].addObserver(a[1],e,f)}else{this.queue.push([c,e,f,b])}},removeObserver:function(g,j,k,e){var c,b,a,f;a=SC.tupleForPropertyPath(g,e);if(a){a[0].removeObserver(a[1],j,k)}c=this.queue.length;b=this.queue;while(--c>=0){f=b[c];if((f[0]===g)&&(f[1]===j)&&(f[2]==k)&&(f[3]===e)){b[c]=null}}},addPendingRangeObserver:function(a){var b=this.rangeObservers;if(!b){b=this.rangeObservers=SC.CoreSet.create()}b.add(a);return this},_TMP_OUT:[],flush:function(b){var j=this.queue,e,a=j.length;if(j&&a>0){var o=(this.queue=[]);for(e=0;e<a;e++){var p=j[e];if(!p){continue}var k=SC.tupleForPropertyPath(p[0],p[3]);if(k&&k[0].addObserver){k[0].addObserver(k[1],p[1],p[2])}else{o.push(p)}}}if(b._kvo_needsRangeObserver){var n=this.rangeObservers,g=n?n.get("length"):0,c=this._TMP_OUT,f;for(e=0;e<g;e++){f=n[e];if(f.setupPending(b)){c.push(f)}}if(c.length>0){n.removeEach(c)}c.length=0;b._kvo_needsRangeObserver=false}},isObservingSuspended:0,_pending:SC.CoreSet.create(),objectHasPendingChanges:function(a){this._pending.add(a)},suspendPropertyObserving:function(){this.isObservingSuspended++},resumePropertyObserving:function(){var c;if(--this.isObservingSuspended<=0){c=this._pending;this._pending=SC.CoreSet.create();var b,a=c.length;for(b=0;b<a;b++){c[b]._notifyPropertyObservers()}c.clear();c=null}}};sc_require("core");sc_require("mixins/observable");sc_require("private/observer_queue");sc_require("mixins/array");sc_require("system/set");SC.BENCHMARK_OBJECTS=NO;SC._detect_base=function _detect_base(c,b,a){return function e(){var g=b[a],f;if(!g){throw new Error("No '"+a+"' method was found on the superclass")}if(c.isEnhancement){f=Array.prototype.slice.call(arguments,1)}else{f=arguments}return g.apply(this,f)}};SC._object_extend=function _object_extend(j,g,u){if(!g){throw"SC.Object.extend expects a non-null value.  Did you forget to 'sc_require' something?  Or were you passing a Protocol to extend() as if it were a mixin?"}j._kvo_cloned=null;var G,t,C,f,k=j.concatenatedProperties,p=SC.K;var c,b;t=(k)?k.length:0;var a=(t>0)?{}:null;while(--t>=0){G=k[t];c=j[G];b=g[G];if(c){if(!(c instanceof Array)){c=SC.$A(c)}a[G]=(b)?c.concat(b):b}else{if(!(b instanceof Array)){b=SC.$A(b)}a[G]=b}}var F=j._bindings,q=NO;var D=j._observers,E=NO;var n=j._properties,e=NO;var z,o,v;var B=j.outlets,A=NO;if(g.outlets){B=(B||SC.EMPTY_ARRAY).concat(g.outlets);A=YES}for(G in g){if(G==="_kvo_cloned"){continue}if(!g.hasOwnProperty(G)){continue}var w=(a.hasOwnProperty(G)?a[G]:null)||g[G];if(G.length>7&&G.slice(-7)==="Binding"){if(!q){F=(F||SC.EMPTY_ARRAY).slice();q=YES}if(F===null){F=(j._bindings||SC.EMPTY_ARRAY).slice()}F[F.length]=G}else{if(w&&(w instanceof Function)){if(!w.superclass&&(w!==(f=j[G]))){w.superclass=f||p;w.base=u?SC._detect_base(w,u,G):f||p}if(w.propertyPaths){if(!E){D=(D||SC.EMPTY_ARRAY).slice();E=YES}D[D.length]=G}if(z=w.localPropertyPaths){o=z.length;while(--o>=0){v=j._kvo_for(SC.keyFor("_kvo_local",z[o]),SC.CoreSet);v.add(G);j._kvo_for("_kvo_observed_keys",SC.CoreSet).add(z[o])}}if(w.dependentKeys){if(!e){n=(n||SC.EMPTY_ARRAY).slice();e=YES}n[n.length]=G}if(w.autoconfiguredOutlet){if(!A){B=(B||SC.EMPTY_ARRAY).slice();A=YES}B[B.length]=G}if(w.isEnhancement){w=SC._enhance(j[G]||p,w)}}}j[G]=w}if(g.hasOwnProperty("toString")){G="toString";w=(a.hasOwnProperty(G)?a[G]:null)||g[G];if(!w.superclass&&(w!==(f=j[G]))){w.superclass=w.base=f||p}j[G]=w}j._bindings=F||[];j._observers=D||[];j._properties=n||[];j.outlets=B||[];return j};SC._enhance=function(b,a){return function(){var e=Array.prototype.slice.call(arguments,0);var c=this;e.unshift(function(){return b.apply(c,arguments)});return a.apply(this,e)}};SC.Object=function(a){this.__sc_super__=SC.Object.prototype;return this._object_init(a)};SC.mixin(SC.Object,{mixin:function(b){var a=arguments.length,c;for(c=0;c<a;c++){SC.mixin(this,arguments[c])}return this},superclass:null,extend:function(f){var e=SC.BENCHMARK_OBJECTS;if(e){SC.Benchmark.start("SC.Object.extend")}var j,c=function(k){this.__sc_super__=c.prototype;return this._object_init(k)};for(j in this){if(!this.hasOwnProperty(j)){continue}c[j]=this[j]}if(this.hasOwnProperty("toString")){c.toString=this.toString}c.superclass=this;c.__sc_super__=this.prototype;SC.generateGuid(c,"sc");c.subclasses=SC.Set.create();this.subclasses.add(c);var g=(c.prototype=SC.beget(this.prototype));var b,a=arguments.length;for(b=0;b<a;b++){SC._object_extend(g,arguments[b],c.__sc_super__)}g.constructor=c;if(e){SC.Benchmark.end("SC.Object.extend")}return c},reopen:function(a){return SC._object_extend(this.prototype,a,this.__sc_super__)},create:function(){var b=this,a=new b(arguments);if(SC.ObjectDesigner){SC.ObjectDesigner.didCreateObject(a,SC.$A(arguments))}return a},isClass:YES,subclasses:SC.Set.create(),toString:function(){return SC._object_className(this)},subclassOf:function(b){if(this===b){return NO}var a=this;while(a=a.superclass){if(a===b){return YES}}return NO},hasSubclass:function(a){return(a&&a.subclassOf)?a.subclassOf(this):NO},kindOf:function(a){return(this===a)||this.subclassOf(a)},design:function(){if(this.isDesign){return this}var a=this.extend.apply(this,arguments);a.isDesign=YES;if(SC.ObjectDesigner){SC.ObjectDesigner.didLoadDesign(a,this,SC.A(arguments))}return a}});SC.Object.prototype={_kvo_enabled:YES,_object_init:function(c){var b,a=(c)?c.length:0;for(b=0;b<a;b++){SC._object_extend(this,c[b],this.__sc_super__)}SC.generateGuid(this,"sc");this.init();var e=this.initMixin;a=(e)?e.length:0;for(b=0;b<a;b++){e[b].call(this)}return this},mixin:function(){var b,a=arguments.length;for(b=0;b<a;b++){SC.mixin(this,arguments[b])}for(b=0;b<a;b++){var c=arguments[b].initMixin;if(c){c.call(this)}}return this},init:function(){this.initObservable();return this},isDestroyed:NO,destroy:function(){if(this.get("isDestroyed")){return this}this.set("isDestroyed",YES);var b,c=this.destroyMixin,a=(c)?c.length:0;for(b=0;b<a;b++){c[b].call(this)}this.bindings.invoke("disconnect");this.bindings=null;return this},isObject:true,respondsTo:function(a){return !!(this[a] instanceof Function)},tryToPerform:function(b,c,a){return this.respondsTo(b)&&(this[b](c,a)!==NO)},superclass:function(b){var a=arguments.callee.caller;if(!a){throw"superclass cannot determine the caller method"}return a.superclass?a.superclass.apply(this,arguments):null},instanceOf:function(a){return this.constructor===a},kindOf:function(a){return this.constructor.kindOf(a)},toString:function(){if(!this._object_toString){var a=SC._object_className(this.constructor);var b="%@:%@".fmt(a,SC.guidFor(this));if(a){this._object_toString=b}else{return b}}return this._object_toString},awake:function(){var e=this.outlets,b,a,c;for(b=0,a=e.length;b<a;++b){c=e[b];this.get(c)}this.bindings.invoke("sync")},invokeOnce:function(a){SC.RunLoop.currentRunLoop.invokeOnce(this,a);return this},invokeLast:function(a){SC.RunLoop.currentRunLoop.invokeLast(this,a);return this},concatenatedProperties:["concatenatedProperties","initMixin","destroyMixin"]};SC.Object.prototype.constructor=SC.Object;SC.mixin(SC.Object.prototype,SC.Observable);function findClassNames(){if(SC._object_foundObjectClassNames){return}SC._object_foundObjectClassNames=true;var b=[];var c=false;var a=function(f,g,o){o--;if(b.indexOf(g)>=0){return}b.push(g);for(var j in g){if(j=="__scope__"){continue}if(j=="superclass"){continue}if(j=="__SC__"){j="SC"}if(!j.match(/^[A-Z0-9]/)){continue}if(j=="SC"){if(c){continue}c=true}var q=(f)?[f,j].join("."):j;var n=g[j];try{var k=SC.typeOf(n)}catch(p){break}switch(k){case SC.T_CLASS:if(!n._object_className){n._object_className=q}if(o>=0){a(q,n,o)}break;case SC.T_OBJECT:if(o>=0){a(q,n,o)}break;case SC.T_HASH:if(((f)||(q==="SC"))&&(o>=0)){a(q,n,o)}break;default:break}}};window.__SC__=SC;a(null,window,2)}SC.instanceOf=function(a,b){return !!(a&&a.constructor===b)};SC.kindOf=function(a,b){if(a&&!a.isClass){a=a.constructor}return !!(a&&a.kindOf&&a.kindOf(b))};SC._object_className=function(b){if(SC.isReady===NO){return""}if(!b._object_className){findClassNames()}if(b._object_className){return b._object_className}var a=b;while(a&&!a._object_className){a=a.superclass}return(a&&a._object_className)?a._object_className:"Anonymous"};sc_require("system/object");SC._PropertyChain=SC.Object.extend({object:null,property:null,target:null,toInvalidate:null,nextProperty:null,activate:function(b){var a=this.get("object"),c=this.get("property"),e;if(!b){b=this.get("target")}if(a&&a!==b){this.deactivate()}this.set("object",b);if(b&&c!=="@each"){b.registerDependentKeyWithChain(c,this)}if(this.next){e=b?b.get(c):undefined;this.next.activate(e)}return this},deactivate:function(){var a=this.get("object"),b=this.get("property");if(a){a.removeDependentKeyWithChain(b,this)}if(this.next){this.next.deactivate()}return this},notifyPropertyDidChange:function(){var e=this.get("target"),c=this.get("toInvalidate"),b,a;e.propertyDidChange(c);if(this.next){b=this.get("object");a=b.get(this.get("property"));this.next.activate(a)}},});SC._PropertyChain.createChain=function(k,j,f){var g=k.split(".");var a=g.length,e=1;var b=SC._PropertyChain.create({property:g[0],target:j,toInvalidate:f,nextProperty:g[1]});b.set("length",a);var c=b;while(--a>=1){c=c.next=SC._PropertyChain.create({property:g[e],target:j,toInvalidate:f,nextProperty:g[++e]});c.set("length",a)}return b};sc_require("ext/function");sc_require("system/object");SC.LOG_BINDINGS=NO;SC.BENCHMARK_BINDING_NOTIFICATIONS=NO;SC.BENCHMARK_BINDING_SETUP=NO;SC.MULTIPLE_PLACEHOLDER="@@MULT@@";SC.NULL_PLACEHOLDER="@@NULL@@";SC.EMPTY_PLACEHOLDER="@@EMPTY@@";SC.Binding={beget:function(b){var a=SC.beget(this);a.parentBinding=this;if(b!==undefined){a=a.from(b)}return a},builder:function(){var b=this,a=function(c){return b.beget().from(c)};a.beget=function(){return b.beget()};return a},from:function(b,a){if(!b){return this}var c=(this===SC.Binding)?this.beget():this;c._fromPropertyPath=b;c._fromRoot=a;c._fromTuple=null;return c},to:function(b,a){var c=(this===SC.Binding)?this.beget():this;c._toPropertyPath=b;c._toRoot=a;c._toTuple=null;return c},connect:function(){if(this.isConnected){return this}this.isConnected=YES;this._connectionPending=YES;this._syncOnConnect=YES;SC.Binding._connectQueue.add(this);if(!SC.RunLoop.isRunLoopInProgress()){this._scheduleSync()}return this},_connect:function(){if(!this._connectionPending){return}this._connectionPending=NO;var c,a,b=SC.BENCHMARK_BINDING_SETUP;if(b){SC.Benchmark.start("SC.Binding.connect()")}c=this._fromPropertyPath;a=this._fromRoot;if(typeof c==="string"){if(c.indexOf(".")===0){c=c.slice(1);if(!a){a=this._toRoot}}else{if(c.indexOf("*")===0){c=[this._fromRoot||this._toRoot,c.slice(1)];a=null}}}this._fromObserverData=[c,this,this.fromPropertyDidChange,a];SC.Observers.addObserver.apply(SC.Observers,this._fromObserverData);if(!this._oneWay){c=this._toPropertyPath;a=this._toRoot;this._toObserverData=[c,this,this.toPropertyDidChange,a];SC.Observers.addObserver.apply(SC.Observers,this._toObserverData)}if(b){SC.Benchmark.end("SC.Binding.connect()")}if(this._syncOnConnect){this._syncOnConnect=NO;if(b){SC.Benchmark.start("SC.Binding.connect().sync")}this.sync();if(b){SC.Benchmark.end("SC.Binding.connect().sync")}}},disconnect:function(){if(!this.isConnected){return this}if(this._connectionPending){this._connectionPending=NO}else{SC.Observers.removeObserver.apply(SC.Observers,this._fromObserverData);if(!this._oneWay){SC.Observers.removeObserver.apply(SC.Observers,this._toObserverData)}}this.isConnected=NO;return this},fromPropertyDidChange:function(c,b){var a=c?c.get(b):null;if(a!==this._bindingValue||b==="[]"){this._setBindingValue(c,b);this._changePending=YES;SC.Binding._changeQueue.add(this);this._scheduleSync()}},toPropertyDidChange:function(c,b){if(this._oneWay){return}var a=c.get(b);if(a!==this._transformedBindingValue){this._setBindingValue(c,b);this._changePending=YES;SC.Binding._changeQueue.add(this);this._scheduleSync()}},_scheduleSync:function(){if(SC.RunLoop.isRunLoopInProgress()||this._syncScheduled){return}this._syncScheduled=YES;var a=this;setTimeout(function(){SC.run();a._syncScheduled=NO},1)},_setBindingValue:function(b,a){this._bindingSource=b;this._bindingKey=a},_computeBindingValue:function(){var j=this._bindingSource,f=this._bindingKey,c,b;this._bindingValue=c=(j?j.getPath(f):null);var g=this._transforms;if(g){var a=g.length,e;for(b=0;b<a;b++){e=g[b];c=e(c,this)}}if(this._noError&&SC.typeOf(c)===SC.T_ERROR){c=null}this._transformedBindingValue=c},_connectQueue:SC.CoreSet.create(),_alternateConnectQueue:SC.CoreSet.create(),_changeQueue:SC.CoreSet.create(),_alternateChangeQueue:SC.CoreSet.create(),_changePending:NO,flushPendingChanges:function(){if(this._isFlushing){return NO}this._isFlushing=YES;SC.Observers.suspendPropertyObserving();var b=NO,c=SC.LOG_BINDINGS,a,e;while((a=this._connectQueue).length>0){this._connectQueue=this._alternateConnectQueue;this._alternateConnectQueue=a;while(e=a.pop()){e._connect()}}while((a=this._changeQueue).length>0){if(c){SC.Logger.log("Begin: Trigger changed bindings")}b=YES;this._changeQueue=this._alternateChangeQueue;this._alternateChangeQueue=a;while(e=a.pop()){e.applyBindingValue()}if(c){SC.Logger.log("End: Trigger changed bindings")}}this._isFlushing=NO;SC.Observers.resumePropertyObserving();return b},applyBindingValue:function(){this._changePending=NO;this._computeBindingTargets();this._computeBindingValue();var a=this._bindingValue,b=this._transformedBindingValue,c=SC.BENCHMARK_BINDING_NOTIFICATIONS,e=SC.LOG_BINDINGS;if(!this._oneWay&&this._fromTarget){if(e){SC.Logger.log("%@: %@ -> %@".fmt(this,a,b))}if(c){SC.Benchmark.start(this.toString()+"->")}this._fromTarget.setPathIfChanged(this._fromPropertyKey,a);if(c){SC.Benchmark.end(this.toString()+"->")}}if(this._toTarget){if(e){SC.Logger.log("%@: %@ <- %@".fmt(this,a,b))}if(c){SC.Benchmark.start(this.toString()+"<-")}this._toTarget.setPathIfChanged(this._toPropertyKey,b);if(c){SC.Benchmark.start(this.toString()+"<-")}}},sync:function(){if(!this.isConnected){return this}if(this._connectionPending){this._syncOnConnect=YES}else{this._computeBindingTargets();var c=this._fromTarget,b=this._fromPropertyKey;if(!c||!b){return this}var a=c.getPath(b);if(a!==this._bindingValue||b==="[]"){this._setBindingValue(c,b);this._changePending=YES;SC.Binding._changeQueue.add(this)}}return this},_syncOnConnect:NO,_computeBindingTargets:function(){if(!this._fromTarget){var c,b,a;c=this._fromPropertyPath;b=this._fromRoot;if(typeof c==="string"){if(c.indexOf(".")===0){c=c.slice(1);if(!b){b=this._toRoot}}else{if(c.indexOf("*")===0){c=[b||this._toRoot,c.slice(1)];b=null}}}a=SC.tupleForPropertyPath(c,b);if(a){this._fromTarget=a[0];this._fromPropertyKey=a[1]}}if(!this._toTarget){c=this._toPropertyPath;b=this._toRoot;a=SC.tupleForPropertyPath(c,b);if(a){this._toTarget=a[0];this._toPropertyKey=a[1]}}},oneWay:function(c,a){if((a===undefined)&&(SC.typeOf(c)===SC.T_BOOL)){a=c;c=null}var b=this.from(c);if(b===SC.Binding){b=b.beget()}b._oneWay=(a===undefined)?YES:a;return b},transform:function(b){var c=(this===SC.Binding)?this.beget():this;var a=c._transforms;if(a&&(a===c.parentBinding._transform)){a=c._transforms=a.slice()}if(!a){a=c._transforms=[]}a.push(b);return c},resetTransforms:function(){var a=(this===SC.Binding)?this.beget():this;a._transforms=null;return a},noError:function(c,a){if((a===undefined)&&(SC.typeOf(c)===SC.T_BOOL)){a=c;c=null}var b=this.from(c);if(b===SC.Binding){b=b.beget()}b._noError=(a===undefined)?YES:a;return b},single:function(b,a){if(a===undefined){a=SC.MULTIPLE_PLACEHOLDER}return this.from(b).transform(function(f,e){if(f&&f.isEnumerable){var c=f.get("length");f=(c>1)?a:(c<=0)?null:f.firstObject()}return f})},notEmpty:function(b,a){if(a===undefined){a=SC.EMPTY_PLACEHOLDER}return this.from(b).transform(function(e,c){if(SC.none(e)||(e==="")||(SC.isArray(e)&&e.length===0)){e=a}return e})},notNull:function(b,a){if(a===undefined){a=SC.EMPTY_PLACEHOLDER}return this.from(b).transform(function(e,c){if(SC.none(e)){e=a}return e})},multiple:function(a){return this.from(a).transform(function(b){if(!SC.isArray(b)){b=(b==null)?[]:[b]}return b})},bool:function(a){return this.from(a).transform(function(b){var c=SC.typeOf(b);if(c===SC.T_ERROR){return b}return(c==SC.T_ARRAY)?(b.length>0):(b==="")?NO:!!b})},and:function(b,a){var c=SC.Object.create({valueABinding:b,valueBBinding:a,and:function(){return(this.get("valueA")&&this.get("valueB"))}.property("valueA","valueB").cacheable()});return this.from("and",c).oneWay()},or:function(b,a){var c=SC.Object.create({valueABinding:b,valueBBinding:a,or:function(){return(this.get("valueA")||this.get("valueB"))}.property("valueA","valueB").cacheable()});return this.from("or",c).oneWay()},not:function(a){return this.from(a).transform(function(b){var c=SC.typeOf(b);if(c===SC.T_ERROR){return b}return !((c==SC.T_ARRAY)?(b.length>0):(b==="")?NO:!!b)})},isNull:function(a){return this.from(a).transform(function(b){var c=SC.typeOf(b);return(c===SC.T_ERROR)?b:SC.none(b)})},toString:function(){var c=this._fromRoot?"<%@>:%@".fmt(this._fromRoot,this._fromPropertyPath):this._fromPropertyPath;var b=this._toRoot?"<%@>:%@".fmt(this._toRoot,this._toPropertyPath):this._toPropertyPath;var a=this._oneWay?"[oneWay]":"";return"SC.Binding%@(%@ -> %@)%@".fmt(SC.guidFor(this),c,b,a)}};SC.binding=function(b,a){return SC.Binding.from(b,a)};sc_require("ext/function");SC.Error=SC.Object.extend({code:-1,message:"",errorValue:null,errorObject:function(){return this}.property().cacheable(),label:null,toString:function(){return"SC.Error:%@:%@ (%@)".fmt(SC.guidFor(this),this.get("message"),this.get("code"))},isError:YES});SC.Error.desc=function(e,a,f,c){var b={message:e};if(a!==undefined){b.label=a}if(c!==undefined){b.code=c}if(f!==undefined){b.errorValue=f}return this.create(b)};SC.$error=function(b,a,e,f){return SC.Error.desc(b,a,e,f)};SC.ok=function(a){return(a!==false)&&!(a&&a.isError)};SC.$ok=SC.ok;SC.val=function(a){if(a&&a.isError){return a.get?a.get("errorValue"):null}else{return a}};SC.$val=SC.val;SC.Error.HAS_MULTIPLE_VALUES=-100;sc_require("mixins/enumerable");sc_require("mixins/observable");sc_require("mixins/freezable");sc_require("mixins/copyable");SC.IndexSet=SC.mixin({},SC.Enumerable,SC.Observable,SC.Freezable,SC.Copyable,{_sc_sliceContent:function(f){if(f.length<1000){return f.slice()}var e=0,a=[],b=f[0];while(b!==0){a[e]=b;e=(b<0)?(0-b):b;b=f[e]}a[e]=0;this._hint(0,e,a);return a},create:function(c,b){var a=SC.beget(this);a.initObservable();a.registerDependentKey("min","[]");if(c&&c.isIndexSet){a._content=this._sc_sliceContent(c._content);a.max=c.max;a.length=c.length;a.source=c.source}else{a._content=[0];if(c!==undefined){a.add(c,b)}}return a},isIndexSet:YES,HINT_SIZE:256,length:0,max:0,min:function(){var a=this._content,b=a[0];return(b===0)?-1:(b>0)?0:Math.abs(b)}.property("[]").cacheable(),firstObject:function(){return(this.get("length")>0)?this.get("min"):undefined}.property(),rangeStartForIndex:function(c){var g=this._content,a=this.get("max"),b,f,e;if(c>=a){return a}if(Math.abs(g[c])>c){return c}e=c-(c%SC.IndexSet.HINT_SIZE);b=g[e];if(b<0||b>c){b=e}f=Math.abs(g[b]);while(f<c){b=f;f=Math.abs(g[b])}return b},isEqual:function(c){if(c===this){return YES}if(!c||!c.isIndexSet||(c.max!==this.max)||(c.length!==this.length)){return NO}var f=this._content,b=c._content,e=0,a=f[e];do{if(b[e]!==a){return NO}e=Math.abs(a);a=f[e]}while(e!==0);return YES},indexBefore:function(b){if(b===0){return -1}b--;var c=this._content,a=this.get("max"),e=this.rangeStartForIndex(b);if(!c){return null}while((e===a)||(c[e]<0)){if(e===0){return -1}b=e-1;e=this.rangeStartForIndex(b)}return b},indexAfter:function(b){var e=this._content,a=this.get("max"),f,c;if(!e||(b>=a)){return -1}b++;f=this.rangeStartForIndex(b);c=e[f];while(c<0){if(c===0){return -1}b=f=Math.abs(c);c=e[f]}return b},contains:function(j,c){var b,g,a,f,e;if(c===undefined){if(j===null||j===undefined){return NO}if(typeof j===SC.T_NUMBER){c=1}else{if(j&&j.isIndexSet){if(j===this){return YES}b=j._content;g=0;a=b[g];while(a!==0){if((a>0)&&!this.contains(g,a-g)){return NO}g=Math.abs(a);a=b[g]}return YES}else{c=j.length;j=j.start}}}f=this.rangeStartForIndex(j);e=this._content[f];return(e>0)&&(f<=j)&&(e>=(j+c))},intersects:function(g,c){var b,f,a,e;if(c===undefined){if(typeof g===SC.T_NUMBER){c=1}else{if(g&&g.isIndexSet){if(g===this){return YES}b=g._content;f=0;a=b[f];while(a!==0){if((a>0)&&this.intersects(f,a-f)){return YES}f=Math.abs(a);a=b[f]}return NO}else{c=g.length;g=g.start}}}f=this.rangeStartForIndex(g);b=this._content;a=b[f];e=g+c;while(f<e){if(a===0){return NO}if((a>0)&&(a>g)){return YES}f=Math.abs(a);a=b[f]}return NO},without:function(b,a){if(b===this){return SC.IndexSet.create()}return this.clone().remove(b,a)},replace:function(c,a){if(a===undefined){if(typeof c===SC.T_NUMBER){a=1}else{if(c&&c.isIndexSet){this._content=this._sc_sliceContent(c._content);this.beginPropertyChanges().set("max",c.max).set("length",c.length).set("source",c.source).enumerableContentDidChange().endPropertyChanges();return this}else{a=c.length;c=c.start}}}var b=this.length;this._content.length=1;this._content[0]=0;this.length=this.max=0;return this.add(c,a)},add:function(a,b){if(this.isFrozen){throw SC.FROZEN_ERROR}var f,n,e;if(a&&a.isIndexSet){f=a._content;if(!f){return this}n=0;e=f[0];while(e!==0){if(e>0){this.add(n,e-n)}n=e<0?0-e:e;e=f[n]}return this}else{if(b===undefined){if(a===null||a===undefined){return this}else{if(typeof a===SC.T_NUMBER){b=1}else{b=a.length;a=a.start}}}else{if(b===null){b=1}}}if(b<=0){return this}var g=this.get("max"),c=g,k,j;f=this._content;if(a===g){if(a>0){n=this.rangeStartForIndex(a-1);e=f[n];if(e>0){delete f[g];f[n]=g=a+b;a=n}else{f[g]=g=a+b}}else{f[a]=g=b}f[g]=0;this.set("max",g);this.set("length",this.length+b);b=g-a}else{if(a>g){f[g]=0-a;f[a]=a+b;f[a+b]=0;this.set("max",a+b);this.set("length",this.length+b);b=a+b-g;a=g}else{n=this.rangeStartForIndex(a);e=f[n];g=a+b;k=0;if((a>0)&&(n===a)&&(e<=0)){n=this.rangeStartForIndex(a-1);e=f[n]}if(e<0){f[n]=0-a;if(Math.abs(e)>g){f[a]=0-g;f[g]=e}else{f[a]=e}}else{a=n;if(e>g){g=e}}n=a;while(n<g){j=f[n];if(j===0){f[g]=0;e=g;k+=g-n}else{e=Math.abs(j);if(e>g){f[g]=j;e=g}if(j<0){k+=e-n}}delete f[n];n=e}if((n=f[g])>0){delete f[g];g=n}f[a]=g;if(g>c){this.set("max",g)}this.set("length",this.get("length")+k);b=g-a}}this._hint(a,b);if(k!==0){this.enumerableContentDidChange()}return this},remove:function(a,b){if(this.isFrozen){throw SC.FROZEN_ERROR}if(b===undefined){if(a===null||a===undefined){return this}else{if(typeof a===SC.T_NUMBER){b=1}else{if(a.isIndexSet){a.forEachRange(this.remove,this);return this}else{b=a.length;a=a.start}}}}if(b<=0){return this}var g=this.get("max"),c=g,f=this._content,o,e,n,j,k;if(a>=g){return this}o=this.rangeStartForIndex(a);e=f[o];k=a+b;n=0;if((a>0)&&(o===a)&&(e>0)){o=this.rangeStartForIndex(a-1);e=f[o]}if(e>0){f[o]=a;if(e>k){f[a]=k;f[k]=e}else{f[a]=e}}else{a=o;e=Math.abs(e);if(e>k){k=e}}o=a;while(o<k){j=f[o];if(j===0){f[k]=0;e=k}else{e=Math.abs(j);if(e>k){f[k]=j;e=k}if(j>0){n+=e-o}}delete f[o];o=e}if((o=f[k])<0){delete f[k];k=Math.abs(o)}if(f[k]===0){delete f[k];f[a]=0;this.set("max",a)}else{f[a]=0-k}this.set("length",this.get("length")-n);b=k-a;this._hint(a,b);if(n!==0){this.enumerableContentDidChange()}return this},_hint:function(j,e,c){if(c===undefined){c=this._content}var b=SC.IndexSet.HINT_SIZE,a=Math.abs(c[j]),g=j-(j%b)+b,f=j+e;while(g<f){while((a!==0)&&(a<=g)){j=a;a=Math.abs(c[j])}if(a===0){delete c[g]}else{if(g!==j){c[g]=j}}g+=b}},clear:function(){if(this.isFrozen){throw SC.FROZEN_ERROR}var a=this.length;this._content.length=1;this._content[0]=0;this.set("length",0).set("max",0);if(a>0){this.enumerableContentDidChange()}},addEach:function(b){if(this.isFrozen){throw SC.FROZEN_ERROR}this.beginPropertyChanges();var a=b.get("length");if(b.isSCArray){while(--a>=0){this.add(b.objectAt(a))}}else{if(b.isEnumerable){b.forEach(function(c){this.add(c)},this)}}this.endPropertyChanges();return this},removeEach:function(b){if(this.isFrozen){throw SC.FROZEN_ERROR}this.beginPropertyChanges();var a=b.get("length");if(b.isSCArray){while(--a>=0){this.remove(b.objectAt(a))}}else{if(b.isEnumerable){b.forEach(function(c){this.remove(c)},this)}}this.endPropertyChanges();return this},clone:function(){return SC.IndexSet.create(this)},inspect:function(){var f=this._content,b=f.length,a=0,c=[],e;for(a=0;a<b;a++){e=f[a];if(e!==undefined){c.push("%@:%@".fmt(a,e))}}return"SC.IndexSet<%@>".fmt(c.join(" , "))},forEachRange:function(g,e){var b=this._content,f=0,a=b[f],c=this.source;if(e===undefined){e=null}while(a!==0){if(a>0){g.call(e,f,a-f,this,c)}f=Math.abs(a);a=b[f]}return this},forEachIn:function(b,c,o,g){var j=this._content,n=0,k=0,e=b+c,a=this.source,f=j[n];if(g===undefined){g=null}while(f!==0){if(n<b){n=b}while((n<f)&&(n<e)){o.call(g,n++,k++,this,a)}if(n>=e){n=f=0}else{n=Math.abs(f);f=j[n]}}return this},lengthIn:function(j,e){var a=0;if(e===undefined){if(j===null||j===undefined){return 0}else{if(typeof j===SC.T_NUMBER){e=1}else{if(j.isIndexSet){j.forEachRange(function(n,k){a+=this.lengthIn(n,k)},this);return a}else{e=j.length;j=j.start}}}}if(this.get("length")===0){return 0}var c=this._content,g=0,b=c[g],f=j+e;while(g<f&&b!==0){if(b>0){a+=(b>f)?f-g:b-g}g=Math.abs(b);b=c[g]}return a},source:null,indexOf:function(e,c){var g=this.source;if(!g){throw"%@.indexOf() requires source".fmt(this)}var b=g.get("length"),f=this._content,j=f[0]<0?Math.abs(f[0]):0,a;while(j>=0&&j<b){a=g.indexOf(e,j);if(a<0){return -1}if(this.contains(a)){return a}j=a+1}return -1},lastIndexOf:function(e,c){var f=this.source;if(!f){throw"%@.lastIndexOf() requires source".fmt(this)}var b=f.get("length"),g=this.max-1,a;if(g>=b){g=b-1}while(g>=0){a=f.lastIndexOf(e,g);if(a<0){return -1}if(this.contains(a)){return a}g=a+1}return -1},forEachObject:function(j,f){var e=this.source;if(!e){throw"%@.forEachObject() requires source".fmt(this)}var c=this._content,g=0,a=0,b=c[g];if(f===undefined){f=null}while(b!==0){while(g<b){j.call(f,e.objectAt(g),g,e,this);g++}g=Math.abs(b);b=c[g]}return this},addObject:function(c,e){var f=this.source;if(!f){throw"%@.addObject() requires source".fmt(this)}var b=f.get("length"),g=0,a;while(g>=0&&g<b){a=f.indexOf(c,g);if(a>=0){this.add(a);if(e){return this}g=a++}else{return this}}return this},addObjects:function(b,a){b.forEach(function(c){this.addObject(c,a)},this);return this},removeObject:function(c,e){var f=this.source;if(!f){throw"%@.removeObject() requires source".fmt(this)}var b=f.get("length"),g=0,a;while(g>=0&&g<b){a=f.indexOf(c,g);if(a>=0){this.remove(a);if(e){return this}g=a+1}else{return this}}return this},removeObjects:function(b,a){b.forEach(function(c){this.removeObject(c,a)},this);return this},LOG_OBSERVING:NO,forEach:function(j,f){var c=this._content,g=0,a=0,e=this.source,b=c[g];if(f===undefined){f=null}while(b!==0){while(g<b){j.call(f,g++,a++,this,e)}g=Math.abs(b);b=c[g]}return this},nextObject:function(g,b,c){var f=this._content,e=c.next,a=this.get("max");if(b===null){b=e=0}else{if(b>=a){delete c.next;return null}else{b++}}if(b===e){do{b=Math.abs(e);e=f[b]}while(e<0);c.next=e}return b},toString:function(){var a=[];this.forEachRange(function(c,b){a.push(b===1?c:"%@..%@".fmt(c,c+b-1))},this);return"SC.IndexSet<%@>".fmt(a.join(","))},max:0});SC.IndexSet.slice=SC.IndexSet.copy=SC.IndexSet.clone;SC.IndexSet.EMPTY=SC.IndexSet.create().freeze();SC.json={encode:function(a){return JSON.stringify(a)},decode:function(a){return JSON.parse(a)}};if(!this.JSON){this.JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());sc_require("ext/function");SC.LOGGER_LOG_DELIMITER=", ";SC.LOGGER_LOG_ERROR="ERROR: ";SC.LOGGER_LOG_INFO="INFO:  ";SC.LOGGER_LOG_WARN="WARN:  ";SC.LOGGER_LOG_DEBUG="DEBUG: ";SC.LOGGER_LOG_GROUP_HEADER="** %@";SC.LOGGER_LOG_GROUP_INDENTATION="    ";SC.LOGGER_RECORDED_LOG_TIMESTAMP_PREFIX="%@:  ";SC.LOGGER_LEVEL_DEBUG="debug";SC.LOGGER_LEVEL_INFO="info";SC.LOGGER_LEVEL_WARN="warn";SC.LOGGER_LEVEL_ERROR="error";SC.LOGGER_LEVEL_NONE="none";SC.Logger=SC.Object.create({logOutputLevel:null,logRecordingLevel:SC.LOGGER_LEVEL_NONE,recordedLogMessages:null,recordedLogMessagesMaximumLength:500,recordedLogMessagesPruningMinimumLength:100,debugEnabled:NO,exists:function(){return !SC.none(this.get("reporter"))}.property("reporter").cacheable(),fallBackOnAlert:NO,reporter:console,debug:function(a,b){SC.Logger._handleMessage(SC.LOGGER_LEVEL_DEBUG,YES,a,arguments)},debugWithoutFmt:function(){this._handleMessage(SC.LOGGER_LEVEL_DEBUG,NO,null,arguments)},debugGroup:function(a,b){SC.Logger._handleGroup(SC.LOGGER_LEVEL_DEBUG,a,arguments)},debugGroupEnd:function(){SC.Logger._handleGroupEnd(SC.LOGGER_LEVEL_DEBUG)},info:function(a,b){SC.Logger._handleMessage(SC.LOGGER_LEVEL_INFO,YES,a,arguments)},infoWithoutFmt:function(){this._handleMessage(SC.LOGGER_LEVEL_INFO,NO,null,arguments)},infoGroup:function(a,b){SC.Logger._handleGroup(SC.LOGGER_LEVEL_INFO,a,arguments)},infoGroupEnd:function(){SC.Logger._handleGroupEnd(SC.LOGGER_LEVEL_INFO)},warn:function(a,b){SC.Logger._handleMessage(SC.LOGGER_LEVEL_WARN,YES,a,arguments)},warnWithoutFmt:function(){this._handleMessage(SC.LOGGER_LEVEL_WARN,NO,null,arguments)},warnGroup:function(a,b){SC.Logger._handleGroup(SC.LOGGER_LEVEL_WARN,a,arguments)},warnGroupEnd:function(){SC.Logger._handleGroupEnd(SC.LOGGER_LEVEL_WARN)},error:function(a,b){SC.Logger._handleMessage(SC.LOGGER_LEVEL_ERROR,YES,a,arguments)},errorWithoutFmt:function(){this._handleMessage(SC.LOGGER_LEVEL_ERROR,NO,null,arguments)},errorGroup:function(a,b){SC.Logger._handleGroup(SC.LOGGER_LEVEL_ERROR,a,arguments)},errorGroupEnd:function(){SC.Logger._handleGroupEnd(SC.LOGGER_LEVEL_ERROR)},outputRecordedLogMessages:function(t){if(!this.get("exists")){return}var z=this.get("reporter"),o=this.get("recordedLogMessages"),a=0,e=SC.LOGGER_RECORDED_LOG_TIMESTAMP_PREFIX,w,u,b,c,k,n,f,g,B,q,p,v,A;if(o){for(w=0,u=o.length;w<u;++w){b=o[w];c=b.type;if(t){k=e.fmt(b.timestamp.toUTCString())}n=b.message;if(n){f=b.originalArguments;this._outputMessage(c,k,a,n,f)}else{q=b.indentation;B=b.title;p=q-a;if(z.group){if(Math.abs(p)>1){for(v=0,A=(p-1);v<A;++v){if(p>0){z.group()}else{z.groupEnd()}}}if(p>0){g=k?k:"";g+=B;z.group(g)}else{z.groupEnd()}}else{if(p>0){this._outputGroup(c,k,q-1,B)}}a=q}}}},stringifyRecordedLogMessages:function(){var n="",g=this.get("recordedLogMessages"),q=0,k=SC.LOGGER_RECORDED_LOG_TIMESTAMP_PREFIX,e=this._LOG_FALLBACK_PREFIX_MAPPING,c=SC.LOGGER_LOG_GROUP_HEADER,f,a,u,p,z,w,j,v,t,o,b;if(g){for(f=0,a=g.length;f<a;++f){u=g[f];p=u.type;j=k.fmt(u.timestamp.toUTCString());j+=e[p]||"";z=u.message;if(z){w=u.originalArguments;v=j+this._indentation(q);v+=w?this._argumentsToString(w):z}else{o=u.indentation;t=u.title;b=o-q;if(b>0){v=j+this._indentation(q)+c.fmt(t)}q=o}n+=v+"\n"}}return n},log:function(){var a=this.get("reporter"),b=NO;if(this.get("exists")){if(typeof a.log==="function"){a.log.apply(a,arguments);b=YES}else{if(a.log){a.log(this._argumentsToArray(arguments));b=YES}}}if(!b&&this.get("fallBackOnAlert")){if(this.get("exists")&&(typeof a.alert==="function")){a.alert(arguments);b=YES}else{alert(arguments);b=YES}}return b},group:function(b){var a=this.get("reporter");if(this.get("exists")&&(typeof a.group==="function")){a.group(b)}},groupEnd:function(){var a=this.get("reporter");if(this.get("exists")&&(typeof a.groupEnd==="function")){a.groupEnd()}},dir:function(){var a=this.get("reporter");if(this.get("exists")&&(typeof a.dir==="function")){a.dir.apply(a,arguments)}else{this.log.apply(this,arguments)}},dirxml:function(){var a=this.get("reporter");if(this.get("exists")&&(typeof a.dirxml==="function")){a.dirxml.apply(a,arguments)}else{this.log.apply(this,arguments)}},profile:function(b){var a=this.get("reporter");if(this.get("exists")&&(typeof a.profile==="function")){a.profile(b);return YES}return NO},profileEnd:function(b){var a=this.get("reporter");if(this.get("exists")&&(typeof a.profileEnd==="function")){a.profileEnd(b);return YES}return NO},time:function(b){var a=this.get("reporter");if(this.get("exists")&&(typeof a.time==="function")){a.time(b);return YES}return NO},timeEnd:function(b){var a=this.get("reporter");if(this.get("exists")&&(typeof a.timeEnd==="function")){a.timeEnd(b);return YES}return NO},trace:function(){var a=this.get("reporter");if(this.get("exists")&&(typeof a.trace==="function")){a.trace();return YES}return NO},init:function(){arguments.callee.base.apply(this,arguments);if(!this.get("logOutputLevel")){if(SC.buildMode==="debug"){this.set("logOutputLevel",SC.LOGGER_LEVEL_DEBUG)}else{this.set("logOutputLevel",SC.LOGGER_LEVEL_INFO)}}this.debugEnabledDidChange()},debugEnabledDidChange:function(){if(this.get("debugEnabled")){this.set("logOutputLevel",SC.LOGGER_LEVEL_DEBUG)}}.observes("debugEnabled"),_handleMessage:function(k,o,q,p){var a=this._shouldOutputType(k),c=this._shouldRecordType(k),e,f,g,j,b,n;if(!(a||c)){return}e=(p&&p.length>1);if(o&&(SC.none(q)||(typeof q!=="string"))){o=NO}if(o){if(e){j=[];for(f=1,g=p.length;f<g;++f){j.push(p[f])}q=q.fmt.apply(q,j)}}if(a){j=o?null:p;this._outputMessage(k,null,this._outputIndentationLevel,q,j)}if(c){n={type:k,message:q?q:YES,timestamp:new Date()};if(!o&&e){n.originalArguments=p}this._addRecordedMessageEntry(n)}},_handleGroup:function(p,t,w){var a=this._shouldOutputType(p),f=this._shouldRecordType(p),g,j,n,o,v,e,c,k,b,q,u;if(!(a||f)){return}g=(w&&w.length>1);if(t&&g){o=[];for(j=1,n=w.length;j<n;++j){o.push(w[j])}t=t.fmt.apply(t,o)}if(a){this._outputGroup(p,null,this._outputIndentationLevel,t);this._outputIndentationLevel++}if(f){q=++this._recordingIndentationLevel;u={type:p,indentation:q,beginGroup:YES,title:t,timestamp:new Date()};this._addRecordedMessageEntry(u)}},_handleGroupEnd:function(e){var j=this._shouldOutputType(e),c=this._shouldRecordType(e),a,g,b,f;if(!(j||c)){return}if(j){this._outputIndentationLevel--;if(this.get("exists")){a=this.get("reporter");g=a.groupEnd;if(g){g.call(a)}}}if(c){b=--this._recordingIndentationLevel;f={type:e,indentation:b,timestamp:new Date()};this._addRecordedMessageEntry(f)}},_shouldOutputType:function(a){var c=this._LOG_LEVEL_MAPPING,e=c[a]||0,b=c[this.get("logOutputLevel")]||0;return(e<=b)},_shouldRecordType:function(a){var c=this._LOG_LEVEL_MAPPING,e=c[a]||0,b=c[this.get("logRecordingLevel")]||0;return(e<=b)},_outputMessage:function(k,j,n,q,p){if(!this.get("exists")){return}var e=this.get("reporter"),b,a,c,f,g,o;a=!e.group;c=e[k];if(c){if(!p){b="";if(j){b=j}if(a){b=+this._indentation(n)}b+=q;e[k](b)}else{g=this._argumentsToArray(p);f="";if(j){f=j}if(a){f+=this._indentation(n)}if(f){g.splice(0,0,f)}if(c.apply){c.apply(e,g)}else{e[k](g)}}}else{if(e.log){f="";if(j){f=j}f+=this._LOG_FALLBACK_PREFIX_MAPPING[k]||"";if(a){f+=this._indentation(n)}if(!p){e.log(f+q)}else{g=this._argumentsToArray(p);if(f){g.splice(0,0,f)}e.log(g)}}}},_outputGroup:function(e,g,c,j){if(!this.get("exists")){return}var b=this.get("reporter"),f=b.group,a;if(f){a=g?g:"";a+=j;f.call(b,a)}else{if(b.log){a="";if(g){a=g}a+=this._LOG_FALLBACK_PREFIX_MAPPING[e]||"";a+=this._indentation(c);a+=SC.LOGGER_LOG_GROUP_HEADER.fmt(j);b.log(a)}}},_addRecordedMessageEntry:function(c){var b=this.get("recordedLogMessages"),a;if(!b){b=[];this.set("recordedLogMessages",b)}b.push(c);a=b.length;if(a>this.get("recordedLogMessagesMaximumLength")){b.splice(0,(a-this.get("recordedLogMessagesPruningMinimumLength")))}b.enumerableContentDidChange()},_argumentsToArray:function(c){var b=[],e,a;if(c){for(e=0,a=c.length;e<a;++e){b[e]=c[e]}}return b},_argumentsToString:function(){var c="",b=SC.LOGGER_LOG_DELIMITER,e,a;for(e=0,a=(arguments.length-1);e<a;++e){c+=arguments[e]+b}c+=arguments[a];return c},_indentation:function(e){if(!e||e<0){e=0}var b="",a=SC.LOGGER_LOG_GROUP_INDENTATION,c;for(c=0;c<e;++c){b+=a}return b},_outputIndentationLevel:0,_recordingIndentationLevel:0,_LOG_LEVEL_MAPPING:{debug:4,info:3,warn:2,error:1,none:0},_LOG_FALLBACK_PREFIX_MAPPING:{debug:SC.LOGGER_LOG_DEBUG,info:SC.LOGGER_LOG_INFO,warn:SC.LOGGER_LOG_WARN,error:SC.LOGGER_LOG_ERROR}});SC.debug=SC.Logger.debug;SC.info=SC.Logger.info;SC.warn=SC.Logger.warn;SC.error=SC.Logger.error;sc_require("ext/function");sc_require("private/observer_set");SC.RunLoop=SC.Object.extend({beginRunLoop:function(){this._start=new Date().getTime();if(SC.LOG_BINDINGS||SC.LOG_OBSERVERS){SC.Logger.log("-- SC.RunLoop.beginRunLoop at %@".fmt(this._start))}this._runLoopInProgress=YES;return this},isRunLoopInProgress:function(){return this._runLoopInProgress}.property(),endRunLoop:function(){if(SC.LOG_BINDINGS||SC.LOG_OBSERVERS){SC.Logger.log("-- SC.RunLoop.endRunLoop ~ flushing application queues")}this.flushAllPending();this._start=null;if(SC.LOG_BINDINGS||SC.LOG_OBSERVERS){SC.Logger.log("-- SC.RunLoop.endRunLoop ~ End")}SC.RunLoop.lastRunLoopEnd=Date.now();this._runLoopInProgress=NO;return this},flushAllPending:function(){var a;do{a=this.flushApplicationQueues();if(!a){a=this._flushinvokeLastQueue()}}while(a)},invokeOnce:function(a,b){if(b===undefined){b=a;a=this}if(typeof b==="string"){b=a[b]}if(!this._invokeQueue){this._invokeQueue=SC.ObserverSet.create()}if(b){this._invokeQueue.add(a,b)}return this},invokeLast:function(a,b){if(b===undefined){b=a;a=this}if(typeof b==="string"){b=a[b]}if(!this._invokeLastQueue){this._invokeLastQueue=SC.ObserverSet.create()}this._invokeLastQueue.add(a,b);return this},flushApplicationQueues:function(){var b=NO,a=this._invokeQueue;if(a&&a.getMembers().length){this._invokeQueue=null;b=YES;a.invokeMethods()}return SC.Binding.flushPendingChanges()||b},_flushinvokeLastQueue:function(){var a=this._invokeLastQueue,b=NO;if(a&&a.getMembers().length){this._invokeLastQueue=null;b=YES;if(b){a.invokeMethods()}}return b}});SC.RunLoop.currentRunLoop=null;SC.RunLoop.runLoopClass=SC.RunLoop;SC.RunLoop.begin=function(){var a=this.currentRunLoop;if(!a){a=this.currentRunLoop=this.runLoopClass.create()}a.beginRunLoop();return this};SC.RunLoop.end=function(){var a=this.currentRunLoop;if(!a){throw"SC.RunLoop.end() called outside of a runloop!"}a.endRunLoop();return this};SC.RunLoop.isRunLoopInProgress=function(){if(this.currentRunLoop){return this.currentRunLoop.get("isRunLoopInProgress")}return NO};SC.run=function(j,g,b){var a=SC.RunLoop.isRunLoopInProgress();if(SC.ExceptionHandler&&SC.ExceptionHandler.enabled){try{if(b||!a){SC.RunLoop.begin()}if(j){j.call(g)}if(b||!a){SC.RunLoop.end()}}catch(f){var c=SC.ExceptionHandler.handleException(f);if(!c&&!SC.browser.msie){throw f}}}else{if(b||!a){SC.RunLoop.begin()}if(j){j.call(g)}if(b||!a){SC.RunLoop.end()}}};var handlebars=(function(){var g={trace:function c(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,statements:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,OPEN_PARTIAL:24,params:25,hash:26,param:27,STRING:28,hashSegments:29,hashSegment:30,ID:31,EQUALS:32,pathSegments:33,SEP:34,"$accept":0,"$end":1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"OPEN_PARTIAL",28:"STRING",31:"ID",32:"EQUALS",34:"SEP"},productions_:[0,[3,2],[4,3],[4,1],[4,0],[6,1],[6,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[7,2],[17,3],[17,2],[17,2],[17,1],[25,2],[25,1],[27,1],[27,1],[26,1],[29,2],[29,1],[30,3],[30,3],[21,1],[33,3],[33,1]],performAction:function b(j,o,p,u,t,n,q){var k=n.length-1;switch(t){case 1:return n[k-1];break;case 2:this.$=new u.ProgramNode(n[k-2],n[k]);break;case 3:this.$=new u.ProgramNode(n[k]);break;case 4:this.$=new u.ProgramNode([]);break;case 5:this.$=[n[k]];break;case 6:n[k-1].push(n[k]);this.$=n[k-1];break;case 7:this.$=new u.InverseNode(n[k-2],n[k-1],n[k]);break;case 8:this.$=new u.BlockNode(n[k-2],n[k-1],n[k]);break;case 9:this.$=n[k];break;case 10:this.$=n[k];break;case 11:this.$=new u.ContentNode(n[k]);break;case 12:this.$=new u.CommentNode(n[k]);break;case 13:this.$=new u.MustacheNode(n[k-1][0],n[k-1][1]);break;case 14:this.$=new u.MustacheNode(n[k-1][0],n[k-1][1]);break;case 15:this.$=n[k-1];break;case 16:this.$=new u.MustacheNode(n[k-1][0],n[k-1][1]);break;case 17:this.$=new u.MustacheNode(n[k-1][0],n[k-1][1],true);break;case 18:this.$=new u.PartialNode(n[k-1]);break;case 19:this.$=new u.PartialNode(n[k-2],n[k-1]);break;case 20:break;case 21:this.$=[[n[k-2]].concat(n[k-1]),n[k]];break;case 22:this.$=[[n[k-1]].concat(n[k]),null];break;case 23:this.$=[[n[k-1]],n[k]];break;case 24:this.$=[[n[k]],null];break;case 25:n[k-1].push(n[k]);this.$=n[k-1];break;case 26:this.$=[n[k]];break;case 27:this.$=n[k];break;case 28:this.$=new u.StringNode(n[k]);break;case 29:this.$=new u.HashNode(n[k]);break;case 30:n[k-1].push(n[k]);this.$=n[k-1];break;case 31:this.$=[n[k]];break;case 32:this.$=[n[k-2],n[k]];break;case 33:this.$=[n[k-2],new u.StringNode(n[k])];break;case 34:this.$=new u.IdNode(n[k]);break;case 35:n[k-2].push(n[k]);this.$=n[k-2];break;case 36:this.$=[n[k]];break}},table:[{3:1,4:2,5:[2,4],6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],24:[1,15]},{1:[3]},{5:[1,16]},{5:[2,3],7:17,8:18,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,19],20:[2,3],22:[1,13],23:[1,14],24:[1,15]},{5:[2,5],14:[2,5],15:[2,5],16:[2,5],19:[2,5],20:[2,5],22:[2,5],23:[2,5],24:[2,5]},{4:20,6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],24:[1,15]},{4:21,6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],24:[1,15]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],24:[2,9]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],24:[2,10]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],24:[2,11]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],24:[2,12]},{17:22,21:23,31:[1,25],33:24},{17:26,21:23,31:[1,25],33:24},{17:27,21:23,31:[1,25],33:24},{17:28,21:23,31:[1,25],33:24},{21:29,31:[1,25],33:24},{1:[2,1]},{6:30,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],24:[1,15]},{5:[2,6],14:[2,6],15:[2,6],16:[2,6],19:[2,6],20:[2,6],22:[2,6],23:[2,6],24:[2,6]},{17:22,18:[1,31],21:23,31:[1,25],33:24},{10:32,20:[1,33]},{10:34,20:[1,33]},{18:[1,35]},{18:[2,24],21:40,25:36,26:37,27:38,28:[1,41],29:39,30:42,31:[1,43],33:24},{18:[2,34],28:[2,34],31:[2,34],34:[1,44]},{18:[2,36],28:[2,36],31:[2,36],34:[2,36]},{18:[1,45]},{18:[1,46]},{18:[1,47]},{18:[1,48],21:49,31:[1,25],33:24},{5:[2,2],8:18,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,2],22:[1,13],23:[1,14],24:[1,15]},{14:[2,20],15:[2,20],16:[2,20],19:[2,20],22:[2,20],23:[2,20],24:[2,20]},{5:[2,7],14:[2,7],15:[2,7],16:[2,7],19:[2,7],20:[2,7],22:[2,7],23:[2,7],24:[2,7]},{21:50,31:[1,25],33:24},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],24:[2,8]},{14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],24:[2,14]},{18:[2,22],21:40,26:51,27:52,28:[1,41],29:39,30:42,31:[1,43],33:24},{18:[2,23]},{18:[2,26],28:[2,26],31:[2,26]},{18:[2,29],30:53,31:[1,54]},{18:[2,27],28:[2,27],31:[2,27]},{18:[2,28],28:[2,28],31:[2,28]},{18:[2,31],31:[2,31]},{18:[2,36],28:[2,36],31:[2,36],32:[1,55],34:[2,36]},{31:[1,56]},{14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],24:[2,13]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],24:[2,16]},{5:[2,17],14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],24:[2,17]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],24:[2,18]},{18:[1,57]},{18:[1,58]},{18:[2,21]},{18:[2,25],28:[2,25],31:[2,25]},{18:[2,30],31:[2,30]},{32:[1,55]},{21:59,28:[1,60],31:[1,25],33:24},{18:[2,35],28:[2,35],31:[2,35],34:[2,35]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],24:[2,19]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],24:[2,15]},{18:[2,32],31:[2,32]},{18:[2,33],31:[2,33]}],defaultActions:{16:[2,1],37:[2,23],51:[2,21]},parseError:function e(k,j){throw new Error(k)},parse:function f(w){var F=this,t=[0],O=[null],A=[],P=this.table,k="",z=0,M=0,o=0,v=2,C=1;this.lexer.setInput(w);this.lexer.yy=this.yy;this.yy.lexer=this.lexer;var n=this.lexer.yylloc;A.push(n);if(typeof this.yy.parseError==="function"){this.parseError=this.yy.parseError}function E(p){t.length=t.length-2*p;O.length=O.length-p;A.length=A.length-p}function D(){var p;p=F.lexer.lex()||1;if(typeof p!=="number"){p=F.symbols_[p]||p}return p}var L,H,q,K,Q,B,J={},G,N,j,u;while(true){q=t[t.length-1];if(this.defaultActions[q]){K=this.defaultActions[q]}else{if(L==null){L=D()}K=P[q]&&P[q][L]}if(typeof K==="undefined"||!K.length||!K[0]){if(!o){u=[];for(G in P[q]){if(this.terminals_[G]&&G>2){u.push("'"+this.terminals_[G]+"'")}}var I="";if(this.lexer.showPosition){I="Parse error on line "+(z+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+u.join(", ")}else{I="Parse error on line "+(z+1)+": Unexpected "+(L==1?"end of input":("'"+(this.terminals_[L]||L)+"'"))}this.parseError(I,{text:this.lexer.match,token:this.terminals_[L]||L,line:this.lexer.yylineno,loc:n,expected:u})}if(o==3){if(L==C){throw new Error(I||"Parsing halted.")}M=this.lexer.yyleng;k=this.lexer.yytext;z=this.lexer.yylineno;n=this.lexer.yylloc;L=D()}while(1){if((v.toString()) in P[q]){break}if(q==0){throw new Error(I||"Parsing halted.")}E(1);q=t[t.length-1]}H=L;L=v;q=t[t.length-1];K=P[q]&&P[q][v];o=3}if(K[0] instanceof Array&&K.length>1){throw new Error("Parse Error: multiple actions possible at state: "+q+", token: "+L)}switch(K[0]){case 1:t.push(L);O.push(this.lexer.yytext);A.push(this.lexer.yylloc);t.push(K[1]);L=null;if(!H){M=this.lexer.yyleng;k=this.lexer.yytext;z=this.lexer.yylineno;n=this.lexer.yylloc;if(o>0){o--}}else{L=H;H=null}break;case 2:N=this.productions_[K[1]][1];J.$=O[O.length-N];J._$={first_line:A[A.length-(N||1)].first_line,last_line:A[A.length-1].last_line,first_column:A[A.length-(N||1)].first_column,last_column:A[A.length-1].last_column};B=this.performAction.call(J,k,M,z,this.yy,K[1],O,A);if(typeof B!=="undefined"){return B}if(N){t=t.slice(0,-1*N*2);O=O.slice(0,-1*N);A=A.slice(0,-1*N)}t.push(this.productions_[K[1]][0]);O.push(J.$);A.push(J._$);j=P[t[t.length-2]][t[t.length-1]];t.push(j);break;case 3:return true}}return true}};var a=(function(){var o=({EOF:1,parseError:function q(v,u){if(this.yy.parseError){this.yy.parseError(v,u)}else{throw new Error(v)}},setInput:function(u){this._input=u;this._more=this._less=this.done=false;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};return this},input:function(){var v=this._input[0];this.yytext+=v;this.yyleng++;this.match+=v;this.matched+=v;var u=v.match(/\n/);if(u){this.yylineno++}this._input=this._input.slice(1);return v},unput:function(u){this._input=u+this._input;return this},more:function(){this._more=true;return this},pastInput:function(){var u=this.matched.substr(0,this.matched.length-this.match.length);return(u.length>20?"...":"")+u.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var u=this.match;if(u.length<20){u+=this._input.substr(0,20-u.length)}return(u.substr(0,20)+(u.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var u=this.pastInput();var v=new Array(u.length+1).join("-");return u+this.upcomingInput()+"\n"+v+"^"},next:function(){if(this.done){return this.EOF}if(!this._input){this.done=true}var A,w,v,u;if(!this._more){this.yytext="";this.match=""}var B=this._currentRules();for(var z=0;z<B.length;z++){w=this._input.match(this.rules[B[z]]);if(w){u=w[0].match(/\n.*/g);if(u){this.yylineno+=u.length}this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:u?u[u.length-1].length-1:this.yylloc.last_column+w.length};this.yytext+=w[0];this.match+=w[0];this.matches=w;this.yyleng=this.yytext.length;this._more=false;this._input=this._input.slice(w[0].length);this.matched+=w[0];A=this.performAction.call(this,this.yy,this,B[z],this.conditionStack[this.conditionStack.length-1]);if(A){return A}else{return}}}if(this._input===""){return this.EOF}else{this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}},lex:function j(){var u=this.next();if(typeof u!=="undefined"){return u}else{return this.lex()}},begin:function k(u){this.conditionStack.push(u)},popState:function t(){return this.conditionStack.pop()},_currentRules:function p(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules}});o.performAction=function n(A,v,z,u){var w=u;switch(z){case 0:this.begin("mu");if(v.yytext){return 14}break;case 1:return 14;break;case 2:return 24;break;case 3:return 16;break;case 4:return 20;break;case 5:return 19;break;case 6:return 19;break;case 7:return 23;break;case 8:return 23;break;case 9:v.yytext=v.yytext.substr(3,v.yyleng-5);this.begin("INITIAL");return 15;break;case 10:return 22;break;case 11:return 32;break;case 12:return 31;break;case 13:return 31;break;case 14:return 34;break;case 15:break;case 16:this.begin("INITIAL");return 18;break;case 17:this.begin("INITIAL");return 18;break;case 18:v.yytext=v.yytext.substr(1,v.yyleng-2).replace(/\\"/g,'"');return 28;break;case 19:return 31;break;case 20:return"INVALID";break;case 21:return 5;break}};o.rules=[/^[^\x00]*?(?=(\{\{))/,/^[^\x00]+/,/^\{\{>/,/^\{\{#/,/^\{\{\//,/^\{\{\^/,/^\{\{\s*else\b/,/^\{\{\{/,/^\{\{&/,/^\{\{!.*?\}\}/,/^\{\{/,/^=/,/^\.(?=[} ])/,/^\.\./,/^[/.]/,/^\s+/,/^\}\}\}/,/^\}\}/,/^"(\\["]|[^"])*"/,/^[a-zA-Z0-9_]+(?=[=} /.])/,/^./,/^$/];o.conditions={mu:{rules:[2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21],inclusive:false},INITIAL:{rules:[0,1,21],inclusive:true}};return o})();g.lexer=a;return g})();var Handlebars={};Handlebars.Parser=handlebars;Handlebars.parse=function(a){Handlebars.Parser.yy=Handlebars.AST;return Handlebars.Parser.parse(a)};Handlebars.print=function(a){return new Handlebars.PrintVisitor().accept(a)};Handlebars.Runtime={};Handlebars.Runtime.compile=function(b){var a=Handlebars.parse(b);return function(e,g,c){g=g||Handlebars.helpers;c=c||Handlebars.partials;var j=new Handlebars.Context(e,g,c);var f=new Handlebars.Runtime(j);f.accept(a);return f.buffer}};Handlebars.helpers={};Handlebars.partials={};Handlebars.registerHelper=function(b,c,a){if(a){c.not=a}this.helpers[b]=c};Handlebars.registerPartial=function(a,b){this.partials[a]=b};Handlebars.registerHelper("helperMissing",function(a){if(arguments.length===2){return undefined}else{throw new Error("Could not find property '"+a+"'")}});Handlebars.registerHelper("blockHelperMissing",function(f,k,a){a=a||function(){};var c="";var g=Object.prototype.toString.call(f);if(g==="[object Function]"){f=f()}if(f===true){return k(this)}else{if(f===false||f==null){return a(this)}else{if(g==="[object Array]"){if(f.length>0){for(var e=0,b=f.length;e<b;e++){c=c+k(f[e])}}else{c=a(this)}return c}else{return k(f)}}}},function(a,b){return b(a)});Handlebars.registerHelper("each",function(f,g,a){var c="";if(f&&f.length>0){for(var e=0,b=f.length;e<b;e++){c=c+g(f[e])}}else{c=a(this)}return c});Handlebars.registerHelper("if",function(b,c,a){if(!b||b==[]){return a(this)}else{return c(this)}});Handlebars.registerHelper("unless",function(b,c,a){return Handlebars.helpers["if"].call(this,b,a,c)});Handlebars.registerHelper("with",function(a,b){return b(a)});Handlebars.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(b,a){}};Handlebars.log=function(b,a){Handlebars.logger.log(b,a)};(function(){Handlebars.AST={};Handlebars.AST.ProgramNode=function(c,b){this.type="program";this.statements=c;if(b){this.inverse=new Handlebars.AST.ProgramNode(b)}};Handlebars.AST.MustacheNode=function(e,c,b){this.type="mustache";this.id=e[0];this.params=e.slice(1);this.hash=c;this.escaped=!b};Handlebars.AST.PartialNode=function(c,b){this.type="partial";this.id=c;this.context=b};var a=function(b,c){if(b.original!==c.original){throw new Handlebars.Exception(b.original+" doesn't match "+c.original)}};Handlebars.AST.BlockNode=function(c,b,e){a(c.id,e);this.type="block";this.mustache=c;this.program=b};Handlebars.AST.InverseNode=function(c,b,e){a(c.id,e);this.type="inverse";this.mustache=c;this.program=b};Handlebars.AST.ContentNode=function(b){this.type="content";this.string=b};Handlebars.AST.HashNode=function(b){this.type="hash";this.pairs=b};Handlebars.AST.IdNode=function(g){this.type="ID";this.original=g.join(".");var e=[],j=0;for(var f=0,b=g.length;f<b;f++){var c=g[f];if(c===".."){j++}else{if(c==="."||c==="this"){continue}else{e.push(c)}}}this.parts=e;this.string=e.join(".");this.depth=j;this.isSimple=(e.length===1)&&(j===0)};Handlebars.AST.StringNode=function(b){this.type="STRING";this.string=b};Handlebars.AST.CommentNode=function(b){this.type="comment";this.comment=b}})();Handlebars.Visitor=function(){};Handlebars.Visitor.prototype={accept:function(a){return this[a.type](a)}};Handlebars.Exception=function(a){this.message=a};Handlebars.SafeString=function(a){this.string=a};Handlebars.SafeString.prototype.toString=function(){return this.string.toString()};(function(){var c={"<":"&lt;",">":"&gt;"};var e=/&(?!\w+;)|[<>]/g;var b=/[&<>]/;var a=function(f){return c[f]||"&amp;"};Handlebars.Utils={escapeExpression:function(f){if(f instanceof Handlebars.SafeString){return f.toString()}else{if(f==null||f===false){return""}}if(!b.test(f)){return f}return f.replace(e,a)},isEmpty:function(f){if(typeof f==="undefined"){return true}else{if(f===null){return true}else{if(f===false){return true}else{if(Object.prototype.toString.call(f)==="[object Array]"&&f.length===0){return true}else{return false}}}}}}})();Handlebars.Compiler=function(){};Handlebars.JavaScriptCompiler=function(){};(function(f,e){f.OPCODE_MAP={appendContent:1,getContext:2,lookupWithHelpers:3,lookup:4,append:5,invokeMustache:6,appendEscaped:7,pushString:8,truthyOrFallback:9,functionOrFallback:10,invokeProgram:11,invokePartial:12,push:13,invokeInverse:14,assignToHash:15,pushStringParam:16};f.MULTI_PARAM_OPCODES={appendContent:1,getContext:1,lookupWithHelpers:1,lookup:1,invokeMustache:2,pushString:1,truthyOrFallback:1,functionOrFallback:1,invokeProgram:2,invokePartial:1,push:1,invokeInverse:1,assignToHash:1,pushStringParam:1};f.DISASSEMBLE_MAP={};for(var j in f.OPCODE_MAP){var g=f.OPCODE_MAP[j];f.DISASSEMBLE_MAP[g]=j}f.multiParamSize=function(k){return f.MULTI_PARAM_OPCODES[f.DISASSEMBLE_MAP[k]]};f.prototype={compiler:f,disassemble:function(){var w=this.opcodes,u,o;var t=[],A,n,B;for(var v=0,p=w.length;v<p;v++){u=w[v];if(u==="DECLARE"){n=w[++v];B=w[++v];t.push("DECLARE "+n+" = "+B)}else{A=f.DISASSEMBLE_MAP[u];var z=f.multiParamSize(u);var k=[];for(var q=0;q<z;q++){o=w[++v];if(typeof o==="string"){o='"'+o.replace("\n","\\n")+'"'}k.push(o)}A=A+" "+k.join(" ");t.push(A)}}return t.join("\n")},guid:0,compile:function(k,n){this.children=[];this.depths={list:[]};this.options=n||{};return this.program(k)},accept:function(k){return this[k.type](k)},program:function(o){var n=o.statements,q;this.opcodes=[];for(var p=0,k=n.length;p<k;p++){q=n[p];this[q.type](q)}this.depths.list=this.depths.list.sort(function(u,t){return u-t});return this},compileProgram:function(o){var k=new this.compiler().compile(o,this.options);var p=this.guid++;this.usePartial=this.usePartial||k.usePartial;this.children[p]=k;for(var q=0,n=k.depths.list.length;q<n;q++){depth=k.depths.list[q];if(depth<2){continue}else{this.addDepth(depth-1)}}return p},block:function(u){var p=u.mustache;var t,v,n,o;var q=this.setupStackForMustache(p);var k=this.compileProgram(u.program);if(u.program.inverse){o=this.compileProgram(u.program.inverse);this.declare("inverse",o)}this.opcode("invokeProgram",k,q.length);this.declare("inverse",null);this.opcode("append")},inverse:function(n){this.ID(n.mustache.id);var k=this.compileProgram(n.program);this.opcode("invokeInverse",k);this.opcode("append")},hash:function(p){var o=p.pairs,t,q;this.opcode("push","{}");for(var n=0,k=o.length;n<k;n++){t=o[n];q=t[1];this.accept(q);this.opcode("assignToHash",t[0])}},partial:function(k){var n=k.id;this.usePartial=true;if(k.context){this.ID(k.context)}else{this.opcode("push","context")}this.opcode("invokePartial",n.original);this.opcode("append")},content:function(k){this.opcode("appendContent",k.string)},mustache:function(k){var n=this.setupStackForMustache(k);this.opcode("invokeMustache",n.length,k.id.original);if(k.escaped){this.opcode("appendEscaped")}else{this.opcode("append")}},ID:function(o){this.addDepth(o.depth);this.opcode("getContext",o.depth);this.opcode("lookupWithHelpers",o.parts[0]||null);for(var n=1,k=o.parts.length;n<k;n++){this.opcode("lookup",o.parts[n])}},STRING:function(k){this.opcode("pushString",k.string)},comment:function(){},pushParams:function(o){var k=o.length,n;while(k--){n=o[k];if(this.options.stringParams){if(n.depth){this.addDepth(n.depth)}this.opcode("getContext",n.depth||0);this.opcode("pushStringParam",n.string)}else{this[n.type](n)}}},opcode:function(k,o,n){this.opcodes.push(f.OPCODE_MAP[k]);if(o!==undefined){this.opcodes.push(o)}if(n!==undefined){this.opcodes.push(n)}},declare:function(k,n){this.opcodes.push("DECLARE");this.opcodes.push(k);this.opcodes.push(n)},addDepth:function(k){if(k===0){return}if(!this.depths[k]){this.depths[k]=true;this.depths.list.push(k)}},setupStackForMustache:function(k){var n=k.params;this.pushParams(n);if(k.hash){this.hash(k.hash)}else{this.opcode("push","{}")}this.ID(k.id);return n}};e.prototype={nameLookup:function(o,k,n){if(e.RESERVED_WORDS[k]){return o+"['"+k+"']"}else{return o+"."+k}},appendToBuffer:function(k){return"buffer = buffer + "+k+";"},initializeBuffer:function(){return this.quotedString("")},compile:function(n,p){this.environment=n;this.options=p||{};this.preamble();this.stackSlot=0;this.stackVars=[];this.registers={list:[]};this.compileChildren(n,p);Handlebars.log(Handlebars.logger.DEBUG,n.disassemble()+"\n\n");var t=n.opcodes,q,o,u,k;this.i=0;for(b=t.length;this.i<b;this.i++){q=this.nextOpcode(0);if(q[0]==="DECLARE"){this.i=this.i+2;this[q[1]]=q[2]}else{this.i=this.i+q[1].length;this[q[0]].apply(this,q[1])}}return this.createFunction()},nextOpcode:function(w){var t=this.environment.opcodes,q=t[this.i+w],p,u;var v,k;if(q==="DECLARE"){p=t[this.i+1];u=t[this.i+2];return["DECLARE",p,u]}else{p=f.DISASSEMBLE_MAP[q];v=f.multiParamSize(q);k=[];for(var o=0;o<v;o++){k.push(t[this.i+o+1+w])}return[p,k]}},eat:function(k){this.i=this.i+k.length},preamble:function(){var k=[];k.push("var buffer = "+this.initializeBuffer()+", currentContext = context");var n="helpers = helpers || Handlebars.helpers;";if(this.environment.usePartial){n=n+" partials = partials || Handlebars.partials;"}k.push(n);this.lastContext=0;this.source=k},createFunction:function(){var n={escapeExpression:Handlebars.Utils.escapeExpression,invokePartial:Handlebars.VM.invokePartial,programs:[],program:function(w,z,v,A){var u=this.programs[w];if(A){return Handlebars.VM.program(this.children[w],z,v,A)}else{if(u){return u}else{u=this.programs[w]=Handlebars.VM.program(this.children[w],z,v);return u}}},programWithDepth:Handlebars.VM.programWithDepth,noop:Handlebars.VM.noop};var q=this.stackVars.concat(this.registers.list);if(q.length>0){this.source[0]=this.source[0]+", "+q.join(", ")}this.source[0]=this.source[0]+";";this.source.push("return buffer;");var t=["Handlebars","context","helpers","partials"];if(this.options.data){t.push("data")}for(var o=0,k=this.environment.depths.list.length;o<k;o++){t.push("depth"+this.environment.depths.list[o])}if(t.length===4&&!this.environment.usePartial){t.pop()}t.push(this.source.join("\n"));var p=Function.apply(this,t);p.displayName="Handlebars.js";Handlebars.log(Handlebars.logger.DEBUG,p.toString()+"\n\n");n.render=p;n.children=this.environment.children;return function(w,A,v,B,z){try{var u=Array.prototype.slice.call(arguments);u.unshift(Handlebars);return n.render.apply(n,u)}catch(C){throw C}}},appendContent:function(k){this.source.push(this.appendToBuffer(this.quotedString(k)))},append:function(){var k=this.popStack();this.source.push("if("+k+" || "+k+" === 0) { "+this.appendToBuffer(k)+" }")},appendEscaped:function(){var n=this.nextOpcode(1),k="";if(n[0]==="appendContent"){k=" + "+this.quotedString(n[1][0]);this.eat(n)}this.source.push(this.appendToBuffer("this.escapeExpression("+this.popStack()+")"+k))},getContext:function(k){if(this.lastContext!==k){this.lastContext=k;if(k===0){this.source.push("currentContext = context;")}else{this.source.push("currentContext = depth"+k+";")}}},lookupWithHelpers:function(o){if(o){var k=this.nextStack();var n="if('"+o+"' in helpers) { "+k+" = "+this.nameLookup("helpers",o,"helper")+"; } else { "+k+" = "+this.nameLookup("currentContext",o,"context")+"; }";this.source.push(n)}else{this.pushStack("currentContext")}},lookup:function(n){var k=this.topStack();this.source.push(k+" = "+this.nameLookup(k,n,"context")+";")},pushStringParam:function(k){this.pushStack("currentContext");this.pushString(k)},pushString:function(k){this.pushStack(this.quotedString(k))},push:function(k){this.pushStack(k)},invokeMustache:function(n,k){this.populateParams(n,this.quotedString(k),"{}",null,function(o,q,p){this.source.push("else if("+p+"=== undefined) { "+o+" = helpers.helperMissing.call("+q+"); }");this.source.push("else { "+o+" = "+p+"; }")})},invokeProgram:function(n,o){var k=this.programExpression(this.inverse);var p=this.programExpression(n);this.populateParams(o,null,p,k,function(q,u,t){this.source.push("else { "+q+" = helpers.blockHelperMissing.call("+u+"); }")})},populateParams:function(t,n,z,u,B){var k=this.popStack(),A;var p=[],o,q;var w=this.popStack();this.register("tmp1",z);this.source.push("tmp1.hash = "+w+";");if(this.options.stringParams){this.source.push("tmp1.contexts = [];")}for(var v=0;v<t;v++){o=this.popStack();p.push(o);if(this.options.stringParams){this.source.push("tmp1.contexts.push("+this.popStack()+");")}}if(u){this.source.push("tmp1.fn = tmp1;");this.source.push("tmp1.inverse = "+u+";")}if(this.options.data){this.source.push("tmp1.data = data;")}p.push("tmp1");if(u){p.push(u)}this.populateCall(p,k,n||k,B)},populateCall:function(o,t,q,k){var n=["context"].concat(o).join(", ");var p=["context"].concat(q).concat(o).join(", ");nextStack=this.nextStack();this.source.push("if(typeof "+t+" === 'function') { "+nextStack+" = "+t+".call("+n+"); }");k.call(this,nextStack,p,t)},invokeInverse:function(o){var k=this.programExpression(o);var n=["context",this.topStack(),"this.noop",k];this.pushStack("helpers.blockHelperMissing.call("+n.join(", ")+")")},invokePartial:function(k){this.pushStack("this.invokePartial("+this.nameLookup("partials",k,"partial")+", '"+k+"', "+this.popStack()+", helpers, partials);")},assignToHash:function(k){var n=this.popStack();var o=this.topStack();this.source.push(o+"['"+k+"'] = "+n+";")},compiler:e,compileChildren:function(k,o){var q=k.children,v,t;var u=[];for(var p=0,n=q.length;p<n;p++){v=q[p];t=new this.compiler();u[p]=t.compile(v,o)}k.rawChildren=q;k.children=u},programExpression:function(n){if(n==null){return"this.noop"}var p=[n,"helpers","partials"];var q=this.environment.rawChildren[n].depths.list;if(this.options.data){p.push("data")}for(var o=0,k=q.length;o<k;o++){depth=q[o];if(depth===1){p.push("context")}else{p.push("depth"+(depth-1))}}if(!this.environment.usePartial){if(p[3]){p[2]="null"}else{p.pop()}}if(q.length===0){return"this.program("+p.join(", ")+")"}else{p[0]="this.children["+n+"]";return"this.programWithDepth("+p.join(", ")+")"}},register:function(k,n){this.useRegister(k);this.source.push(k+" = "+n+";")},useRegister:function(k){if(!this.registers[k]){this.registers[k]=true;this.registers.list.push(k)}},pushStack:function(k){this.source.push(this.nextStack()+" = "+k+";");return"stack"+this.stackSlot},nextStack:function(){this.stackSlot++;if(this.stackSlot>this.stackVars.length){this.stackVars.push("stack"+this.stackSlot)}return"stack"+this.stackSlot},popStack:function(){return"stack"+this.stackSlot--},topStack:function(){return"stack"+this.stackSlot},quotedString:function(k){return'"'+k.replace(/\\/,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r")+'"'}};var a=("break case catch continue default delete do else finally for function if in instanceof new return switch this throw try typeof var void while with null true false extends").split(" ");compilerWords=e.RESERVED_WORDS={};for(var c=0,b=a.length;c<b;c++){compilerWords[a[c]]=true}})(Handlebars.Compiler,Handlebars.JavaScriptCompiler);Handlebars.VM={programWithDepth:function(b){var a=Array.prototype.slice.call(arguments,1);return function(e,f,c,g){a[0]=f||a[0];a[1]=c||a[1];a[2]=g||a[2];return b.apply(this,[e].concat(a))}},program:function(b,c,a,e){return function(g,f,k,j){return b(g,f||c,k||a,j||e)}},noop:function(){return""},compile:function(e,c){var b=Handlebars.parse(e);var a=new Handlebars.Compiler().compile(b,c);return new Handlebars.JavaScriptCompiler().compile(a,c)},invokePartial:function(a,b,e,f,c){if(a===undefined){throw new Handlebars.Exception("The partial "+b+" could not be found")}else{if(a instanceof Function){return a(e,f,c)}else{c[b]=Handlebars.VM.compile(a);return c[b](e,f,c)}}}};Handlebars.compile=Handlebars.VM.compile;if(typeof CHANCE_SLICES==="undefined"){var CHANCE_SLICES=[]}CHANCE_SLICES=CHANCE_SLICES.concat([]);SC.DROP_ON=1;SC.DROP_BEFORE=2;SC.DROP_AFTER=4;SC.DROP_ANY=7;SC.ALIGN_LEFT="left";SC.ALIGN_RIGHT="right";SC.ALIGN_CENTER="center";SC.ALIGN_TOP="top";SC.ALIGN_MIDDLE="middle";SC.ALIGN_BOTTOM="bottom";SC.ALIGN_TOP_LEFT="top-left";SC.ALIGN_TOP_RIGHT="top-right";SC.ALIGN_BOTTOM_LEFT="bottom-left";SC.ALIGN_BOTTOM_RIGHT="bottom-right";SC.mixin({data:$.data,removeData:$.removeData,STRINGS:{},stringsFor:function(b,a){SC.mixin(SC.STRINGS,a);return this}});SC.Controller=SC.Object.extend({isEditable:YES,destroyContentOnReplace:NO,contentObjectDidChanged:function(){var b,a;if(!this.get("destroyContentOnReplace")){return}b=this._oldContent,a=this.get("content");if(b&&a!==b&&b.destroy){b.destroy()}this._oldContent=a}.observes("content")});SC.SelectionSupport={hasSelectionSupport:YES,allowsSelection:YES,allowsMultipleSelection:YES,allowsEmptySelection:YES,firstSelectableObject:function(){return this.get("firstObject")}.property(),selection:function(e,g){var c=this._scsel_selection,j=c?c.get("length"):0,f,b=this.get("arrangedObjects"),a;if((g===undefined)||!this.get("allowsSelection")){g=c}a=(g&&g.isEnumerable)?g.get("length"):0;if((a>1)&&!this.get("allowsMultipleSelection")){if(j>1){g=SC.SelectionSet.create().addObject(c.get("firstObject")).freeze();a=1}else{g=c;a=j}}if((a===0)&&!this.get("allowsEmptySelection")&&b&&b.get("length")!==0){if(j===0){g=this.get("firstSelectableObject");if(g){g=SC.SelectionSet.create().addObject(g).freeze()}else{g=SC.SelectionSet.EMPTY}a=g.get("length")}else{g=c;a=j}}if(a===0){g=SC.SelectionSet.EMPTY}if(g!==c){g=g.frozenCopy()}this._scsel_selection=g;return g}.property("arrangedObjects","allowsEmptySelection","allowsMultipleSelection","allowsSelection").cacheable(),hasSelection:function(){var a=this.get("selection");return !!a&&(a.get("length")>0)}.property("selection").cacheable(),selectObjects:function(b,c){if(!b||b.get("length")===0){if(!c){this.set("selection",SC.SelectionSet.EMPTY)}return this}var a=this.get("selection");if(c&&a){a=a.copy()}else{a=SC.SelectionSet.create()}a.addObjects(b).freeze();this.set("selection",a);return this},selectObject:function(a,b){if(a===null){if(!b){this.set("selection",null)}return this}else{return this.selectObjects([a],b)}},deselectObjects:function(b){if(!b||b.get("length")===0){return this}var a=this.get("selection");if(!a||a.get("length")===0){return this}a=a.copy().removeObjects(b).freeze();this.set("selection",a.freeze());return this},deselectObject:function(a){if(!a){return this}else{return this.deselectObjects([a])}},updateSelectionAfterContentChange:function(){var a=this.get("arrangedObjects");var b=this.get("selection");var e=this.get("allowsEmptySelection");var c;if(!b){return this}c=b.indexSetForSource(a);if((c&&(c.get("length")!==b.get("length")))||(!c&&(b.get("length")>0))){b=b.copy().constrain(a).freeze();this.set("selection",b)}if((b.get("length")===0)&&a&&(a.get("length")>0)&&!e){this.selectObject(this.get("firstSelectableObject"),NO)}return this}};sc_require("controllers/controller");sc_require("mixins/selection_support");SC.ArrayController=SC.Controller.extend(SC.Array,SC.SelectionSupport,{content:null,isEditable:YES,orderBy:null,allowsSingleContent:YES,destroyOnRemoval:NO,arrangedObjects:function(){return this}.property().cacheable(),canRemoveContent:function(){var b=this.get("content"),a;a=!!b&&this.get("isEditable")&&this.get("hasContent");if(a){return !b.isEnumerable||(SC.typeOf(b.removeObject)===SC.T_FUNCTION)}else{return NO}}.property("content","isEditable","hasContent"),canReorderContent:function(){var b=this.get("content"),a;a=!!b&&this.get("isEditable")&&!this.get("orderBy");return a&&!!b.isSCArray}.property("content","isEditable","orderBy"),canAddContent:function(){var b=this.get("content"),a;a=b&&this.get("isEditable")&&b.isEnumerable;if(a){return(SC.typeOf(b.addObject)===SC.T_FUNCTION)||(SC.typeOf(b.pushObject)===SC.T_FUNCTION)}else{return NO}}.property("content","isEditable"),hasContent:function(){var a=this.get("content");return !!a&&(!!a.isEnumerable||!!this.get("allowsSingleContent"))}.property("content","allowSingleContent"),status:function(){var b=this.get("content"),a=b?b.get("status"):null;return a?a:SC.Record.READY}.property().cacheable(),addObject:function(a){if(!this.get("canAddContent")){throw"%@ cannot add content".fmt(this)}var b=this.get("content");if(b.isSCArray){b.pushObject(a)}else{if(b.addObject){b.addObject(a)}else{throw"%@.content does not support addObject".fmt(this)}}return this},removeObject:function(a){if(!this.get("canRemoveContent")){throw"%@ cannot remove content".fmt(this)}var b=this.get("content");if(b.isEnumerable){b.removeObject(a)}else{this.set("content",null)}if(this.get("destroyOnRemoval")&&a.destroy){a.destroy()}return this},length:function(){var a=this._scac_observableContent();return a?a.get("length"):0}.property().cacheable(),objectAt:function(a){var b=this._scac_observableContent();return b?b.objectAt(a):undefined},replace:function(j,g,e){if(!e||e.get("length")===0){if(!this.get("canRemoveContent")){throw"%@ cannot remove objects from the current content".fmt(this)}}else{if(!this.get("canReorderContent")){throw"%@ cannot add or reorder the current content".fmt(this)}}var c=this.get("content");var b=[],a,f;if(this.get("destroyOnRemoval")){for(a=0;a<g;a++){b.push(c.objectAt(a+j))}}if(c){c.replace(j,g,e)}for(a=0,f=b.length;a<f;a++){b[a].destroy()}b=null;return this},indexOf:function(b,a){var c=this._scac_observableContent();return c?c.indexOf(b,a):-1},init:function(){arguments.callee.base.apply(this,arguments);this._scac_contentDidChange()},_scac_cached:NO,_scac_observableContent:function(){var c=this._scac_cached;if(c){return c}var g=this.get("content"),f,b,a;if(SC.none(g)){return(this._scac_cached=[])}if(!g.isEnumerable){c=this.get("allowsSingleContent")?[g]:[];return(this._scac_cached=c)}var j=this.get("orderBy");if(!j){if(g.isSCArray){return(this._scac_cached=g)}else{throw"%@.orderBy is required for unordered content".fmt(this)}}var e=SC.typeOf(j);if(e===SC.T_STRING){j=[j]}else{if(e===SC.T_FUNCTION){f=j}else{if(e!==SC.T_ARRAY){throw"%@.orderBy must be Array, String, or Function".fmt(this)}}}f=f||function(p,k){var o,u,q,v;for(var t=0,n=j.get("length");t<n&&!o;t++){u=j.objectAt(t);q=u.match(/^(ASC )?(DESC )?(.*)$/);u=q[3];a=q[2]?-1:1;if(p){p=p.isObservable?p.get(u):p[u]}if(k){k=k.isObservable?k.get(u):k[u]}o=SC.compare(p,k)*a}return o};return(this._scac_cached=g.toArray().sort(f))},propertyWillChange:function(a){if(a==="content"){this.arrayContentWillChange(0,this.get("length"),0)}else{return arguments.callee.base.apply(this,arguments)}},_scac_arrayContentWillChange:function(e,c,a){this.arrayContentWillChange(e,c,a);var b=this.slice(e,e+c);this.teardownEnumerablePropertyChains(b)},_scac_arrayContentDidChange:function(e,c,a){this.arrayContentDidChange(e,c,a);var b=this.slice(e,e+a);this._scac_cached=NO;this.setupEnumerablePropertyChains(b);this.updateSelectionAfterContentChange()},_scac_contentDidChange:function(){this._scac_cached=NO;var k=this.get("content"),e=!!this.get("orderBy"),n=this._scac_content,a=this._scac_length||0,j=this._scac_arrayContentDidChange,c=this._scac_arrayContentWillChange,b=this._scac_contentStatusDidChange,g=this._scac_enumerableDidChange,f;if(k===n){return this}if(n){if(n.isSCArray){n.removeArrayObservers({target:this,didChange:j,willChange:c})}else{if(n.isEnumerable){n.removeObserver("[]",this,g)}}n.removeObserver("status",this,b);this.teardownEnumerablePropertyChains(n)}this._scac_cached=NO;this._scac_content=k;if(k){if(k.isSCArray){k.addArrayObservers({target:this,didChange:j,willChange:c});f=k.get("length")}else{if(k.isEnumerable){k.addObserver("[]",this,g);f=k.get("length")}else{f=1}}k.addObserver("status",this,b);this.setupEnumerablePropertyChains(k)}else{f=SC.none(k)?0:1}this._scac_length=f;this._scac_contentStatusDidChange();this.arrayContentDidChange(0,0,f);this.updateSelectionAfterContentChange()}.observes("content"),_scac_enumerableDidChange:function(){var a=this.get("content"),c=a?a.get("length"):0,b=this._scac_length;this._scac_length=c;this.beginPropertyChanges();this._scac_cached=NO;this.arrayContentDidChange(0,b,c);this.endPropertyChanges();this.updateSelectionAfterContentChange()}.observes("orderBy"),_scac_contentStatusDidChange:function(){this.notifyPropertyChange("status")}});sc_require("controllers/controller");SC.ObjectController=SC.Controller.extend({content:null,allowsMultipleContent:NO,hasContent:function(){return !SC.none(this.get("observableContent"))}.property("observableContent"),isEditable:YES,observableContent:function(){var b=this.get("content"),a,c;if(b&&b.isEnumerable){a=b.get("length");c=this.get("allowsMultipleContent");if(a===1){b=b.firstObject()}else{if(a===0||!c){b=null}}if(b&&!c&&b.isEnumerable){b=null}}return b}.property("content","allowsMultipleContent").cacheable(),destroy:function(){var a=this.get("observableContent");if(a&&SC.typeOf(a.destroy)===SC.T_FUNCTION){a.destroy()}this.set("content",null);return this},contentPropertyDidChange:function(b,a){if(a==="*"){this.allPropertiesDidChange()}else{this.notifyPropertyChange(a)}},unknownProperty:function(b,e){if(b==="content"){if(e!==undefined){this.content=e}return this.content}var c=this.get("observableContent"),g,f,a;if(c===null||c===undefined){return undefined}if(e===undefined){if(c.isEnumerable){e=c.getEach(b);g=e.get("length");if(g>0){a=YES;f=e.objectAt(0);while((--g>0)&&a){if(f!==e.objectAt(g)){a=NO}}if(a){e=f}}else{e=undefined}}else{e=(c.isObservable)?c.get(b):c[b]}}else{if(!this.get("isEditable")){throw"%@.%@ is not editable".fmt(this,b)}if(c.isEnumerable){c.setEach(b,e)}else{if(c.isObservable){c.set(b,e)}else{c[b]=e}}}return e},init:function(){arguments.callee.base.apply(this,arguments);if(this.get("content")){this._scoc_contentDidChange()}if(this.get("observableContent")){this._scoc_observableContentDidChange()}},_scoc_contentDidChange:function(){var b=this._scoc_content,c=this.get("content");if(b!==c){this._scoc_content=c;var a=this._scoc_enumerableContentDidChange;if(b&&b.isEnumerable){b.removeObserver("[]",this,a)}if(c&&c.isEnumerable){c.addObserver("[]",this,a)}}}.observes("content"),_scoc_observableContentDidChange:function(){var b=this._scoc_observableContent,e=this.get("observableContent"),a=this.contentPropertyDidChange,c=this._scoc_enumerableContentDidChange;if(b===e){return this}this._scoc_observableContent=e;if(b){if(b.isEnumerable){b.removeObserver("[]",this,c)}else{if(b.isObservable){b.removeObserver("*",this,a)}}}if(e){if(e.isEnumerable){e.addObserver("[]",this,c)}else{if(e.isObservable){e.addObserver("*",this,a)}}}if((b&&b.isEnumerable)||(e&&e.isEnumerable)){this._scoc_enumerableContentDidChange()}else{this.contentPropertyDidChange(e,"*")}}.observes("observableContent"),_scoc_enumerableContentDidChange:function(){var b=this.get("observableContent"),c=this._scoc_observableContentItems,a=this.contentPropertyDidChange;if(c){c.forEach(function(e){if(e.isObservable){e.removeObserver("*",this,a)}},this);c.clear()}if(b&&b.isEnumerable){if(!c){c=SC.Set.create()}b.forEach(function(e){if(c.contains(e)){return}c.add(e);if(e.isObservable){e.addObserver("*",this,a)}},this)}else{c=null}this._scoc_observableContentItems=c;this.contentPropertyDidChange(b,"*");return this}});SC.Handlebars={};SC.Handlebars.Compiler=function(){};SC.Handlebars.Compiler.prototype=SC.beget(Handlebars.Compiler.prototype);SC.Handlebars.Compiler.prototype.compiler=SC.Handlebars.Compiler;SC.Handlebars.JavaScriptCompiler=function(){};SC.Handlebars.JavaScriptCompiler.prototype=SC.beget(Handlebars.JavaScriptCompiler.prototype);SC.Handlebars.JavaScriptCompiler.prototype.compiler=SC.Handlebars.JavaScriptCompiler;SC.Handlebars.JavaScriptCompiler.prototype.nameLookup=function(c,a,b){if(b==="context"){return"SC.get("+c+", "+this.quotedString(a)+");"}else{return Handlebars.JavaScriptCompiler.prototype.nameLookup.call(this,c,a,b)}};SC.Handlebars.Compiler.prototype.mustache=function(a){if(a.params.length||a.hash){return Handlebars.Compiler.prototype.mustache.call(this,a)}else{var b=new Handlebars.AST.IdNode(["bind"]);a=new Handlebars.AST.MustacheNode([b].concat([a.id]),a.hash,!a.escaped);return Handlebars.Compiler.prototype.mustache.call(this,a)}};SC.Handlebars.compile=function(e){var b=Handlebars.parse(e);var a=new SC.Handlebars.Compiler().compile(b,{data:true,stringParams:true});var c=new SC.Handlebars.JavaScriptCompiler().compile(a,{data:true,stringParams:true});c.rawTemplate=e;return c};Handlebars.registerHelper("helperMissing",function(c,b){var a;a="%@ Handlebars error: Could not find property '%@' on object %@.";throw a.fmt(b.data.view,c,this)});sc_require("ext/handlebars");(function(){var a=function(q,t,n,b){var f=t.data,o=t.fn,e=t.inverse,p=f.view;if(this.isObservable){var g=p.createChildView(SC._BindableSpan,{preserveContext:n,shouldDisplayFunc:b,displayTemplate:o,inverseTemplate:e,property:q,previousContext:this,tagName:(t.hash.tagName||"span")});var k,j;p.get("childViews").push(g);k=function(){if(g.get("layer")){g.rerender()}else{this.removeObserver(q,j)}};j=function(){this.invokeOnce(k)};this.addObserver(q,j);var c=g.renderContext(g.get("tagName"));g.renderToContext(c);return new Handlebars.SafeString(c.join())}else{return SC.getPath(this,q)}};Handlebars.registerHelper("bind",function(c,b){return a.call(this,c,b,false,function(e){return !SC.none(e)})});Handlebars.registerHelper("boundIf",function(c,b){if(b){return a.call(this,c,b,true,function(e){if(SC.typeOf(e)===SC.T_ARRAY){if(e.length!==0){return true}return false}else{return !!e}})}else{throw"Cannot use boundIf helper without a block."}})})();Handlebars.registerHelper("with",function(b,a){return Handlebars.helpers.bind.call(a.contexts[0],b,a)});Handlebars.registerHelper("if",function(b,a){return Handlebars.helpers.boundIf.call(a.contexts[0],b,a)});Handlebars.registerHelper("unless",function(c,b){var e=b.fn,a=b.inverse;b.fn=a;b.inverse=e;return Handlebars.helpers.boundIf.call(b.contexts[0],c,b)});Handlebars.registerHelper("bindAttr",function(g){var f=g.hash;var b=g.data.view;var e=[];var c=jQuery.uuid++;var k=f["class"];if(k!=null){var a=SC.Handlebars.bindClasses(this,k,b,c);e.push('class="'+a.join(" ")+'"');delete f["class"]}var j=SC.keys(f);j.forEach(function(n){var t=f[n];var q=this.getPath(t);var p,o;p=function p(){var u=this.getPath(t);var v=b.$("[data-handlebars-id='"+c+"']");if(v.length===0){this.removeObserver(t,o);return}if(u===NO){v.removeAttr(n)}else{if(u===YES){v.attr(n,n)}else{v.attr(n,u)}}};o=function(){this.invokeOnce(p)};this.addObserver(t,o);if(q===YES){q=n}if(q!==NO){e.push(n+'="'+q+'"')}},this);e.push('data-handlebars-id="'+c+'"');return e.join(" ")});SC.Handlebars.bindClasses=function(b,k,j,a){var g=[],f,n,c;var e=function(o){var p=b.getPath(o);if(p===YES){return SC.String.dasherize(o.split(".").get("lastObject"))}else{if(p!==NO&&p!==undefined&&p!==null){return p}else{return null}}};k.split(" ").forEach(function(t){var q;var p,o;p=function(){f=e(t);c=a?j.$("[data-handlebars-id='"+a+"']"):j.$();if(c.length===0){b.removeObserver(t,o)}else{if(q){c.removeClass(q)}if(f){c.addClass(f);q=f}else{q=null}}};o=function(){this.invokeOnce(p)};b.addObserver(t,o);n=e(t);if(n){g.push(n);q=n}});return g};sc_require("ext/handlebars");Handlebars.registerHelper("collection",function(p,q){var o=q.fn;var g=q.data;var e=q.inverse;var f=q.hash;var j,a;j=p?SC.getPath(this,p)||SC.getPath(p):SC.TemplateCollectionView;var n={};if(f){var c={},k;for(var b in f){if(f.hasOwnProperty(b)){k=b.match(/^item(.)(.*)$/);if(k){c[k[1].toLowerCase()+k[2]]=f[b];delete f[b]}}}n=SC.clone(f);n.itemViewOptions=c}if(o){n.itemViewTemplate=o}if(e){n.inverseTemplate=e}if(j.isClass){a=j.extend(n)}else{a=SC.mixin(j,n)}q.fn=function(){return""};return Handlebars.helpers.view.call(this,a,q)});Handlebars.registerHelper("each",function(b,a){a.hash.contentBinding=SC.Binding.from("*"+b,this).oneWay();a.hash.itemContextProperty="content";return Handlebars.helpers.collection.call(this,null,a)});sc_require("ext/handlebars");Handlebars.registerHelper("loc",function(a){return SC.String.loc(a)});sc_require("ext/handlebars");SC.Handlebars.ViewHelper=SC.Object.create({helper:function(q,t,u){var c=u.inverse;var f=u.data;var o=f.view;var n=u.fn;var e=u.hash;var b;if(t.isClass||t.isObject){b=t;if(!b){throw"Null or undefined object was passed to the #view helper. Did you mean to pass a property path string?"}}else{if(t.charAt(0)==="."){b=SC.objectForPropertyPath(t.slice(1),o)}else{b=SC.getPath(q,t);if(!b){b=SC.getPath(t)}}if(!b){throw"Unable to find view at path '"+t+"'"}}if(e.id){e.layerId=e.id}var p={id:e.id,"class":e["class"],classBinding:e.classBinding};delete e.id;delete e["class"];delete e.classBinding;if(b.isClass){b=b.extend(e)}else{SC.mixin(b,e)}var j=f.view;var k=j.get("childViews");var g=j.createChildView(b);if(n){g.template=n}k.pushObject(g);var a=SC.RenderContext(g.get("tagName"));this.applyAttributes(p,g,a);g.applyAttributesToContext(a);g.render(a,YES);return new Handlebars.SafeString(a.join())},applyAttributes:function(a,g,b){var f=a.id;var e=a["class"];if(e){b.addClass(e.split(" "))}if(f){g.set("layerId",f);b.id(f)}var c=a.classBinding;if(c){SC.Handlebars.bindClasses(g,c,g).forEach(function(j){b.setClass(j,YES)})}}});Handlebars.registerHelper("view",function(b,a){return SC.Handlebars.ViewHelper.helper(this,b,a)});SC.mixin(SC.browser,{compareVersion:function(){if(this._versionSplit===undefined){var e=function(f){return Number(f.match(/^[0-9]+/))};this._versionSplit=SC.A(this.version.split(".")).map(e)}var c=SC.A(arguments).map(Number);for(var b=0;b<c.length;b++){var a=this._versionSplit[b]-c[b];if(isNaN(a)){return 0}if(a!==0){return a}}return 0}});SC.Builder=function(a){return SC.Builder.create(a)};SC.Builder.create=function create(c){var b=SC.mixin(SC.beget(this.fn),c||{});if(c.hasOwnProperty("toString")){b.toString=c.toString}var a=function(){var e=SC.beget(b);e.defaultClass=this;e.constructor=a;return e.init.apply(e,arguments)};a.fn=a.prototype=b;a.extend=SC.Builder.create;a.mixin=SC.Builder.mixin;return a};SC.Builder.mixin=function(){var b=arguments.length,a;for(a=0;a<b;a++){SC.mixin(this,arguments[a])}return this};SC.Builder.fn={init:function(a){if(a!==undefined){if(SC.typeOf(a)===SC.T_ARRAY){var b=a.length;while(--b>=0){this[b]=a.objectAt?a.objectAt(b):a[b]}this.length=a.length}else{this[0]=a;this.length=1}}return this},size:function(){return this.length},pushStack:function(){var a=this.constructor.apply(this,arguments);a.prevObject=this;return a},end:function(){return this.prevObject||this.constructor()},toString:function(){return"%@$(%@)".fmt(this.defaultClass.toString(),SC.A(this).invoke("toString").join(","))},mixin:SC.Builder.mixin};(function(){var a=SC.Enumerable,c=SC.Builder.fn,b,e;for(b in a){if(!a.hasOwnProperty(b)){continue}e=Array.prototype[b]||a[b];c[b]=e}})();sc_require("system/builder");SC.$=SC.CoreQuery=jQuery;SC.mixin(SC.$.fn,{isCoreQuery:YES,toString:function(){var c=[],b=this.length,a=0;for(a=0;a<b;a++){c[a]="%@: %@".fmt(a,this[a]?this[a].toString():"(null)")}return"<$:%@>(%@)".fmt(SC.guidFor(this),c.join(" , "))},isVisible:function(){return Array.prototype.every.call(this,function(a){return SC.$.isVisible(a)})},view:function(){return this.map(function(){var b=null,a=SC.viewKey,e=this,c;while(!b&&e&&(e!==document)){if(e.nodeType===1&&(c=e.getAttribute("id"))){b=SC.View.views[c]}e=e.parentNode}e=null;return b})},within:function(a){if(this.filter(a).length){return true}return !!this.has(a).length}});(function(){var c={},g={find:function(k,j){return(j!==undefined)?SC.Enumerable.find.call(this,k,j):c.find.call(this,k)},filter:function(k,j){return(j!==undefined)?this.pushStack(SC.Enumerable.filter.call(this,k,j)):c.filter.call(this,k)},filterProperty:function(j,k){return this.pushStack(SC.Enumerable.filterProperty.call(this,j,k))},indexOf:SC.$.index,map:function(k,j){return(j!==undefined)?SC.Enumerable.map.call(this,k,j):c.map.call(this,k)}};var e=SC.$.fn,a=SC.Enumerable,f;for(var b in a){if(a.hasOwnProperty(b)){f=a[b];if(b in g){c[b]=e[b];f=g[b]}e[b]=f}}})();SC.mixin(SC.$,{isVisible:function(a){var b=SC.$;return("hidden"!=a.type)&&(b.css(a,"display")!="none")&&(b.css(a,"visibility")!="hidden")}});sc_require("system/core_query");SC.Event=function(a){var k,e;if(a){this.originalEvent=a;var g=SC.Event._props,n;e=g.length;k=e;while(--k>=0){n=g[k];this[n]=a[n]}}this.timeStamp=this.timeStamp||Date.now();if(!this.target){this.target=this.srcElement||document}if(this.target.nodeType===3){this.target=this.target.parentNode}if(!this.relatedTarget&&this.fromElement){this.relatedTarget=(this.fromElement===this.target)?this.toElement:this.fromElement}if(SC.none(this.pageX)&&!SC.none(this.clientX)){var j=document.documentElement,c=document.body;this.pageX=this.clientX+(j&&j.scrollLeft||c&&c.scrollLeft||0)-(j.clientLeft||0);this.pageY=this.clientY+(j&&j.scrollTop||c&&c.scrollTop||0)-(j.clientTop||0)}if(!this.which&&((this.charCode||a.charCode===0)?this.charCode:this.keyCode)){this.which=this.charCode||this.keyCode}if(!this.metaKey&&this.ctrlKey){this.metaKey=this.ctrlKey}if(!this.which&&this.button){this.which=((this.button&1)?1:((this.button&2)?3:((this.button&4)?2:0)))}if(this.type==="mousewheel"||this.type==="DOMMouseScroll"||this.type==="MozMousePixelScroll"){var b=SC.Event.MOUSE_WHEEL_MULTIPLIER,f=parseFloat(SC.browser.version);if(SC.browser.webkit&&a.wheelDelta!==undefined){this.wheelDelta=0-(a.wheelDeltaY||a.wheelDeltaX);this.wheelDeltaY=0-(a.wheelDeltaY||0);this.wheelDeltaX=0-(a.wheelDeltaX||0)}else{if(!SC.none(a.detail)&&SC.browser.mozilla){if(a.axis&&(a.axis===a.HORIZONTAL_AXIS)){this.wheelDeltaX=a.detail;this.wheelDeltaY=this.wheelDelta=0}else{this.wheelDeltaY=this.wheelDelta=a.detail;this.wheelDeltaX=0}}else{this.wheelDelta=this.wheelDeltaY=SC.browser.msie||SC.browser.opera?0-a.wheelDelta:a.wheelDelta;this.wheelDeltaX=0}}if(this.wheelDelta>SC.Event.MOUSE_WHEEL_DELTA_LIMIT&&!SC.Event._MOUSE_WHEEL_LIMIT_INVALIDATED){b=SC.Event.MOUSE_WHEEL_MULTIPLIER=0.004;SC.Event._MOUSE_WHEEL_LIMIT_INVALIDATED=YES}this.wheelDelta*=b;this.wheelDeltaX*=b;this.wheelDeltaY*=b}return this};SC.mixin(SC.Event,{MOUSE_WHEEL_MULTIPLIER:(function(){var b=1,a=parseFloat(SC.browser.version),c=NO;if(SC.browser.safari){if(a>=533.17){b=0.004;c=YES}else{if(a<533){b=40;c=YES}}}else{if(SC.browser.mozilla){b=10;c=YES}}if(c){SC.Event._MOUSE_WHEEL_LIMIT_INVALIDATED=YES}return b})(),MOUSE_WHEEL_DELTA_LIMIT:1000,_MOUSE_WHEEL_LIMIT_INVALIDATED:NO,create:function(a){return new SC.Event(a)},add:function(g,f,j,k,e,a){if(g&&g.isCoreQuery){if(g.length>0){g.forEach(function(n){this.add(n,f,j,k,e)},this);return this}else{g=g[0]}}if(!g){return this}if(!a){a=NO}if(g.nodeType===3||g.nodeType===8){return SC.Event}if(SC.browser.msie&&g.setInterval){g=window}if(SC.typeOf(j)===SC.T_FUNCTION){e=k;k=j;j=null}else{if(j&&SC.typeOf(k)===SC.T_STRING){k=j[k]}}var c=SC.data(g,"sc_events")||SC.data(g,"sc_events",{}),b=c[f];if(!b){b=c[f]={};this._addEventListener(g,f,a)}b[SC.hashFor(j,k)]=[j,k,e];SC.Event._global[f]=YES;g=c=b=null;return this},remove:function(g,f,j,k){if(g&&g.isCoreQuery){if(g.length>0){g.forEach(function(n){this.remove(n,f,j,k)},this);return this}else{g=g[0]}}if(!g){return this}if(g.nodeType===3||g.nodeType===8){return SC.Event}if(SC.browser.msie&&g.setInterval){g=window}var a,e,c=SC.data(g,"sc_events");if(!c){return this}if(f===undefined){for(f in c){this.remove(g,f)}}else{if(a=c[f]){var b=NO;if(j||k){if(SC.typeOf(j)===SC.T_FUNCTION){k=j;j=null}else{if(SC.typeOf(k)===SC.T_STRING){k=j[k]}}delete a[SC.hashFor(j,k)];e=null;for(e in a){break}if(e===null){b=YES}}else{b=YES}if(b){delete c[f];this._removeEventListener(g,f)}e=null;for(e in c){break}if(!e){SC.removeData(g,"sc_events");delete this._elements[SC.guidFor(g)]}}}g=c=a=null;return this},NO_BUBBLE:["blur","focus","change"],simulateEvent:function(e,c,b){var a=SC.Event.create({type:c,target:e,preventDefault:function(){this.cancelled=YES},stopPropagation:function(){this.bubbles=NO},allowDefault:function(){this.hasCustomEventHandling=YES},timeStamp:Date.now(),bubbles:(this.NO_BUBBLE.indexOf(c)<0),cancelled:NO,normalized:YES});if(b){SC.mixin(a,b)}return a},trigger:function(c,b,n,o){if(c&&c.isCoreQuery){if(c.length>0){c.forEach(function(t){this.trigger(t,b,n,o)},this);return this}else{c=c[0]}}if(!c){return this}if(c.nodeType===3||c.nodeType===8){return undefined}n=SC.A(n);var k,p=SC.typeOf(c[b]||null)===SC.T_FUNCTION,a,j,f,q;a=n[0];if(!a||!a.preventDefault){a=this.simulateEvent(c,b);n.unshift(a)}a.type=b;j=c;do{k=SC.Event.handle.apply(j,n);j=(j===document)?null:(j.parentNode||document)}while(!k&&a.bubbles&&j);j=null;f=c["on"+b];q=SC.$.nodeName(c,"a")&&b==="click";if((!p||q)&&f&&f.apply(c,n)===NO){k=NO}if(p&&o!==NO&&k!==NO&&!q){this.triggered=YES;try{c[b]()}catch(g){}}this.triggered=NO;return k},handle:function(b){if((typeof SC==="undefined")||SC.Event.triggered){return YES}var c,j,f,n,e,k,o,p,a,g;k=SC.A(arguments);k[0]=b=SC.Event.normalizeEvent(b||window.event);e=(SC.data(this,"sc_events")||{})[b.type];if(!e){return NO}for(o in e){p=e[o];a=p[1];b.handler=a;b.data=b.context=p[2];g=p[0]||this;j=a.apply(g,k);if(c!==NO){c=j}if(j===NO){b.preventDefault();b.stopPropagation()}}return c},unload:function(){var a,b=this._elements;for(a in b){this.remove(b[a])}for(a in b){delete b[a]}delete this._elements},special:{ready:{setup:function(){SC._bindReady();return},teardown:function(){return}},mouseenter:{setup:function(){if(SC.browser.msie){return NO}SC.Event.add(this,"mouseover",SC.Event.special.mouseenter.handler);return YES},teardown:function(){if(SC.browser.msie){return NO}SC.Event.remove(this,"mouseover",SC.Event.special.mouseenter.handler);return YES},handler:function(a){if(SC.Event._withinElement(a,this)){return YES}a.type="mouseenter";return SC.Event.handle.apply(this,arguments)}},mouseleave:{setup:function(){if(SC.browser.msie){return NO}SC.Event.add(this,"mouseout",SC.Event.special.mouseleave.handler);return YES},teardown:function(){if(SC.browser.msie){return NO}SC.Event.remove(this,"mouseout",SC.Event.special.mouseleave.handler);return YES},handler:function(a){if(SC.Event._withinElement(a,this)){return YES}a.type="mouseleave";return SC.Event.handle.apply(this,arguments)}}},KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34,KEY_INSERT:45,_withinElement:function(e,c){var b=e.relatedTarget;while(b&&b!=c){try{b=b.parentNode}catch(a){b=c}}return b===c},_addEventListener:function(f,e,a){var g,c=this.special[e];if(!a){a=NO}if(!c||c.setup.call(f)===NO){var b=SC.guidFor(f);this._elements[b]=f;g=SC.data(f,"listener")||SC.data(f,"listener",function(){return SC.Event.handle.apply(SC.Event._elements[b],arguments)});if(f.addEventListener){f.addEventListener(e,g,a)}else{if(f.attachEvent){f.attachEvent("on"+e,g)}}}f=c=g=null},_removeEventListener:function(c,b){var e,a=SC.Event.special[b];if(!a||(a.teardown.call(c)===NO)){e=SC.data(c,"listener");if(e){if(c.removeEventListener){c.removeEventListener(b,e,NO)}else{if(c.detachEvent){c.detachEvent("on"+b,e)}}}}c=a=e=null},_elements:{},normalizeEvent:function(a){if(a===window.event){return SC.Event.create(a)}else{return a.normalized?a:SC.Event.create(a)}},_global:{},_props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode metaKey newValue originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target timeStamp toElement type view which touches targetTouches changedTouches animationName elapsedTime dataTransfer".split(" ")});SC.Event.prototype={hasCustomEventHandling:NO,touchesForView:function(a){if(this.touchContext){return this.touchContext.touchesForView(a)}},touchesForResponder:function(a){if(this.touchContext){return this.touchContext.touchesForView(a)}},averagedTouchesForView:function(a){if(this.touchContext){return this.touchContext.averagedTouchesForView(a)}return null},allowDefault:function(){this.hasCustomEventHandling=YES;return this},preventDefault:function(){var a=this.originalEvent;if(a){if(a.preventDefault){a.preventDefault()}a.returnValue=NO}this.hasCustomEventHandling=YES;return this},stopPropagation:function(){var a=this.originalEvent;if(a){if(a.stopPropagation){a.stopPropagation()}a.cancelBubble=YES}this.hasCustomEventHandling=YES;return this},stop:function(){return this.preventDefault().stopPropagation()},normalized:YES,getCharString:function(){if(SC.browser.msie){if(this.keyCode==8||this.keyCode==9||(this.keyCode>=37&&this.keyCode<=40)){return String.fromCharCode(0)}else{return(this.keyCode>0)?String.fromCharCode(this.keyCode):null}}else{return(this.charCode>0)?String.fromCharCode(this.charCode):null}},commandCodes:function(){var f=this.keyCode,b=null,c=null,a="",e;if(f){b=SC.FUNCTION_KEYS[f];if(!b&&(this.altKey||this.ctrlKey||this.metaKey)){b=SC.PRINTABLE_KEYS[f]}if(b){if(this.altKey){a+="alt_"}if(this.ctrlKey||this.metaKey){a+="ctrl_"}if(this.shiftKey){a+="shift_"}}}if(!b){f=this.which;c=b=String.fromCharCode(f);e=b.toLowerCase();if(this.metaKey){a="meta_";b=e}else{b=null}}if(b){b=a+b}return[b,c]}};SC.Event.observe=SC.Event.add;SC.Event.stopObserving=SC.Event.remove;SC.Event.fire=SC.Event.trigger;if(SC.browser.msie){SC.Event.add(window,"unload",SC.Event.prototype,SC.Event.unload)}SC.MODIFIER_KEYS={16:"shift",17:"ctrl",18:"alt"};SC.FUNCTION_KEYS={8:"backspace",9:"tab",13:"return",19:"pause",27:"escape",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",44:"printscreen",45:"insert",46:"delete",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scrolllock"};SC.PRINTABLE_KEYS={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",188:",",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:'"'};SC.SYSTEM_CURSOR="default";SC.AUTO_CURSOR=SC.DEFAULT_CURSOR="auto";SC.CROSSHAIR_CURSOR="crosshair";SC.HAND_CURSOR=SC.POINTER_CURSOR="pointer";SC.MOVE_CURSOR="move";SC.E_RESIZE_CURSOR="e-resize";SC.NE_RESIZE_CURSOR="ne-resize";SC.NW_RESIZE_CURSOR="nw-resize";SC.N_RESIZE_CURSOR="n-resize";SC.SE_RESIZE_CURSOR="se-resize";SC.SW_RESIZE_CURSOR="sw-resize";SC.S_RESIZE_CURSOR="s-resize";SC.W_RESIZE_CURSOR="w-resize";SC.IBEAM_CURSOR=SC.TEXT_CURSOR="text";SC.WAIT_CURSOR="wait";SC.HELP_CURSOR="help";SC.Cursor=SC.Object.extend({init:function(){arguments.callee.base.apply(this,arguments);var a=this.get("cursorStyle")||SC.DEFAULT_CURSOR,c=this.constructor.sharedStyleSheet(),b=SC.guidFor(this);if(c.insertRule){c.insertRule("."+b+" {cursor: "+a+";}",c.cssRules?c.cssRules.length:0)}else{if(c.addRule){c.addRule("."+b,"cursor: "+a)}}this.cursorStyle=a;this.className=b;return this},className:null,cursorStyle:SC.DEFAULT_CURSOR,cursorStyleDidChange:function(){var e,g,c,f,j,b,a;e=this.get("cursorStyle")||SC.DEFAULT_CURSOR;g=this._rule;if(g){g.style.cursor=e;return}c="."+this.get("className");f=this.constructor.sharedStyleSheet();j=(f.cssRules?f.cssRules:f.rules)||[];for(b=0,a=j.length;b<a;++b){g=j[b];if(g.selectorText===c){this._rule=g;g.style.cursor=e;break}}}.observes("cursorStyle")});SC.Cursor.sharedStyleSheet=function(){var b,a=this._styleSheet;if(!a){a=document.createElement("style");a.type="text/css";b=document.getElementsByTagName("head")[0];if(!b){b=document.documentElement}b.appendChild(a);a=document.styleSheets[document.styleSheets.length-1];this._styleSheet=a}return a};SC.Responder=SC.Object.extend({isResponder:YES,pane:null,responderContext:null,nextResponder:null,isFirstResponder:NO,hasFirstResponder:NO,acceptsFirstResponder:YES,becomingFirstResponder:NO,becomeFirstResponder:function(){var a=this.get("pane")||this.get("responderContext")||this.pane();if(a&&this.get("acceptsFirstResponder")){if(a.get("firstResponder")!==this){a.makeFirstResponder(this)}}return this},resignFirstResponder:function(a){var b=this.get("pane")||this.get("responderContext");if(b&&(b.get("firstResponder")===this)){b.makeFirstResponder(null,a)}return YES},willLoseFirstResponder:function(a){},didBecomeFirstResponder:function(a){}});SC.Theme={isTheme:YES,classNames:SC.CoreSet.create(),_extend_class_names:function(b){if(b){if(SC.typeOf(b)===SC.T_HASH&&!b.isSet){for(var a in b){if(b[a]){this.classNames.add(a)}else{this.classNames.remove(a)}}}else{if(typeof b==="string"){this.classNames.addEach(b.split(" "))}else{this.classNames.addEach(b)}}}},_extend_self:function(b){if(b.classNames){this._extend_class_names(b.classNames)}var a,c,e;for(a in b){if(a==="classNames"){continue}if(!b.hasOwnProperty(a)){continue}c=b[a];if(c instanceof Function&&!c.base&&(c!==(e=this[a]))){c.base=e}this[a]=c}},create:function(){var c=SC.beget(this);c.baseTheme=this;if(this.themes===SC.Theme.themes){c.themes={}}else{c.themes=SC.beget(this.themes)}c._privateThemes={};c._specializedThemes={};c.classNames=SC.clone(this.classNames);var f=arguments,b=f.length,a,e;for(a=0;a<b;a++){c._extend_self(f[a])}if(c.name){c.classNames.add(c.name)}return c},subtheme:function(a){var b=this.create({name:a});this.addTheme(b);return b},invisibleSubtheme:function(a){var b=this.create({name:a});this._privateThemes[a]=b;return b},themes:{},find:function(a){if(this===SC.Theme){return this.themes[a]}var b;b=this._privateThemes[a];if(b){return b}b=this._specializedThemes[a];if(b){return b}b=this.themes[a];if(b&&!this._specializedThemes[a]){return(this._specializedThemes[a]=b.create({classNames:this.classNames}))}b=SC.Theme.themes[a];if(b){return b}return null},addTheme:function(a){this.themes[a.name]=a}};SC.BaseTheme=SC.Theme.create({name:""});SC.Theme.themes["sc-base"]=SC.BaseTheme;SC.defaultTheme="sc-base";SC.Locale=SC.Object.extend({init:function(){if(!this.language){SC.Locale._assignLocales()}if(!this.hasStrings){var c=this._deprecatedLanguageCodes||[];c.push(this.language);var b=c.length;var a=null;while(!a&&--b>=0){a=String[c[b]]}if(a){this.hasStrings=YES;this.strings=a}}},hasStrings:NO,strings:{},metrics:{},toString:function(){if(!this.language){SC.Locale._assignLocales()}return"SC.Locale["+this.language+"]"+SC.guidFor(this)},locWithDefault:function(b,c){var a=this.strings[b];if(SC.typeOf(a)===SC.T_STRING){return a}else{if(SC.typeOf(c)===SC.T_STRING){return c}}return b},locMetric:function(b){var a=this.metrics[b];if(SC.typeOf(a)===SC.T_NUMBER){return a}else{if(a===undefined){SC.warn('No localized metric found for key "'+b+'"');return undefined}else{SC.warn('Unexpected metric type for key "'+b+'"');return undefined}}},locLayout:function(c,b){var f,j,g,q,p,a=SC.Locale.layoutKeys,o=this.metrics,n=SC.typeOf,e=SC.T_NUMBER,k={};if(b){SC.mixin(k,b)}for(f=0,j=a.length;f<j;++f){g=a[f];q=c+"."+g;p=o[q];if(n(p)===e){if(b&&b[g]){throw"locLayout():  There is a localized value for the key '"+q+"' but a value for '"+g+"' was also specified in the non-localized hash"}k[g]=p}}return k}});SC.Locale.mixin({useAutodetectedLanguage:NO,preferredLanguage:null,layoutKeys:["left","top","right","bottom","width","height","minWidth","minHeight","centerX","centerY"],createCurrentLocale:function(){var c=(String.useAutodetectedLanguage!==undefined)?String.useAutodetectedLanguage:this.useAutodetectedLanguage;var b=(String.preferredLanguage!==undefined)?String.preferredLanguage:this.preferredLanguage;var e=((c)?SC.browser.language:null)||b||SC.browser.language||"en";e=SC.Locale.normalizeLanguage(e);var a=this.localeClassFor(e);if(e!=this.currentLanguage){this.currentLanguage=e;this.currentLocale=a.create()}return this.currentLocale},localeClassFor:function(c){c=SC.Locale.normalizeLanguage(c);var b,a=this.locales[c];if(!a&&((b=c.split("-")[0])!==c)&&(a=this.locales[b])){a=this.locales[c]=a.extend()}if(!a){a=this.locales[c]=this.locales.en.extend()}return a},define:function(b,c){var a;if(c===undefined&&(SC.typeOf(b)!==SC.T_STRING)){a=this;c=b}else{a=SC.Locale.localeClassFor(b)}SC.mixin(a.prototype,c);return a},options:function(){return this.prototype},addStrings:function(b){var a=this.prototype.strings;if(a){if(!this.prototype.hasOwnProperty("strings")){this.prototype.strings=SC.clone(a)}}else{a=this.prototype.strings={}}if(b){this.prototype.strings=SC.mixin(a,b)}this.prototype.hasStrings=YES;return this},addMetrics:function(b){var a=this.prototype.metrics;if(a){if(!this.prototype.hasOwnProperty(a)){this.prototype.metrics=SC.clone(a)}}else{a=this.prototype.metrics={}}if(b){this.prototype.metrics=SC.mixin(a,b)}return this},_map:{english:"en",french:"fr",german:"de",japanese:"ja",jp:"ja",spanish:"es"},normalizeLanguage:function(a){if(!a){return"en"}return SC.Locale._map[a.toLowerCase()]||a},_assignLocales:function(){for(var a in this.locales){this.locales[a].prototype.language=a}},toString:function(){if(!this.prototype.language){SC.Locale._assignLocales()}return"SC.Locale["+this.prototype.language+"]"},extend:function(){var a=SC.Object.extend.apply(this,arguments);a.addStrings=SC.Locale.addStrings;a.define=SC.Locale.define;a.options=SC.Locale.options;a.toString=SC.Locale.toString;return a}});SC.Locale.locales={en:SC.Locale.extend({_deprecatedLanguageCodes:["English"]}),fr:SC.Locale.extend({_deprecatedLanguageCodes:["French"]}),de:SC.Locale.extend({_deprecatedLanguageCodes:["German"]}),ja:SC.Locale.extend({_deprecatedLanguageCodes:["Japanese","jp"]}),es:SC.Locale.extend({_deprecatedLanguageCodes:["Spanish"]})};SC.stringsFor=function(c,b){var a=SC.Locale.localeClassFor(c);a.addStrings(b);return this};SC.metricsFor=function(c,b){var a=SC.Locale.localeClassFor(c);a.addMetrics(b);return this};sc_require("system/locale");SC.STRING_TITLEIZE_REGEXP=(/([\s|\-|\_|\n])([^\s|\-|\_|\n]?)/g);SC.STRING_DECAMELIZE_REGEXP=(/([a-z])([A-Z])/g);SC.STRING_DASHERIZE_REGEXP=(/[ _]/g);SC.STRING_DASHERIZE_CACHE={};SC.STRING_TRIM_LEFT_REGEXP=(/^\s+/g);SC.STRING_TRIM_RIGHT_REGEXP=(/\s+$/g);SC.mixin(SC.String,{capitalize:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},camelize:function(e){var b=e.replace(SC.STRING_TITLEIZE_REGEXP,function(g,j,f){return f?f.toUpperCase():""});var c=b.charAt(0),a=c.toLowerCase();return c!==a?a+b.slice(1):b},decamelize:function(a){return a.replace(SC.STRING_DECAMELIZE_REGEXP,"$1_$2").toLowerCase()},dasherize:function(c){var a=SC.STRING_DASHERIZE_CACHE,b=a[c];if(b){return b}else{b=SC.String.decamelize(c).replace(SC.STRING_DASHERIZE_REGEXP,"-");a[c]=b}return b},loc:function(c){if(!SC.Locale.currentLocale){SC.Locale.createCurrentLocale()}var b=SC.Locale.currentLocale.locWithDefault(c);if(SC.typeOf(b)!==SC.T_STRING){b=c}var a=SC.$A(arguments);a.shift();if(a.length>0&&a[0].isSCArray){a=a[0]}return SC.String.fmt(b,a)},locMetric:function(b){var a=SC.Locale,c=a.currentLocale;if(!c){a.createCurrentLocale();c=a.currentLocale}return c.locMetric(b)},locLayout:function(b,c){var a=SC.Locale,e=a.currentLocale;if(!e){a.createCurrentLocale();e=a.currentLocale}return e.locLayout(b,c)},locWithDefault:function(e,c){if(!SC.Locale.currentLocale){SC.Locale.createCurrentLocale()}var b=SC.Locale.currentLocale.locWithDefault(e,c);if(SC.typeOf(b)!==SC.T_STRING){b=e}var a=SC.$A(arguments);a.shift();a.shift();return SC.String.fmt(b,a)},trim:jQuery.trim,trimLeft:function(a){return a.replace(SC.STRING_TRIM_LEFT_REGEXP,"")},trimRight:function(a){return a.replace(SC.STRING_TRIM_RIGHT_REGEXP,"")}});if(String.prototype.trim){SC.supplement(String.prototype,{trim:function(){return SC.String.trim(this,arguments)},trimLeft:function(){return SC.String.trimLeft(this,arguments)},trimRight:function(){return SC.String.trimRight(this,arguments)}})}SC.mixin(String.prototype,{loc:function(){return SC.String.loc(this.toString(),SC.$A(arguments))},locMetric:function(){return SC.String.locMetric(this.toString())},locLayout:function(a){return SC.String.locLayout(this.toString(),a)}});SC.DelegateSupport={delegateFor:function(c){var b=1,a=arguments.length,e;while(b<a){e=arguments[b];if(e&&e[c]!==undefined){return e}b++}return(this[c]!==undefined)?this:null},invokeDelegateMethod:function(c,a,b){b=SC.A(arguments);b=b.slice(2,b.length);if(!c||!c[a]){c=this}var e=c[a];return e?e.apply(c,b):null},getDelegateProperty:function(e,f){var b=1,a=arguments.length,c;while(b<a){c=arguments[b++];if(c&&c[e]!==undefined){return c.get?c.get(e):c[e]}}return(this[e]!==undefined)?this.get(e):undefined}};sc_require("mixins/delegate_support");SC.CoreView=SC.Responder.extend(SC.DelegateSupport);sc_require("system/browser");sc_require("system/event");sc_require("system/cursor");sc_require("system/responder");sc_require("system/theme");sc_require("system/string");sc_require("views/view/base");SC.CONTEXT_MENU_ENABLED=YES;SC.TABBING_ONLY_INSIDE_DOCUMENT=NO;SC.FROM_THEME="__FROM_THEME__";SC.EMPTY_CHILD_VIEWS_ARRAY=[];SC.EMPTY_CHILD_VIEWS_ARRAY.needsClone=YES;SC.CoreView.reopen({concatenatedProperties:["outlets","displayProperties","classNames","renderMixin","didCreateLayerMixin","willDestroyLayerMixin"],pane:function(){var a=this;while(a&&!a.isPane){a=a.get("parentView")}return a}.property("parentView").cacheable(),page:null,parentView:null,isVisible:YES,isVisibleBindingDefault:SC.Binding.bool(),isVisibleInWindow:YES,childViews:SC.EMPTY_CHILD_VIEWS_ARRAY,layer:function(a,c){if(c!==undefined){this._view_layer=c}else{c=this._view_layer;if(!c){var b=this.get("parentView");if(b){b=b.get("layer")}if(b){this._view_layer=c=this.findLayerInParentLayer(b)}}}return c}.property("isVisibleInWindow").cacheable(),$:function(b){var a=this.get("layer");if(!a){return SC.$()}else{if(b===undefined){return SC.$(a)}else{return SC.$(b,a)}}},containerLayer:function(){return this.get("layer")}.property("layer").cacheable(),layerId:function(a,b){if(b){this._layerId=b}if(this._layerId){return this._layerId}return SC.guidFor(this)}.property().cacheable(),findLayerInParentLayer:function(a){var b="#"+this.get("layerId");return jQuery(b)[0]||jQuery(b,a)[0]},isDescendantOf:function(a){var b=this.get("parentView");if(this===a){return YES}else{if(b){return b.isDescendantOf(a)}else{return NO}}},displayDidChange:function(){this.set("layerNeedsUpdate",YES);return this},_sc_isVisibleDidChange:function(){this.displayDidChange()}.observes("isVisible"),layerNeedsUpdate:NO,_view_layerNeedsUpdateDidChange:function(){if(this.get("layerNeedsUpdate")){this.invokeOnce(this.updateLayerIfNeeded)}}.observes("layerNeedsUpdate"),updateLayerIfNeeded:function(b){var c=this.get("layerNeedsUpdate"),a=c&&(b||this.get("isVisibleInWindow"));if(a){if(this.get("layer")){this.beginPropertyChanges();this.set("layerNeedsUpdate",NO);this.updateLayer();this.endPropertyChanges()}}return this},updateLayer:function(g){var c,b,a,e;var f=g||this.renderContext(this.get("layer"));this._renderLayerSettings(f,NO);e=!this.update;if(e){this.render(f,NO)}else{this.update(f.$())}if(c=this.renderMixin){a=c.length;for(b=0;b<a;++b){c[b].call(this,f,NO)}}f.update();if(f._innerHTMLReplaced){var j=this.get("pane");if(j&&j.get("isPaneAttached")){this._notifyDidAppendToDocument()}}if(this.useStaticLayout){this.viewDidResize()}if(this.didUpdateLayer){this.didUpdateLayer()}if(this.designer&&this.designer.viewDidUpdateLayer){this.designer.viewDidUpdateLayer()}return this},parentViewDidResize:function(){if(!this.get("hasLayout")){this.notifyPropertyChange("frame")}this.viewDidResize()},viewDidResize:function(){},renderContext:function(a){return SC.RenderContext(a)},createLayer:function(){if(this.get("layer")){return this}var a=this.renderContext(this.get("tagName"));this.renderToContext(a);this.set("layer",a.element());this._notifyDidCreateLayer();return this},_notifyDidCreateLayer:function(){this.notifyPropertyChange("layer");if(this.didCreateLayer){this.didCreateLayer()}var c=this.didCreateLayerMixin,b,a,e=this.get("childViews"),f;if(c){b=c.length;for(a=0;a<b;++a){c[a].call(this)}}b=e.length;for(a=0;a<b;++a){f=e[a];if(!f){continue}f.notifyPropertyChange("layer");if(this.get("useStaticLayout")){if(!f.get("isFixedLayout")){f.viewDidResize()}}f._notifyDidCreateLayer()}},destroyLayer:function(){var a=this.get("layer");if(a){this._notifyWillDestroyLayer();if(a.parentNode){a.parentNode.removeChild(a)}a=null}return this},replaceLayer:function(){this.destroyLayer();this.invokeOnce(this.updateLayerLocation)},parentViewDidChange:function(){this.parentViewDidResize();this.updateLayerLocation()},layerLocationNeedsUpdate:NO,updateLayerLocationIfNeeded:function(a){if(this.get("layerLocationNeedsUpdate")){this.updateLayerLocation()}return this},updateLayerLocation:function(){var f=this.get("layer"),e=this.get("parentView"),b=e?e.get("containerLayer"):null;if(f&&f.parentNode&&f.parentNode!==b){f.parentNode.removeChild(f)}if(!e){if(f&&f.parentNode){f.parentNode.removeChild(f)}}else{if(!b){if(f){if(f.parentNode){f.parentNode.removeChild(f)}this.destroyLayer()}}else{if(!f){this.createLayer();f=this.get("layer");if(!f){return}}var g=e.get("childViews"),c=g.objectAt(g.indexOf(this)+1),a=(c)?c.get("layer"):null;if(c&&(!a||a.parentNode!==b)){c.updateLayerLocationIfNeeded();a=c.get("layer")}if((f.parentNode!==b)||(f.nextSibling!==a)){b.insertBefore(f,a)}}}b=e=f=a=null;this.set("layerLocationNeedsUpdate",NO);return this},_notifyWillDestroyLayer:function(){if(this.willDestroyLayer){this.willDestroyLayer()}var c=this.willDestroyLayerMixin,b,a,e=this.get("childViews");if(c){b=c.length;for(a=0;a<b;++a){c[a].call(this)}}b=e.length;for(a=0;a<b;++a){e[a]._notifyWillDestroyLayer()}this.set("layer",null)},renderToContext:function(f,g){var e,c,b,a;this.beginPropertyChanges();this.set("layerNeedsUpdate",NO);if(SC.none(g)){g=YES}this._renderLayerSettings(f,g);e=!this.update;if(e){this.render(f,g)}else{if(g){this.render(f)}else{this.update(f.$())}}if(g&&!this._didRenderChildViews){this.renderChildViews(f,g)}this._didRenderChildViews=NO;if(c=this.renderMixin){a=c.length;for(b=0;b<a;++b){c[b].call(this,f,g)}}this.endPropertyChanges()},_renderLayerSettings:function(a,b){a.resetClassNames();a.resetStyles();this.applyAttributesToContext(a)},applyAttributesToContext:function(a){a.addClass(this.get("classNames"));if(this.get("isTextSelectable")){a.addClass("allow-select")}if(!this.get("isVisible")){a.addClass("sc-hidden")}if(this.get("isFirstResponder")){a.addClass("focus");a.attr("tabindex","0")}else{a.attr("tabindex","-1")}a.id(this.get("layerId"));a.attr("role",this.get("ariaRole"))},prepareContext:function(a,b){if(b!==false){b=YES}if(b){this.renderToContext(a)}else{this.updateLayer(a)}},renderChildViews:function(f,g){var e=this.get("childViews"),b=e.length,a,c;for(a=0;a<b;++a){c=e[a];if(!c){continue}f=f.begin(c.get("tagName"));c.renderToContext(f,g);f=f.end()}this._didRenderChildViews=YES;return f},render:function(){},_notifyDidAppendToDocument:function(){if(!this.get("hasLayout")){this.notifyPropertyChange("frame")}if(this.didAppendToDocument){this.didAppendToDocument()}var c=0,e,a,b=this.get("childViews");for(c=0,a=b.length;c<a;c++){e=b[c];if(e._notifyDidAppendToDocument){e._notifyDidAppendToDocument()}}},childViewsObserver:function(){var c=this.get("childViews"),b,a,e;for(b=0,a=c.length;b<a;b++){e=c[b];if(e._notifyDidAppendToDocument){e._notifyDidAppendToDocument()}}}.observes("childViews"),tagName:"div",ariaRole:null,classNames:[],toolTip:null,displayToolTip:function(){var a=this.get("toolTip");return(a&&this.get("localize"))?SC.String.loc(a):(a||"")}.property("toolTip","localize").cacheable(),isTextSelectable:NO,displayProperties:[],nextResponder:function(){return this.get("parentView")}.property("parentView").cacheable(),acceptsFirstResponder:NO,init:function(){var f=this.get("parentView"),j,b,e,g;arguments.callee.base.apply(this,arguments);SC.View.views[this.get("layerId")]=this;this.childViews=this.get("childViews").slice();this.createChildViews();g=this.get("displayProperties");for(var c=0,a=g.length;c<a;c++){this.addObserver(g[c],this,this.displayDidChange)}},awake:function(){arguments.callee.base.apply(this,arguments);var c=this.get("childViews"),b=c.length,a;for(a=0;a<b;++a){if(!c[a]){continue}c[a].awake()}},frame:function(){return this.computeFrameWithParentFrame(null)}.property("useStaticLayout").cacheable(),computeFrameWithParentFrame:function(){var a,b=this.get("parentView"),c;if(a=this.get("layer")){c=SC.offset(a);if(b){c=b.convertFrameFromView(c,null)}c.width=a.offsetWidth;c.height=a.offsetHeight;return c}if(this.get("hasLayout")){return null}else{return{x:0,y:0,width:0,height:0}}},clippingFrame:function(){var e=this.get("frame"),a=e,b,c;if(!e){return null}b=this.get("parentView");if(b){c=b.get("clippingFrame");if(!c){return{x:0,y:0,width:e.width,height:e.height}}a=SC.intersectRects(c,e)}a.x-=e.x;a.y-=e.y;return a}.property("parentView","frame").cacheable(),_sc_view_clippingFrameDidChange:function(){var e=this.get("childViews"),b=e.length,a,c;for(a=0;a<b;++a){c=e[a];c.notifyPropertyChange("clippingFrame");c._sc_view_clippingFrameDidChange()}},removeChild:function(b){b.set("parentView",null);var c=this.get("childViews"),a=c.indexOf(b);if(a>=0){c.removeAt(a)}return this},removeAllChildren:function(){var b=this.get("childViews"),a;while(a=b.objectAt(b.get("length")-1)){this.removeChild(a)}return this},removeFromParent:function(){var a=this.get("parentView");if(a){a.removeChild(this)}return this},destroy:function(){if(this.get("isDestroyed")){return this}this._destroy();if(this.get("parentView")){this.removeFromParent()}arguments.callee.base.apply(this,arguments);return this},_destroy:function(){if(this.get("isDestroyed")){return this}this.destroyLayer();var c=this.get("childViews"),b=c.length,a;if(b){c=c.slice();for(a=0;a<b;++a){c[a].destroy()}}delete SC.View.views[this.get("layerId")];delete this._CQ;delete this.page;return this},createChildViews:function(){var g=this.get("childViews"),b=g.length,a,f,e,c;this.beginPropertyChanges();for(a=0;a<b;++a){if(f=(c=g[a])){if(typeof f===SC.T_STRING){c=this[f]}else{f=null}if(!c){SC.Logger.error("No view with name "+f+" has been found in "+this.toString());continue}c=this.createChildView(c);if(f){this[f]=c}}g[a]=c}this.endPropertyChanges();return this},createChildView:function(a,b){if(!a.isClass){b=a}else{if(!b){b={}}else{b=SC.clone(b)}}b.owner=b.parentView=this;if(a.isClass&&a.prototype.hasVisibility){b.isVisibleInWindow=this.get("isVisibleInWindow")}if(!b.page){b.page=this.page}if(a.isClass){a=a.create(b)}return a},isView:YES,selectStart:function(a){return this.get("isTextSelectable")},contextMenu:function(a){if(this.get("isContextMenuEnabled")){return YES}}});SC.CoreView.mixin({isViewClass:YES,design:function(){if(this.isDesign){return this}var a=this.extend.apply(this,arguments);a.isDesign=YES;if(SC.ViewDesigner){SC.ViewDesigner.didLoadDesign(a,this,SC.A(arguments))}return a},extend:function(){var a=arguments[arguments.length-1];if(a&&!SC.none(a.theme)){a.themeName=a.theme;delete a.theme}return SC.Object.extend.apply(this,arguments)},layout:function(a){this.prototype.layout=a;return this},classNames:function(a){a=(this.prototype.classNames||[]).concat(a);this.prototype.classNames=a;return this},tagName:function(a){this.prototype.tagName=a;return this},childView:function(a){var b=this.prototype.childViews||[];if(b===this.superclass.prototype.childViews){b=b.slice()}b.push(a);this.prototype.childViews=b;return this},bind:function(b,e){var c=this.prototype,a=this.superclass.prototype;var f=c._bindings;if(!f||f===a._bindings){f=c._bindings=(f||[]).slice()}b=b+"Binding";c[b]=e;f.push(b);return this},prop:function(a,b){this.prototype[a]=b;return this},localization:function(b,a){if(a){b.rootElement=SC.$(a)[0]}return b},viewFor:function(e,c){var b=SC.$A(arguments);if(SC.none(e)){b.shift()}else{b[0]={rootElement:SC.$(e)[0]}}var a=this.create.apply(this,arguments);b=b[0]=null;return a},create:function(){var b=arguments[arguments.length-1];if(b&&b.theme){b.themeName=b.theme;delete b.theme}var c=this,a=new c(arguments);if(SC.ViewDesigner){SC.ViewDesigner.didCreateView(a,SC.$A(arguments))}return a},loc:function(f){var b=f.childViews;delete f.childViews;this.applyLocalizedAttributes(f);if(SC.ViewDesigner){SC.ViewDesigner.didLoadLocalization(this,SC.$A(arguments))}var e=this.prototype.childViews,a=e.length,c;while(--a>=0){c=e[a];f=b[a];if(f&&c&&typeof c===SC.T_STRING){SC.String.loc(c,f)}}return this},applyLocalizedAttributes:function(a){SC.mixin(this.prototype,a)},views:{}});SC.outlet=function(b,a){return function(c){return(this[c]=SC.objectForPropertyPath(b,(a!==undefined)?a:this))}.property()};SC.CoreView.unload=function(){var a=SC.View.views;if(a){for(var b in a){if(!a.hasOwnProperty(b)){continue}delete a[b]}}};SC.View=SC.CoreView.extend({classNames:["sc-view"],displayProperties:["isFirstResponder"]});if(SC.browser.msie){SC.Event.add(window,"unload",SC.View,SC.View.unload)}sc_require("ext/handlebars");sc_require("ext/handlebars/bind");sc_require("ext/handlebars/collection");sc_require("ext/handlebars/localization");sc_require("ext/handlebars/view");sc_require("views/view");SC.TEMPLATES=SC.Object.create();SC.TemplateView=SC.CoreView.extend({acceptsFirstResponder:YES,templateName:null,templates:SC.TEMPLATES,template:function(b,e){if(e!==undefined){return e}var a=this.get("templateName"),c=this.get("templates").get(a);if(!c){return function(){return""}}return c}.property("templateName").cacheable(),context:function(a,b){if(b!==undefined){return b}return this}.property().cacheable(),render:function(a){var b=this.get("template");this._didRenderChildViews=YES;a.push(b(this.get("context"),null,null,{view:this,isRenderData:true}))},update:function(){},mouseDown:function(){if(this.mouseUp){return YES}return NO}});sc_require("views/template");SC.Button=SC.TemplateView.extend({classNames:["sc-button"],mouseDown:function(){this.set("isActive",true);this._isMouseDown=YES},mouseExited:function(){this.set("isActive",false)},mouseEntered:function(){if(this._isMouseDown){this.set("isActive",true)}},rootResponder:function(){var a=this.get("pane");return a.get("rootResponder")}.property("pane").cacheable(),mouseUp:function(b){if(this.get("isActive")){var c=this.get("action"),e=this.get("target")||null,a=this.get("rootResponder");if(c&&a){a.sendAction(c,e,this,this.get("pane"),null,this)}this.set("isActive",false)}this._isMouseDown=NO},touchStart:function(a){this.mouseDown(a)},touchEnd:function(a){this.mouseUp(a)}});SC.mixin(Function.prototype,{invokeLater:function(g,a){if(a===undefined){a=1}var e=this;if(arguments.length>2){var b=SC.$A(arguments).slice(2,arguments.length);b.unshift(g);var c=e;e=function(){return c.apply(this,b.slice(1))}}return SC.Timer.schedule({target:g,action:e,interval:a})}});SC.mixin(SC.Object.prototype,{invokeLater:function(b,a){if(a===undefined){a=1}var g=b,c,e;if(arguments.length>2){c=SC.$A(arguments).slice(2);if(SC.typeOf(g)===SC.T_STRING){g=this[b]}e=g;g=function(){return e.apply(this,c)}}return SC.Timer.schedule({target:this,action:g,interval:a})},invokeWith:function(b,c,e){if(e===undefined){e=c;c=this}if(!c){c=this}if(SC.typeOf(e)===SC.T_STRING){e=c[e]}var a=this.getPath(b);e.call(c,a,this);return this}});SC.RunLoop=SC.RunLoop.extend({startTime:function(){if(!this._start){this._start=Date.now()}return this._start}.property(),endRunLoop:function(){this.fireExpiredTimers();var a=arguments.callee.base.apply(this,arguments);this.scheduleNextTimeout();return a},scheduleTimer:function(b,a){this._timerQueue=b.removeFromTimerQueue(this._timerQueue);this._timerQueue=b.scheduleInTimerQueue(this._timerQueue,a);return this},cancelTimer:function(a){this._timerQueue=a.removeFromTimerQueue(this._timerQueue);return this},TIMER_ARRAY:[],fireExpiredTimers:function(){if(!this._timerQueue||this._firing){return NO}var e=this.get("startTime"),f=this.TIMER_ARRAY,c,b,a;this._firing=YES;this._timerQueue=this._timerQueue.collectExpiredTimers(f,e);b=f.length;for(c=0;c<b;c++){f[c].fire()}a=f.length>0;f.length=0;this._firing=NO;return a},scheduleNextTimeout:function(){var e=this._timerQueue;var b=NO;if(!e){if(this._timeout){clearTimeout(this._timeout)}}else{var c=e._timerQueueRunTime;if(this._timeoutAt!==c){if(this._timeout){clearTimeout(this._timeout)}var a=Math.max(0,c-Date.now());this._timeout=setTimeout(this._timeoutDidFire,a);this._timeoutAt=c}b=YES}return b},_timeoutDidFire:function(){var a=SC.RunLoop.currentRunLoop;a._timeout=a._timeoutAt=null;SC.run()}});SC.RunLoop.currentRunLoop=SC.RunLoop.create();sc_require("system/string");SC.supplement(String.prototype,{capitalize:function(){return SC.String.capitalize(this,arguments)},camelize:function(){return SC.String.camelize(this,arguments)},decamelize:function(){return SC.String.decamelize(this,arguments)},dasherize:function(){return SC.String.dasherize(this,arguments)},loc:function(){var a=SC.$A(arguments);a.unshift(this);return SC.String.loc.apply(SC.String,a)},locWithDefault:function(b){var a=SC.$A(arguments);a.unshift(this);return SC.String.locWithDefault.apply(SC.String,a)}});sc_require("system/responder");SC.ResponderContext={isResponderContext:YES,trace:NO,defaultResponder:null,nextResponder:function(){return this.get("defaultResponder")}.property("defaultResponder").cacheable(),firstResponder:null,nextResponderFor:function(a){var b=a.get("nextResponder");if(typeof b===SC.T_STRING){b=SC.objectForPropertyPath(b,this)}else{if(!b&&(a!==this)){b=this}}return b},responderNameFor:function(a){if(!a){return"(No Responder)"}else{if(a._scrc_name){return a._scrc_name}}var b=this.NAMESPACE;this._findResponderNamesFor(this,3,b?[this.NAMESPACE]:[]);return a._scrc_name||a.toString()},_findResponderNamesFor:function(a,f,e){var b,c;for(b in a){if(b==="nextResponder"){continue}c=a[b];if(c&&c.isResponder){if(c._scrc_name){continue}e.push(b);c._scrc_name=e.join(".");if(f>0){this._findResponderNamesFor(c,f-1,e)}e.pop()}}},makeFirstResponder:function(b,a){var g=this.get("firstResponder"),e=this.get("nextResponder"),f=this.get("trace"),c;if(this._locked){if(f){SC.Logger.log("%@: AFTER ACTION: makeFirstResponder => %@".fmt(this,this.responderNameFor(b)))}this._pendingResponder=b;return}if(f){SC.Logger.log("%@: makeFirstResponder => %@".fmt(this,this.responderNameFor(b)))}if(b){b.set("becomingFirstResponder",YES)}this._locked=YES;this._pendingResponder=null;c=b?b:null;while(c){if(c.get("hasFirstResponder")){break}c=(c===e)?null:this.nextResponderFor(c)}if(!c){c=e}this._notifyWillLoseFirstResponder(g,g,c,a);if(g){g.set("isFirstResponder",NO)}this.beginPropertyChanges();this.set("firstResponder",b);if(b){b.set("isFirstResponder",YES)}this._notifyDidBecomeFirstResponder(b,b,c);this.endPropertyChanges();this._locked=NO;if(this._pendingResponder){this.makeFirstResponder(this._pendingResponder);this._pendingResponder=null}if(b){b.set("becomingFirstResponder",NO)}return this},_notifyWillLoseFirstResponder:function(c,f,b,a){if(f===b){return}f.willLoseFirstResponder(c,a);f.set("hasFirstResponder",NO);var e=this.nextResponderFor(f);if(e){this._notifyWillLoseFirstResponder(c,e,b)}},_notifyDidBecomeFirstResponder:function(b,e,a){if(e===a){return}var c=this.nextResponderFor(e);if(c){this._notifyDidBecomeFirstResponder(b,c,a)}e.set("hasFirstResponder",YES);e.didBecomeFirstResponder(b)},resetFirstResponder:function(){var a=this.get("firstResponder");if(!a){return}a.willLoseFirstResponder();a.didBecomeFirstResponder()},sendAction:function(j,e,c){var a=this.get("firstResponder"),f=this.get("nextResponder"),g=this.get("trace"),k=NO,b;this._locked=YES;if(g){SC.Logger.log("%@: begin action '%@' (%@, %@)".fmt(this,j,e,c))}if(!k&&!a&&this.tryToPerform){k=this.tryToPerform(j,e,c)}while(!k&&a){if(a.tryToPerform){k=a.tryToPerform(j,e,c)}if(!k){a=(a===f)?null:this.nextResponderFor(a)}}if(g){if(!k){SC.Logger.log("%@:  action '%@' NOT HANDLED".fmt(this,j))}else{SC.Logger.log("%@: action '%@' handled by %@".fmt(this,j,this.responderNameFor(a)))}}this._locked=NO;if(b=this._pendingResponder){this._pendingResponder=null;this.makeFirstResponder(b)}return a}};sc_require("views/template");SC.Checkbox=SC.TemplateView.extend({title:null,value:null,displayTitle:function(){var a=this.get("title");return a?SC.String.loc(a):null}.property("title").cacheable(),classNames:["sc-checkbox"],template:SC.Handlebars.compile('<label><input type="checkbox">{{displayTitle}}</label>'),didCreateLayer:function(){var a=this;this.$("input").bind("change",function(){a.domValueDidChange(this)})},domValueDidChange:function(a){this.set("value",$(a).prop("checked"))},value:function(a,b){if(b!==undefined){this.$("input").prop("checked",b)}else{b=this.$("input").prop("checked")}return b}.property()});SC.CheckboxSupport={didCreateLayer:function(){this.$("input").change(jQuery.proxy(function(){SC.RunLoop.begin();this.notifyPropertyChange("value");SC.RunLoop.end()},this))},value:function(a,b){if(b!==undefined){this.$("input").prop("checked",b)}else{b=this.$("input").prop("checked")}return b}.property().idempotent()};sc_require("views/template");SC.TextField=SC.TemplateView.extend({classNames:["sc-text-field"],isMultiline:NO,template:function(){return SC.Handlebars.compile(this.get("isMultiline")?"<textarea></textarea>":'<input type="text">')}.property("isMultiline").cacheable(),$input:function(){tagName=this.get("isMultiline")?"textarea":"input";return this.$(tagName)},didCreateLayer:function(){var b=this;var a=this.$input();a.val(this._value);if(SC.browser.msie){SC.Event.add(a,"focusin",this,this.focusIn);SC.Event.add(a,"focusout",this,this.focusOut)}else{SC.Event.add(a,"focus",this,this.focusIn);SC.Event.add(a,"blur",this,this.focusOut)}a.bind("change",function(){b.domValueDidChange(SC.$(this))})},value:function(b,c){var a=this.$input();if(c!==undefined){if(this._value!==c||a.val()!==c){this._value=c;a.val(c)}}else{if(a.length){this._value=c=a.val()}else{c=this._value}}return c}.property().idempotent(),domValueDidChange:function(a){this.set("value",a.val())},focusIn:function(a){this.becomeFirstResponder();this.tryToPerform("focus",a)},focusOut:function(a){this.resignFirstResponder();this.tryToPerform("blur",a)},willLoseFirstResponder:function(){this.notifyPropertyChange("value")},keyUp:function(a){this.domValueDidChange(this.$input());if(a.keyCode===SC.Event.KEY_RETURN){return this.tryToPerform("insertNewline",a)}else{if(a.keyCode===SC.Event.KEY_ESC){return this.tryToPerform("cancel",a)}}return true}});SC.TextFieldSupport={_value:null,value:function(b,c){var a=this.$("input");if(c!==undefined){if(this._value!==c||a.val()!==c){this._value=c;a.val(c)}}else{if(a.length>0){c=this._value=a.val()}else{c=this._value}}return c}.property().idempotent(),didCreateLayer:function(){var a=this.$("input");a.val(this._value);if(SC.browser.msie){SC.Event.add(a,"focusin",this,this.focusIn);SC.Event.add(a,"focusout",this,this.focusOut)}else{SC.Event.add(a,"focus",this,this.focusIn);SC.Event.add(a,"blur",this,this.focusOut)}},focusIn:function(a){this.becomeFirstResponder();this.tryToPerform("focus",a)},focusOut:function(a){this.resignFirstResponder();this.tryToPerform("blur",a)},willLoseFirstResponder:function(){this.notifyPropertyChange("value")},keyUp:function(a){if(a.keyCode===SC.Event.KEY_RETURN){return this.tryToPerform("insertNewline",a)}else{if(a.keyCode===SC.Event.KEY_ESC){return this.tryToPerform("cancel",a)}}}};sc_require("views/view");sc_require("mixins/responder_context");SC.MIXED_STATE="__MIXED__";SC.Pane=SC.View.extend(SC.ResponderContext,{isPane:YES,page:null,rootResponder:null,sendEvent:function(c,a,e){var b;if(!e){e=this.get("firstResponder")}while(e){if(c==="touchStart"){if(a.touchResponder===e){e=null;break}if(!e.get("hasTouch")||e.get("acceptsMultitouch")){if(e.tryToPerform("touchStart",a)){break}}}else{if(c==="touchEnd"&&!e.get("acceptsMultitouch")){if(!e.get("hasTouch")){if(e.tryToPerform("touchEnd",a)){break}}}else{if(e.tryToPerform(c,a)){break}}}e=(e===this)?null:e.get("nextResponder")}if(!e&&(e=this.get("defaultResponder"))){if(typeof e===SC.T_STRING){e=SC.objectForPropertyPath(e)}if(!e){e=null}else{e=e.tryToPerform(c,a)?e:null}}else{if(!e&&!(e=this.get("defaultResponder"))){e=this.tryToPerform(c,a)?this:null}}return a.mouseHandler||e},nextResponder:function(){return null}.property().cacheable(),firstResponder:null,acceptsKeyPane:YES,isKeyPane:NO,becomeKeyPane:function(){if(this.get("isKeyPane")){return this}if(this.rootResponder){this.rootResponder.makeKeyPane(this)}return this},resignKeyPane:function(){if(!this.get("isKeyPane")){return this}if(this.rootResponder){this.rootResponder.makeKeyPane(null)}return this},makeFirstResponder:function(c,b,a){if(!b){b=this}var f=this.get("firstResponder"),e=this.get("isKeyPane");if(f===b){return this}if(SC.platform.touch&&b&&b.kindOf(SC.TextFieldView)&&!b.get("focused")){return this}if(e){if(f){f.tryToPerform("willLoseKeyResponderTo",b)}if(b){b.tryToPerform("willBecomeKeyResponderFrom",f)}}if(f){f.beginPropertyChanges();f.set("isKeyResponder",NO)}if(b){b.beginPropertyChanges();b.set("isKeyResponder",e)}c(b,a);if(f){f.endPropertyChanges()}if(b){b.endPropertyChanges()}if(e){if(b){b.tryToPerform("didBecomeKeyResponderFrom",f)}if(f){f.tryToPerform("didLoseKeyResponderTo",b)}}return this}.enhance(),willLoseKeyPaneTo:function(a){this._forwardKeyChange(this.get("isKeyPane"),"willLoseKeyResponderTo",a,NO);return this},willBecomeKeyPaneFrom:function(a){this._forwardKeyChange(!this.get("isKeyPane"),"willBecomeKeyResponderFrom",a,YES);return this},didBecomeKeyResponderFrom:function(a){},didLoseKeyPaneTo:function(b){var a=this.get("isKeyPane");this.set("isKeyPane",NO);this._forwardKeyChange(a,"didLoseKeyResponderTo",b);return this},didBecomeKeyPaneFrom:function(b){var a=this.get("isKeyPane");this.set("isKeyPane",YES);this._forwardKeyChange(!a,"didBecomeKeyResponderFrom",b,YES);return this},isMainPane:NO,focusFrom:function(a){},blurTo:function(a){},blurMainTo:function(a){this.set("isMainPane",NO)},focusMainFrom:function(a){this.set("isMainPane",YES)},append:function(){return this.appendTo(document.body)},remove:function(){if(!this.get("isVisibleInWindow")){return this}if(!this.get("isPaneAttached")){return this}var b=this.get("layer");if(b&&b.parentNode){b.parentNode.removeChild(b)}b=null;this._removeIntercept();this.resignKeyPane();var a=this.rootResponder;if(this.get("isMainPane")){a.makeMainPane(null)}a.panes.remove(this);this.rootResponder=null;this.set("isPaneAttached",NO);this.parentViewDidChange();return this},insert:function(b){var a=this.get("layer");if(!a){a=this.createLayer().get("layer")}b(a);if(!this.get("isPaneAttached")){this.paneDidAttach()}return this},appendTo:function(a){return this.insert(function(b){jQuery(a).append(b)})},paneDidAttach:function(){var a=(this.rootResponder=SC.RootResponder.responder);a.panes.add(this);this.set("isPaneAttached",YES);this.recomputeDependentProperties();this._notifyDidAppendToDocument();this._addIntercept();return this},recomputeDependentProperties:function(){},isPaneAttached:NO,wantsTouchIntercept:NO,hasTouchIntercept:function(){return this.get("wantsTouchIntercept")&&SC.platform.touch}.property("wantsTouchIntercept").cacheable(),zIndex:0,touchZ:99,_addIntercept:function(){if(this.get("hasTouchIntercept")){var b=document.createElement("div");var a=b.style;a.position="absolute";a.left="0px";a.top="0px";a.right="0px";a.bottom="0px";a.webkitTransform="translateZ(0px)";a.zIndex=this.get("zIndex")+this.get("touchZ");b.className="touch-intercept";b.id="touch-intercept-"+SC.guidFor(this);this._touchIntercept=b;document.body.appendChild(b)}},_removeIntercept:function(){if(this._touchIntercept){document.body.removeChild(this._touchIntercept);this._touchIntercept=null}},hideTouchIntercept:function(){if(this._touchIntercept){this._touchIntercept.style.display="none"}},showTouchIntercept:function(){if(this._touchIntercept){this._touchIntercept.style.display="block"}},recomputeIsVisibleInWindow:function(){if(this.get("designer")&&SC.suppressMain){return arguments.callee.base.apply(this,arguments)}var e=this.get("isVisibleInWindow"),g=this.get("isVisible")&&this.get("isPaneAttached");if(e!==g){this.set("isVisibleInWindow",g);var f=this.get("childViews"),b=f.length,a,c;for(a=0;a<b;a++){c=f[a];if(c.recomputeIsVisibleInWindow){c.recomputeIsVisibleInWindow(g)}}if(g){if(this.get("childViewsNeedLayout")){this.invokeOnce(this.layoutChildViewsIfNeeded)}}else{if(this.get("isKeyPane")){this.resignKeyPane()}}}this.updateLayerIfNeeded(YES);return this},updateLayerLocation:function(){if(this.get("designer")&&SC.suppressMain){return arguments.callee.base.apply(this,arguments)}return this},init:function(){if(this.hasTouchIntercept===YES){SC.Logger.warn("Do not set hasTouchIntercept directly. Use wantsTouchIntercept instead.");this.hasTouchIntercept=SC.platform.touch}var a=!!this.get("layer");arguments.callee.base.apply(this,arguments);if(a){this.paneDidAttach()}},classNames:["sc-pane"]});sc_require("panes/pane");SC.Pane.reopen({performKeyEquivalent:function(c,a){var b=arguments.callee.base.apply(this,arguments);if(!b){var e=this.get("defaultResponder");if(e){if(e.performKeyEquivalent){b=e.performKeyEquivalent(c,a)}if(!b&&e.tryToPerform){b=e.tryToPerform(c,a)}}}return b},keyDown:function(a){var b;if((a.which===9||(SC.browser.mozilla&&a.keyCode===9))&&!this.get("firstResponder")){if(a.shiftKey){b=this.get("previousValidKeyView")}else{b=this.get("nextValidKeyView")}if(b){this.makeFirstResponder(b);return YES}else{if(!SC.TABBING_ONLY_INSIDE_DOCUMENT){a.allowDefault()}}}return NO},_forwardKeyChange:function(e,b,j,g){var c,a,f;if(e&&(a=this.get("firstResponder"))){f=(j)?j.get("firstResponder"):null;c=this.get("firstResponder");if(c&&c[b]){c[b](f)}if((g!==undefined)&&a){a.set("isKeyResponder",g)}}}});sc_require("panes/pane");SC.Pane.reopen({currentWindowSize:null,computeParentDimensions:function(c){if(this.get("designer")&&SC.suppressMain){return arguments.callee.base.apply(this,arguments)}var e={x:0,y:0,width:1000,height:1000},b=this.get("layout");if(document&&document.body){e.width=document.body.clientWidth;e.height=document.body.clientHeight;if(SC.browser.isIE&&SC.browser.compareVersion("7.0")===0){var a=SC.platform.get("scrollbarSize");if(document.body.scrollWidth>e.width){e.width-=a}if(document.body.scrollHeight>e.height){e.height-=a}}}if(b.minHeight||b.minWidth){if(b.minHeight){e.height=Math.max(e.height,b.minHeight)}if(b.minWidth){e.width=Math.max(e.width,b.minWidth)}}return e},frame:function(){if(this.get("designer")&&SC.suppressMain){return arguments.callee.base.apply(this,arguments)}return this.computeFrameWithParentFrame(null)}.property(),windowSizeDidChange:function(b,a){this.set("currentWindowSize",a);this.parentViewDidResize();return this},paneLayoutDidChange:function(){this.invokeOnce(this.updateLayout)}.observes("layout"),recomputeDependentProperties:function(a){this.set("currentWindowSize",this.rootResponder.computeWindowSize());a()}.enhance()});sc_require("panes/pane");SC.Pane.reopen({prependTo:function(a){return this.insert(function(b){jQuery(a).prepend(b)})},removeFromParent:function(){throw SC.Error.desc("SC.Pane cannot be removed from its parent, since it's the root. Did you mean remove()?")}});SC.TemplatePane=SC.Object.extend({});SC.TemplatePane.mixin({append:function(a){var b=SC.MainPane.extend({childViews:["contentView"],contentView:SC.TemplateView.design(a),touchStart:function(c){c.allowDefault()},touchesDragged:function(c,e){c.allowDefault()},touchEnd:function(c){c.allowDefault()}});b=b.create().append();b.awake();return b}});sc_require("panes/pane");SC.Pane.reopen({recomputeDependentProperties:function(a){this.recomputeIsVisibleInWindow();a()}.enhance()});SC.Application=SC.Responder.extend(SC.ResponderContext,{});SC.BENCHMARK_LOG_READY=YES;sc_require("system/event");SC.mixin({isReady:NO,suppressOnReady:SC.suppressOnReady?YES:NO,suppressMain:SC.suppressMain?YES:NO,ready:function(b,c){var a=SC._readyQueue;if(c===undefined){c=b;b=null}else{if(SC.typeOf(c)===SC.T_STRING){c=b[c]}}if(SC.isReady){jQuery(document).ready(function(){c.call(b)})}else{if(!a){SC._readyQueue=[]}SC._readyQueue.push(function(){c.call(b)})}return this},onReady:{done:function(){if(SC.isReady){return}SC.isReady=true;SC.RunLoop.begin();SC.Locale.createCurrentLocale();jQuery("body").addClass(SC.Locale.currentLanguage.toLowerCase());jQuery("#loading").remove();var c=SC._readyQueue,b,a;if(c){for(b=0,a=c.length;b<a;b++){c[b].call()}SC._readyQueue=null}if(window.main&&!SC.suppressMain&&(SC.mode===SC.APP_MODE)){window.main()}SC.RunLoop.end()}}});if(!SC.suppressOnReady){jQuery.event.special.ready._default=SC.onReady.done}SC.APP_MODE="APP_MODE";SC.TEST_MODE="TEST_MODE";SC.mode=SC.APP_MODE;SC.platform=SC.Object.create({scrollbarSize:function(){var a=document.createElement("DIV");a.innerHTML="<div style='height:1px;'></div>";a.style.cssText="position:absolute;width:100px;height:100px;overflow-y:visible;";document.body.appendChild(a);var b=a.childNodes[0].innerWidth;a.style.overflowY="scroll";var c=a.childNodes[0].innerWidth;document.body.removeChild(a);return b-c}.property().cacheable(),touch:(("createTouch" in document)&&SC.browser.chrome<9)||SC.browser.android,bounceOnScroll:SC.browser.iOS,pinchToZoom:SC.browser.iOS,input:{placeholder:("placeholder" in document.createElement("input"))},input:function(e){var f={},c=e.length,g=document.createElement("input"),b,a;for(a=0;a<c;a++){b=e[a];f[b]=!!(b in g)}return f}(["autocomplete","readonly","list","size","required","multiple","maxlength","pattern","min","max","step","placeholder"]),standalone:!!navigator.standalone,cssPrefix:null,domCSSPrefix:null,simulateTouchEvents:function(){if(this.touch){return}SC.Logger.log("Simulating touch events");SC.platform.touch=YES;SC.platform.bounceOnScroll=YES;document.body.className=document.body.className+" touch";this._simtouch_counter=1;this.removeEvents(["click","dblclick","mouseout","mouseover","mousewheel"]);this.replaceEvent("mousemove",this._simtouch_mousemove);this.replaceEvent("mousedown",this._simtouch_mousedown);this.replaceEvent("mouseup",this._simtouch_mouseup);SC.platform.windowSizeDeterminesOrientation=YES;SC.device.orientationHandlingShouldChange()},removeEvents:function(e){var b,a=e.length,c;for(b=0;b<a;b++){c=e[b];SC.Event.remove(document,c,SC.RootResponder.responder,SC.RootResponder.responder[c])}},replaceEvent:function(a,b){SC.Event.remove(document,a,SC.RootResponder.responder,SC.RootResponder.responder[a]);SC.Event.add(document,a,this,b)},_simtouch_mousemove:function(a){if(!this._mousedown){if(a.altKey&&this._pinchCenter==null){this._pinchCenter={pageX:a.pageX,pageY:a.pageY,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY}}else{if(!a.altKey&&this._pinchCenter!=null){this._pinchCenter=null}}return NO}var b=this.manufactureTouchEvent(a,"touchmove");return SC.RootResponder.responder.touchmove(b)},_simtouch_mousedown:function(a){this._mousedown=YES;var b=this.manufactureTouchEvent(a,"touchstart");return SC.RootResponder.responder.touchstart(b)},_simtouch_mouseup:function(a){var c=this.manufactureTouchEvent(a,"touchend"),b=SC.RootResponder.responder.touchend(c);this._mousedown=NO;this._simtouch_counter++;return b},manufactureTouchEvent:function(p,o){var c,q,g=this._simtouch_counter;c={type:o,target:p.target,identifier:g,pageX:p.pageX,pageY:p.pageY,screenX:p.screenX,screenY:p.screenY,clientX:p.clientX,clientY:p.clientY};p.touches=[c];if(p.altKey&&this._pinchCenter!=null){var k=this._pinchCenter.pageX+this._pinchCenter.pageX-p.pageX,j=this._pinchCenter.pageY+this._pinchCenter.pageY-p.pageY,f=this._pinchCenter.screenX+this._pinchCenter.screenX-p.screenX,e=this._pinchCenter.screenY+this._pinchCenter.screenY-p.screenY,b=this._pinchCenter.clientX+this._pinchCenter.clientX-p.clientX,a=this._pinchCenter.clientY+this._pinchCenter.clientY-p.clientY,n=this._simtouch_counter+1;q={type:o,target:p.target,identifier:n,pageX:k,pageY:j,screenX:f,screenY:e,clientX:b,clientY:a};p.touches=[c,q]}p.changedTouches=p.touches;return p},supportsCSSTransitions:NO,supportsCSSTransforms:NO,understandsCSS3DTransforms:NO,supportsCSS3DTransforms:NO,supportsAcceleratedLayers:NO,supportsHashChange:function(){return("onhashchange" in window)&&(document.documentMode===undefined||document.documentMode>7)}(),supportsHistory:function(){return !!(window.history&&window.history.pushState)}(),supportsCanvas:function(){return !!document.createElement("canvas").getContext}(),supportsOrientationChange:("onorientationchange" in window),windowSizeDeterminesOrientation:SC.browser.iOS||!("onorientationchange" in window)});(function(){var a=navigator.userAgent.toLowerCase();if((/webkit/).test(a)){SC.platform.cssPrefix="webkit";SC.platform.domCSSPrefix="Webkit"}else{if((/opera/).test(a)){SC.platform.cssPrefix="opera";SC.platform.domCSSPrefix="O"}else{if((/msie/).test(a)&&!(/opera/).test(a)){SC.platform.cssPrefix="ms";SC.platform.domCSSPrefix="ms"}else{if((/mozilla/).test(a)&&!(/(compatible|webkit)/).test(a)){SC.platform.cssPrefix="moz";SC.platform.domCSSPrefix="Moz"}}}}})();(function(){var f=document.createElement("div");var g=["-moz-","-moz-","-o-","-ms-","-webkit-"];var a=["moz","Moz","o","ms","webkit"];var c="",b=null;for(b=0;b<g.length;b++){c+=g[b]+"transition:all 1s linear;";c+=g[b]+"transform: translate(1px, 1px);";c+=g[b]+"perspective: 500px;"}f.style.cssText=c;for(b=0;b<a.length;b++){if(f.style[a[b]+"TransitionProperty"]!==undefined){SC.platform.supportsCSSTransitions=YES}if(f.style[a[b]+"Transform"]!==undefined){SC.platform.supportsCSSTransforms=YES}if(f.style[a[b]+"Perspective"]!==undefined||f.style[a[b]+"PerspectiveProperty"]!==undefined){SC.platform.understandsCSS3DTransforms=YES;SC.platform.supportsCSS3DTransforms=YES}}try{if(window.media&&window.media.matchMedium){if(!window.media.matchMedium("(-webkit-transform-3d)")){SC.platform.supportsCSS3DTransforms=NO}}else{if(window.styleMedia&&window.styleMedia.matchMedium){if(!window.styleMedia.matchMedium("(-webkit-transform-3d)")){SC.platform.supportsCSS3DTransforms=NO}}}}catch(j){SC.platform.supportsCSS3DTransforms=NO}if(SC.platform.supportsCSSTransforms&&SC.platform.cssPrefix==="webkit"){SC.platform.supportsAcceleratedLayers=YES}})();sc_require("system/ready");sc_require("system/platform");SC.CAPTURE_BACKSPACE_KEY=NO;SC.RootResponder=SC.Object.extend({panes:null,init:function(){arguments.callee.base.apply(this,arguments);this.panes=SC.Set.create();if(SC.platform.supportsCSSTransitions){this[SC.platform.cssPrefix+"TransitionEnd"]=this.transitionEnd;this["transitionend"]=this.transitionEnd}},mainPane:null,makeMainPane:function(b){var a=this.get("mainPane");if(a===b){return this}this.beginPropertyChanges();if(this.get("keyPane")===a){this.makeKeyPane(b)}this.set("mainPane",b);if(a){a.blurMainTo(b)}if(b){b.focusMainFrom(a)}this.endPropertyChanges();return this},menuPane:null,makeMenuPane:function(b){if(b&&!b.get("acceptsMenuPane")){return this}else{var a=this.get("menuPane");if(a===b){return this}this.set("menuPane",b)}return this},keyPane:null,previousKeyPanes:[],makeKeyPane:function(g){var f,a,e;if(g){if(!g.get("acceptsKeyPane")){return this}else{a=this.get("keyPane");if(a===g){return this}else{if(a){e=this.get("previousKeyPanes");e.push(a)}f=g}}}else{a=this.get("keyPane");e=this.get("previousKeyPanes");f=null;while(e.length>0){var c=e.pop();if(c.get("isPaneAttached")&&c.get("acceptsKeyPane")){f=c;break}}}if(!f){var b=this.get("mainPane");if(b&&b.get("acceptsKeyPane")){f=b}}if(a){a.willLoseKeyPaneTo(f)}if(f){f.willBecomeKeyPaneFrom(a)}this.set("keyPane",f);if(f){f.didBecomeKeyPaneFrom(a)}if(a){a.didLoseKeyPaneTo(f)}return this},currentWindowSize:null,computeWindowSize:function(){var c,b,a;if(!this._bod||!this._docElement){b=document.body;a=document.documentElement;this._bod=b;this._docElement=a}else{b=this._bod;a=this._docElement}if(window.innerHeight){c={width:window.innerWidth,height:window.innerHeight}}else{if(a&&a.clientHeight){c={width:a.clientWidth,height:a.clientHeight}}else{if(b){c={width:b.clientWidth,height:b.clientHeight}}}}return c},resize:function(){this._resize();return YES},_resize:function(){var a=this.computeWindowSize(),b=this.get("currentWindowSize");this.set("currentWindowSize",a);if(!SC.rectsEqual(a,b)){SC.device.windowSizeDidChange(a);if(this.panes){SC.run(function(){this.panes.invoke("windowSizeDidChange",b,a)},this)}}},hasFocus:NO,focus:function(){if(!this.get("hasFocus")){SC.$("body").addClass("sc-focus").removeClass("sc-blur");if(!SC.TABBING_ONLY_INSIDE_DOCUMENT){var a=this.get("mainPane"),b=a?a.get("nextValidKeyView"):null;if(b){a.makeFirstResponder(b)}}SC.run(function(){this.set("hasFocus",YES)},this)}return YES},focusin:function(){this.focus()},focusout:function(){this.blur()},blur:function(){if(this.get("hasFocus")){SC.$("body").addClass("sc-blur").removeClass("sc-focus");SC.run(function(){this.set("hasFocus",NO)},this)}return YES},dragDidStart:function(a){this._mouseDownView=a;this._drag=a},defaultResponder:null,sendAction:function(e,f,c,g,b,a){f=this.targetForAction(e,f,c,g,a);if(f&&f.isResponderContext){return !!f.sendAction(e,c,b,a)}else{return f&&f.tryToPerform(e,c)}},_responderFor:function(e,b,a){var c=e?e.get("defaultResponder"):null;if(e){e=a||e.get("firstResponder")||e;do{if(e.respondsTo(b)){return e}}while((e=e.get("nextResponder")))}if(typeof c===SC.T_STRING){c=SC.objectForPropertyPath(c)}if(!c){return null}else{if(c.isResponderContext){return c}else{if(c.respondsTo(b)){return c}else{return null}}}},targetForAction:function(c,g,f,j,a){if(!c||(SC.typeOf(c)!==SC.T_STRING)){return null}if(g){if(SC.typeOf(g)===SC.T_STRING){g=SC.objectForPropertyPath(g)||SC.objectForPropertyPath(g,f)}if(g&&!g.isResponderContext){if(g.respondsTo&&!g.respondsTo(c)){g=null}else{if(SC.typeOf(g[c])!==SC.T_FUNCTION){g=null}}}return g}if(j){g=this._responderFor(j,c,a);if(g){return g}}var b=this.get("keyPane"),e=this.get("mainPane");if(b&&(b!==j)){g=this._responderFor(b,c)}if(!g&&e&&(e!==b)){g=this._responderFor(e,c)}if(!g&&(g=this.get("defaultResponder"))){if(SC.typeOf(g)===SC.T_STRING){g=SC.objectForPropertyPath(g);if(g){this.set("defaultResponder",g)}}if(g&&!g.isResponderContext){if(g.respondsTo&&!g.respondsTo(c)){g=null}else{if(SC.typeOf(g[c])!==SC.T_FUNCTION){g=null}}}}return g},targetViewForEvent:function(a){return a.target?SC.$(a.target).view()[0]:null},sendEvent:function(c,a,e){var f,b;SC.run(function(){if(e){f=e.get("pane")}else{f=this.get("menuPane")||this.get("keyPane")||this.get("mainPane")}b=(f)?f.sendEvent(c,a,e):null},this);return b},listenFor:function(e,c,b,a){b=b?b:this;e.forEach(function(f){var g=b[f];if(g){SC.Event.add(c,f,b,g,null,a)}},this);c=null;return b},setup:function(){this.listenFor(["touchstart","touchmove","touchend","touchcancel"],document);this.listenFor(["keydown","keyup","beforedeactivate","mousedown","mouseup","click","dblclick","mousemove","selectstart","contextmenu"],document).listenFor(["resize"],window);if(SC.browser.msie){this.listenFor("focusin focusout".w(),document)}else{this.listenFor(["focus","blur"],window)}this.listenFor(["webkitAnimationStart","webkitAnimationIteration","webkitAnimationEnd"],document);if(SC.platform.supportsCSSTransitions){this.listenFor(["transitionend",SC.platform.cssPrefix+"TransitionEnd"],document)}if(this.keypress){if(SC.CAPTURE_BACKSPACE_KEY&&SC.browser.mozilla){var b=this;document.onkeypress=function(f){f=SC.Event.normalizeEvent(f);return b.keypress.call(b,f)}}else{SC.Event.add(document,"keypress",this,this.keypress)}}["drag","selectstart"].forEach(function(g){var j=this[g];if(j){if(SC.browser.msie){var f=this;document.body["on"+g]=function(k){return j.call(f,SC.Event.normalizeEvent(event||window.event))};SC.Event.add(window,"unload",this,function(){document.body["on"+g]=null})}else{SC.Event.add(document,g,this,j)}}},this);var a="mousewheel";if(SC.browser.mozilla){if(SC.browser.compareVersion(1,9,1)<0){a="DOMMouseScroll"}else{a="MozMousePixelScroll"}}SC.Event.add(document,a,this,this.mousewheel);this.set("currentWindowSize",this.computeWindowSize());if(SC.browser.mobileSafari){if(SC.platform&&!SC.platform.touch){SC.platform.simulateTouchEvents()}var c=SC.RunLoop.prototype.endRunLoop,e;e=function(){if(c){c.apply(this,arguments)}var n=SC.RootResponder.responder._touches,k,f,o,g,q,t=NO;if(n){for(k in n){if(n[k]._rescuedElement){continue}o=f=n[k].target;while(f&&(f=f.parentNode)&&!t){t=(f===document.body)}if(!t&&o){if(o.parentNode&&o.cloneNode){var p=o.cloneNode(true);o.parentNode.replaceChild(p,o);o.swapNode=p}var j=SC.touchHoldingPen;if(!j){j=SC.touchHoldingPen=document.createElement("div");j.style.display="none";document.body.appendChild(j)}j.appendChild(o);n[k]._rescuedElement=o}}}};SC.RunLoop.prototype.endRunLoop=e}},_touchedViews:{},_touches:{},touchesForView:function(a){if(this._touchedViews[SC.guidFor(a)]){return this._touchedViews[SC.guidFor(a)].touches}},averagedTouchesForView:function(k,j){var q=this.touchesForView(k),b=k._scrr_averagedTouches||(k._scrr_averagedTouches={});if((!q||q.length===0)&&!j){b.x=0;b.y=0;b.d=0;b.touchCount=0}else{var f=this._averagedTouches_touches||(this._averagedTouches_touches=[]);f.length=0;if(q){var e,g=q.length;for(e=0;e<g;e++){f.push(q[e])}}if(j){f.push(j)}var n,c,a=0,v=0,u,p,o=0;g=f.length;for(n=0;n<g;n++){c=f[n];a+=c.pageX;v+=c.pageY}a/=g;v/=g;for(n=0;n<g;n++){c=f[n];u=Math.abs(c.pageX-a);p=Math.abs(c.pageY-v);o+=Math.pow(u*u+p*p,0.5)}o/=g;b.x=a;b.y=v;b.d=o;b.touchCount=g}return b},assignTouch:function(b,a){if(b.hasEnded){throw"Attemt to assign a touch that is already finished."}if(b.view===a){return}if(b.view){this.unassignTouch(b)}if(!this._touchedViews[SC.guidFor(a)]){this._touchedViews[SC.guidFor(a)]={view:a,touches:SC.CoreSet.create([]),touchCount:0};a.set("hasTouch",YES)}b.view=a;this._touchedViews[SC.guidFor(a)].touches.add(b);this._touchedViews[SC.guidFor(a)].touchCount++},unassignTouch:function(c){var a,b;if(!c.view){return}a=c.view;b=this._touchedViews[SC.guidFor(a)];b.touches.remove(c);b.touchCount--;if(b.touchCount<1){a.set("hasTouch",NO);b.view=null;delete this._touchedViews[SC.guidFor(a)]}c.view=undefined},_flushQueuedTouchResponder:function(){if(this._queuedTouchResponder){var a=this._queuedTouchResponder;this._queuedTouchResponder=null;this.makeTouchResponder.apply(this,a)}},makeTouchResponder:function(g,f,c,p){if(this._isMakingTouchResponder){this._queuedTouchResponder=[g,f,c,p];return}this._isMakingTouchResponder=YES;var k=g.touchResponders,b;if(g.touchResponder===f){this._isMakingTouchResponder=NO;this._flushQueuedTouchResponder();return}var a;if(f){a=f.get("pane")}else{a=this.get("keyPane")||this.get("mainPane")}if(k.indexOf(f)<0){if(p){try{f=(a)?a.sendEvent("touchStart",g,f):null}catch(j){SC.Logger.error("Error in touchStart: "+j);f=null}}else{if(f&&((f.get?f.get("acceptsMultitouch"):f.acceptsMultitouch)||!f.hasTouch)){if(!f.touchStart(g)){f=null}}else{}}}if(!c||(k.indexOf(f)>-1&&k[k.length-1]!==f)){this.unassignTouch(g);var n=k.length-1,o=k[n];while(o&&o!==f){b=this.touchesForView(o);if((o.get?o.get("acceptsMultitouch"):o.acceptsMultitouch)||!b){if(o.touchCancelled){o.touchCancelled(g)}}n--;o=k[n];k.pop();g.touchResponder=k[n];g.nextTouchResponder=k[n-1]}}if(f){this.assignTouch(g,f);if(f!==g.touchResponder){k.push(f);g.touchResponder=f;g.nextTouchResponder=k[k.length-2]}}this._isMakingTouchResponder=NO;this._flushQueuedTouchResponder()},captureTouch:function(k,f,j){if(!f){f=this}var g=k.targetView,c=g,e=[],b,a;if(SC.LOG_TOUCH_EVENTS){SC.Logger.info("  -- Received one touch on %@".fmt(g.toString()))}while(c&&(c!==f)){e.unshift(c);c=c.get("nextResponder")}for(a=e.length,b=0;b<a;b++){c=e[b];if(SC.LOG_TOUCH_EVENTS){SC.Logger.info("  -- Checking %@ for captureTouch response…".fmt(c.toString()))}if(c.tryToPerform("captureTouch",k)){if(SC.LOG_TOUCH_EVENTS){SC.Logger.info("   -- Making %@ touch responder because it returns YES to captureTouch".fmt(c.toString()))}this.makeTouchResponder(k,c,j,YES);return}}if(SC.LOG_TOUCH_EVENTS){SC.Logger.info("   -- Didn't find a view that returned YES to captureTouch, so we're calling touchStart")}this.makeTouchResponder(k,g,j,YES)},endMissingTouches:function(f){var b,a=f.length,e={},c=[];for(b=0;b<a;b++){e[f[b].identifier]=YES}for(b in this._touches){var g=this._touches[b].identifier;if(!e[g]){c.push(this._touches[b])}}for(b=0,a=c.length;b<a;b++){this.endTouch(c[b]);this.finishTouch(c[b])}},_touchCount:0,endTouch:function(b,j,c){if(!j){j="touchEnd"}var a,g,e,f;this.unassignTouch(b);if(b.touchResponder){f=b.touchResponder;g=b.touchResponders;a=g.length-1;e=g[a];while(e){if(e[j]){e[j](b,c)}if(b.touchResponder!==f){break}a--;e=g[a];j="touchCancelled"}}},finishTouch:function(b){var a;this.unassignTouch(b);if(a=b._rescuedElement){if(a.swapNode&&a.swapNode.parentNode){a.swapNode.parentNode.replaceChild(a,a.swapNode)}else{if(a.parentNode===SC.touchHoldingPen){SC.touchHoldingPen.removeChild(a)}}delete b._rescuedElement;a.swapNode=null;a=null}b.touchResponders=null;b.touchResponder=null;b.nextTouchResponder=null;b.hasEnded=YES;if(this._touches[b.identifier]){delete this._touches[b.identifier]}},touchstart:function(a){var b=NO;SC.run(function(){this.endMissingTouches(a.touches);var f,k=a.changedTouches,e=k.length,j,g,n,c;a.touchContext=this;for(f=0;f<e;f++){n=k[f];c=SC.Touch.create(n,this);if(!c.targetView){continue}if(c.hidesTouchIntercept){b=YES}c.timeStamp=a.timeStamp;this._touches[n.identifier]=c;c.event=a;this.captureTouch(c,this);c.event=null}},this);if(b){return YES}return a.hasCustomEventHandling},touchmove:function(a){SC.run(function(){var c=a.changedTouches,b,u,q,g=c.length,p,o,n,t,j={},f,k,e=NO;if(this._drag){b=SC.Touch.create(a.changedTouches[0],this);this._drag.tryToPerform("mouseDragged",b)}for(q=0;q<g;q++){b=c[q];u=this._touches[b.identifier];if(!u){continue}if(u.hidesTouchIntercept){e=YES}u.pageX=b.pageX;u.pageY=b.pageY;u.clientX=b.clientX;u.clientY=b.clientY;u.screenX=b.screenX;u.screenY=b.screenY;u.timeStamp=a.timeStamp;u.event=a;if(u.touchResponder){p=u.touchResponder;k=SC.guidFor(p);if(!j[k]){j[k]={view:p,touches:[]}}j[k].touches.push(u)}}if(e){a.allowDefault();return YES}for(q in j){p=j[q].view;o=j[q].touches;a.viewChangedTouches=o;n=this.touchesForView(p);t=n.firstObject();a.pageX=t.pageX;a.pageY=t.pageY;a.clientX=t.clientX;a.clientY=t.clientY;a.screenX=t.screenX;a.screenY=t.screenY;a.touchContext=this;p.tryToPerform("touchesDragged",a,n)}c=a.changedTouches;g=c.length;for(q=0;q<g;q++){b=c[q];u=this._touches[b.identifier];if(u){u.event=null}}},this);return a.hasCustomEventHandling},touchend:function(a){var b=NO;SC.run(function(){var k=a.changedTouches,j,u,q,n=k.length,o,c,g=a.isCancel?"touchCancelled":"touchEnd",p,t,e,f;for(q=0;q<n;q++){j=k[q];j.type="touchend";u=this._touches[j.identifier];if(!u){continue}u.timeStamp=a.timeStamp;u.pageX=j.pageX;u.pageY=j.pageY;u.clientX=j.clientX;u.clientY=j.clientY;u.screenX=j.screenX;u.screenY=j.screenY;u.type="touchend";u.event=a;if(SC.LOG_TOUCH_EVENTS){SC.Logger.info("-- Received touch end")}if(u.hidesTouchIntercept){u.unhideTouchIntercept();b=YES}if(this._drag){this._drag.tryToPerform("mouseUp",j);this._drag=null}this.endTouch(u,g,a);this.finishTouch(u)}},this);if(b){return YES}return a.hasCustomEventHandling},touchcancel:function(a){a.isCancel=YES;this.touchend(a)},attemptKeyEquivalent:function(b){var e=null;var c=b.commandCodes()[0];if(!c){return NO}var g=this.get("menuPane"),a=this.get("keyPane"),f=this.get("mainPane");if(g){e=g.performKeyEquivalent(c,b);if(e){return e}}if(a){e=a.performKeyEquivalent(c,b);if(e||a.get("isModal")){return e}}if(!e&&f&&(f!==a)){e=f.performKeyEquivalent(c,b);if(e||f.get("isModal")){return e}}return e},_lastModifiers:null,_handleModifierChanges:function(b){var a;a=this._lastModifiers=(this._lastModifiers||{alt:false,ctrl:false,shift:false});var c=false;if(b.altKey!==a.alt){a.alt=b.altKey;c=true}if(b.ctrlKey!==a.ctrl){a.ctrl=b.ctrlKey;c=true}if(b.shiftKey!==a.shift){a.shift=b.shiftKey;c=true}b.modifiers=a;return(c)?(this.sendEvent("flagsChanged",b)?b.hasCustomEventHandling:YES):YES},_isFunctionOrNonPrintableKey:function(a){return !!(a.altKey||a.ctrlKey||a.metaKey||((a.charCode!==a.which)&&SC.FUNCTION_KEYS[a.which]))},_isModifierKey:function(a){return !!SC.MODIFIER_KEYS[a.charCode]},keydown:function(a){if(SC.none(a)){return YES}var f=a.keyCode;if(SC.browser.mozilla&&a.keyCode===9){this.keydownCounter=1}if(f===229){this._IMEInputON=YES;return this.sendEvent("keyDown",a)}if(f===27&&this._drag){this._drag.cancelDrag();this._drag=null;this._mouseDownView=null;return YES}if(SC.browser.mozilla&&(a.which===8)){return true}var b=this._handleModifierChanges(a),e=a.target||a.srcElement,c=(a.which===8)&&!SC.allowsBackspaceToPreviousPage&&(e===document.body);if(this._isModifierKey(a)){return(c?NO:b)}b=YES;if(this._isFunctionOrNonPrintableKey(a)){if(f>=37&&f<=40&&SC.browser.mozilla){return YES}b=this.sendEvent("keyDown",a);if(!b){b=!this.attemptKeyEquivalent(a)}else{b=a.hasCustomEventHandling;if(b){c=NO}}}return c?NO:b},keypress:function(b){var c,f=b.keyCode,g=!!SC.browser.mozilla;if(SC.browser.mozilla&&b.keyCode===9){this.keydownCounter++;if(this.keydownCounter==2){return YES}}if(g&&(b.which===8)){b.which=f;c=this.sendEvent("keyDown",b);return c?(SC.allowsBackspaceToPreviousPage||b.hasCustomEventHandling):YES}else{var e=(f>=37&&f<=40&&g),a=b.charCode;if((a!==undefined&&a===0&&b.keyCode!==9)&&!e){return YES}if(e){b.which=f}return this.sendEvent("keyDown",b)?b.hasCustomEventHandling:YES}},keyup:function(a){if(this._ffevt){this._ffevt=null}var b=this._handleModifierChanges(a);if(this._isModifierKey(a)){return b}if(this._IMEInputON&&a.keyCode===13){a.isIMEInput=YES;this.sendEvent("keyDown",a);this._IMEInputON=NO}return this.sendEvent("keyUp",a)?a.hasCustomEventHandling:YES},beforedeactivate:function(c){var b=c.toElement;if(b&&b.tagName&&b.tagName!=="IFRAME"){var a=SC.$(b).view()[0];if(a&&a.get("blocksIEDeactivate")){return NO}}return YES},mousedown:function(f){if(SC.platform.touch){f.allowDefault();this._lastMouseDownCustomHandling=YES;return YES}this._clickCount+=1;if(!this._lastMouseUpAt||((Date.now()-this._lastMouseUpAt)>250)){this._clickCount=1}else{var e=this._lastMouseDownX-f.clientX,a=this._lastMouseDownY-f.clientY,j=Math.sqrt(e*e+a*a);if(j>8){this._clickCount=1}}f.clickCount=this._clickCount;this._lastMouseDownX=f.clientX;this._lastMouseDownY=f.clientY;var c,b=this.targetViewForEvent(f);if(b){c=b.getPath("pane.firstResponder")}if(c&&c.kindOf(SC.InlineTextFieldView)&&c!==b){c.resignFirstResponder()}b=this._mouseDownView=this.sendEvent("mouseDown",f,b);if(b&&b.respondsTo("mouseDragged")){this._mouseCanDrag=YES}var g=b?f.hasCustomEventHandling:YES;this._lastMouseDownCustomHandling=g;return g},mouseup:function(b){if(SC.platform.touch){b.allowDefault();this._lastMouseUpCustomHandling=YES;return YES}if(this._drag){this._drag.tryToPerform("mouseUp",b);this._drag=null}var f=null,a=this._mouseDownView,e=this.targetViewForEvent(b);b.clickCount=this._clickCount;if(a){f=this.sendEvent("mouseUp",b,a);if(!f&&(this._clickCount===2)){f=this.sendEvent("doubleClick",b,a)}if(!f){f=this.sendEvent("click",b,a)}}if(!f){if(this._clickCount===2){f=this.sendEvent("doubleClick",b,e)}if(!f){f=this.sendEvent("click",b,e)}}this._mouseCanDrag=NO;this._mouseDownView=null;this._lastMouseUpAt=Date.now();var c=f?b.hasCustomEventHandling:YES;this._lastMouseUpCustomHandling=c;return c},click:function(a){if(!this._lastMouseUpCustomHandling||!this._lastMouseDownCustomHandling){a.preventDefault();a.stopPropagation();return NO}return YES},dblclick:function(a){if(SC.browser.isIE){this._clickCount=2;this.mouseup(a)}},mousewheel:function(b){var a=this.targetViewForEvent(b),c=this.sendEvent("mouseWheel",b,a);return(c)?b.hasCustomEventHandling:YES},_lastHovered:null,mousemove:function(a){if(SC.platform.touch){a.allowDefault();return YES}if(SC.browser.msie){if(this._lastMoveX===a.clientX&&this._lastMoveY===a.clientY){return}}this._lastMoveX=a.clientX;this._lastMoveY=a.clientY;SC.run(function(){if(this._drag){if(SC.browser.msie){if(this._lastMouseDownX!==a.clientX||this._lastMouseDownY!==a.clientY){this._drag.tryToPerform("mouseDragged",a)}}else{this._drag.tryToPerform("mouseDragged",a)}}else{var e=this._lastHovered||[],f=[],j,g,b,c=this.targetViewForEvent(a);while(c&&(c!==this)){f.push(c);c=c.get("nextResponder")}for(g=0,b=e.length;g<b;g++){c=e[g];j=c.respondsTo("mouseExited");if(j&&f.indexOf(c)===-1){c.tryToPerform("mouseExited",a)}}for(g=0,b=f.length;g<b;g++){c=f[g];if(e.indexOf(c)!==-1){c.tryToPerform("mouseMoved",a)}else{c.tryToPerform("mouseEntered",a)}}this._lastHovered=f;if(this._mouseDownView){if(SC.browser.msie){if(this._lastMouseDownX!==a.clientX&&this._lastMouseDownY!==a.clientY){this._mouseDownView.tryToPerform("mouseDragged",a)}}else{this._mouseDownView.tryToPerform("mouseDragged",a)}}}},this)},_mouseCanDrag:YES,selectstart:function(b){var c=this.targetViewForEvent(b),a=this.sendEvent("selectStart",b,c);if(c&&c.respondsTo("mouseDragged")){return(a!==null?YES:NO)&&!this._mouseCanDrag}else{return(a!==null?YES:NO)}},drag:function(){return false},contextmenu:function(b){var a=this.targetViewForEvent(b);return this.sendEvent("contextMenu",b,a)},webkitAnimationStart:function(b){try{var a=this.targetViewForEvent(b);this.sendEvent("animationDidStart",b,a)}catch(c){SC.Logger.warn("Exception during animationDidStart: %@".fmt(c));throw c}return a?b.hasCustomEventHandling:YES},webkitAnimationIteration:function(b){try{var a=this.targetViewForEvent(b);this.sendEvent("animationDidIterate",b,a)}catch(c){SC.Logger.warn("Exception during animationDidIterate: %@".fmt(c));throw c}return a?b.hasCustomEventHandling:YES},webkitAnimationEnd:function(b){try{var a=this.targetViewForEvent(b);this.sendEvent("animationDidEnd",b,a)}catch(c){SC.Logger.warn("Exception during animationDidEnd: %@".fmt(c));throw c}return a?b.hasCustomEventHandling:YES},transitionEnd:function(b){try{var a=this.targetViewForEvent(b);this.sendEvent("transitionDidEnd",b,a)}catch(c){SC.Logger.warn("Exception during transitionDidEnd: %@".fmt(c));throw c}return a?b.hasCustomEventHandling:YES}});SC.Touch=function(e,a){this.touchContext=a;this.identifier=e.identifier;var c=e.target,b;if(c&&SC.$(c).hasClass("touch-intercept")){e.target.style.webkitTransform="translate3d(0px,-5000px,0px)";c=document.elementFromPoint(e.pageX,e.pageY);if(c){b=SC.$(c).view()[0]}this.hidesTouchIntercept=NO;if(c.tagName==="INPUT"){this.hidesTouchIntercept=e.target}else{e.target.style.webkitTransform="translate3d(0px,0px,0px)"}}else{b=e.target?SC.$(e.target).view()[0]:null}this.targetView=b;this.target=c;this.hasEnded=NO;this.type=e.type;this.clickCount=1;this.view=undefined;this.touchResponder=this.nextTouchResponder=undefined;this.touchResponders=[];this.startX=this.pageX=e.pageX;this.startY=this.pageY=e.pageY;this.clientX=e.clientX;this.clientY=e.clientY;this.screenX=e.screenX;this.screenY=e.screenY};SC.Touch.prototype={unhideTouchIntercept:function(){var a=this.hidesTouchIntercept;if(a){setTimeout(function(){a.style.webkitTransform="translate3d(0px,0px,0px)"},500)}},allowDefault:function(){if(this.event){this.event.hasCustomEventHandling=YES}},preventDefault:function(){if(this.event){this.event.preventDefault()}},stopPropagation:function(){if(this.event){this.event.stopPropagation()}},stop:function(){if(this.event){this.event.stop()}},end:function(){this.touchContext.endTouch(this)},makeTouchResponder:function(b,c,a){this.touchContext.makeTouchResponder(this,b,c,a)},captureTouch:function(a,b){this.touchContext.captureTouch(this,a,b)},touchesForView:function(a){return this.touchContext.touchesForView(a)},touchesForResponder:function(a){return this.touchContext.touchesForView(a)},averagedTouchesForView:function(a,b){return this.touchContext.averagedTouchesForView(a,(b?this:null))}};SC.mixin(SC.Touch,{create:function(b,a){return new SC.Touch(b,a)}});SC.ready(SC.RootResponder,SC.RootResponder.ready=function(){var a;a=SC.RootResponder.responder=SC.RootResponder.create();a.setup()});sc_require("system/core_query");sc_require("system/ready");sc_require("system/root_responder");sc_require("system/platform");SC.PORTRAIT_ORIENTATION="portrait";SC.LANDSCAPE_ORIENTATION="landscape";SC.NO_ORIENTATION="desktop";SC.device=SC.Object.create({orientation:SC.NO_ORIENTATION,isOffline:NO,mouseLocation:function(){var a=SC.RootResponder.responder,c=a._lastMoveX,b=a._lastMoveY;if(SC.empty(c)||SC.empty(b)){return null}return{x:c,y:b}}.property(),init:function(){arguments.callee.base.apply(this,arguments);if(navigator&&navigator.onLine===false){this.set("isOffline",YES)}},setup:function(){var a=SC.RootResponder.responder;a.listenFor(["online","offline"],window,this);this.orientationHandlingShouldChange()},orientationHandlingShouldChange:function(){if(SC.platform.windowSizeDeterminesOrientation){SC.Event.remove(window,"orientationchange",this,this.orientationchange);this.windowSizeDidChange(SC.RootResponder.responder.get("currentWindowSize"))}else{if(SC.platform.supportsOrientationChange){SC.Event.add(window,"orientationchange",this,this.orientationchange);this.orientationchange()}}},windowSizeDidChange:function(a){if(SC.platform.windowSizeDeterminesOrientation){if(!SC.browser.iOS){SC.run(function(){if(SC.platform.touch){if(a.height>=a.width){SC.device.set("orientation",SC.PORTRAIT_ORIENTATION)}else{SC.device.set("orientation",SC.LANDSCAPE_ORIENTATION)}}else{SC.device.set("orientation",SC.NO_ORIENTATION)}})}else{SC.run(function(){if(a.width===window.screen.width){SC.device.set("orientation",SC.PORTRAIT_ORIENTATION)}else{SC.device.set("orientation",SC.LANDSCAPE_ORIENTATION)}})}return YES}return NO},orientationchange:function(a){SC.run(function(){if(window.orientation===0||window.orientation===180){SC.device.set("orientation",SC.PORTRAIT_ORIENTATION)}else{SC.device.set("orientation",SC.LANDSCAPE_ORIENTATION)}})},orientationObserver:function(){var a=SC.$(document.body),b=this.get("orientation");if(b===SC.PORTRAIT_ORIENTATION){a.addClass("portrait")}else{a.removeClass("portrait")}if(b===SC.LANDSCAPE_ORIENTATION){a.addClass("landscape")}else{a.removeClass("landscape")}}.observes("orientation"),online:function(a){this.set("isOffline",NO)},offline:function(a){this.set("isOffline",YES)}});SC.ready(function(){SC.device.setup()});SC.Page=SC.Object.extend({owner:null,get:function(a){var b=this[a];if(b&&b.isClass){this[a]=b=b.create({page:this});if(!this.get("inDesignMode")){b.awake()}return b}else{return arguments.callee.base.apply(this,arguments)}},awake:function(){var b,a;for(a in this){if(!this.hasOwnProperty(a)){continue}b=this[a];if(b&&b.isViewClass){this[a]=b=b.create({page:this})}}return this},getIfConfigured:function(b){var a=this[b];return(a&&a.isViewClass)?null:this.get(b)},loc:function(c){var a,b;for(b in c){if(!c.hasOwnProperty(b)){continue}a=this[b];if(!a||!a.isViewClass){continue}a.loc(c[b])}return this}});SC.Page.design=SC.Page.create;SC.Page.localization=function(a){return a};sc_require("system/builder");SC.MODE_REPLACE="replace";SC.MODE_APPEND="append";SC.MODE_PREPEND="prepend";SC.NON_PIXEL_PROPERTIES=["zIndex","fontWeight","opacity"];SC.COMBO_STYLES={WebkitTransition:["WebkitTransitionProperty","WebkitTransitionDuration","WebkitTransitionDelay","WebkitTransitionTimingFunction"]};SC.RenderContext=SC.Builder.create({SELF_CLOSING:SC.CoreSet.create().addEach(["area","base","basefront","br","hr","input","img","link","meta"]),init:function(f,e){var b,a;if(e){this.prevObject=e;this.strings=e.strings;this.offset=e.length+e.offset}if(!this.strings){this.strings=[]}if(f===undefined){f="div";a=YES}else{if(f==="div"||f==="label"||f==="a"){a=YES}else{if(SC.typeOf(f)===SC.T_STRING){f=f.toLowerCase();a=YES}}}if(a){this._tagName=f;this._needsTag=YES;this.needsContent=YES;var g=this;while(g){g.length++;g=g.prevObject}this.strings.push(null);this._selfClosing=this.SELF_CLOSING.contains(f)}else{this._elem=f;this._needsTag=NO;this.length=0;this.needsContent=NO}return this},strings:null,offset:0,length:0,updateMode:SC.MODE_REPLACE,needsContent:NO,get:function(b){var a=this.strings||[];return(b===undefined)?a.slice(this.offset,this.length):a[b+this.offset]},push:function(e){var b=this.strings,a=arguments.length;if(!b){this.strings=b=[]}if(a>1){b.push.apply(b,arguments)}else{b.push(e)}var f=this;while(f){f.length+=a;f=f.prevObject}this.needsContent=YES;return this},text:function(c){var b=arguments.length,a=0;for(a=0;a<b;a++){this.push(SC.RenderContext.escapeHTML(arguments[a]))}return this},join:function(b){if(this._needsTag){this.end()}var a=this.strings;return a?a.join(b||""):""},begin:function(a){return SC.RenderContext(a,this)},element:function(){return this._elem?this._elem:SC.$(this.join())[0]},remove:function(a){if(!a){return}var b,c=this._elem;if(!c||!c.removeChild){return}b=document.getElementById(a);if(b){b=c.removeChild(b);b=null}},update:function(){var c=this._elem,j=this.updateMode,f,e,a,g,b;this._innerHTMLReplaced=NO;if(!c){return}f=this.$();if(this.length>0){this._innerHTMLReplaced=YES;if(j===SC.MODE_REPLACE){f.html(this.join())}else{a=c.cloneNode(false);a.innerHTML=this.join();g=a.firstChild;while(g){b=g.nextSibling;c.insertBefore(g,b);g=b}g=b=a=null}}if(this._idDidChange&&(e=this._id)){f.attr("id",e)}jQuery.Buffer.flush();c=this._elem=null;return this.prevObject||this},_DEFAULT_ATTRS:{},_TAG_ARRAY:[],_JOIN_ARRAY:[],_STYLE_PAIR_ARRAY:[],end:function(){var t=this._TAG_ARRAY,b,p,n,j,o=this._attrs,e=this._classNames,a=this._id,q=this._styles;t[0]="<";t[1]=this._tagName;if(o||e||q||a){if(!o){o=this._DEFAULT_ATTRS}if(a){o.id=a}if(e){o["class"]=e.join(" ")}if(q){p=this._JOIN_ARRAY;b=this._STYLE_PAIR_ARRAY;for(n in q){if(!q.hasOwnProperty(n)){continue}j=q[n];if(j===null){continue}if(typeof j===SC.T_NUMBER&&!SC.NON_PIXEL_PROPERTIES.contains(n)){j+="px"}b[0]=this._dasherizeStyleName(n);b[1]=j;p.push(b.join(": "))}o.style=p.join("; ");p.length=0}t.push(" ");for(n in o){if(!o.hasOwnProperty(n)){continue}j=o[n];if(j===null){continue}t.push(n,'="',j,'" ')}if(o===this._DEFAULT_ATTRS){delete o.style;delete o["class"];delete o.id}}var k=this.strings;var g=(this._selfClosing===NO)?NO:(this.length===1);t.push(g?" />":">");k[this.offset]=t.join("");t.length=0;if(!g){t[0]="</";t[1]=this._tagName;t[2]=">";k.push(t.join(""));var f=this;while(f){f.length++;f=f.prevObject}t.length=0}this._elem=null;return this.prevObject||this},tag:function(a,b){return this.begin(a,b).end()},tagName:function(a){if(a===undefined){if(!this._tagName&&this._elem){this._tagName=this._elem.tagName}return this._tagName}else{this._tagName=a;this._tagNameDidChange=YES;return this}},id:function(a){if(a===undefined){if(!this._id&&this._elem){this._id=this._elem.id}return this._id}else{this._id=a;this._idDidChange=YES;return this}},classNames:function(b,a){if(this._elem){if(b){this.$().resetClassNames().addClass(b);return this}else{return this.$().attr("class").split(" ")}}if(b===undefined){if(this._cloneClassNames){this._classNames=(this._classNames||[]).slice();this._cloneClassNames=NO}if(!this._classNames){this._classNames=[]}return this._classNames}else{this._classNames=b;this._cloneClassNames=a||NO;this._classNamesDidChange=YES;return this}},hasClass:function(a){if(this._elem){return this.$().hasClass(a)}return this.classNames().indexOf(a)>=0},addClass:function(g){if(g===undefined||g===null){SC.Logger.warn("You are adding an undefined or empty class"+this.toString());return this}if(this._elem){if(SC.typeOf(g)===SC.T_STRING){this.$().addClass(g)}else{var c,b=g.length;for(c=0;c<b;c++){this.$().addClass(g[c])}}return this}var j=this.classNames();if(SC.typeOf(g)===SC.T_STRING){if(j.indexOf(g)<0){j.push(g);this._classNamesDidChange=YES}}else{var e;for(var f=0,a=g.length;f<a;f++){e=g[f];if(j.indexOf(e)<0){j.push(e);this._classNamesDidChange=YES}}}return this},removeClass:function(b){if(this._elem){this.$().removeClass(b);return this}var c=this._classNames,a;if(c&&(a=c.indexOf(b))>=0){if(this._cloneClassNames){c=this._classNames=c.slice();this._cloneClassNames=NO}c[a]=null;this._classNamesDidChange=YES}return this},resetClassNames:function(){if(this._elem){this.$().resetClassNames();return this}this._classNames=[];this._classNamesDidChange=YES;return this},setClass:function(e,c){if(this._elem){this.$().setClass(e,c);return this}var g,a,b,f;if(c!==undefined){return c?this.addClass(e):this.removeClass(e)}else{g=this._classNames;if(!g){g=this._classNames=[]}if(this._cloneClassNames){g=this._classNames=g.slice();this._cloneClassNames=NO}f=NO;for(b in e){if(!e.hasOwnProperty(b)){continue}a=g.indexOf(b);if(e[b]){if(a<0){g.push(b);f=YES}}else{if(a>=0){g[a]=null;f=YES}}}if(f){this._classNamesDidChange=YES}}return this},_STYLE_REGEX:/-?\s*([^:\s]+)\s*:\s*([^;]+)\s*;?/g,styles:function(e,f){if(this._elem){if(e){this.$().resetStyles().css(e)}return this.$().styles()}var a,c,b;if(e===undefined){if(!this._styles&&this._elem){a=this.$().attr("style");if(a&&(a=a.toString()).length>0){if(SC.browser.msie){a=a.toLowerCase()}e={};c=this._STYLE_REGEX;c.lastIndex=0;while(b=c.exec(a)){e[this._camelizeStyleName(b[1])]=b[2]}this._styles=e;this._cloneStyles=NO}else{this._styles={}}}else{if(!this._styles){this._styles={}}else{if(this._cloneStyles){this._styles=SC.clone(this._styles);this._cloneStyles=NO}}}return this._styles}else{this._styles=e;this._cloneStyles=f||NO;this._stylesDidChange=YES;return this}},_deleteComboStyles:function(c,b){var f=SC.COMBO_STYLES[b],e=NO;if(f){var a;for(a=0;a<f.length;a++){if(c[f[a]]){delete c[f[a]];e=YES}}}return e},resetStyles:function(){this.styles({});return this},addStyle:function(a,f){if(this._elem){this.$().css(a,f);return this}var b,e=NO,c=this.styles();if(typeof a===SC.T_STRING){if(f===undefined){return c[a]}else{e=this._deleteComboStyles(c,a);if(c[a]!==f){c[a]=f;e=YES}if(e){this._stylesDidChange=YES}}}else{for(b in a){if(!a.hasOwnProperty(b)){continue}e=e||this._deleteComboStyles(c,b);f=a[b];if(c[b]!==f){c[b]=f;e=YES}}if(e){this._stylesDidChange=YES}}return this},removeStyle:function(a){if(this._elem){this.$().css(a,null);return this}if(!this._styles){return this}var b=this.styles();if(b[a]){b[a]=null;this._stylesDidChange=YES}},attr:function(a,f){if(this._elem){this.$().attr(a,f);return this}var c,b=this._attrs,e=NO;if(!b){this._attrs=b={}}if(typeof a===SC.T_STRING){if(f===undefined){return b[a]}else{if(b[a]!==f){b[a]=f;this._attrsDidChange=YES}}}else{for(c in a){if(!a.hasOwnProperty(c)){continue}f=a[c];if(b[c]!==f){b[c]=f;e=YES}}if(e){this._attrsDidChange=YES}}return this},$:function(c){var a,b=this._elem;a=!b?SC.$.buffer([]):(c===undefined)?SC.$.buffer(b):SC.$.buffer(c,b);b=null;return a},_camelizeStyleName:function(a){var b=a.match(/^-(webkit|moz|o)-/),c=SC.String.camelize(a);if(b){return c.substr(0,1).toUpperCase()+c.substr(1)}else{return c}},_dasherizeStyleName:function(a){var b=SC.String.dasherize(a);if(b.match(/^(webkit|moz|ms|o)-/)){b="-"+b}return b}});SC.RenderContext.fn.html=SC.RenderContext.fn.push;SC.RenderContext.fn.css=SC.RenderContext.fn.addStyle;if(!SC.browser.isSafari||parseInt(SC.browser.version,10)<526){SC.RenderContext._safari3=YES}SC.RenderContext.escapeHTML=function(e){var c,b,a;if(SC.none(e)){return e}c=this.escapeHTMLElement;if(!c){c=this.escapeHTMLElement=document.createElement("div")}b=this.escapeTextNode;if(!b){b=this.escapeTextNode=document.createTextNode("");c.appendChild(b)}b.data=e;a=c.innerHTML;if(SC.RenderContext._safari3){a=a.replace(/>/g,"&gt;")}b=c=null;return a};SC.SelectionSet=SC.Object.extend(SC.Enumerable,SC.Freezable,SC.Copyable,{isSelectionSet:YES,length:function(){var a=0,b=this._sets,c=this._objects;if(c){a+=c.get("length")}if(b){b.forEach(function(e){a+=e.get("length")})}return a}.property().cacheable(),sources:function(){var c=[],e=this._sets,b=e?e.length:0,a,g,f;for(a=0;a<b;a++){g=e[a];if(g&&g.get("length")>0&&g.source){c.push(g.source)}}return c}.property().cacheable(),indexSetForSource:function(f){if(!f||!f.isSCArray){return null}var b=this._indexSetCache,e=this._objects,c,a;if(!b){b=this._indexSetCache={}}c=b[SC.guidFor(f)];if(c&&c._sourceRevision&&(c._sourceRevision!==f.propertyRevision)){c=null}if(!c){c=this._indexSetForSource(f,NO);if(c&&c.get("length")===0){c=null}if(e){if(c){c=c.copy()}e.forEach(function(g){if((a=f.indexOf(g))>=0){if(!c){c=SC.IndexSet.create()}c.add(a)}},this)}if(c){c=b[SC.guidFor(f)]=c.frozenCopy();c._sourceRevision=f.propertyRevision}}return c},_indexSetForSource:function(g,j){if(j===undefined){j=YES}var e=SC.guidFor(g),c=this[e],f=this._sets,a=f?f.length:0,b=null;if(c>=a){c=null}if(SC.none(c)){if(j&&!this.isFrozen){this.propertyWillChange("sources");if(!f){f=this._sets=[]}b=f[a]=SC.IndexSet.create();b.source=g;this[e]=a;this.propertyDidChange("sources")}}else{b=f?f[c]:null}return b},add:function(a,b,e){if(this.isFrozen){throw SC.FROZEN_ERROR}var j,g,o,n,c,f,k,p;if(b===undefined&&e===undefined){if(!a){throw"Must pass params to SC.SelectionSet.add()"}if(a.isIndexSet){return this.add(a.source,a)}if(a.isSelectionSet){j=a._sets;p=a._objects;g=j?j.length:0;this.beginPropertyChanges();for(o=0;o<g;o++){n=j[o];if(n&&n.get("length")>0){this.add(n.source,n)}}if(p){this.addObjects(p)}this.endPropertyChanges();return this}}n=this._indexSetForSource(a,YES);c=this.get("length");k=n.get("length");f=c-k;n.add(b,e);this._indexSetCache=null;f+=n.get("length");if(f!==c){this.propertyDidChange("length");this.enumerableContentDidChange();if(k===0){this.notifyPropertyChange("sources")}}return this},remove:function(a,b,e){if(this.isFrozen){throw SC.FROZEN_ERROR}var j,g,o,n,c,f,k,p;if(b===undefined&&e===undefined){if(!a){throw"Must pass params to SC.SelectionSet.remove()"}if(a.isIndexSet){return this.remove(a.source,a)}if(a.isSelectionSet){j=a._sets;p=a._objects;g=j?j.length:0;this.beginPropertyChanges();for(o=0;o<g;o++){n=j[o];if(n&&n.get("length")>0){this.remove(n.source,n)}}if(p){this.removeObjects(p)}this.endPropertyChanges();return this}}n=this._indexSetForSource(a,YES);c=this.get("length");f=c-n.get("length");if(n&&(p=this._objects)){if(e!==undefined){b=SC.IndexSet.create(b,e);e=undefined}p.forEach(function(q){o=a.indexOf(q);if(b.contains(o)){p.remove(q);f--}},this)}n.remove(b,e);k=n.get("length");f+=k;this._indexSetCache=null;if(f!==c){this.propertyDidChange("length");this.enumerableContentDidChange();if(k===0){this.notifyPropertyChange("sources")}}return this},contains:function(b,e,a){if(e===undefined&&a===undefined){return this.containsObject(b)}var c=this.indexSetForSource(b);if(!c){return NO}return c.contains(e,a)},intersects:function(b,e,a){var c=this.indexSetForSource(b,NO);if(!c){return NO}return c.intersects(e,a)},_TMP_ARY:[],addObject:function(b){var c=this._TMP_ARY,a;c[0]=b;a=this.addObjects(c);c.length=0;return a},addObjects:function(a){var e=this._objects,b,c;if(!e){e=this._objects=SC.CoreSet.create()}b=e.get("length");e.addEach(a);c=e.get("length");this._indexSetCache=null;if(c!==b){this.propertyDidChange("length");this.enumerableContentDidChange()}return this},removeObject:function(b){var c=this._TMP_ARY,a;c[0]=b;a=this.removeObjects(c);c.length=0;return a},removeObjects:function(b){var f=this._objects,c,e,a;if(!f){return this}c=f.get("length");f.removeEach(b);e=f.get("length");if(a=this._sets){a.forEach(function(g){c+=g.get("length");g.removeObjects(b);e+=g.get("length")},this)}this._indexSetCache=null;if(e!==c){this.propertyDidChange("length");this.enumerableContentDidChange()}return this},containsObject:function(c){var f=this._objects;if(f&&f.contains(c)){return YES}var e=this._sets,b=e?e.length:0,a,g;for(a=0;a<b;a++){g=e[a];if(g&&g.indexOf(c)>=0){return YES}}return NO},constrain:function(e){var f,b,a,c;this.beginPropertyChanges();this.get("sources").forEach(function(g){if(g===e){return}var j=this._indexSetForSource(e,NO);if(j){this.remove(e,j)}},this);f=this._indexSetForSource(e,NO);if(f&&((a=f.get("max"))>(b=e.get("length")))){this.remove(e,b,a-b)}if(c=this._objects){c.forEach(function(g){if(e.indexOf(g)<0){this.removeObject(g)}},this)}this.endPropertyChanges();return this},isEqual:function(j){var g,e,b,a,c,f;if(!j||!j.isSelectionSet){return NO}if(j===this){return YES}if((this._sets===j._sets)&&(this._objects===j._objects)){return YES}if(this.get("length")!==j.get("length")){return NO}g=this._objects;e=j._objects;if(g||e){if((g?g.get("length"):0)!==(e?e.get("length"):0)){return NO}if(g&&!g.isEqual(e)){return NO}}c=this.get("sources");a=c.get("length");for(b=0;b<a;b++){f=c.objectAt(b);g=this._indexSetForSource(f,NO);e=this._indexSetForSource(f,NO);if(!!e!==!!g){return NO}if(g&&!g.isEqual(e)){return NO}}return YES},clear:function(){if(this.isFrozen){throw SC.FROZEN_ERROR}if(this._sets){this._sets.length=0}if(this._objects){this._objects=null}this._indexSetCache=null;this.propertyDidChange("length");this.enumerableContentDidChange();this.notifyPropertyChange("sources");return this},copy:function(){var c=this.constructor.create(),e=this._sets,b=e?e.length:0,a,f;if(e&&b>0){e=c._sets=e.slice();for(a=0;a<b;a++){if(!(f=e[a])){continue}f=e[a]=f.copy();c[SC.guidFor(f.source)]=a}}if(this._objects){c._objects=this._objects.copy()}return c},freeze:function(){if(this.get("isFrozen")){return this}var a=this._sets,b=a?a.length:0,c;while(--b>=0){c=a[b];if(c){c.freeze()}}if(this._objects){this._objects.freeze()}this.set("isFrozen",YES);return this},toString:function(){var a=this._sets||[];a=a.map(function(b){return b.toString().replace("SC.IndexSet",SC.guidFor(b.source))},this);if(this._objects){a.push(this._objects.toString())}return"SC.SelectionSet:%@<%@>".fmt(SC.guidFor(this),a.join(","))},firstObject:function(){var b=this._sets,c=this._objects;if(b&&b.get("length")>0){var f=b?b[0]:null,e=f?f.source:null,a=f?f.firstObject():-1;if(e&&a>=0){return e.objectAt(a)}}return c?c.firstObject():undefined}.property(),nextObject:function(c,f,b){var e,a;if(c===0){e=b.objects=[];this.forEach(function(g){e.push(g)},this);b.max=e.length}e=b.objects;a=e[c];if(c+1>=b.max){b.objects=b.max=null}return a},forEach:function(j,f){var c=this._sets,e=this._objects,b=c?c.length:0,g,a;for(a=0;a<b;a++){g=c[a];if(g){g.forEachObject(j,f)}}if(e){e.forEach(j,f)}return this}});SC.SelectionSet.prototype.clone=SC.SelectionSet.prototype.copy;SC.SelectionSet.EMPTY=SC.SelectionSet.create().freeze();sc_require("mixins/delegate_support");SC.SparseArray=SC.Object.extend(SC.Observable,SC.Enumerable,SC.Array,SC.DelegateSupport,{_requestingLength:0,_requestingIndex:0,length:function(){var a=this.delegate;if(a&&SC.none(this._length)&&a.sparseArrayDidRequestLength){this._requestingLength++;a.sparseArrayDidRequestLength(this);this._requestingLength--}return this._length||0}.property().cacheable(),provideLength:function(b){var a;if(SC.none(b)){this._sa_content=null}if(b!==this._length){a=this._length;this._length=b;if(this._requestingLength<=0){this.arrayContentDidChange(0,a||0,b||0)}}return this},rangeWindowSize:1,requestedRangeIndex:null,init:function(){arguments.callee.base.apply(this,arguments);this.requestedRangeIndex=[];this._TMP_PROVIDE_ARRAY=[];this._TMP_PROVIDE_RANGE={length:1};this._TMP_RANGE={}},objectAt:function(a,e){var c=this._sa_content,b;if(!c){c=this._sa_content=[]}if((b=c[a])===undefined){if(!e){this.requestIndex(a)}b=c[a]}return b},definedIndexes:function(e){var c=SC.IndexSet.create(),f=this._sa_content,b,a;if(!f){return c.freeze()}if(e){e.forEach(function(g){if(f[g]!==undefined){c.add(g)}})}else{a=f.length;for(b=0;b<a;b++){if(f[b]!==undefined){c.add(b)}}}return c.freeze()},_TMP_RANGE:{},requestIndex:function(b){var c=this.delegate;if(!c){return this}var a=this.get("rangeWindowSize"),f=b;if(a>1){f=f-Math.floor(f%a)}if(a<1){a=1}this._requestingIndex++;if(c.sparseArrayDidRequestRange){var e=this._TMP_RANGE;if(this.wasRangeRequested(f)===-1){e.start=f;e.length=a;this.requestedRangeIndex.push(f);c.sparseArrayDidRequestRange(this,e)}}else{if(c.sparseArrayDidRequestIndex){while(--a>=0){c.sparseArrayDidRequestIndex(this,f+a)}}}this._requestingIndex--;return this},wasRangeRequested:function(c){var b,a;for(b=0,a=this.requestedRangeIndex.length;b<a;b++){if(this.requestedRangeIndex[b]===c){return b}}return -1},rangeRequestCompleted:function(b){var a=this.wasRangeRequested(b);if(a>=0){this.requestedRangeIndex.removeAt(a,1);return YES}return NO},provideObjectsInRange:function(b,f){var c=this._sa_content;if(!c){c=this._sa_content=[]}var e=b.start,a=b.length;while(--a>=0){c[e+a]=f.objectAt(a)}if(this._requestingIndex<=0){this.arrayContentDidChange(b.start,b.length,b.length)}return this},provideObjectAtIndex:function(c,b){var e=this._TMP_PROVIDE_ARRAY,a=this._TMP_PROVIDE_RANGE;e[0]=b;a.start=c;return this.provideObjectsInRange(a,e)},objectsDidChangeInRange:function(a){var b=this._sa_content;if(b){if(a.start===0&&SC.maxRange(a)>=b.length){this._sa_content=null}else{var e=a.start,c=Math.min(e+a.length,b.length);while(--c>=e){b[c]=undefined}}}this.arrayContentDidChange(a.start,a.length,a.length);return this},indexOf:function(c){var a=this.delegate;if(a&&a.sparseArrayDidRequestIndexOf){return a.sparseArrayDidRequestIndexOf(this,c)}else{var b=this._sa_content;if(!b){b=this._sa_content=[]}return b.indexOf(c)}},replace:function(b,j,f){f=f||[];var c=this.delegate;if(c){if(!c.sparseArrayShouldReplace||!c.sparseArrayShouldReplace(this,b,j,f)){return this}}var e=this._sa_content;if(!e){e=this._sa_content=[]}e.replace(b,j,f);var a=f?(f.get?f.get("length"):f.length):0;var g=a-j;this.arrayContentWillChange(b,j,a);if(!SC.none(this._length)){this.propertyWillChange("length");this._length+=g;this.propertyDidChange("length")}this.arrayContentDidChange(b,j,a);this.enumerableContentDidChange(b,j,g);return this},reset:function(){var a;this._sa_content=null;a=this._length;this._length=null;this.arrayContentDidChange(0,a,0);this.invokeDelegateMethod(this.delegate,"sparseArrayDidReset",this);return this}});SC.SparseArray.array=function(a){return this.create({_length:a||0})};SC.Timer=SC.Object.extend({target:null,action:null,isPooled:NO,interval:0,startTime:null,repeats:NO,until:null,isPaused:NO,isScheduled:NO,isValid:YES,lastFireTime:0,fireTime:function(){if(!this.get("isValid")){return -1}var f=this.get("startTime");if(!f||f===0){return -1}var a=this.get("interval"),c=this.get("lastFireTime");if(c<f){c=f}var b;if(this.get("repeats")){if(a===0){b=c}else{b=f+(Math.floor((c-f)/a)+1)*a}}else{b=f+a}var e=this.get("until");if(e&&e>0&&b>e){b=e}return b}.property("interval","startTime","repeats","until","isValid","lastFireTime").cacheable(),schedule:function(){if(!this.get("isValid")){return this}this.beginPropertyChanges();if(!this.startTime){this.set("startTime",SC.RunLoop.currentRunLoop.get("startTime"))}var a=this.get("fireTime"),b=this.get("lastFireTime");if(a>=b){this.set("isScheduled",YES);SC.RunLoop.currentRunLoop.scheduleTimer(this,a)}this.endPropertyChanges();return this},invalidate:function(){this.beginPropertyChanges();this.set("isValid",NO);SC.RunLoop.currentRunLoop.cancelTimer(this);this.action=this.target=null;this.endPropertyChanges();if(this.get("isPooled")){SC.Timer.returnTimerToPool(this)}return this},fire:function(){var b=Date.now();this.set("lastFireTime",b);var a=this.get("fireTime");if(!this.get("isPaused")){this.performAction()}if(a>b){this.schedule()}else{this.invalidate()}},performAction:function(){var a=SC.typeOf(this.action);if(a==SC.T_FUNCTION){this.action.call((this.target||this),this)}else{if(a===SC.T_STRING){if(this.action.indexOf(".")>=0){var f=this.action.split(".");var c=f.pop();var e=SC.objectForPropertyPath(f,window);var b=e.get?e.get(c):e[c];if(b&&SC.typeOf(b)==SC.T_FUNCTION){b.call(e,this)}else{throw"%@: Timer could not find a function at %@".fmt(this,this.action)}}else{SC.RootResponder.responder.sendAction(this.action,this.target,this)}}}},init:function(){arguments.callee.base.apply(this,arguments);if(this.startTime instanceof Date){this.startTime=this.startTime.getTime()}if(this.until instanceof Date){this.until=this.until.getTime()}},RESET_DEFAULTS:{target:null,action:null,isPooled:NO,isPaused:NO,isScheduled:NO,isValid:YES,interval:0,repeats:NO,until:null,startTime:null,lastFireTime:0},reset:function(b){if(!b){b=SC.EMPTY_HASH}this.propertyWillChange("fireTime");var c=this.RESET_DEFAULTS;for(var a in c){if(!c.hasOwnProperty(a)){continue}this[a]=SC.none(b[a])?c[a]:b[a]}this.propertyDidChange("fireTime");return this},removeFromTimerQueue:function(c){var b=this._timerQueuePrevious,a=this._timerQueueNext;if(!b&&!a&&c!==this){return c}if(b){b._timerQueueNext=a}if(a){a._timerQueuePrevious=b}this._timerQueuePrevious=this._timerQueueNext=null;return(c===this)?a:c},scheduleInTimerQueue:function(c,b){this._timerQueueRunTime=b;var a=c;var e=null;while(a&&a._timerQueueRunTime<b){e=a;a=a._timerQueueNext}if(e){e._timerQueueNext=this;this._timerQueuePrevious=e}if(a){a._timerQueuePrevious=this;this._timerQueueNext=a}return(a===c)?this:c},collectExpiredTimers:function(c,a){if(this._timerQueueRunTime>a){return this}c.push(this);var b=this._timerQueueNext;this._timerQueueNext=null;if(b){b._timerQueuePrevious=null}return b?b.collectExpiredTimers(c,a):null}});SC.Timer.schedule=function(a){var b;if(!a||SC.none(a.isPooled)||a.isPooled){b=this.timerFromPool(a)}else{b=this.create(a)}return b.schedule()};SC.Timer.timerFromPool=function(a){var b=this._timerPool;if(!b){b=this._timerPool=[]}var c=b.pop();if(!c){c=this.create()}return c.reset(a)};SC.Timer.returnTimerToPool=function(a){if(!this._timerPool){this._timerPool=[]}this._timerPool.push(a);return this};sc_require("system/browser");SC.mixin({normalizeURL:function(a){if(a.slice(0,1)=="/"){a=window.location.protocol+"//"+window.location.host+a}else{if((a.slice(0,5)=="http:")||(a.slice(0,6)=="https:")){}else{a=window.location.href+"/"+a}}return a},isPercentage:function(a){return(a<1&&a>0)},minX:function(a){return a.x||0},maxX:function(a){return(a.x||0)+(a.width||0)},midX:function(a){return(a.x||0)+((a.width||0)/2)},minY:function(a){return a.y||0},maxY:function(a){return(a.y||0)+(a.height||0)},midY:function(a){return(a.y||0)+((a.height||0)/2)},centerX:function(b,a){return(a.width-b.width)/2},centerY:function(b,a){return(a.height-b.height)/2},offset:function(f,c){var g,b,k,a;c=c||"document";if(c==="parent"){a=jQuery(f).position()}else{a=jQuery(f).offset();if(SC.browser.mobileSafari){g=navigator.userAgent;b=g.indexOf("Mobile/");k=g.substring(b+7,b+9);if(parseInt(SC.browser.mobileSafari,0)<=532||(k<="8A")){a.left-=window.pageXOffset;a.top-=window.pageYOffset}}if(c==="viewport"){if(SC.browser.isIE8OrLower){a.left-=$(window).scrollLeft();a.top-=$(window).scrollTop()}else{a.left-=window.pageXOffset;a.top-=window.pageYOffset}}}try{a.x=a.left;a.y=a.top}catch(j){a={x:a.left,y:a.top}}delete a.left;delete a.top;return a},viewportOffset:function(b){console.warn("SC.viewportOffset() has been deprecated in favor of SC.offset().  Please use SC.offset() from here on.");var a=SC.offset(b,"viewport");return{x:a.left,y:a.top}}});SC.mixin({ZERO_POINT:{x:0,y:0},pointInRect:function(a,b){return(a.x>=SC.minX(b))&&(a.y>=SC.minY(b))&&(a.x<=SC.maxX(b))&&(a.y<=SC.maxY(b))},rectsEqual:function(b,a,c){if(!b||!a){return(b==a)}if(!c&&c!==0){c=0.1}if((b.y!=a.y)&&(Math.abs(b.y-a.y)>c)){return NO}if((b.x!=a.x)&&(Math.abs(b.x-a.x)>c)){return NO}if((b.width!=a.width)&&(Math.abs(b.width-a.width)>c)){return NO}if((b.height!=a.height)&&(Math.abs(b.height-a.height)>c)){return NO}return YES},intersectRects:function(b,a){var c={x:Math.max(SC.minX(b),SC.minX(a)),y:Math.max(SC.minY(b),SC.minY(a)),width:Math.min(SC.maxX(b),SC.maxX(a)),height:Math.min(SC.maxY(b),SC.maxY(a))};c.width=Math.max(0,c.width-c.x);c.height=Math.max(0,c.height-c.y);return c},unionRects:function(b,a){var c={x:Math.min(SC.minX(b),SC.minX(a)),y:Math.min(SC.minY(b),SC.minY(a)),width:Math.max(SC.maxX(b),SC.maxX(a)),height:Math.max(SC.maxY(b),SC.maxY(a))};c.width=Math.max(0,c.width-c.x);c.height=Math.max(0,c.height-c.y);return c},cloneRect:function(a){return{x:a.x,y:a.y,width:a.width,height:a.height}},stringFromRect:function(a){if(!a){return"(null)"}else{return"{x:"+a.x+", y:"+a.y+", width:"+a.width+", height:"+a.height+"}"}}});sc_require("views/template");SC._BindableSpan=SC.TemplateView.extend({tagName:"span",shouldDisplayFunc:null,preserveContext:NO,displayTemplate:null,inverseTemplate:null,property:null,render:function(c){var k=this.get("shouldDisplayFunc"),g=this.get("property"),f=this.get("preserveContext"),e=this.get("previousContext");var b=this.get("inverseTemplate"),j=this.get("displayTemplate");var a=e.getPath(g);if(k(a)){this.set("template",j);if(f){this.set("context",e)}else{if(j){this.set("context",a)}else{c.push(Handlebars.Utils.escapeExpression(a));return}}}else{if(b){this.set("template",b);if(f){this.set("context",e)}else{this.set("context",a)}}else{this.set("template",function(){return""})}}return arguments.callee.base.apply(this,arguments)},rerender:function(){var b,a,f,g;f=this.get("childViews");a=f.get("length");for(b=a-1;b>=0;b--){g=f[b];g.$().remove();g.removeFromParent();g.destroy()}var c=this.renderContext(this.get("tagName"));var e;this.renderToContext(c);e=c.element();this.$().replaceWith(e);this.set("layer",e);this._notifyDidCreateLayer()}});sc_require("views/template");SC.TemplateCollectionView=SC.TemplateView.extend({tagName:"ul",content:null,template:SC.Handlebars.compile(""),emptyView:null,init:function(){var a=arguments.callee.base.apply(this,arguments);this._sctcv_contentDidChange();return a},didCreateLayer:function(){if(this._sctcv_layerCreated){return}this._sctcv_layerCreated=true;var a=this.get("content");if(a){this.arrayContentDidChange(0,0,a.get("length"))}},itemView:"SC.TemplateView",itemViewTemplate:null,itemViewTemplateName:null,inverseTemplate:function(b,e){if(e!==undefined){return e}var a=this.get("inverseTemplateName"),c=this.get("templates").get(a);if(!c){return function(){return""}}return c}.property("inverseTemplateName").cacheable(),inverseTemplateName:null,itemContext:null,itemViewClass:function(){var c=this.get("itemView");var a=this.get("itemViewTemplate");var e=this.get("itemViewTemplateName");var b={};if(SC.typeOf(c)===SC.T_STRING){c=SC.objectForPropertyPath(c)}if(!a&&e){a=this.get("templates").get(e)}if(a){b.template=a}if(this.get("tagName")==="ul"||this.get("tagName")==="ol"){b.tagName="li"}else{if(this.get("tagName")==="table"||this.get("tagName")==="thead"||this.get("tagName")==="tbody"){b.tagName="tr"}}return c.extend(b)}.property("itemView").cacheable(),_sctcv_contentDidChange:function(){this.$().empty();var c=this._content,a=0;var e=this.get("content"),b=0;if(c){c.removeArrayObservers({target:this,willChange:"arrayContentWillChange",didChange:"arrayContentDidChange"});a=c.get("length")}if(e){e.addArrayObservers({target:this,willChange:"arrayContentWillChange",didChange:"arrayContentDidChange"});b=e.get("length")}this.arrayContentWillChange(0,a,b);this._content=this.get("content");this.arrayContentDidChange(0,a,b)}.observes("content"),arrayContentWillChange:function(k,e,g){if(!this.get("layer")){return}var c=this.get("emptyView");if(c){c.$().remove();c.removeFromParent()}var f=this.get("childViews"),j,b,a;a=f.get("length");for(b=k+e-1;b>=k;b--){j=f[b];j.$().remove();j.removeFromParent();j.destroy()}},arrayContentDidChange:function(f,q,C){if(!this.get("layer")){return}var t=this.get("content"),g=this.get("itemViewClass"),v=this.get("childViews"),a=[],A,B,k,w,j,z,p,o,u;if(t){var n=t.slice(f,f+C);k=this.get("itemViewOptions")||{};w=this.$();j=w.find("li")[f-1]||null;u=n.get("length");var e={id:k.id,"class":k["class"],classBinding:k.classBinding};A=function(D){arguments.callee.base.apply(this,arguments);SC.Handlebars.ViewHelper.applyAttributes(e,this,D)};k=SC.clone(k);delete k.id;delete k["class"];delete k.classBinding;for(o=0;o<u;o++){z=n.objectAt(o);B=this.createChildView(g.extend(k,{content:z,render:A,tagName:g.prototype.tagName||this.get("itemTagName")}));var c=B.get("contextProperty");if(c){B.set("context",B.get(c))}p=B.createLayer().$();if(!j){w.append(p)}else{p.insertAfter(j)}j=p;a.push(B)}v.replace(f,0,a)}var b=this.get("inverseTemplate");if(v.get("length")===0&&b){B=this.createChildView(SC.TemplateView.extend({template:b,content:this}));this.set("emptyView",B);B.createLayer().$().appendTo(w);this.childViews=[B]}this.invokeLast("invalidateFrame")},itemTagName:function(){switch(this.get("tagName")){case"ul":case"ol":return"li";case"table":case"thead":case"tbody":case"tfoot":return"tr"}}.property("tagName"),invalidateFrame:function(){this.notifyPropertyChange("frame")}});sc_require("ext/string");sc_require("views/view");sc_require("views/view/animation");SC.CSS_TRANSFORM_MAP={rotate:function(a){return null},rotateX:function(a){if(SC.typeOf(a)===SC.T_NUMBER){a+="deg"}return"rotateX("+a+")"},rotateY:function(a){if(SC.typeOf(a)===SC.T_NUMBER){a+="deg"}return"rotateY("+a+")"},rotateZ:function(a){if(SC.typeOf(a)===SC.T_NUMBER){a+="deg"}return"rotateZ("+a+")"},scale:function(a){if(SC.typeOf(a)===SC.T_ARRAY){a=a.join(", ")}return"scale("+a+")"}};SC.View.reopen({layoutStyleCalculator:null,layoutStyle:function(){var a={layout:this.get("layout"),turbo:this.get("hasAcceleratedLayer"),staticLayout:this.get("useStaticLayout")};var b=this.get("layoutStyleCalculator");b.set(a);return b.calculate()}.property().cacheable()});SC.View.LayoutStyleCalculator=SC.Object.extend({_layoutDidUpdate:function(){var j=this.get("layout");if(!j){return}this.dims=SC._VIEW_DEFAULT_DIMS;this.loc=this.dims.length;var u=(this.right=j.right);this.hasRight=(u!=null);var c=(this.left=j.left);this.hasLeft=(c!=null);var o=(this.top=j.top);this.hasTop=(o!=null);var a=(this.bottom=j.bottom);this.hasBottom=(a!=null);var b=(this.width=j.width);this.hasWidth=(b!=null);var v=(this.height=j.height);this.hasHeight=(v!=null);this.minWidth=((j.minWidth===undefined)?null:j.minWidth);var t=(this.maxWidth=(j.maxWidth===undefined)?null:j.maxWidth);this.hasMaxWidth=(t!=null);this.minHeight=(j.minHeight===undefined)?null:j.minHeight;var q=(this.maxHeight=(j.maxHeight===undefined)?null:j.maxHeight);this.hasMaxHeight=(q!=null);var g=(this.centerX=j.centerX);this.hasCenterX=(g!=null);var f=(this.centerY=j.centerY);this.hasCenterY=(f!=null);var e=(this.borderTop=((j.borderTop!==undefined)?j.borderTop:j.border)||0);var p=(this.borderRight=((j.borderRight!==undefined)?j.borderRight:j.border)||0);var n=(this.borderBottom=((j.borderBottom!==undefined)?j.borderBottom:j.border)||0);var k=(this.borderLeft=((j.borderLeft!==undefined)?j.borderLeft:j.border)||0);this.zIndex=(j.zIndex!=null)?j.zIndex.toString():null;this.opacity=(j.opacity!=null)?j.opacity.toString():null;this.backgroundPosition=(j.backgroundPosition!=null)?j.backgroundPosition:null;this.ret={marginTop:null,marginLeft:null}}.observes("layout"),_invalidAutoValue:function(b){var a=SC.Error.desc("%@.layout() you cannot use %@:auto if staticLayout is disabled".fmt(this.get("view"),b),"%@".fmt(this.get("view")),-1);SC.Logger.error(a.toString());throw a},_handleMistakes:function(){var c=this.get("layout");if(!this.staticLayout){if(this.width===SC.LAYOUT_AUTO){this._invalidAutoValue("width")}if(this.height===SC.LAYOUT_AUTO){this._invalidAutoValue("height")}}if(SC.platform.supportsCSSTransforms){var e=c.animate,a,b;if(e){for(b in e){if(SC.CSS_TRANSFORM_MAP[b]){if(this._pendingAnimations&&this._pendingAnimations["-"+SC.platform.cssPrefix+"-transform"]){throw"Animations of transforms must be executed simultaneously!"}if(a&&e[b].duration!==a){SC.Logger.warn("Can't animate transforms with different durations! Using first duration specified.");e[b].duration=a}a=e[b].duration}}}}},_calculatePosition:function(u){var j=null,a=this.get("turbo"),A=this.ret;var e,p,o,c,n,t,b,g,f,q,z,k,v,w;if(u==="x"){e="left";p="right";o="width";c="maxWidth";n="marginLeft";q="borderLeft";k="borderRight";t=this.hasLeft;b=this.hasRight;g=this.hasWidth;f=this.hasMaxWidth}else{e="top";p="bottom";o="height";c="maxHeight";n="marginTop";q="borderTop";k="borderBottom";t=this.hasTop;b=this.hasBottom;g=this.hasHeight;f=this.hasMaxHeight}A[e]=this._cssNumber(this[e]);A[p]=this._cssNumber(this[p]);z=this._cssNumber(this[q]);v=this._cssNumber(this[k]);A[q+"Width"]=z||null;A[k+"Width"]=v||null;w=this[o];if(w>=1){w-=(z+v)}A[o]=this._cssNumber(w);if(t){if(a){j=A[e];A[e]=0}if(b&&g){A[p]=null}}else{if(!b||(b&&!g&&!f)){A[e]=0}}if(!g&&!b){A[p]=0}return j},_calculateCenter:function(u){var n=this.ret,z,a,c,v,g,j,q,t,f;if(u==="x"){z="width";a="centerX";c="left";v="right";g="marginLeft";j="borderLeft";t="borderRight"}else{z="height";a="centerY";c="top";v="bottom";g="marginTop";j="borderTop";t="borderBottom"}n[c]="50%";q=this._cssNumber(this[j]);f=this._cssNumber(this[t]);n[j+"Width"]=q||null;n[t+"Width"]=f||null;var p=this[z],o=this[a],b=this[c];var k=SC.isPercentage(p),e=SC.isPercentage(o,YES);if(p>1){p-=(q+f)}if((k&&e)||(!k&&!e)){var w=o-p/2;n[g]=(k)?Math.floor(w*100)+"%":Math.floor(w)}else{SC.Logger.warn("You have to set "+z+" and "+a+" using both percentages or pixels");n[g]="50%"}n[z]=this._cssNumber(p)||0;n[v]=null},_calculateTransforms:function(f,k){if(SC.platform.supportsCSSTransforms){var j=this.get("layout");var b=SC.platform.domCSSPrefix+"Transform";var e=[];if(this.turbo){e.push("translateX("+(f||0)+"px)","translateY("+(k||0)+"px)");if(SC.platform.supportsCSS3DTransforms){e.push("translateZ(0px)")}}var g=SC.CSS_TRANSFORM_MAP;for(var a in g){var c=j[a];if(c!=null){e.push(g[a](c))}}this.ret[b]=e.length>0?e.join(" "):null}},_calculateAnimations:function(f,c){var e=this.layout,k=e.animate,j;if(!k){return}if(this.getPath("view.isAnimatable")){return}var g=[],b;this._animatedTransforms=[];if(!this._pendingAnimations){this._pendingAnimations={}}var n="-"+SC.platform.cssPrefix+"-transform";if(SC.platform.supportsCSSTransitions){for(j in k){b=k[j];var o=SC.CSS_TRANSFORM_MAP[j];var a=(j==="top"&&c!=null)||(j==="left"&&f!=null);if(SC.platform.supportsCSSTransforms&&(a||o)){this._animatedTransforms.push(j);j=n}b.css=j+" "+b.duration+"s "+b.timing;if(!this._pendingAnimations[j]){this._pendingAnimations[j]=b;g.push(b.css)}}this.ret[SC.platform.domCSSPrefix+"Transition"]=g.join(", ")}else{for(j in k){this._pendingAnimations[j]=k[j]}}delete e.animate},_cssNumber:function(a){if(a==null){return null}else{if(a===SC.LAYOUT_AUTO){return SC.LAYOUT_AUTO}else{if(SC.isPercentage(a)){return(a*100)+"%"}else{return Math.floor(a)}}}},calculate:function(){var e=this.get("layout"),b=null,c=null,f=null,a=this.get("turbo"),j=this.ret,o=this.dims,g=this.loc,k=this.get("view"),p,n;this._handleMistakes(e);if(this.hasLeft||this.hasRight||!this.hasCenterX){f=this._calculatePosition("x")}else{this._calculateCenter("x")}if(this.hasTop||this.hasBottom||!this.hasCenterY){c=this._calculatePosition("y")}else{this._calculateCenter("y")}j.minWidth=this.minWidth;j.maxWidth=this.maxWidth;j.minHeight=this.minHeight;j.maxHeight=this.maxHeight;j.zIndex=this.zIndex;j.opacity=this.opacity;j.mozOpacity=this.opacity;j.backgroundPosition=this.backgroundPosition;this._calculateTransforms(f,c);this._calculateAnimations(f,c);for(p in j){n=j[p];if(typeof n===SC.T_NUMBER){j[p]=(n+"px")}}return j},willRenderAnimations:function(){if(SC.platform.supportsCSSTransitions){var o=this.get("view"),k=o.get("layer"),a=k?k.style:null,c=o.get("layoutStyle"),u=this._activeAnimations,e,g=this._pendingAnimations,f,w=this._animatedTransforms,n=w?w.length:0,b=c[SC.platform.domCSSPrefix+"Transition"],j=o.get("layout"),t,v,q,p;if(g){if(!u){u={}}for(t in g){if(!g.hasOwnProperty(t)){continue}f=g[t];e=u[t];p=NO;if(c[t]!==(a?a[t]:null)){p=YES}if(e&&(e.duration!==f.duration||e.timing!==f.timing)){p=YES}if(p&&e){if(v=e.callback){if(n>0){for(q=0;q<n;q++){this.runAnimationCallback(v,null,w[q],YES)}this._animatedTransforms=null}else{this.runAnimationCallback(v,null,t,YES)}}this.removeAnimationFromLayout(t,YES)}u[t]=f}}this._activeAnimations=u;this._pendingAnimations=null}},didRenderAnimations:function(){if(!SC.platform.supportsCSSTransitions){var a,b;for(a in this._pendingAnimations){b=this._pendingAnimations[a].callback;if(b){this.runAnimationCallback(b,null,a,NO)}this.removeAnimationFromLayout(a,NO,YES)}this._activeAnimations=this._pendingAnimations=null}},runAnimationCallback:function(f,b,c,e){var a=this.get("view");if(f){if(SC.typeOf(f)!==SC.T_HASH){f={action:f}}f.source=a;if(!f.target){f.target=this}}SC.View.runCallback(f,{event:b,propertyName:c,view:a,isCancelled:e})},transitionDidEnd:function(b){var c=b.originalEvent.propertyName,e,a;e=this._activeAnimations?this._activeAnimations[c]:null;if(e){if(e.callback){SC.RunLoop.begin();if(this._animatedTransforms&&this._animatedTransforms.length>0){for(a=0;a<this._animatedTransforms.length;a++){this.invokeLater("runAnimationCallback",1,e.callback,b,this._animatedTransforms[a],NO)}}else{this.invokeLater("runAnimationCallback",1,e.callback,b,c,NO)}SC.RunLoop.end()}this.removeAnimationFromLayout(c,YES)}},removeAnimationFromLayout:function(c,k,b){if(k){var f=this.getPath("view.layer"),j=[],e;for(e in this._activeAnimations){if(e!==c){j.push(this._activeAnimations[e].css)}}if(f){f.style[SC.platform.domCSSPrefix+"Transition"]=j.join(", ")}}var g=this.getPath("view.layout"),a;if(c==="-"+SC.platform.cssPrefix+"-transform"&&this._animatedTransforms&&this._animatedTransforms.length>0){for(a=0;a<this._animatedTransforms.length;a++){delete g["animate"+SC.String.capitalize(this._animatedTransforms[a])]}this._animatedTransforms=null}delete g["animate"+SC.String.capitalize(c)];if(!b){delete this._activeAnimations[c]}}});SC.CoreView.runCallback=function(j){var b=SC.$A(arguments).slice(1),a=SC.typeOf(j.action);if(a==SC.T_FUNCTION){j.action.apply(j.target,b)}else{if(a===SC.T_STRING){if(j.action.indexOf(".")>=0){var g=j.action.split(".");var e=g.pop();var f=SC.objectForPropertyPath(g,window);var c=f.get?f.get(e):f[e];if(c&&SC.typeOf(c)==SC.T_FUNCTION){c.apply(f,b)}else{throw"SC.runCallback could not find a function at %@".fmt(j.action)}}}}};SC.View.runCallback=SC.CoreView.runCallback;sc_require("views/view");sc_require("views/view/layout_style");SC.ANIMATABLE_PROPERTIES={top:YES,left:YES,bottom:YES,right:YES,width:YES,height:YES,centerX:YES,centerY:YES,opacity:YES,scale:YES,rotate:YES,rotateX:YES,rotateY:YES,rotateZ:YES};SC.View.reopen({didCreateLayerMixin:function(){if(SC.platform.supportsCSSTransitions){this.resetAnimation()}},animate:function(u,o,e,t){var g,v;if(typeof u===SC.T_STRING){g={};g[u]=o;v=e}else{g=u;v=o;t=e}var c=SC.typeOf(v);if(c===SC.T_NUMBER){v={duration:v}}else{if(c!==SC.T_HASH){throw"Must provide options hash or duration!"}}if(t){v.callback=t}var a=v.timing;if(a){if(typeof a!==SC.T_STRING){v.timing="cubic-bezier("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"}}else{v.timing="linear"}var j=SC.clone(this.get("layout")),k=NO,n,q,b,f,p;if(!j.animate){j.animate={}}for(p in g){if(!g.hasOwnProperty(p)||!SC.ANIMATABLE_PROPERTIES[p]){continue}n=g[p];q=j[p];f=j.animate[p];if(n==null){throw"Can only animate to an actual value!"}if(q!==n||(f&&f.duration!==v.duration)){k=YES;j.animate[p]=v;j[p]=n}}if(k){this.set("layout",j)}return this},resetAnimation:function(){var c=this.get("layout"),f=c.animate,e=NO,b;if(!f){return}var a;for(b in f){e=YES;delete f[b]}if(e){this.set("layout",c);this.notifyPropertyChange("layout")}return this},transitionDidEnd:function(a){this.get("layoutStyleCalculator").transitionDidEnd(a)},wantsAcceleratedLayer:NO,hasAcceleratedLayer:function(){if(this.get("wantsAcceleratedLayer")&&SC.platform.supportsAcceleratedLayers){var c=this.get("layout"),e=c.animate,b=SC.LAYOUT_AUTO,a;if(e&&(e.top||e.left)){for(a in e){if(SC.CSS_TRANSFORM_MAP[a]&&((e.top&&e.top.duration!==e[a].duration)||(e.left&&e.left.duration!==e[a].duration))){return NO}}}if(c.left!=null&&!SC.isPercentage(c.left)&&c.left!==b&&c.top!=null&&!SC.isPercentage(c.top)&&c.top!==b&&c.width!=null&&!SC.isPercentage(c.width)&&c.width!==b&&c.height!=null&&!SC.isPercentage(c.height)&&c.height!==b){return YES}}return NO}.property("wantsAcceleratedLayer").cacheable()});sc_require("views/view");SC.View.reopen({cursor:function(a,c){var b;if(c){this._setCursor=c}if(this._setCursor!==undefined){return this._setCursor}b=this.get("parentView");if(this.get("shouldInheritCursor")&&b){return b.get("cursor")}return null}.property("parentView","shouldInheritCursor").cacheable(),applyAttributesToContext:function(b,a){var c=this.get("cursor");if(c){a.addClass(c.get("className"))}b(a)}.enhance(),shouldInheritCursor:YES});sc_require("views/view");SC.View.reopen({isEnabled:YES,isEnabledBindingDefault:SC.Binding.oneWay().bool(),isEnabledInPane:function(){var a=this.get("isEnabled"),b;if(a&&(b=this.get("parentView"))){a=b.get("isEnabledInPane")}return a}.property("parentView","isEnabled"),_sc_view_isEnabledDidChange:function(){if(!this.get("isEnabled")&&this.get("isFirstResponder")){this.resignFirstResponder()}}.observes("isEnabled"),applyAttributesToContext:function(b,a){var c=this.get("isEnabled");b(a);a.setClass("disabled",!c);a.attr("aria-disabled",!c?"true":null)}.enhance()});sc_require("views/view");SC.View.reopen({isKeyResponder:NO,willLoseKeyResponderTo:function(a){},willBecomeKeyResponderFrom:function(a){},didLoseKeyResponderTo:function(a){},didBecomeKeyResponderFrom:function(a){this.$().focus()},interpretKeyEvents:function(b){var a=b.commandCodes(),e=a[0],f=a[1],j;if(!e&&!f){return null}if(e){var k=SC.MODIFIED_KEY_BINDINGS[e]||SC.BASE_KEY_BINDINGS[e.match(/[^_]+$/)[0]];if(k){var g=this,c=this.get("pane"),n=null;while(g&&!(n=g.tryToPerform(k,b))){g=(g===c)?null:g.get("nextResponder")}return n}}if(f&&this.respondsTo("insertText")){j=this.insertText(f,b);return j?(j===YES?this:j):null}return null},insertText:function(a){return NO},performKeyEquivalent:function(g,e){var f=NO,j=this.get("childViews"),b=j.length,a=-1,c;while(!f&&(++a<b)){c=j[a];f=c.tryToPerform("performKeyEquivalent",g,e)}return f},firstKeyView:null,_getFirstKeyView:function(){var a=this.get("firstKeyView");if(a){return a}var b=this.get("childViews");if(b){return b[0]}},lastKeyView:null,_getLastKeyView:function(){var e=this.get("lastKeyView");if(e){return e}var a,b=this.get("firstKeyView");if(b){while(a=b._getNextKeyView()){b=a}return b}else{var c=this.get("childViews");if(c){return c[c.length-1]}}},nextKeyView:undefined,_getNextKeyView:function(){var b=this.get("parentView"),a=this.get("nextKeyView");if(b&&b.get("lastKeyView")===this){return null}if(a!==undefined){return a}if(b){var c=b.get("childViews");return c[c.indexOf(this)+1]}},nextValidKeyView:function(){var b=this,a;while(a!==this){a=null;if(b.get("isVisibleInWindow")){a=b._getFirstKeyView()}if(!a){a=b._getNextKeyView()}if(!a){while(b=b.get("parentView")){if(a=b._getNextKeyView()){break}}}if(!a){if(!SC.TABBING_ONLY_INSIDE_DOCUMENT){break}else{a=this.get("pane")}}if(a.get("isVisibleInWindow")&&a.get("acceptsFirstResponder")){return a}b=a}return null}.property("nextKeyView"),previousKeyView:undefined,_getPreviousKeyView:function(){var b=this.get("parentView"),a=this.get("previousKeyView");if(b&&b.get("firstKeyView")===this){return null}if(a!==undefined){return a}if(b){var c=b.get("childViews");return c[c.indexOf(this)-1]}},previousValidKeyView:function(){var b=this,a;while(a!==this){if(b.get("parentView")){a=b._getPreviousKeyView()}else{if(!SC.TABBING_ONLY_INSIDE_DOCUMENT){break}else{a=b}}if(a){do{b=a;a=a._getLastKeyView()}while(a&&a.get("isVisibleInWindow"));if(!a){a=b}}else{a=b.get("parentView")}if(a.get("isVisibleInWindow")&&a.get("acceptsFirstResponder")){return a}b=a}return null}.property("previousKeyView")});sc_require("views/view");sc_require("views/view/layout_style");SC.LAYOUT_HORIZONTAL="sc-layout-horizontal";SC.LAYOUT_VERTICAL="sc-layout-vertical";SC._VIEW_DEFAULT_DIMS=["marginTop","marginLeft"];SC.FULL_WIDTH={left:0,right:0};SC.FULL_HEIGHT={top:0,bottom:0};SC.ANCHOR_CENTER={centerX:0,centerY:0};SC.LAYOUT_AUTO="auto";SC.View.reopen({hasLayout:YES,concatenatedProperties:["layoutProperties"],backgroundColor:null,displayProperties:["backgroundColor"],useStaticLayout:NO,init:function(a){a();this.layoutStyleCalculator=SC.View.LayoutStyleCalculator.create({view:this});this._previousLayout=this.get("layout")}.enhance(),propertyDidChange:function(b,e,c){var a=false;if(typeof this.layout==="function"&&this._kvo_dependents){var f=this._kvo_dependents[b];if(f&&f.indexOf("layout")!=-1){a=true}}if(b==="layout"||a){this.layoutDidChange()}arguments.callee.base.apply(this,arguments)},adjust:function(a,e){var b=this.get("layout"),c=NO,g,f;if(a===undefined){return this}if(SC.typeOf(a)===SC.T_STRING){g=b[a];if(e===undefined||g==e){return this}b=SC.clone(b);if(e===null){delete b[a]}else{b[a]=e}c=YES}else{f=a;for(a in f){if(!f.hasOwnProperty(a)){continue}e=f[a];g=b[a];if(e===undefined||g==e){continue}if(!c){b=SC.clone(b)}if(e===null){delete b[a]}else{b[a]=e}c=YES}}if(c){this.set("layout",b)}return this},layout:{top:0,left:0,bottom:0,right:0},isFixedLayout:function(){var b=this.get("layout"),a;a=(((b.width!==undefined)&&(b.height!==undefined))&&((b.width!==SC.LAYOUT_AUTO)&&(b.height!==SC.LAYOUT_AUTO))&&((b.left!==undefined)&&(b.top!==undefined)));if(a){a=(!SC.isPercentage(b.top)&&!SC.isPercentage(b.left)&&!SC.isPercentage(b.width)&&!SC.isPercentage(b.height))}return a}.property("layout").cacheable(),convertFrameToView:function(n,e){var c=0,b=0,j=0,g=0,a=this,k;while(a){k=a.get("frame");c+=k.x;b+=k.y;a=a.get("layoutView")}if(e){a=e;while(a){k=a.get("frame");j+=k.x;g+=k.y;a=a.get("layoutView")}}c=n.x+c-j;b=n.y+b-g;return{x:c,y:b,width:n.width,height:n.height}},convertFrameFromView:function(n,e){var c=0,b=0,j=0,g=0,a=this,k;while(a&&(k=a.get("frame"))){c+=k.x;b+=k.y;a=a.get("parentView")}if(e){a=e;while(a){k=a.get("frame");j+=k.x;g+=k.y;a=a.get("parentView")}}c=n.x-c+j;b=n.y-b+g;return{x:c,y:b,width:n.width,height:n.height}},scrollToVisible:function(){var a=this.get("parentView");while(a&&!a.get("isScrollable")){a=a.get("parentView")}if(a){a.scrollToVisible();return a.scrollToVisible(this)}else{return NO}},_adjustForBorder:function(f,c){var g=((c.borderTop!==undefined)?c.borderTop:c.border)||0,e=((c.borderLeft!==undefined)?c.borderLeft:c.border)||0,b=((c.borderBottom!==undefined)?c.borderBottom:c.border)||0,a=((c.borderRight!==undefined)?c.borderRight:c.border)||0;f.x+=e;f.y+=g;f.width-=(e+a);f.height-=(g+b);return f},computeFrameWithParentFrame:function(t,j){var v,w=this.get("layout");if(this.get("useStaticLayout")){v=t();return v?this._adjustForBorder(v,w):null}else{v={}}var u,B,q=SC.LAYOUT_AUTO,p=this.get("parentView"),k,c,a=w.right,b=w.left,A=w.top,g=w.bottom,z=w.width,e=w.height,o=w.centerX,n=w.centerY;if(z===q){u=SC.Error.desc(("%@.layout() cannot use width:auto if staticLayout is disabled").fmt(this),"%@".fmt(this),-1);SC.Logger.error(u.toString());throw u}if(e===q){u=SC.Error.desc(("%@.layout() cannot use height:auto if staticLayout is disabled").fmt(this),"%@".fmt(this),-1);SC.Logger.error(u.toString());throw u}if(!j){j=this.computeParentDimensions(w)}k=j.height;c=j.width;if(!SC.none(b)){if(SC.isPercentage(b)){v.x=c*b}else{v.x=b}if(z!==undefined){if(z===q){v.width=q}else{if(SC.isPercentage(z)){v.width=c*z}else{v.width=z}}}else{v.width=c-v.x;if(a&&SC.isPercentage(a)){v.width=v.width-(a*c)}else{v.width=v.width-(a||0)}}}else{if(!SC.none(a)){if(SC.none(z)){if(SC.isPercentage(a)){v.width=c-(c*a)}else{v.width=c-a}v.x=0}else{if(z===q){v.width=q}else{if(SC.isPercentage(z)){v.width=c*z}else{v.width=(z||0)}}if(SC.isPercentage(z)){v.x=c-(a*c)-v.width}else{v.x=c-a-v.width}}}else{if(!SC.none(o)){if(z===q){v.width=q}else{if(SC.isPercentage(z)){v.width=z*c}else{v.width=(z||0)}}if(SC.isPercentage(o)){v.x=(c-v.width)/2+(o*c)}else{v.x=(c-v.width)/2+o}}else{v.x=0;if(SC.none(z)){v.width=c}else{if(z===q){v.width=q}if(SC.isPercentage(z)){v.width=z*c}else{v.width=(z||0)}}}}}if(!SC.none(A)){if(SC.isPercentage(A)){v.y=A*k}else{v.y=A}if(e!==undefined){if(e===q){v.height=q}else{if(SC.isPercentage(e)){v.height=e*k}else{v.height=e}}}else{if(g&&SC.isPercentage(g)){v.height=k-v.y-(g*k)}else{v.height=k-v.y-(g||0)}}}else{if(!SC.none(g)){if(SC.none(e)){if(SC.isPercentage(g)){v.height=k-(g*k)}else{v.height=k-g}v.y=0}else{if(e===q){v.height=q}if(e&&SC.isPercentage(e)){v.height=e*k}else{v.height=(e||0)}if(SC.isPercentage(g)){v.y=k-(g*k)-v.height}else{v.y=k-g-v.height}}}else{if(!SC.none(n)){if(e===q){v.height=q}if(e&&SC.isPercentage(e)){v.height=e*k}else{v.height=(e||0)}if(SC.isPercentage(n)){v.y=(k-v.height)/2+(n*k)}else{v.y=(k-v.height)/2+n}}else{v.y=0;if(SC.none(e)){v.height=k}else{if(e===q){v.height=q}if(SC.isPercentage(e)){v.height=e*k}else{v.height=e||0}}}}}v.x=Math.floor(v.x);v.y=Math.floor(v.y);if(v.height!==q){v.height=Math.floor(v.height)}if(v.width!==q){v.width=Math.floor(v.width)}if(v.height===q||v.width===q){B=this.get("layer");if(v.height===q){v.height=B?B.clientHeight:0}if(v.width===q){v.width=B?B.clientWidth:0}}v=this._adjustForBorder(v,w);if(p&&p.isScrollContainer){p=p.get("parentView");v.x-=p.get("horizontalScrollOffset");v.y-=p.get("verticalScrollOffset")}if(!SC.none(w.maxHeight)&&(v.height>w.maxHeight)){v.height=w.maxHeight}if(!SC.none(w.minHeight)&&(v.height<w.minHeight)){v.height=w.minHeight}if(!SC.none(w.maxWidth)&&(v.width>w.maxWidth)){v.width=w.maxWidth}if(!SC.none(w.minWidth)&&(v.width<w.minWidth)){v.width=w.minWidth}if(v.height<0){v.height=0}if(v.width<0){v.width=0}return v}.enhance(),computeParentDimensions:function(g){var b,c=this.get("parentView"),a=(c)?c.get("frame"):null;if(a){b={width:a.width,height:a.height}}else{var e=g||{};b={width:(e.left||0)+(e.width||0)+(e.right||0),height:(e.top||0)+(e.height||0)+(e.bottom||0)}}return b},borderFrame:function(){var e=this.get("layout"),g=this.get("frame"),a=e.border,f=((e.topBorder!==undefined)?e.topBorder:e.border)||0,c=((e.rightBorder!==undefined)?e.rightBorder:e.border)||0,j=((e.bottomBorder!==undefined)?e.bottomBorder:e.border)||0,b=((e.leftBorder!==undefined)?e.leftBorder:e.border)||0;return{x:g.x-b,y:g.y-f,width:g.width+b+c,height:g.height+f+j}}.property("frame").cacheable(),parentViewDidResize:function(){var a;a=this.useStaticLayout||!this.get("isFixedLayout");if(a){this.viewDidResize()}},viewDidResize:function(){this._viewFrameDidChange();var e=this.childViews,b,a,c;for(a=0;a<(b=e.length);++a){c=e[a];c.tryToPerform("parentViewDidResize")}},_viewFrameDidChange:function(){this.notifyPropertyChange("frame");this._sc_view_clippingFrameDidChange()},beginLiveResize:function(){if(this.willBeginLiveResize){this.willBeginLiveResize()}var e=this.get("childViews"),b=e.length,a,c;for(a=0;a<b;++a){c=e[a];if(c.beginLiveResize){c.beginLiveResize()}}return this},endLiveResize:function(){var e=this.get("childViews"),b=e.length,a,c;for(a=b-1;a>=0;--a){c=e[a];if(c.endLiveResize){c.endLiveResize()}}if(this.didEndLiveResize){this.didEndLiveResize()}return this},layoutView:function(){return this.get("parentView")}.property("parentView").cacheable(),layoutDidChange:function(){var j=this._previousLayout,g=this.get("layout"),n=YES,e,c,a,b;if(!SC.none(g.rotate)){if(SC.none(g.rotateX)){g.rotateX=g.rotate;SC.Logger.warn("Please set rotateX instead of rotate")}}if(!SC.none(g.rotateX)){g.rotate=g.rotateX}else{delete g.rotate}var k=g.animations;if(k){if(!SC.none(k.rotate)){if(SC.none(k.rotateX)){k.rotateX=k.rotate;SC.Logger.warn("Please animate rotateX instead of rotate")}}if(!SC.none(k.rotateX)){k.rotate=k.rotateX}else{delete k.rotate}}if(j&&j!==g){e=j.width;if(e!==undefined){a=g.width;if(e===a){c=j.height;if(j!==undefined){b=g.height;if(c===b){n=NO}}}}}this.beginPropertyChanges();this.notifyPropertyChange("hasAcceleratedLayer");this.notifyPropertyChange("layoutStyle");if(n){this.viewDidResize()}else{this._viewFrameDidChange()}this.endPropertyChanges();var f=this.get("layoutView");if(f){f.set("childViewsNeedLayout",YES);f.layoutDidChangeFor(this);if(f.get("childViewsNeedLayout")){f.invokeOnce(f.layoutChildViewsIfNeeded)}}this._previousLayout=g;return this},childViewsNeedLayout:NO,layoutDidChangeFor:function(b){var a=this._needLayoutViews;if(!a){a=this._needLayoutViews=SC.CoreSet.create()}a.add(b)},layoutChildViewsIfNeeded:function(a){if(!a){a=this.get("isVisibleInWindow")}if(a&&this.get("childViewsNeedLayout")){this.set("childViewsNeedLayout",NO);this.layoutChildViews()}return this},layoutChildViews:function(){var c=this._needLayoutViews,a=c?c.length:0,b;for(b=0;b<a;++b){c[b].updateLayout()}c.clear()},updateLayout:function(){var b=this.get("layer"),a;if(b){a=this.renderContext(b);this.renderLayout(a,NO);a.update();if(this.useStaticLayout){this.viewDidResize()}}b=null;return this},renderLayout:function(a,b){this.get("layoutStyleCalculator").willRenderAnimations();a.addStyle(this.get("layoutStyle"));this.get("layoutStyleCalculator").didRenderAnimations()},_renderLayerSettings:function(b,a,c){b(a,c);this.renderLayout(a,c)}.enhance(),applyAttributesToContext:function(b,a){b(a);if(this.get("useStaticLayout")){a.addClass("sc-static-layout")}if(this.get("backgroundColor")){a.css("backgroundColor",this.get("backgroundColor"))}}.enhance()});SC.View.mixin({convertLayoutToAnchoredLayout:function(g,t){var k={top:0,left:0,width:t.width,height:t.height},e=t.width,p=t.height,q=g.right,a=g.left,o=g.top,j=g.bottom,n=g.width,f=g.height,c=g.centerX,b=g.centerY;if(!SC.none(a)){if(SC.isPercentage(a)){k.left=a*e}else{k.left=a}if(n!==undefined){if(n===SC.LAYOUT_AUTO){k.width=SC.LAYOUT_AUTO}else{if(SC.isPercentage(n)){k.width=n*e}else{k.width=n}}}else{if(q&&SC.isPercentage(q)){k.width=e-k.left-(q*e)}else{k.width=e-k.left-(q||0)}}}else{if(!SC.none(q)){if(SC.none(n)){k.left=0;if(q&&SC.isPercentage(q)){k.width=e-(q*e)}else{k.width=e-(q||0)}}else{if(n===SC.LAYOUT_AUTO){k.width=SC.LAYOUT_AUTO}else{if(SC.isPercentage(n)){k.width=n*e}else{k.width=n}if(SC.isPercentage(q)){k.left=e-(k.width+q)}else{k.left=e-(k.width+q)}}}}else{if(!SC.none(c)){if(n&&SC.isPercentage(n)){k.width=(n*e)}else{k.width=(n||0)}k.left=((e-k.width)/2);if(SC.isPercentage(c)){k.left=k.left+c*e}else{k.left=k.left+c}}else{if(!SC.none(n)){k.left=0;if(n===SC.LAYOUT_AUTO){k.width=SC.LAYOUT_AUTO}else{if(SC.isPercentage(n)){k.width=n*e}else{k.width=n}}}else{k.left=0;k.width=0}}}}if(g.minWidth!==undefined){k.minWidth=g.minWidth}if(g.maxWidth!==undefined){k.maxWidth=g.maxWidth}if(!SC.none(o)){if(SC.isPercentage(o)){k.top=o*p}else{k.top=o}if(f!==undefined){if(f===SC.LAYOUT_AUTO){k.height=SC.LAYOUT_AUTO}else{if(SC.isPercentage(f)){k.height=f*p}else{k.height=f}}}else{k.height=p-k.top;if(j&&SC.isPercentage(j)){k.height=k.height-(j*p)}else{k.height=k.height-(j||0)}}}else{if(!SC.none(j)){if(SC.none(f)){k.top=0;if(j&&SC.isPercentage(j)){k.height=p-(j*p)}else{k.height=p-(j||0)}}else{if(f===SC.LAYOUT_AUTO){k.height=SC.LAYOUT_AUTO}else{if(SC.isPercentage(f)){k.height=f*p}else{k.height=f}k.top=p-k.height;if(SC.isPercentage(j)){k.top=k.top-(j*p)}else{k.top=k.top-j}}}}else{if(!SC.none(b)){if(f&&SC.isPercentage(f)){k.height=(f*p)}else{k.height=(f||0)}k.top=((p-k.height)/2);if(SC.isPercentage(b)){k.top=k.top+b*p}else{k.top=k.top+b}}else{if(!SC.none(f)){k.top=0;if(f===SC.LAYOUT_AUTO){k.height=SC.LAYOUT_AUTO}else{if(SC.isPercentage(f)){k.height=f*p}else{k.height=f}}}else{k.top=0;k.height=0}}}}if(k.top){k.top=Math.floor(k.top)}if(k.bottom){k.bottom=Math.floor(k.bottom)}if(k.left){k.left=Math.floor(k.left)}if(k.right){k.right=Math.floor(k.right)}if(k.width!==SC.LAYOUT_AUTO){k.width=Math.floor(k.width)}if(k.height!==SC.LAYOUT_AUTO){k.height=Math.floor(k.height)}if(g.minHeight!==undefined){k.minHeight=g.minHeight}if(g.maxHeight!==undefined){k.maxHeight=g.maxHeight}return k},convertLayoutToCustomLayout:function(b,a,c){}});sc_require("views/view");SC.View.reopen({_lastLayerId:null,layerIdDidChange:function(){var a=this.get("layer"),b=this.get("layerId"),c=this._lastLayerId;if(b!==c){if(c&&SC.View.views[c]===this){delete SC.View.views[c]}this._lastLayerId=b;SC.View.views[b]=this;if(a){a.id=b}}}.observes("layerId"),parentViewDidChange:function(){this.recomputeIsVisibleInWindow();this.resetBuildState();this.set("layerLocationNeedsUpdate",YES);this.invokeOnce(this.updateLayerLocationIfNeeded);this._invalidatePaneCacheForSelfAndAllChildViews();return this},_invalidatePaneCacheForSelfAndAllChildViews:function(){var e,c=this.get("childViews"),b=c.length,a;this.notifyPropertyChange("pane");for(a=0;a<b;++a){e=c[a];if(e._invalidatePaneCacheForSelfAndAllChildViews){e._invalidatePaneCacheForSelfAndAllChildViews()}}},insertBefore:function(b,e){b.beginPropertyChanges();if(b.get("parentView")){b.removeFromParent()}if(this.willAddChild){this.willAddChild(b,e)}if(b.willAddToParent){b.willAddToParent(this,e)}b.set("parentView",this);var a,c=this.get("childViews");if(c.needsClone){this.set(c=[])}a=(e)?c.indexOf(e):c.length;if(a<0){a=c.length}c.insertAt(a,b);if(b.parentViewDidChange){b.parentViewDidChange()}if(b.layoutDidChange){b.layoutDidChange()}b.endPropertyChanges();this.invokeLast(function(){var f=b.get("pane");if(f&&f.get("isPaneAttached")){b._notifyDidAppendToDocument()}if(this.didAddChild){this.didAddChild(b,e)}if(b.didAddToParent){b.didAddToParent(this,e)}});return this},removeChild:function(b,a){if(!a){return this}if(a.parentView!==this){throw"%@.removeChild(%@) must belong to parent".fmt(this,a)}if(a.willRemoveFromParent){a.willRemoveFromParent()}if(this.willRemoveChild){this.willRemoveChild(a)}b(a);if(a.parentViewDidChange){a.parentViewDidChange()}if(this.didRemoveChild){this.didRemoveChild(a)}if(a.didRemoveFromParent){a.didRemoveFromParent(this)}return this}.enhance(),replaceChild:function(a,b){a.beginPropertyChanges();b.beginPropertyChanges();this.beginPropertyChanges();this.insertBefore(a,b).removeChild(b);this.endPropertyChanges();b.endPropertyChanges();a.endPropertyChanges();return this},replaceAllChildren:function(c){var b=c.get("length"),a;this.beginPropertyChanges();this.destroyLayer().removeAllChildren();for(a=0;a<b;a++){this.appendChild(c.objectAt(a))}this.replaceLayer();this.endPropertyChanges();return this},appendChild:function(a){return this.insertBefore(a,null)},buildInChild:function(a){a.willBuildInToView(this);this.appendChild(a);a.buildInToView(this)},buildOutChild:function(a){a.buildOutFromView(this)},buildInDidFinishFor:function(a){},buildOutDidFinishFor:function(a){this.removeChild(a)},isBuildingIn:NO,isBuildingOut:NO,buildIn:function(){this.buildInDidFinish()},buildOut:function(){this.buildOutDidFinish()},resetBuild:function(){},buildOutDidCancel:function(){},buildInDidCancel:function(){},buildInDidFinish:function(){this.isBuildingIn=NO;this._buildingInTo.buildInDidFinishFor(this);this._buildingInTo=null},buildOutDidFinish:function(){this.isBuildingOut=NO;this._buildingOutFrom.buildOutDidFinishFor(this);this._buildingOutFrom=null},resetBuildState:function(){if(this.isBuildingIn){this.buildInDidCancel();this.isBuildingIn=NO}if(this.isBuildingOut){this.buildOutDidCancel();this.isBuildingOut=NO}this.buildingInTo=null;this.buildingOutFrom=null;this.resetBuild()},willBuildInToView:function(a){if(this.isBuildingOut){this.buildOutDidCancel()}},buildInToView:function(a){if(this.isBuildingIn){return}this._buildingInTo=a;this.isBuildingOut=NO;this.isBuildingIn=YES;this.buildIn()},buildOutFromView:function(a){if(this.isBuildingOut){return}if(this.isBuildingIn){this.buildInDidCancel()}this.isBuildingOut=YES;this.isBuildingIn=NO;this._buildingOutFrom=a;this.buildOut()}});sc_require("views/view");SC.View.reopen({init:function(a){a();this._lastTheme=this.get("theme")}.enhance(),themeName:null,baseThemeName:null,theme:function(){var b=this.get("baseTheme"),a=this.get("themeName");if(a){var c;if(b){c=b.find(a);if(c){return c}}c=SC.Theme.find(a);if(c){return c}return b.invisibleSubtheme(a)}return b}.property("baseTheme","themeName").cacheable(),_sc_view_themeDidChange:function(){if(this._lastTheme===this.get("theme")){return}this._lastTheme=this.get("theme");var c=this.childViews,b=c.length,a;for(a=0;a<b;a++){c[a].notifyPropertyChange("baseTheme")}if(this.get("layer")){this.replaceLayer()}}.observes("theme"),baseTheme:function(){var b;var a=this.get("baseThemeName");if(a){return SC.Theme.find(a)}else{b=this.get("parentView");var c=b&&b.get("theme");return c||SC.Theme.find(SC.defaultTheme)}}.property("baseThemeName","parentView").cacheable(),renderDelegate:function(c,e){if(e){this._setRenderDelegate=e}if(this._setRenderDelegate){return this._setRenderDelegate}var a=this.get("renderDelegateName"),b;if(a){b=this.get("theme")[a];if(!b){throw'%@: Unable to locate render delegate "%@" in theme.'.fmt(this,a)}return b}return null}.property("renderDelegateName","theme"),renderDelegateName:null,renderDelegateProxy:function(){return SC.View._RenderDelegateProxy.createForView(this)}.property("renderDelegate").cacheable(),render:function(b,c){var a=this.get("renderDelegate");if(a){if(c){a.render(this.get("renderDelegateProxy"),b)}else{a.update(this.get("renderDelegateProxy"),b.$())}}},applyAttributesToContext:function(g,f){var j=this.get("theme");var c=j.classNames,b,a=c.length;for(b=0;b<a;b++){f.addClass(c[b])}g(f);var e=this.get("renderDelegate");if(e&&e.className){f.addClass(e.className)}}.enhance()});SC.View._RenderDelegateProxy={isViewRenderDelegateProxy:YES,createForView:function(c){var e=SC.beget(this);var g=c.get("displayProperties"),f={};for(var b=0,a=g.length;b<a;b++){f[g[b]]=YES}f.theme=YES;e._displayPropertiesLookup=f;e.renderState={};e._view=c;return e},get:function(b){if(this[b]!==undefined){return this[b]}var a="display"+b.capitalize();if(this._displayPropertiesLookup[a]){return this._view.get(a)}else{if(this._displayPropertiesLookup[b]){return this._view.get(b)}}return undefined},didChangeFor:function(e){var b=arguments.length,a;for(a=1;a<b;a++){var f=arguments[a],c="display"+f.capitalize();if(this._displayPropertiesLookup[c]){if(this._view.didChangeFor(e,c)){return YES}}else{if(this._displayPropertiesLookup[f]){if(this._view.didChangeFor(e,f)){return YES}}}}return NO}};SC.propertyFromRenderDelegate=function(a,b){return function(g,j){if(j!==undefined){this["_set_rd_"+g]=j}var e=this["_set_rd_"+g];if(e!==undefined){return e}var c=this.get("renderDelegate");if(c&&c.get){var f=this.get("renderDelegateProxy");e=c.getPropertyFor(f,a)}if(e!==undefined){return e}return b}.property("renderDelegate").cacheable()};sc_require("views/view");SC.View.reopen({acceptsMultitouch:NO,hasTouch:NO,touchBoundary:{left:50,right:50,top:50,bottom:50},_touchBoundaryFrame:function(){return this.get("parentView").convertFrameToView(this.get("frame"),null)}.property("frame","parentView").cacheable(),touchIsInBoundary:function(k){var c=this.get("_touchBoundaryFrame"),e=0,b=0,j=this.get("touchBoundary");var a=k.pageX,g=k.pageY;if(a<c.x){a=c.x-a;e=j.left}else{if(a>c.x+c.width){a=a-(c.x+c.width);e=j.right}else{a=0;e=1}}if(g<c.y){g=c.y-g;b=j.top}else{if(g>c.y+c.height){g=g-(c.y+c.height);b=j.bottom}else{g=0;b=1}}if(a>100||g>100){return NO}return YES}});sc_require("views/view");SC.View.reopen({hasVisibility:YES,isVisibleInWindow:NO,isContextMenuEnabled:function(){return SC.CONTEXT_MENU_ENABLED}.property(),recomputeIsVisibleInWindow:function(e){var g=this.get("isVisibleInWindow"),k=this.get("isVisible"),f;if(k){if(e===undefined){f=this.get("parentView");e=f?f.get("isVisibleInWindow"):NO}k=k&&e}if(g!==k){this.set("isVisibleInWindow",k);var j=this.get("childViews"),b=j.length,a,c;for(a=0;a<b;a++){c=j[a];if(c.recomputeIsVisibleInWindow){c.recomputeIsVisibleInWindow(k)}}if(k){if(this.get("childViewsNeedLayout")){this.invokeOnce(this.layoutChildViewsIfNeeded)}}else{if(this.get("isFirstResponder")){this.resignFirstResponder()}}}this.updateLayerIfNeeded(YES);return this},_sc_isVisibleDidChange:function(){this.displayDidChange();this.recomputeIsVisibleInWindow()}.observes("isVisible")});sc_require("panes/pane");SC.MainPane=SC.Pane.extend({layout:{top:0,left:0,bottom:0,right:0,minHeight:200,minWidth:200},paneDidAttach:function(){var b=arguments.callee.base.apply(this,arguments);var a=this.rootResponder;a.makeMainPane(this);if(!a.get("keyRootView")){a.makeKeyPane(this)}return b},acceptsKeyPane:YES,classNames:["sc-main"],ariaRole:"application"});SC.routes=SC.Object.create({wantsHistory:NO,usesHistory:null,baseURI:document.baseURI,_didSetup:NO,_location:null,_firstRoute:null,_extractParametersAndRoute:function(c){var a={},k=c.route||"",f,b,e,j,g,n;f=(k.indexOf("?")<0&&k.indexOf("&")>=0)?"&":"?";b=k.split(f);k=b[0];if(b.length===1){b=[]}else{if(b.length===2){b=b[1].split("&")}else{if(b.length>2){b.shift()}}}j=b.length;for(e=0;e<j;++e){g=b[e].split("=");a[g[0]]=g[1]}for(n in c){if(c.hasOwnProperty(n)&&n!=="route"){a[n]=""+c[n]}}b=[];for(n in a){b.push([n,a[n]].join("="))}a.params=f+b.join("&");a.route=k;return a},location:function(c,e){var a,b;if(e!==undefined){if(e===null){e=""}if(typeof(e)==="object"){a=this._extractParametersAndRoute(e);e=a.route+a.params}if(!SC.empty(e)||(this._location&&this._location!==e)){b=encodeURI(e);if(this.usesHistory){if(b.length>0){b="/"+b}window.history.pushState(null,null,this.get("baseURI")+b)}else{window.location.hash=b}}this._location=e}return this._location}.property(),ping:function(){var a;if(!this._didSetup){this._didSetup=YES;if(this.get("wantsHistory")&&SC.platform.supportsHistory){this.usesHistory=YES;this.popState();SC.Event.add(window,"popstate",this,this.popState)}else{this.usesHistory=NO;if(SC.platform.supportsHashChange){this.hashChange();SC.Event.add(window,"hashchange",this,this.hashChange)}else{a=this;this._invokeHashChange=function(){a.hashChange();setTimeout(a._invokeHashChange,100)};this._invokeHashChange()}}}},hashChange:function(a){var b=window.location.hash;b=(b&&b.length>0)?b.slice(1,b.length):"";if(!SC.browser.isMozilla){b=decodeURI(b)}if(this.get("location")!==b){SC.run(function(){this.set("location",b)},this)}},popState:function(a){var b=this.get("baseURI"),c=document.location.href;if(c.slice(0,b.length)===b){c=c.slice(b.length+1,c.length);if(this.get("location")!==c){SC.run(function(){this.set("location",c)},this)}}},add:function(a,b,c){if(!this._didSetup){this.invokeLast(this.ping)}if(c===undefined&&SC.typeOf(b)===SC.T_FUNCTION){c=b;b=null}else{if(SC.typeOf(c)===SC.T_STRING){c=b[c]}}if(!this._firstRoute){this._firstRoute=this._Route.create()}this._firstRoute.add(a.split("/"),b,c);return this},locationDidChange:function(){this.trigger()}.observes("location"),trigger:function(){var a=this._firstRoute,b=this.get("location"),e,c;if(a){e=this._extractParametersAndRoute({route:b});b=e.route;delete e.route;delete e.params;c=a.routeForParts(b.split("/"),e);if(c&&c.method){c.method.call(c.target||this,e)}}},_Route:SC.Object.extend({target:null,method:null,staticRoutes:null,dynamicRoutes:null,wildcardRoutes:null,add:function(c,b,f){var a,e;c=SC.clone(c);if(!c||c.length===0){this.target=b;this.method=f}else{a=c.shift();switch(a.slice(0,1)){case":":a=a.slice(1,a.length);if(!this.dynamicRoutes){this.dynamicRoutes={}}if(!this.dynamicRoutes[a]){this.dynamicRoutes[a]=this.constructor.create()}e=this.dynamicRoutes[a];break;case"*":a=a.slice(1,a.length);if(!this.wildcardRoutes){this.wildcardRoutes={}}e=this.wildcardRoutes[a]=this.constructor.create();break;default:if(!this.staticRoutes){this.staticRoutes={}}if(!this.staticRoutes[a]){this.staticRoutes[a]=this.constructor.create()}e=this.staticRoutes[a]}if(e){e.add(c,b,f)}}},routeForParts:function(e,f){var b,c,a;e=SC.clone(e);if(!e||e.length===0){return this.method?this:null}else{b=e.shift();if(this.staticRoutes&&this.staticRoutes[b]){return this.staticRoutes[b].routeForParts(e,f)}else{for(c in this.dynamicRoutes){a=this.dynamicRoutes[c].routeForParts(e,f);if(a){f[c]=b;return a}}for(c in this.wildcardRoutes){e.unshift(b);f[c]=e.join("/");return this.wildcardRoutes[c].routeForParts(null,f)}return null}}}})});SC.SCANNER_OUT_OF_BOUNDS_ERROR=new Error("Out of bounds.");SC.SCANNER_INT_ERROR=new Error("Not an int.");SC.SCANNER_SKIP_ERROR=new Error("Did not find the string to skip.");SC.SCANNER_SCAN_ARRAY_ERROR=new Error("Did not find any string of the given array to scan.");SC.DATETIME_COMPAREDATE_TIMEZONE_ERROR=new Error("Can't compare the dates of two DateTimes that don't have the same timezone.");SC.DATETIME_ISO8601="%Y-%m-%dT%H:%M:%S%Z";SC.Scanner=SC.Object.extend({string:null,scanLocation:0,scan:function(a){if(this.scanLocation+a>this.length){throw SC.SCANNER_OUT_OF_BOUNDS_ERROR}var b=this.string.substr(this.scanLocation,a);this.scanLocation+=a;return b},scanInt:function(c,f){if(f===undefined){f=c}var e=this.scan(f);var b=new RegExp("^\\d{"+c+","+f+"}");var a=e.match(b);if(!a){throw SC.SCANNER_INT_ERROR}if(a[0].length<f){this.scanLocation+=a[0].length-f}return parseInt(a[0],10)},skipString:function(a){if(this.scan(a.length)!==a){throw SC.SCANNER_SKIP_ERROR}return YES},scanArray:function(c){for(var b=0,a=c.length;b<a;b++){if(this.scan(c[b].length)===c[b]){return b}this.scanLocation-=c[b].length}throw SC.SCANNER_SCAN_ARRAY_ERROR}});SC.DateTime=SC.Object.extend(SC.Freezable,SC.Copyable,{_ms:0,timezone:0,isFrozen:YES,adjust:function(b,a){var c;b=b?SC.clone(b):{};c=(b.timezone!==undefined)?b.timezone:(this.timezone!==undefined)?this.timezone:0;return this.constructor._adjust(b,this._ms,c,a)._createFromCurrentState()},advance:function(a){return this.constructor._advance(a,this._ms,this.timezone)._createFromCurrentState()},unknownProperty:function(a){return this.constructor._get(a,this._ms,this.timezone)},toFormattedString:function(a){return this.constructor._toFormattedString(a,this._ms,this.timezone)},toISO8601:function(){return this.constructor._toFormattedString(SC.DATETIME_ISO8601,this._ms,this.timezone)},toString:function(){return"UTC: "+new Date(this._ms).toUTCString()+", timezone: "+this.timezone},isEqual:function(a){return SC.DateTime.compare(this,a)===0},copy:function(){return this},toTimezone:function(a){if(a===undefined){a=0}return this.advance({timezone:a-this.timezone})}});SC.DateTime.mixin(SC.Comparable,{recordFormat:SC.DATETIME_ISO8601,dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],_englishDayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],_date:new Date(),_tz:0,timezone:new Date().getTimezoneOffset(),_dt_cache:{},_dt_cache_index:-1,_DT_CACHE_MAX_LENGTH:1000,_setCalcState:function(a,c){var b={milliseconds:this._date.getTime(),timezone:this._tz};if(a!==undefined){this._date.setTime(a)}if(c!==undefined){this._tz=c}return b},_setCalcStateFromHash:function(c,b){var e=(b!==undefined)?b:this._tz;var a=this._toMilliseconds(c,this._ms,e);return this._setCalcState(a,e)},_get:function(C,b,q){var p,A,j,t,e,n,o,f,u,a;var c,k;var z=this._date;var w,g=null;w=this._setCalcState(b,q);if(C==="milliseconds"){g=z.getTime()}else{if(C==="timezone"){g=this._tz}}if(g===null){u=C.slice(0,4);a=C.slice(4);if(u==="last"||u==="next"){c=this._get("dayOfWeek",b,q);k=this._englishDayNames.indexOf(a);if(k>=0){var B=k-c;if(u==="last"&&B>=0){B-=7}if(u==="next"&&B<0){B+=7}this._advance({day:B},b,q);g=this._createFromCurrentState()}}}if(g===null){if(q!==undefined){this._setCalcState(z.getTime()-(q*60000),0)}switch(C){case"year":g=z.getUTCFullYear();break;case"month":g=z.getUTCMonth()+1;break;case"day":g=z.getUTCDate();break;case"dayOfWeek":g=z.getUTCDay();break;case"hour":g=z.getUTCHours();break;case"minute":g=z.getUTCMinutes();break;case"second":g=z.getUTCSeconds();break;case"millisecond":g=z.getUTCMilliseconds();break}if((g===null)&&(C==="isLeapYear")){e=this._get("year");g=(e%4===0&&e%100!==0)||e%400===0}if((g===null)&&(C==="daysInMonth")){switch(this._get("month")){case 4:case 6:case 9:case 11:g=30;break;case 2:g=this._get("isLeapYear")?29:28;break;default:g=31;break}}if((g===null)&&(C==="dayOfYear")){p=z.getTime();j=this._get("day");this._setCalcStateFromHash({day:1});for(t=this._get("month")-1;t>0;t--){this._setCalcStateFromHash({month:t});j+=this._get("daysInMonth")}z.setTime(p);g=j}if((g===null)&&(C.slice(0,4)==="week")){n=C.length===4?1:parseInt(C.slice("4"),10);o=this._get("dayOfWeek");f=this._get("dayOfYear")-1;if(n===0){g=parseInt((f-o+7)/7,10)}else{g=parseInt((f-(o-1+7)%7+7)/7,10)}}}this._setCalcState(w.milliseconds,w.timezone);return g},_adjust:function(c,g,f,a){var e=c?SC.clone(c):{};var b=this._toMilliseconds(c,g,f,a);this._setCalcState(b,f);return this},_advance:function(a,g,e){var c=a?SC.clone(a):{};var f;for(var b in c){c[b]+=this._get(b,g,e)}f=(c.timezone!==undefined)?c.timezone:e;return this._adjust(c,g,f,NO)},_toMilliseconds:function(n,c,j,f){var a=n?SC.clone(n):{};var k=this._date;var g=k.getTime();var b,e;if(!SC.none(c)){k.setTime(c)}e=(j!==undefined)?j:(this.timezone!==undefined)?this.timezone:0;k.setTime(k.getTime()-(e*60000));if(f===undefined||f===YES){if(!SC.none(a.hour)&&SC.none(a.minute)){a.minute=0}if(!(SC.none(a.hour)&&SC.none(a.minute))&&SC.none(a.second)){a.second=0}if(!(SC.none(a.hour)&&SC.none(a.minute)&&SC.none(a.second))&&SC.none(a.millisecond)){a.millisecond=0}}if(SC.none(a.year)){a.year=k.getUTCFullYear()}if(SC.none(a.month)){a.month=k.getUTCMonth()+1}if(SC.none(a.day)){a.day=k.getUTCDate()}if(SC.none(a.hour)){a.hour=k.getUTCHours()}if(SC.none(a.minute)){a.minute=k.getUTCMinutes()}if(SC.none(a.second)){a.second=k.getUTCSeconds()}if(SC.none(a.millisecond)){a.millisecond=k.getUTCMilliseconds()}b=Date.UTC(a.year,a.month-1,a.day,a.hour,a.minute,a.second,a.millisecond);k.setTime(b+(e*60000));b=k.getTime();k.setTime(g);return b},create:function(){var n=arguments.length===0?{}:arguments[0];var e;if(SC.typeOf(n)===SC.T_NUMBER){n={milliseconds:n}}e=(n.timezone!==undefined)?n.timezone:this.timezone;if(e===undefined){e=0}if(!SC.none(n.milliseconds)){var k="nu"+n.milliseconds+e,a=this._dt_cache;var f=a[k];if(!f){var g,j=this._dt_cache_index,b=this;f=a[k]=new b([{_ms:n.milliseconds,timezone:e}]);j=this._dt_cache_index=(j+1)%this._DT_CACHE_MAX_LENGTH;g=a[j];if(g!==undefined&&a[g]){delete a[g]}a[j]=k}return f}else{var c=new Date();return this.create({milliseconds:this._toMilliseconds(n,c.getTime(),e,n.resetCascadingly),timezone:e})}},_createFromCurrentState:function(){return this.create({milliseconds:this._date.getTime(),timezone:this._tz})},parse:function(q,c){var t=new RegExp("(?:%([aAbBcdDhHiIjmMpsSUWwxXyYZ%])|(.))","g");var p,k,a={},b={},j=SC.Scanner.create({string:q});if(SC.none(c)){c=SC.DATETIME_ISO8601}try{while((k=t.exec(c))!==null){switch(k[1]){case"a":b.dayOfWeek=j.scanArray(this.abbreviatedDayNames);break;case"A":b.dayOfWeek=j.scanArray(this.dayNames);break;case"b":a.month=j.scanArray(this.abbreviatedMonthNames)+1;break;case"B":a.month=j.scanArray(this.monthNames)+1;break;case"c":throw"%c is not implemented";case"d":case"D":a.day=j.scanInt(1,2);break;case"h":case"H":a.hour=j.scanInt(1,2);break;case"i":case"I":a.hour=j.scanInt(1,2);break;case"j":throw"%j is not implemented";case"m":a.month=j.scanInt(1,2);break;case"M":a.minute=j.scanInt(1,2);break;case"p":a.meridian=j.scanArray(["AM","PM"]);break;case"S":a.second=j.scanInt(1,2);break;case"s":a.millisecond=j.scanInt(1,3);break;case"U":throw"%U is not implemented";case"W":throw"%W is not implemented";case"w":throw"%w is not implemented";case"x":throw"%x is not implemented";case"X":throw"%X is not implemented";case"y":a.year=j.scanInt(2);a.year+=(a.year>70?1900:2000);break;case"Y":a.year=j.scanInt(4);break;case"Z":var g=j.scan(1);if(g==="Z"){a.timezone=0}else{if(g==="+"||g==="-"){var n=j.scanInt(2);if(j.scan(1)!==":"){j.scan(-1)}var f=j.scanInt(2);a.timezone=(g==="+"?-1:1)*(n*60+f)}}break;case"%":j.skipString("%");break;default:j.skipString(k[0]);break}}}catch(o){SC.Logger.log("SC.DateTime.createFromString "+o.toString());return null}if(!SC.none(a.meridian)&&!SC.none(a.hour)){if(a.meridian===1){a.hour=(a.hour+12)%24}delete a.meridian}p=SC.DateTime.create(a);if(!SC.none(b.dayOfWeek)&&p.get("dayOfWeek")!==b.dayOfWeek){return null}return p},_pad:function(b,a){var c=""+b;if(a===undefined){a=2}while(c.length<a){c="0"+c}return c},__toFormattedString:function(b,f,c){var a,e;switch(b[1]){case"a":return this.abbreviatedDayNames[this._get("dayOfWeek")];case"A":return this.dayNames[this._get("dayOfWeek")];case"b":return this.abbreviatedMonthNames[this._get("month")-1];case"B":return this.monthNames[this._get("month")-1];case"c":return this._date.toString();case"d":return this._pad(this._get("day"));case"D":return this._get("day");case"h":return this._get("hour");case"H":return this._pad(this._get("hour"));case"i":a=this._get("hour");return(a===12||a===0)?12:(a+12)%12;case"I":a=this._get("hour");return this._pad((a===12||a===0)?12:(a+12)%12);case"j":return this._pad(this._get("dayOfYear"),3);case"m":return this._pad(this._get("month"));case"M":return this._pad(this._get("minute"));case"p":return this._get("hour")>11?"PM":"AM";case"S":return this._pad(this._get("second"));case"s":return this._pad(this._get("millisecond"),3);case"u":return this._pad(this._get("utc"));case"U":return this._pad(this._get("week0"));case"W":return this._pad(this._get("week1"));case"w":return this._get("dayOfWeek");case"x":return this._date.toDateString();case"X":return this._date.toTimeString();case"y":return this._pad(this._get("year")%100);case"Y":return this._get("year");case"Z":e=-1*c;return(e>=0?"+":"-")+this._pad(parseInt(Math.abs(e)/60,10))+":"+this._pad(Math.abs(e)%60);case"%":return"%"}},_toFormattedString:function(c,f,b){var a=this;var e=(b!==undefined)?b:(this.timezone!==undefined)?this.timezone:0;this._setCalcState(f-(b*60000),0);return c.replace(/\%([aAbBcdDhHiIjmMpsSUWwxXyYZ\%])/g,function(){var g=a.__toFormattedString.call(a,arguments,f,b);return g})},compare:function(e,c){var g=e.get("milliseconds");var f=c.get("milliseconds");return g<f?-1:g===f?0:1},compareDate:function(e,c){if(e.get("timezone")!==c.get("timezone")){throw SC.DATETIME_COMPAREDATE_TIMEZONE_ERROR}var g=e.adjust({hour:0}).get("milliseconds");var f=c.adjust({hour:0}).get("milliseconds");return g<f?-1:g===f?0:1}});SC.Binding.dateTime=function(a){return this.transform(function(b,c){return b?b.toFormattedString(a):null})};SC.stringsFor("English",{"_SC.DateTime.dayNames":"Sunday Monday Tuesday Wednesday Thursday Friday Saturday","_SC.DateTime.abbreviatedDayNames":"Sun Mon Tue Wed Thu Fri Sat","_SC.DateTime.monthNames":"January February March April May June July August September October November December","_SC.DateTime.abbreviatedMonthNames":"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec"});SC.DateTime.mixin({_setup:function(){SC.DateTime.dayNames=SC.String.w(SC.String.loc("_SC.DateTime.dayNames"));SC.DateTime.abbreviatedDayNames=SC.String.w(SC.String.loc("_SC.DateTime.abbreviatedDayNames"));SC.DateTime.monthNames=SC.String.w(SC.String.loc("_SC.DateTime.monthNames"));SC.DateTime.abbreviatedMonthNames=SC.String.w(SC.String.loc("_SC.DateTime.abbreviatedMonthNames"))}});jQuery(document).ready(function(){SC.DateTime._setup()});SC.Response=SC.Object.extend({isResponse:YES,isError:NO,errorValue:function(){return this}.property().cacheable(),errorObject:null,request:null,originalRequest:function(){var a=this.get("request");while(a.get("source")){a=a.get("source")}return a}.property("request").cacheable(),type:function(){return this.getPath("request.type")}.property("request").cacheable(),address:function(){return this.getPath("request.address")}.property("request").cacheable(),isJSON:function(){return this.getPath("request.isJSON")||NO}.property("request").cacheable(),isXML:function(){return this.getPath("request.isXML")||NO}.property("request").cacheable(),listeners:function(){return this.getPath("request.listeners")}.property("request").cacheable(),status:-100,headers:null,body:function(){var a=this.get("encodedBody");if(a&&this.get("isJSON")){try{a=SC.json.decode(a)}catch(b){return SC.Error.create({message:b.name+": "+b.message,label:"Response",errorValue:this})}}return a}.property("encodedBody").cacheable(),response:function(){return this.get("body")}.property("body").cacheable(),isCancelled:NO,timedOut:null,timeoutTimer:null,fire:function(){var a=this.get("request"),c=a?a.get("source"):null;if(c&&c.willSend){c.willSend(a,this)}a.freeze();if(!this.get("isCancelled")){this.invokeTransport()}var b=a.get("timeout");if(b){var e=SC.Timer.schedule({target:this,action:"timeoutReached",interval:b,repeats:NO});this.set("timeoutTimer",e)}if(!this.get("isCancelled")&&c&&c.didSend){c.didSend(a,this)}},invokeTransport:function(){this.receive(function(a){this.set("status",200)},this)},receive:function(f,a){if(!this.get("timedOut")){var e=this.get("timeoutTimer");if(e){e.invalidate()}this.set("timedOut",NO)}var b=this.get("request");var c=b?b.get("source"):null;SC.run(function(){if(c&&c.willReceive){c.willReceive(b,this)}f.call(a,!this.get("isCancelled"));if(!this.get("isCancelled")&&c&&c.didReceive){c.didReceive(b,this)}if(!this.get("isCancelled")){this.notify()}},this);SC.Request.manager.transportDidClose(this);return this},cancel:function(){if(!this.get("isCancelled")){this.set("isCancelled",YES);this.cancelTransport();SC.Request.manager.transportDidClose(this)}},timeoutReached:function(){if(this.get("timedOut")===null){this.set("timedOut",YES);this.cancelTransport();this.receive(function(b){if(!b){return}var a=SC.$error("HTTP Request timed out","Request",0);a.set("errorValue",this);this.set("isError",YES);this.set("errorObject",a);this.set("status",0)},this);return YES}return NO},cancelTransport:function(){},_notifyListeners:function(k,c){var n=k[c],a,j,b;if(!n){return NO}var f=NO;var g=n.length;for(var e=0;e<g;e++){var o=n[e];a=(o.params||[]).copy();a.unshift(this);j=o.target;b=o.action;if(SC.typeOf(b)===SC.T_STRING){b=j[b]}f=b.apply(j,a)}return f},notify:function(){var b=this.get("listeners"),a=this.get("status"),c=Math.floor(a/100)*100,e=NO;if(!b){return this}e=this._notifyListeners(b,a);if(!e&&c!==a){e=this._notifyListeners(b,c)}if(!e&&a!==0){e=this._notifyListeners(b,0)}return this},toString:function(){var a=arguments.callee.base.apply(this,arguments);return"%@<%@ %@, status=%@".fmt(a,this.get("type"),this.get("address"),this.get("status"))}});SC.XHRResponse=SC.Response.extend({headers:function(){var c=this.get("rawRequest"),b=c?c.getAllResponseHeaders():null,a={};if(!b){return a}b.split("\n").forEach(function(j){var e=j.indexOf(":"),f,g;if(e>=0){f=j.slice(0,e);g=j.slice(e+1).trim();a[f]=g}},this);return a}.property("status").cacheable(),header:function(a){var b=this.get("rawRequest");return b?b.getResponseHeader(a):null},encodedBody:function(){var a=this.get("rawRequest");if(!a){return null}if(this.get("isXML")){return a.responseXML}return a.responseText}.property("status").cacheable(),cancelTransport:function(){var a=this.get("rawRequest");if(a){a.abort()}this.set("rawRequest",null)},invokeTransport:function(){var e,g,b,c,f;e=this.createRequest();this.set("rawRequest",e);c=!!this.getPath("request.isAsynchronous");if(c){if(!SC.browser.msie&&!SC.browser.opera){SC.Event.add(e,"readystatechange",this,this.finishRequest,e)}else{g=this;b=function(){if(!g){return null}var j=g.finishRequest();if(j){g=null}return j};e.onreadystatechange=b}}e.open(this.get("type"),this.get("address"),c);f=this.getPath("request.headers");for(var a in f){e.setRequestHeader(a,f[a])}e.send(this.getPath("request.encodedBody"));if(!c){this.finishRequest()}return e},createRequest:function(){function a(){for(var b=0;b<arguments.length;b++){try{var c=arguments[b]();return c}catch(f){}}return NO}return a(function(){return new XMLHttpRequest()},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")})},finishRequest:function(c){var f=this.get("rawRequest"),a=f.readyState,e,b,g;if(a===4&&!this.get("timedOut")){this.receive(function(j){if(!j){return}b=-1;try{b=f.status||0}catch(n){}if((b<200)||(b>=300)){try{g=f.statusText||""}catch(k){g=""}e=SC.$error(g||"HTTP Request failed","Request",b);e.set("errorValue",this);this.set("isError",YES);this.set("errorObject",e)}this.set("status",b)},this);if(!SC.browser.msie&&!SC.browser.opera){SC.Event.remove(f,"readystatechange",this,this.finishRequest)}else{f.onreadystatechange=null}return YES}return NO}});sc_require("system/response");SC.Request=SC.Object.extend(SC.Copyable,SC.Freezable,{isAsynchronous:YES,isJSON:NO,isXML:NO,attachIdentifyingHeaders:YES,headers:function(){var a=this._headers;if(!a){a=this._headers={}}return a}.property().cacheable(),responseClass:SC.XHRResponse,source:null,address:null,type:"GET",timeout:null,body:null,encodedBody:function(){var a=this.get("body");if(a&&this.get("isJSON")){a=SC.json.encode(a)}return a}.property("isJSON","isXML","body").cacheable(),willSend:function(b,a){},didSend:function(b,a){},willReceive:function(b,a){},didReceive:function(b,a){},concatenatedProperties:"COPY_KEYS",COPY_KEYS:["attachIdentifyingHeaders","isAsynchronous","isJSON","isXML","address","type","timeout","body","responseClass","willSend","didSend","willReceive","didReceive"],copy:function(){var a={},e=this.COPY_KEYS,g=e.length,b,c,f;while(--g>=0){b=e[g];if(this.hasOwnProperty(b)){a[b]=this.get(b)}}if(this.hasOwnProperty("listeners")){a.listeners=SC.copy(this.get("listeners"))}if(this.hasOwnProperty("_headers")){a._headers=SC.copy(this._headers)}a.source=this.get("source")||this;return this.constructor.create(a)},header:function(a,b){var c;if(SC.typeOf(a)===SC.T_STRING){c=this._headers;if(arguments.length===1){return c?c[a]:null}else{this.propertyWillChange("headers");if(!c){c=this._headers={}}c[a]=b;this.propertyDidChange("headers");return this}}else{if(b===undefined){c=a;this.beginPropertyChanges();for(a in c){if(!c.hasOwnProperty(a)){continue}this.header(a,c[a])}this.endPropertyChanges();return this}}return this},clearHeaders:function(){this.propertyWillChange("headers");this._headers={};this.propertyDidChange("headers")},async:function(a){if(a===undefined){a=YES}return this.set("isAsynchronous",a)},timeoutAfter:function(a){return this.set("timeout",a)},json:function(a){if(a===undefined){a=YES}if(a){this.set("isXML",NO)}return this.set("isJSON",a)},xml:function(a){if(a===undefined){a=YES}if(a){this.set("isJSON",NO)}return this.set("isXML",a)},_prep:function(){var a=!!this.header("Content-Type");if(this.get("attachIdentifyingHeaders")){this.header("X-Requested-With","XMLHttpRequest");this.header("X-SproutCore-Version",SC.VERSION)}if(this.get("isJSON")&&!a){this.header("Content-Type","application/json")}else{if(this.get("isXML")&&!a){this.header("Content-Type","text/xml")}}return this},send:function(a){var b=this.get("timeout");if(b&&!this.get("isAsynchronous")){throw"Timeout values cannot be used with synchronous requests"}else{if(b===0){throw"The timeout value must either not be specified or must be greater than 0"}}if(a){this.set("body",a)}return SC.Request.manager.sendRequest(this.copy()._prep())},resend:function(){var a=this.get("source")?this:this.copy()._prep();return SC.Request.manager.sendRequest(a)},notify:function(a,f,e,g){var c=YES;if(SC.typeOf(a)!==SC.T_NUMBER){g=SC.A(arguments).slice(2);e=f;f=a;a=0;c=NO}else{g=SC.A(arguments).slice(3)}var b=this.get("listeners");if(!b){this.set("listeners",b={})}if(!b[a]){b[a]=[]}b[a].push({target:f,action:e,params:g});return this}});SC.Request.mixin({getUrl:function(a){return this.create().set("address",a).set("type","GET")},postUrl:function(b,a){var c=this.create().set("address",b).set("type","POST");if(a){c.set("body",a)}return c},deleteUrl:function(a){return this.create().set("address",a).set("type","DELETE")},putUrl:function(b,a){var c=this.create().set("address",b).set("type","PUT");if(a){c.set("body",a)}return c}});SC.Request.manager=SC.Object.create({maxRequests:6,inflight:[],pending:[],sendRequest:function(b){if(!b){return null}var a=b.get("responseClass").create({request:b});this.get("pending").pushObject(a);this.fireRequestIfNeeded();return a},cancel:function(b){var e=this.get("pending"),c=this.get("inflight"),a;if(e.indexOf(b)>=0){this.propertyWillChange("pending");e.removeObject(b);this.propertyDidChange("pending");return YES}else{if(c.indexOf(b)>=0){b.cancel();c.removeObject(b);this.fireRequestIfNeeded();return YES}}return NO},cancelAll:function(){if(this.get("pending").length||this.get("inflight").length){this.set("pending",[]);this.get("inflight").forEach(function(a){a.cancel()});this.set("inflight",[]);return YES}return NO},fireRequestIfNeeded:function(){var e=this.get("pending"),c=this.get("inflight"),a=this.get("maxRequests"),b;if((e.length>0)&&(c.length<a)){b=e.shiftObject();c.pushObject(b);b.fire()}},transportDidClose:function(a){this.get("inflight").removeObject(a);this.fireRequestIfNeeded()}});SC.FOCUS_ALL_CONTROLS=YES;SC.ready(function(){var a=SC.SAFARI_FOCUS_BEHAVIOR;if(a!==null&&a!==undefined){SC.FOCUS_ALL_CONTROLS=SC.SAFARI_FOCUS_BEHAVIOR}});if(typeof CHANCE_SLICES==="undefined"){var CHANCE_SLICES=[]}CHANCE_SLICES=CHANCE_SLICES.concat([]);SC.TreeItemContent={isTreeItemContent:YES,treeItemChildren:null,treeItemIsExpanded:YES,treeItemIsGrouped:NO,treeItemDisclosureState:function(b,a){return this.get("treeItemIsExpanded")?SC.BRANCH_OPEN:SC.BRANCH_CLOSED},treeItemCollapse:function(b,a){this.setIfChanged("treeItemIsExpanded",NO)},treeItemExpand:function(b,a){this.setIfChanged("treeItemIsExpanded",YES)},treeItemBranchIndexes:function(f,c){var e=this.get("treeItemChildren"),b,j,a,g;if(!e){return null}b=SC.IndexSet.create();j=e.get("length");for(a=0;a<j;a++){if(!(g=e.objectAt(a))){continue}if(!g.get("treeItemChildren")){continue}if(g.treeItemDisclosureState(this,a)!==SC.LEAF_NODE){b.add(a)}}return b.get("length")>0?b:null}};SC.BRANCH_OPEN=17;SC.BRANCH_CLOSED=18;SC.LEAF_NODE=32;SC.CollectionContent={isCollectionContent:YES,contentIndexIsSelected:function(b,c,a){var e=b.get("selection");return e?e.contains(c,a):NO},contentIndexIsEnabled:function(b,c,a){return b.get("isEnabled")},contentGroupIndexes:function(a,b){return null},contentIndexIsGroup:function(b,c,a){return NO},contentIndexOutlineLevel:function(b,c,a){return -1},contentIndexDisclosureState:function(b,c,a){return SC.LEAF_NODE},contentIndexExpand:function(b,c,a){SC.Logger.log("contentIndexExpand(%@, %@, %@)".fmt(b,c,a))},contentIndexCollapse:function(b,c,a){SC.Logger.log("contentIndexCollapse(%@, %@, %@)".fmt(b,c,a))}};sc_require("mixins/tree_item_content");sc_require("mixins/collection_content");SC.TreeItemObserver=SC.Object.extend(SC.Array,SC.CollectionContent,{item:null,delegate:null,parentObserver:null,parentItem:function(){var a=this.get("parentObserver");return a?a.get("item"):null}.property("parentObserver").cacheable(),index:null,outlineLevel:0,children:null,disclosureState:SC.BRANCH_OPEN,branchIndexes:function(){var f=this.get("item"),b,g,a,e,c;if(!f){return SC.IndexSet.EMPTY}else{if(f.isTreeItemContent){g=this.get("parentItem");a=this.get("index");return f.treeItemBranchIndexes(g,a)}else{e=this.get("children");if(!e){return null}c=SC.IndexSet.create();b=e.get("length");g=f;for(a=0;a<b;a++){if(!(f=e.objectAt(a))){continue}if(!this._computeChildren(f,g,a)){continue}if(this._computeDisclosureState(f,g,a)!==SC.LEAF_NODE){c.add(a)}}return c.get("length")>0?c:null}}}.property("children").cacheable(),isHeaderVisible:function(){return !!this.get("parentObserver")}.property("parentObserver").cacheable(),length:0,objectAt:function(g,c){var j=this.get("length"),n=this.get("item"),a=this._objectAtCache,k=g,f=0,e,b;if(g>=j){return undefined}if(this.get("isHeaderVisible")){if(g===0){return n}else{k--}}n=null;if(!a){a=this._objectAtCache=[]}if((n=a[g])!==undefined){return n}b=this.get("children");if(!b){return undefined}if(e=this.get("branchIndexes")){e.forEach(function(q){if(n||(q>k)){return}var p=this.branchObserverAt(q),o;if(!p){return}o=p.get("length");if(q+o>k){n=p.objectAt(k-q,c);k=-1}else{k-=o-1}},this)}if(k>=0){n=b.objectAt(k,c)}a[g]=n;return n},replace:function(a,b,o,e){var n=a,j=null,f,g,k;if(e===undefined){e=SC.DROP_BEFORE}if(this.get("isHeaderVisible")){n--}if(n<0){throw"Tree Item cannot replace itself"}if(f=this.get("branchIndexes")){f.forEach(function(p){if(j||(p>=n)){return}if(!(j=this.branchObserverAt(p))){return}g=j.get("length");if((p+g===n)&&e===SC.DROP_AFTER){n-=p}else{if(p+g>n){n-=p}else{n-=g-1;j=null}}},this)}if(j){j.replace(n,b,o,e);return this}k=n+b;if(b>1&&f){f.forEachIn(n,f.get("max")-n,function(p){if(p>k){return}if(!(j=this.branchObserverAt(p))){return}g=j.get("length");k-=g-1},this)}b=k-n;var c=this.get("children");if(!c){throw"cannot replace() tree item with no children"}if((b<0)||(k>c.get("length"))){throw"replace() range must lie within a single tree item"}c.replace(n,b,o,e);return this},observerContentDidChange:function(b,c,n){this.invalidateBranchObserversAt(b);this._objectAtCache=this._outlineLevelCache=null;this._disclosureStateCache=null;this._contentGroupIndexes=NO;this.notifyPropertyChange("branchIndexes");var e=this.get("length"),f=this._computeLength(),j=this.get("parentObserver"),g;if(e!==f){this.set("length",f)}if(!this._notifyParent){return this}if(j){g=SC.IndexSet.create(this.get("index"));j._childrenRangeDidChange(j.get("children"),null,"[]",g)}else{if(e===f){c=this.expandChildIndex(b+c);b=this.expandChildIndex(b);c=c-b;n=0}else{b=this.expandChildIndex(b);c=f-b;n=f-e}var k=c;var a=n+k;this.arrayContentDidChange(b,k,a)}},expandChildIndex:function(c){var b=c;if(this.get("isHeaderVisible")){c++}var a=this.get("branchIndexes");if(!a||a.get("length")===0){return b}a.forEachIn(0,c,function(e){b+=this.branchObserverAt(e).get("length")-1},this);return b},_contentGroupIndexes:NO,contentGroupIndexes:function(a,f){if(f!==this){return null}var c=this._contentGroupIndexes;if(c!==NO){return c}if(this.get("parentObserver")){return null}var e=this.get("item"),j,b,k,g;if(e&&e.isTreeItemContent){j=e.get("treeItemIsGrouped")}else{j=!!this.delegate.get("treeItemIsGrouped")}if(j){c=SC.IndexSet.create();b=this.get("branchIndexes");if(b){k=b.min();g=0;b.forEach(function(o){c.add(o+g,1);var n=this.branchObserverAt(o);if(n){g+=n.get("length")-1;k+=g}},this)}}else{c=null}this._contentGroupIndexes=c;return c},contentIndexIsGroup:function(b,e,a){var c=this.contentGroupIndexes(b,e);return c?c.contains(a):NO},contentIndexOutlineLevel:function(o,j,f){if(j!==this){return -1}var a=this._outlineLevelCache;if(a&&(a[f]!==undefined)){return a[f]}if(!a){a=this._outlineLevelCache=[]}var g=this.get("length"),p=f,e=0,k=null,c,b,n;if(f>=g){return -1}if(this.get("isHeaderVisible")){if(f===0){return a[0]=this.get("outlineLevel")-1}else{p--}}if(c=this.get("branchIndexes")){c.forEach(function(u){if((k!==null)||(u>p)){return}var t=this.branchObserverAt(u),q;if(!t){return}q=t.get("length");if(u+q>p){k=t.contentIndexOutlineLevel(o,t,p-u);p=-1}else{p-=q-1}},this)}if(p>=0){k=this.get("outlineLevel")}a[f]=k;return k},contentIndexDisclosureState:function(o,j,f){if(j!==this){return -1}var a=this._disclosureStateCache;if(a&&(a[f]!==undefined)){return a[f]}if(!a){a=this._disclosureStateCache=[]}var g=this.get("length"),p=f,e=0,k=null,c,b,n;if(f>=g){return SC.LEAF_NODE}if(this.get("isHeaderVisible")){if(f===0){return a[0]=this.get("disclosureState")}else{p--}}if(c=this.get("branchIndexes")){c.forEach(function(u){if((k!==null)||(u>p)){return}var t=this.branchObserverAt(u),q;if(!t){return}q=t.get("length");if(u+q>p){k=t.contentIndexDisclosureState(o,t,p-u);p=-1}else{p-=q-1}},this)}if(p>=0){k=SC.LEAF_NODE}a[f]=k;return k},contentIndexExpand:function(b,g,a){var c,j=a,e,f;if(g!==this){return}if(this.get("isHeaderVisible")){if(a===0){this._expand(this.get("item"));return}else{j--}}if(c=this.get("branchIndexes")){c.forEach(function(o){if(o>=j){return}var n=this.branchObserverAt(o),k;if(!n){return}k=n.get("length");if(o+k>j){n.contentIndexExpand(b,n,j-o);j=-1}else{j-=k-1}},this)}if(j>=0){e=this.get("children");f=e?e.objectAt(j):null;if(f){this._expand(f,this.get("item"),j)}}},contentIndexCollapse:function(b,g,a){var c,e,f,j=a;if(g!==this){return}if(this.get("isHeaderVisible")){if(a===0){this._collapse(this.get("item"));return}else{j--}}if(c=this.get("branchIndexes")){c.forEach(function(o){if(o>=j){return}var n=this.branchObserverAt(o),k;if(!n){return}k=n.get("length");if(o+k>j){n.contentIndexCollapse(b,n,j-o);j=-1}else{j-=k-1}},this)}if(j>=0){e=this.get("children");f=e?e.objectAt(j):null;if(f){this._collapse(f,this.get("item"),j)}}},branchObserverAt:function(e){var j=this._branchObserversByIndex,c=this._branchObserverIndexes,f,k,b,o,a,g,n;if(!j){j=this._branchObserversByIndex=[]}if(!c){c=this._branchObserverIndexes=SC.IndexSet.create()}if(f=j[e]){return f}a=this.get("children");o=a?a.objectAt(e):null;if(!o){return null}j[e]=f=SC.TreeItemObserver.create({item:o,delegate:this.get("delegate"),parentObserver:this,index:e,outlineLevel:this.get("outlineLevel")+1});c.add(e);return f},invalidateBranchObserversAt:function(c){var b=this._branchObserversByIndex,a=this._branchObserverIndexes;if(!b||b.length<=c){return this}if(c<0){c=0}a.forEachIn(c,a.get("max")-c,function(f){var e=b[f];if(e){e.destroy()}},this);b.length=c;return this},init:function(){arguments.callee.base.apply(this,arguments);var a=this.get("item");if(!a){throw"SC.TreeItemObserver.item cannot be null"}a.addObserver("*",this,this._itemPropertyDidChange);this._itemPropertyDidChange(a,"*");this._notifyParent=YES},destroy:function(){this.invalidateBranchObserversAt(0);this._objectAtCache=null;this._notifyParent=NO;var c=this.get("item");if(c){c.removeObserver("*",this,this._itemPropertyDidChange)}var a=this._children,b=this._childrenRangeObserver;if(a&&b){a.removeRangeObserver(b)}this.set("length",0);arguments.callee.base.apply(this,arguments)},_itemPropertyDidChange:function(g,b){var a=this.get("children"),f=this.get("disclosureState"),e=this.get("item"),c;this.beginPropertyChanges();c=this._computeDisclosureState(e);if(f!==c){this.set("disclosureState",c)}c=this._computeChildren(e);if(a!==c){this.set("children",c)}this.endPropertyChanges()},_childrenDidChange:function(){var c=this.get("disclosureState"),e=c===SC.BRANCH_OPEN?this.get("children"):null,b=this._children,a=this._childrenRangeObserver;if(b===e){return this}if(a){b.removeRangeObserver(a)}if(e){this._childrenRangeObserver=e.addRangeObserver(null,this,this._childrenRangeDidChange)}else{this._childrenRangeObserver=null}this._children=e;this._childrenRangeDidChange(e,null,"[]",null)}.observes("children","disclosureState"),_childrenRangeDidChange:function(g,n,k,e){var a=this.get("children"),f=a?a.get("length"):0,c=e?e.get("min"):0,j=e?e.get("max"):f,b=this._childrenLen||0;this._childrenLen=f;this.observerContentDidChange(c,j-c,f-b)},_computeDisclosureState:function(e,f,b){var c,a;if(!e||!this._computeChildren(e)){return SC.LEAF_NODE}else{if(e.isTreeItemContent){if(f===undefined){f=this.get("parentItem")}if(b===undefined){b=this.get("index")}return e.treeItemDisclosureState(f,b)}else{c=this._treeItemIsExpandedKey;if(!c){a=this.get("delegate");c=a?a.get("treeItemIsExpandedKey"):"treeItemIsExpanded";this._treeItemIsExpandedKey=c}return e.get(c)?SC.BRANCH_OPEN:SC.BRANCH_CLOSED}}},_collapse:function(e,f,b){var c,a;if(!e||!this._computeChildren(e)){return this}else{if(e.isTreeItemContent){if(f===undefined){f=this.get("parentItem")}if(b===undefined){b=this.get("index")}e.treeItemCollapse(f,b)}else{c=this._treeItemIsExpandedKey;if(!c){a=this.get("delegate");c=a?a.get("treeItemIsExpandedKey"):"treeItemIsExpanded";this._treeItemIsExpandedKey=c}e.setIfChanged(c,NO)}}return this},_expand:function(e,f,b){var c,a;if(!e||!this._computeChildren(e)){return this}else{if(e.isTreeItemContent){if(f===undefined){f=this.get("parentItem")}if(b===undefined){b=this.get("index")}e.treeItemExpand(f,b)}else{c=this._treeItemIsExpandedKey;if(!c){a=this.get("delegate");c=a?a.get("treeItemIsExpandedKey"):"treeItemIsExpanded";this._treeItemIsExpandedKey=c}e.setIfChanged(c,YES)}}return this},_computeChildren:function(c){var a,b;if(!c){return null}else{if(c.isTreeItemContent){return c.get("treeItemChildren")}else{b=this._treeItemChildrenKey;if(!b){a=this.get("delegate");b=a?a.get("treeItemChildrenKey"):"treeItemChildren";this._treeItemChildrenKey=b}return c.get(b)}}},_computeLength:function(){var b=this.get("isHeaderVisible")?1:0,e=this.get("disclosureState"),c=this.get("children"),a;if((e===SC.BRANCH_OPEN)&&c){b+=c.get("length");if(a=this.get("branchIndexes")){a.forEach(function(f){var g=this.branchObserverAt(f);b+=g.get("length")-1},this)}}return b}});sc_require("private/tree_item_observer");SC.TreeController=SC.ObjectController.extend(SC.SelectionSupport,{treeItemIsGrouped:NO,treeItemIsExpandedKey:"treeItemIsExpanded",treeItemChildrenKey:"treeItemChildren",arrangedObjects:function(){var a,b=this.get("content");if(b){a=SC.TreeItemObserver.create({item:b,delegate:this})}else{a=null}this._sctc_arrangedObjects=a;return a}.property().cacheable(),_sctc_invalidateArrangedObjects:function(){this.propertyWillChange("arrangedObjects");var a=this._sctc_arrangedObjects;if(a){a.destroy()}this._sctc_arrangedObjects=null;this.propertyDidChange("arrangedObjects")}.observes("content","treeItemIsExpandedKey","treeItemChildrenKey","treeItemIsGrouped"),_sctc_arrangedObjectsContentDidChange:function(){this.updateSelectionAfterContentChange()}.observes("*arrangedObjects.[]"),canSelectGroups:NO,firstSelectableObject:function(){var e=this.get("arrangedObjects"),c,b,a=0;if(!e){return null}if(this.get("canSelectGroups")){return e.get("firstObject")}c=e.contentGroupIndexes(null,e);b=e.get("length");while(c.contains(a)&&(a<b)){a++}return a>=b?null:e.objectAt(a)}.property()});SC.InlineTextFieldDelegate={editor:null,acquireEditor:function(a){var b=this.editor;if(b){if(b.get("isEditing")&&!b.commitEditing()&&!b.discardEditing()){return null}this.releaseEditor(b)}var c=a.exampleEditor?a.exampleEditor:SC.InlineTextFieldView,e=a.get("pane");b=this.editor=e.createChildView(c,{inlineEditorDelegate:this});e.appendChild(b);return b},releaseEditor:function(a){a.removeFromParent();this.editor=null;return YES}};SC.STRING_TITLEIZE_REGEXP=(/([\s|\-|\_|\n])([^\s|\-|\_|\n]?)/g);SC.STRING_HUMANIZE_REGEXP=(/[\-_]/g);SC.STRING_REGEXP_ESCAPED_REGEXP=(/([\\\.\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:])/g);SC.STRING_DASHERIZE_CACHE={top:"top",left:"left",right:"right",bottom:"bottom",width:"width",height:"height",minWidth:"min-width",maxWidth:"max-width"};SC.INFLECTION_CONSTANTS={PLURAL:[[/(quiz)$/i,"$1zes"],[/^(ox)$/i,"$1en"],[/([m|l])ouse$/i,"$1ice"],[/(matr|vert|ind)ix|ex$/i,"$1ices"],[/(x|ch|ss|sh)$/i,"$1es"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/(hive)$/i,"$1s"],[/(?:([^f])fe|([lr])f)$/i,"$1$2ves"],[/sis$/i,"ses"],[/([ti])um$/i,"$1a"],[/(buffal|tomat)o$/i,"$1oes"],[/(bu)s$/i,"$1ses"],[/(alias|status)$/i,"$1es"],[/(octop|vir)us$/i,"$1i"],[/(ax|test)is$/i,"$1es"],[/s$/i,"s"],[/$/,"s"]],SINGULAR:[[/(quiz)zes$/i,"$1"],[/(matr)ices$/i,"$1ix"],[/(vert|ind)ices$/i,"$1ex"],[/^(ox)en/i,"$1"],[/(alias|status)es$/i,"$1"],[/(octop|vir)i$/i,"$1us"],[/(cris|ax|test)es$/i,"$1is"],[/(shoe)s$/i,"$1"],[/(o)es$/i,"$1"],[/(bus)es$/i,"$1"],[/([m|l])ice$/i,"$1ouse"],[/(x|ch|ss|sh)es$/i,"$1"],[/(m)ovies$/i,"$1ovie"],[/(s)eries$/i,"$1eries"],[/([^aeiouy]|qu)ies$/i,"$1y"],[/([lr])ves$/i,"$1f"],[/(tive)s$/i,"$1"],[/(hive)s$/i,"$1"],[/([^f])ves$/i,"$1fe"],[/(^analy)ses$/i,"$1sis"],[/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/i,"$1$2sis"],[/([ti])a$/i,"$1um"],[/(n)ews$/i,"$1ews"],[/s$/i,""]],IRREGULAR:[["move","moves"],["sex","sexes"],["child","children"],["man","men"],["person","people"]],UNCOUNTABLE:["sheep","fish","series","species","money","rice","information","info","equipment"]};SC.mixin(SC.String,{capitalizeEach:function(a){return a.replace(SC.STRING_TITLEIZE_REGEXP,function(c,b,e){return(e)?(b+e.toUpperCase()):b}).capitalize()},titleize:function(b){var a=b.replace(SC.STRING_DECAMELIZE_REGEXP,"$1_$2");return a.replace(SC.STRING_TITLEIZE_REGEXP,function(c,f,e){return e?" "+e.toUpperCase():" "}).capitalize()},classify:function(e){var a=e.replace(SC.STRING_TITLEIZE_REGEXP,function(f,j,g){return g?g.toUpperCase():""});var c=a.charAt(0),b=c.toUpperCase();return c!==b?b+a.slice(1):a},humanize:function(a){return SC.String.decamelize(a).replace(SC.STRING_HUMANIZE_REGEXP," ")},escapeForRegExp:function(a){return a.replace(SC.STRING_REGEXP_ESCAPED_REGEXP,"\\$1")},removeDiacritics:function(j){var a=SC.diacriticMappingTable;if(!a){SC.diacriticMappingTable={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","Ā":"A","Ă":"A","Ą":"A","Ǎ":"A","Ǟ":"A","Ǡ":"A","Ǻ":"A","Ȁ":"A","Ȃ":"A","Ȧ":"A","Ḁ":"A","Ạ":"A","Ả":"A","Ấ":"A","Ầ":"A","Ẩ":"A","Ẫ":"A","Ậ":"A","Ắ":"A","Ằ":"A","Ẳ":"A","Ẵ":"A","Ặ":"A","Å":"A","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ç":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ḉ":"C","Ď":"D","Ḋ":"D","Ḍ":"D","Ḏ":"D","Ḑ":"D","Ḓ":"D","È":"E","É":"E","Ê":"E","Ë":"E","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ȩ":"E","Ḕ":"E","Ḗ":"E","Ḙ":"E","Ḛ":"E","Ḝ":"E","Ẹ":"E","Ẻ":"E","Ẽ":"E","Ế":"E","Ề":"E","Ể":"E","Ễ":"E","Ệ":"E","Ḟ":"F","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","Ǧ":"G","Ǵ":"G","Ḡ":"G","Ĥ":"H","Ȟ":"H","Ḣ":"H","Ḥ":"H","Ḧ":"H","Ḩ":"H","Ḫ":"H","Ì":"I","Í":"I","Î":"I","Ï":"I","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ḭ":"I","Ḯ":"I","Ỉ":"I","Ị":"I","Ĵ":"J","Ķ":"K","Ǩ":"K","Ḱ":"K","Ḳ":"K","Ḵ":"K","Ĺ":"L","Ļ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ḻ":"L","Ḽ":"L","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ñ":"N","Ń":"N","Ņ":"N","Ň":"N","Ǹ":"N","Ṅ":"N","Ṇ":"N","Ṉ":"N","Ṋ":"N","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ō":"O","Ŏ":"O","Ő":"O","Ơ":"O","Ǒ":"O","Ǫ":"O","Ǭ":"O","Ȍ":"O","Ȏ":"O","Ȫ":"O","Ȭ":"O","Ȯ":"O","Ȱ":"O","Ṍ":"O","Ṏ":"O","Ṑ":"O","Ṓ":"O","Ọ":"O","Ỏ":"O","Ố":"O","Ồ":"O","Ổ":"O","Ỗ":"O","Ộ":"O","Ớ":"O","Ờ":"O","Ở":"O","Ỡ":"O","Ợ":"O","Ṕ":"P","Ṗ":"P","Ŕ":"R","Ŗ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṙ":"R","Ṛ":"R","Ṝ":"R","Ṟ":"R","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","Ș":"S","Ṡ":"S","Ṣ":"S","Ṥ":"S","Ṧ":"S","Ṩ":"S","Ţ":"T","Ť":"T","Ț":"T","Ṫ":"T","Ṭ":"T","Ṯ":"T","Ṱ":"T","Ù":"U","Ú":"U","Û":"U","Ü":"U","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","Ư":"U","Ǔ":"U","Ǖ":"U","Ǘ":"U","Ǚ":"U","Ǜ":"U","Ȕ":"U","Ȗ":"U","Ṳ":"U","Ṵ":"U","Ṷ":"U","Ṹ":"U","Ṻ":"U","Ụ":"U","Ủ":"U","Ứ":"U","Ừ":"U","Ử":"U","Ữ":"U","Ự":"U","Ṽ":"V","Ṿ":"V","Ŵ":"W","Ẁ":"W","Ẃ":"W","Ẅ":"W","Ẇ":"W","Ẉ":"W","Ẋ":"X","Ẍ":"X","Ý":"Y","Ŷ":"Y","Ÿ":"Y","Ȳ":"Y","Ẏ":"Y","Ỳ":"Y","Ỵ":"Y","Ỷ":"Y","Ỹ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","Ẑ":"Z","Ẓ":"Z","Ẕ":"Z","`":"`","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","ā":"a","ă":"a","ą":"a","ǎ":"a","ǟ":"a","ǡ":"a","ǻ":"a","ȁ":"a","ȃ":"a","ȧ":"a","ḁ":"a","ạ":"a","ả":"a","ấ":"a","ầ":"a","ẩ":"a","ẫ":"a","ậ":"a","ắ":"a","ằ":"a","ẳ":"a","ẵ":"a","ặ":"a","ḃ":"b","ḅ":"b","ḇ":"b","ç":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ḉ":"c","ď":"d","ḋ":"d","ḍ":"d","ḏ":"d","ḑ":"d","ḓ":"d","è":"e","é":"e","ê":"e","ë":"e","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","ȅ":"e","ȇ":"e","ȩ":"e","ḕ":"e","ḗ":"e","ḙ":"e","ḛ":"e","ḝ":"e","ẹ":"e","ẻ":"e","ẽ":"e","ế":"e","ề":"e","ể":"e","ễ":"e","ệ":"e","ḟ":"f","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","ǧ":"g","ǵ":"g","ḡ":"g","ĥ":"h","ȟ":"h","ḣ":"h","ḥ":"h","ḧ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ì":"i","í":"i","î":"i","ï":"i","ĩ":"i","ī":"i","ĭ":"i","į":"i","ǐ":"i","ȉ":"i","ȋ":"i","ḭ":"i","ḯ":"i","ỉ":"i","ị":"i","ĵ":"j","ǰ":"j","ķ":"k","ǩ":"k","ḱ":"k","ḳ":"k","ḵ":"k","ĺ":"l","ļ":"l","ľ":"l","ḷ":"l","ḹ":"l","ḻ":"l","ḽ":"l","ḿ":"m","ṁ":"m","ṃ":"m","ñ":"n","ń":"n","ņ":"n","ň":"n","ǹ":"n","ṅ":"n","ṇ":"n","ṉ":"n","ṋ":"n","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ō":"o","ŏ":"o","ő":"o","ơ":"o","ǒ":"o","ǫ":"o","ǭ":"o","ȍ":"o","ȏ":"o","ȫ":"o","ȭ":"o","ȯ":"o","ȱ":"o","ṍ":"o","ṏ":"o","ṑ":"o","ṓ":"o","ọ":"o","ỏ":"o","ố":"o","ồ":"o","ổ":"o","ỗ":"o","ộ":"o","ớ":"o","ờ":"o","ở":"o","ỡ":"o","ợ":"o","ṕ":"p","ṗ":"p","ŕ":"r","ŗ":"r","ř":"r","ȑ":"r","ȓ":"r","ṙ":"r","ṛ":"r","ṝ":"r","ṟ":"r","ś":"s","ŝ":"s","ş":"s","š":"s","ș":"s","ṡ":"s","ṣ":"s","ṥ":"s","ṧ":"s","ṩ":"s","ţ":"t","ť":"t","ț":"t","ṫ":"t","ṭ":"t","ṯ":"t","ṱ":"t","ẗ":"t","ù":"u","ú":"u","û":"u","ü":"u","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","ư":"u","ǔ":"u","ǖ":"u","ǘ":"u","ǚ":"u","ǜ":"u","ȕ":"u","ȗ":"u","ṳ":"u","ṵ":"u","ṷ":"u","ṹ":"u","ṻ":"u","ụ":"u","ủ":"u","ứ":"u","ừ":"u","ử":"u","ữ":"u","ự":"u","ṽ":"v","ṿ":"v","ŵ":"w","ẁ":"w","ẃ":"w","ẅ":"w","ẇ":"w","ẉ":"w","ẘ":"w","ẋ":"x","ẍ":"x","ý":"y","ÿ":"y","ŷ":"y","ȳ":"y","ẏ":"y","ẙ":"y","ỳ":"y","ỵ":"y","ỷ":"y","ỹ":"y","ź":"z","ż":"z","ž":"z","ẑ":"z","ẓ":"z","ẕ":"z"};a=SC.diacriticMappingTable}var e,f,b="",g=j.length;for(var c=0;c<=g;++c){e=j.charAt(c);f=a[e];b+=f||e}return b},pluralize:function(j){var p,f,b=j.split(/\s/).pop(),k=j.replace(b,""),a=b.charAt(0).match(/[A-Z]/)?true:false;b=b.toLowerCase();for(p=0,f=SC.INFLECTION_CONSTANTS.UNCOUNTABLE.length;p<f;p++){var g=SC.INFLECTION_CONSTANTS.UNCOUNTABLE[p];if(b==g){return j.toString()}}for(p=0,f=SC.INFLECTION_CONSTANTS.IRREGULAR.length;p<f;p++){var c=SC.INFLECTION_CONSTANTS.IRREGULAR[p][0],o=SC.INFLECTION_CONSTANTS.IRREGULAR[p][1];if((b==c)||(b==o)){if(a){o=o.capitalize()}return k+o}}for(p=0,f=SC.INFLECTION_CONSTANTS.PLURAL.length;p<f;p++){var n=SC.INFLECTION_CONSTANTS.PLURAL[p][0],e=SC.INFLECTION_CONSTANTS.PLURAL[p][1];if(n.test(b)){return j.replace(n,e)}}},singularize:function(j){var p,f,b=j.split(/\s/).pop(),k=j.replace(b,""),a=b.charAt(0).match(/[A-Z]/)?true:false;b=b.toLowerCase();for(p=0,f=SC.INFLECTION_CONSTANTS.UNCOUNTABLE.length;p<f;p++){var g=SC.INFLECTION_CONSTANTS.UNCOUNTABLE[p];if(b==g){return j.toString()}}for(p=0,f=SC.INFLECTION_CONSTANTS.IRREGULAR.length;p<f;p++){var c=SC.INFLECTION_CONSTANTS.IRREGULAR[p][0],o=SC.INFLECTION_CONSTANTS.IRREGULAR[p][1];if((b==c)||(b==o)){if(a){c=c.capitalize()}return k+c}}for(p=0,f=SC.INFLECTION_CONSTANTS.SINGULAR.length;p<f;p++){var n=SC.INFLECTION_CONSTANTS.SINGULAR[p][0],e=SC.INFLECTION_CONSTANTS.SINGULAR[p][1];if(n.test(b)){return j.replace(n,e)}}}});SC.String.strip=SC.String.trim;sc_require("system/string");SC.supplement(String.prototype,{capitalizeEach:function(){return SC.String.capitalizeEach(this,arguments)},titleize:function(a){return SC.String.titleize(this,arguments)},classify:function(a){return SC.String.classify(this,arguments)},humanize:function(a){return SC.String.humanize(this,arguments)},escapeForRegExp:function(a){return SC.String.escapeForRegExp(this,arguments)},removeDiacritics:function(a){return SC.String.removeDiacritics(this,arguments)},trim:function(a){return SC.String.trim(this,arguments)},trimLeft:function(a){return SC.String.trimLeft(this,arguments)},trimRight:function(a){return SC.String.trimRight(this,arguments)},pluralize:function(a){return SC.String.pluralize(this,arguments)},singularize:function(a){return SC.String.singularize(this,arguments)}});SC.Gesture=SC.Object.extend({name:"gesture",touchIsInGesture:function(b,a){return NO},touchStart:function(a){},touchesDragged:function(a,b){},touchEnd:function(a){},start:function(){if(!this.get("isActive")){this.set("isActive",YES);var b=SC.$A(arguments);b.unshift(this);var a=this.name+"Start";if(this.view[a]){this.view[a].apply(this.view,b)}}},end:function(){if(this.get("isActive")){this.set("isActive",NO);var b=SC.$A(arguments);b.unshift(this);var a=this.name+"End";if(this.view[a]){this.view[a].apply(this.view,b)}}},change:function(){if(this.get("isActive")){var b=SC.$A(arguments);b.unshift(this);var a=this.name+"Changed";if(this.view[a]){this.view[a].apply(this.view,b)}}},cancel:function(){if(this.get("isActive")){this.set("isActive",NO);var b=SC.$A(arguments);b.unshift(this);var a=this.name+"Cancelled";if(this.view[a]){this.view[a].apply(this.view,b)}}},trigger:function(){var b=SC.$A(arguments);b.unshift(this);var a=this.name;if(this.view[a]){this.view[a].apply(this.view,b)}},take:function(a){a.isTaken=YES;if(SC.none(a.touchResponder)||a.touchResponder!==this){a.makeTouchResponder(this,YES)}},release:function(a){a.isTaken=NO;if(a.nextTouchResponder){a.makeTouchResponder(a.nextTouchResponder)}},discardTouch:function(a){a.isTaken=YES;a.makeTouchResponder(null)},statusForTouch:function(c){var b=SC.guidFor(c.view)+this.name;var a=c[b];if(!a){a=c[b]={}}return a},unassignedTouchDidStart:function(a){if(a.isTaken){return}if(this.touchIsInGesture(a,this.statusForTouch(a))){this.take(a)}},unassignedTouchesDidChange:function(a,b){b.forEach(function(c){if(c.isTaken){return}if(this.touchIsInGesture(c,this.statusForTouch(c))){this.take(c)}},this)},unassignedTouchDidEnd:function(a){},interestedInTouch:function(b){var a=this.statusForTouch(b);if(a.isInterested){return}a.isInterested=YES;b.isInteresting++},uninterestedInTouch:function(b){var a=this.statusForTouch(b);if(!a.isInterested){return}a.isInterested=NO;b.isInteresting--}});sc_require("system/gesture");SC.PinchGesture=SC.Gesture.extend({name:"pinch",acceptsMultitouch:YES,scale:1,unassignedTouchesDidChange:function(a,b){if(b.length==2){this.take(b[0]);this.take(b[1])}},touchStart:function(b){var a=b.touchesForResponder(this);if(!a||a.length===0){return YES}else{if(a.length==1){this.start([a[0],b]);return YES}else{return NO}}},touchesDragged:function(a,c){var e=c.firstObject(),b=e.averagedTouchesForView(this);if(b.touchCount==2){if(!this._startDistance){this._startDistance=b.d}this.scale=b.d/this._startDistance;this.change(c,this.scale)}},touchEnd:function(b){this._startDistance=null;var a=b.touchesForResponder(this);this.trigger(a,this.scale);this.end(a,this.scale);if(a){a.forEach(function(c){this.release(c)},this)}}});sc_require("system/gesture");SC.SWIPE_HORIZONTAL="X";SC.SWIPE_VERTICAL="Y";SC.SWIPE_ANY="XY";SC.SWIPE_LEFT="LEFT";SC.SWIPE_RIGHT="RIGHT";SC.SWIPE_UP="UP";SC.SWIPE_DOWN="DOWN";SC.SwipeGesture=SC.Gesture.extend({name:"swipe",acceptsMultitouch:YES,direction:SC.SWIPE_HORIZONTAL,currentDirection:null,startDistance:5,swipeDistance:40,tolerance:0.5,touchIsInGesture:function(k,g){if(!g.flunked){var n=this.get("direction"),e=this.get("currentDirection"),a=this.get("startDistance"),j=k.pageX-k.startX,f=k.pageY-k.startY,c=Math.abs(j),b=Math.abs(f);if(Math.abs(j)>a||Math.abs(f)>a){if(!e){if(n==SC.SWIPE_ANY){if(c>b){e=SC.SWIPE_HORIZONTAL}else{if(b>c){e=SC.SWIPE_VERTICAL}else{return NO}}}else{e=n}this.set("currentDirection",e)}var p=(e==SC.SWIPE_HORIZONTAL)?j:f,o=(e==SC.SWIPE_HORIZONTAL)?f:j;if(Math.abs(p)*this.get("tolerance")>Math.abs(o)){return YES}}}return NO},touchStart:function(e){var b=this.get("currentDirection"),c=e["page"+b]-e["start"+b],a;if(c<0){a=(b===SC.SWIPE_HORIZONTAL)?SC.SWIPE_LEFT:SC.SWIPE_UP}else{a=(b===SC.SWIPE_HORIZONTAL)?SC.SWIPE_RIGHT:SC.SWIPE_DOWN}this.start(e,a,c);return YES},touchesDragged:function(n,e){var c=e.firstObject();var f=this.get("currentDirection"),a=(f===SC.SWIPE_HORIZONTAL?"Y":"X"),k=c["page"+f]-c["start"+f],g=c["page"+a]-c["start"+a],j;if(k<0){j=(f===SC.SWIPE_HORIZONTAL)?SC.SWIPE_LEFT:SC.SWIPE_UP}else{j=(f===SC.SWIPE_HORIZONTAL)?SC.SWIPE_RIGHT:SC.SWIPE_DOWN}if(Math.abs(k)<this.get("startDistance")||Math.abs(k)*this.get("tolerance")<Math.abs(g)){this.release(c);var b=c.touchesForResponder(this);if(!b||b.length===0){this.cancel(c,j,k)}}else{this.change(c,j,k)}},touchEnd:function(j){var f=this.get("currentDirection"),e=(f===SC.SWIPE_HORIZONTAL?"Y":"X"),g=j["page"+f]-j["start"+f],b=j["page"+e]-j["start"+e],a;if(g<0){a=(f===SC.SWIPE_HORIZONTAL)?SC.SWIPE_LEFT:SC.SWIPE_UP}else{a=(f===SC.SWIPE_HORIZONTAL)?SC.SWIPE_RIGHT:SC.SWIPE_DOWN}if(Math.abs(g)>this.get("swipeDistance")||Math.abs(g)*this.get("tolerance")<Math.abs(b)){this.trigger(j,a)}this.end(j,a,g);this.set("currentDirection",null);var c=j.touchesForResponder(this);if(c){c.forEach(function(k){this.release(k)},this)}},cancel:function(){arguments.callee.base.apply(this,arguments);this.set("currentDirection",null)}});sc_require("system/gesture");SC.TapGesture=SC.Gesture.extend({name:"tap",acceptsMultitouch:NO,_tapCount:null,_candidateTouch:null,_eventTimer:null,tapWiggle:10,tapDelay:200,touchIsInGesture:function(b,a){return !b.tapFlunked},touchStart:function(a){if(this._eventTimer){this._eventTimer.invalidate()}if(this._candidateTouch&&this._candidateTouch.touch.identifier!==a.identifier){this._cancelTap(a);return NO}this._candidateTouch={startTime:Date.now(),touch:a};this.start(a);return YES},touchesDragged:function(a,c){var f=c[0];var b=(c.length>1||!this._candidateTouch||f.identifier!==this._candidateTouch.touch.identifier);var e=this._calculateDragDistance(f)>this.get("tapWiggle");if(b||e){this._cancelTap(f)}},touchEnd:function(a){if(this._calculateDragDistance(a)>this.get("tapWiggle")||Date.now()-this._candidateTouch.startTime>this.get("tapDelay")){this._cancelTap(a)}else{this._addTap(a)}},_addTap:function(b){var a=this;if(this._eventTimer){this._eventTimer.invalidate()}this._tapCount=(this._tapCount||0)+1;this._candidateTouch=null;this._eventTimer=SC.Timer.schedule({target:a,action:function(){this._triggerTap(b)},interval:this.get("tapDelay")});this.change(b,this._tapCount);this.trigger(b,this._tapCount)},_cancelTap:function(a){a.tapFlunked=YES;this.release(a);this.cancel(a,this._tapCount);if(this._eventTimer){this._eventTimer.invalidate()}this._tapCount=null;this._candidateTouch=null;this._eventTimer=null},_triggerTap:function(a){this.end(a,this._tapCount);this._tapCount=null;this._candidateTouch=null;this._eventTimer=null},_calculateDragDistance:function(a){return Math.sqrt(Math.pow(a.pageX-a.startX,2)+Math.pow(a.pageY-a.startY,2))}});SC.AutoMixin={autoMixins:[],createChildView:function(b,c){if(!c){c={}}c.owner=c.parentView=this;c.isVisibleInWindow=this.get("isVisibleInWindow");if(!c.page){c.page=this.page}var a=this.get("autoMixins");a.push(c);b=b.create.apply(b,a);return b}};SC.mixin({_copy_computed_props:["maxWidth","maxHeight","paddingLeft","paddingRight","paddingTop","paddingBottom","fontFamily","fontSize","fontStyle","fontWeight","fontVariant","lineHeight","whiteSpace","letterSpacing"],stringFromLayout:function(f){var e=["maxHeight","maxWidth","minHeight","minWidth","centerY","centerX","width","height","bottom","right","top","left"],a=[],c,b=e.length;while(--b>=0){c=e[b];if(f.hasOwnProperty(c)){a.push(c+":"+f[c])}}return"{"+a.join(", ")+"}"},heightForString:function(k,c,b,a,j){var f=this._heightCalcElement,g,n;if(!j){k=SC.RenderContext.escapeHTML(k)}g=(a&&SC.typeOf(a)===SC.T_ARRAY)?a.join(" "):"";if(!c){c=100}if(!f){f=this._heightCalcElement=document.createElement("div");document.body.insertBefore(f,null)}b=b+"; width: "+c+"px; left: "+(-1*c)+"px; position: absolute";var e=SC.$(f);e.attr("style",b);if(g!==""){e.attr("class",g)}f.innerHTML=k;n=f.clientHeight;f=null;return n},prepareStringMeasurement:function(u,a){var o=this._metricsCalculationElement,k,v,c,e;k=SC.A(a).join(" ");if(!o){var t=document.createElement("div");t.style.cssText="position:absolute; left:-10010px; top:-10px;width:10000px; height:0px; overflow:hidden;visibility:hidden;";o=this._metricsCalculationElement=document.createElement("div");t.appendChild(o);document.body.insertBefore(t,null)}e=SC.$(o);if(SC.typeOf(u)!=SC.T_STRING){var j=null;if(document.defaultView&&document.defaultView.getComputedStyle){j=document.defaultView.getComputedStyle(u,null)}else{j=u.currentStyle}var q=this._copy_computed_props;for(var n=0;n<q.length;n++){var b=q[n],g=j[b];o.style[b]=g}var p=o.style;if(p.font===""){var f="";if(p.fontStyle){f+=p.fontStyle+" "}if(p.fontVariant){f+=p.fontVariant+" "}if(p.fontWeight){f+=p.fontWeight+" "}if(p.fontSize){f+=p.fontSize}else{f+="10px"}if(p.lineHeight){f+="/"+p.lineHeight}f+=" ";if(p.fontFamily){f+=p.fontFamily}else{p+="sans-serif"}o.style.font=f}SC.mixin(o.style,{left:"0px",top:"0px",position:"absolute",bottom:"auto",right:"auto",width:"auto",height:"auto"});j=null}else{c=u;e.attr("style",c+"; position:absolute; left: 0px; top: 0px; bottom: auto; right: auto; width: auto; height: auto;")}o.className=k;o=null},teardownStringMeasurement:function(){var a=this._metricsCalculationElement;a.innerHTML="";a.className="";a.setAttribute("style","");a=null},measureString:function(c,b){if(!b){c=SC.RenderContext.escapeHTML(c)}var e=this._metricsCalculationElement;if(!e){throw"measureString requires a string measurement environment to be set up. Did you mean metricsForString?"}if(b){e.innerHTML=c}else{if(typeof e.innerText!="undefined"){e.innerText=c}else{e.textContent=c}}var a={width:e.clientWidth,height:e.clientHeight};e=null;return a},metricsForString:function(c,e,f,b){SC.prepareStringMeasurement(e,f);var a=SC.measureString(c,b);SC.teardownStringMeasurement();return a}});sc_require("system/utils/string_measurement");SC.AutoResize={shouldAutoResize:YES,shouldMeasureSize:YES,shouldResizeWidth:YES,shouldResizeHeight:NO,measuredSize:{width:0,height:0},initMixin:function(){},_scar_autoResizePaddingDidChange:function(){this.invokeOnce("measureSize")}.observes("autoResizePadding"),batchResizeId:null,_scar_measurementPending:NO,_scar_requestedBatchResizeId:null,_scar_batchResizeIdDidChange:function(){var b=this.get("batchResizeId"),a=this._scar_requestedBatchResizeId;if(this._scar_measurementPending&&this._scar_requestedBatchResizeId!==b){SC.AutoResizeManager.cancelMeasurementForView(this,a);SC.AutoResizeManager.scheduleMeasurementForView(this,b);this._scar_requestedBatchResizeId=b}}.observes("batchResizeId"),scheduleMeasurement:function(){if(!this.get("shouldMeasureSize")){return}var a=this.get("batchResizeId");SC.AutoResizeManager.scheduleMeasurementForView(this,a);this._scar_measurementPending=YES;this._scar_requestedBatchResizeId=a}.observes("isVisible"),measureSize:function(e){var g,f,k=this.get("autoResizeText"),c,j,a,b=!this.get("escapeHTML");if(SC.none(k)||k===""){g={width:0,height:0}}else{if(e){g=SC.measureString(k,b)}else{f=this.get("autoResizeLayer");if(!f){return}g=SC.metricsForString(k,f,this.get("classNames"),b)}}c=this.get("autoResizePadding")||0;if(SC.typeOf(c)===SC.T_NUMBER){j=a=c}else{j=c.height;a=c.width}g.width+=a;g.height+=j;this.set("measuredSize",g);if(this.get("shouldAutoResize")){if(this.get("shouldResizeWidth")){this.adjust("width",g.width)}if(this.get("shouldResizeHeight")){this.adjust("height",g.height)}}this._scar_measurementPending=NO;return g},_scar_valueDidChange:function(){this.scheduleMeasurement()}.observes("autoResizeText"),didCreateLayer:function(a){a();this.scheduleMeasurement()}.enhance()};SC.AutoResizeManager={viewsNeedingResize:null,untaggedViews:null,scheduleMeasurementForView:function(b,f){if(SC.none(f)){var e=this.untaggedViews||(this.untaggedViews=SC.CoreSet.create());e.add(b)}else{var c=this.viewsNeedingResize||(this.viewsNeedingResize={}),a=c[f]||(c[f]=SC.CoreSet.create());a.add(b)}SC.RunLoop.currentRunLoop.invokeLast(this.doBatchResize)},cancelMeasurementForView:function(a,c){var b=SC.none(c)?this.untaggedViews:this.viewsNeedingResize[c];if(b){b.remove(a)}},doBatchResize:function(){if(this!==SC.AutoResizeManager){return SC.AutoResizeManager.doBatchResize()}var a,c,b,e,f,g;f=this.viewsNeedingResize;for(a in f){if(f.hasOwnProperty(a)){c=f[a];while((b=c.pop())){if(b.get("isVisible")&&(e=b.get("autoResizeLayer"))){if(!g){SC.prepareStringMeasurement(e)}b.measureSize(YES)}}if(g){SC.teardownStringMeasurement()}}}c=this.untaggedViews;if(!c){return}while((b=c.pop())){b.measureSize()}}};SC.Button.initMixin=function(){throw"SC.Button is deprecated as a mixin and is now a subclass of SC.TemplateView. Subclass SC.ButtonView instead."};SC.ContentDisplay={concatenatedProperties:"contentDisplayProperties",displayProperties:["content"],contentDisplayProperties:[],initMixin:function(){this._display_contentDidChange()},destroyMixin:function(){if(!this._display_content){return}this._display_stopObservingContent(this._display_content);this._display_content=null},_display_beginObservingContent:function(a){var b=this._display_contentPropertyDidChange;if(SC.isArray(a)){a.invoke("addObserver","*",this,b)}else{if(a.addObserver){a.addObserver("*",this,b)}}},_display_stopObservingContent:function(a){var b=this._display_contentPropertyDidChange;if(SC.isArray(a)){a.invoke("removeObserver","*",this,b)}else{if(a.removeObserver){a.removeObserver("*",this,b)}}},_display_contentDidChange:function(e,a,c){if((c=this.get("content"))===this._display_content){return}var b=this._display_content;if(b){this._display_stopObservingContent(b)}b=this._display_content=c;if(b){this._display_beginObservingContent(b)}this.displayDidChange()}.observes("content","contentDisplayProperties"),_display_contentPropertyDidChange:function(f,c,e,b){if(c==="*"){this.displayDidChange()}else{var a=this.get("contentDisplayProperties");if(a&&a.indexOf(c)>=0){this.displayDidChange()}}}};SC.ContentValueSupport={hasContentValueSupport:YES,initMixin:function(){this._control_contentDidChange()},value:null,content:null,contentValueKey:null,contentPropertyDidChange:function(b,a){return this.updatePropertyFromContent("value",a,"contentValueKey",b)},updatePropertyFromContent:function(g,c,f,e){var a,b;if(f===undefined){f="content"+g.capitalize()+"Key"}if(this[f]){f=this.get(f)}else{if((a=this.displayDelegate)&&(b=a[f])){f=a.get?a.get(f):b}else{return this}}if(c==="*"||c===f){if(e===undefined){e=this.get("content")}if(e){b=e.get?e.get(f):e[f]}else{b=null}this.set(g,b)}return this},updateContentWithValueObserver:function(){var a=this.contentValueKey?this.get("contentValueKey"):this.getDelegateProperty("contentValueKey",this.displayDelegate),b=this.get("content");if(!a||!b){return}var c=this.get("value");if(typeof b.setIfChanged===SC.T_FUNCTION){b.setIfChanged(a,c)}else{if(b[a]!==c){b[a]=c}}}.observes("value"),_control_content:null,_control_contentDidChange:function(){var b=this.get("content");if(this._control_content===b){return}var c=this.contentPropertyDidChange,a=this._control_content;if(a&&a.removeObserver){a.removeObserver("*",this,c)}this._control_content=b;if(b&&b.addObserver){b.addObserver("*",this,c)}this.contentPropertyDidChange(b,"*")}.observes("content"),_control_contentValueKeyDidChange:function(){this.contentPropertyDidChange(this.get("content"),"*")}.observes("contentValueKey")};sc_require("mixins/content_value_support");sc_require("system/string");SC.AUTO_CONTROL_SIZE="__AUTO__";SC.JUMBO_CONTROL_SIZE="sc-jumbo-size";SC.HUGE_CONTROL_SIZE="sc-huge-size";SC.LARGE_CONTROL_SIZE="sc-large-size";SC.REGULAR_CONTROL_SIZE="sc-regular-size";SC.SMALL_CONTROL_SIZE="sc-small-size";SC.TINY_CONTROL_SIZE="sc-tiny-size";SC.Control=SC.mixin(SC.clone(SC.ContentValueSupport),{isControl:YES,isSelected:NO,isSelectedBindingDefault:SC.Binding.oneWay().bool(),isActive:NO,isActiveBindingDefault:SC.Binding.oneWay().bool(),fieldKey:null,fieldLabel:null,errorLabel:function(){var a,e,c,b;if(a=this.get("fieldLabel")){return a}e=this.get("fieldKey")||this.constructor.toString();c=e?SC.String.capitalize(SC.String.humanize(e)):"";b=SC.String.locWithDefault("FieldKey."+e,c);return SC.String.locWithDefault("ErrorLabel."+e,b)}.property("fieldLabel","fieldKey").cacheable(),controlSize:SC.REGULAR_CONTROL_SIZE,displayProperties:["isEnabled","isSelected","isActive","controlSize"],_CONTROL_TMP_CLASSNAMES:{},renderMixin:function(b,j){var e=this.get("isSelected"),c=!this.get("isEnabled"),f=this._CONTROL_TMP_CLASSNAMES;f.mixed=e===SC.MIXED_STATE;f.sel=e&&(e!==SC.MIXED_STATE);f.active=this.get("isActive");var g=this.get("controlSize");if(!g){g=SC.REGULAR_CONTROL_SIZE}if(j){b.setClass(f);if(!this.get("renderDelegate")){b.addClass(g)}}else{b.$().setClass(f);if(!this.get("renderDelegate")){b.$().addClass(g)}}if(!j&&this.$input){var a=this.$input();if(a.attr("type")!=="radio"){this.$input().attr("disabled",c)}}}});SC.Editable={isEditable:NO,isEditing:NO,beginEditing:function(){if(!this.get("isEditable")){return NO}if(this.get("isEditing")){return YES}this.beginPropertyChanges();this.set("isEditing",YES);this.becomeFirstResponder();this.endPropertyChanges();return YES},discardEditing:function(){return !this.get("isEditing")},commitEditing:function(){if(!this.get("isEditing")){return YES}this.set("isEditing",NO);this.resignFirstResponder();return YES}};SC.ALIGN_JUSTIFY="justify";SC.FlowedLayout={layoutDirection:SC.LAYOUT_HORIZONTAL,autoResize:YES,shouldResizeWidth:YES,shouldResizeHeight:YES,align:SC.ALIGN_LEFT,canWrap:YES,defaultFlowSpacing:{left:0,bottom:0,top:0,right:0},flowPadding:{left:0,bottom:0,right:0,top:0},_scfl_validFlowPadding:function(){var b=this.get("flowPadding")||{},a={};a.left=b.left||0;a.top=b.top||0;a.bottom=b.bottom||0;a.right=b.right||0;return a}.property("flowPadding").cacheable(),concatenatedProperties:["childMixins"],initMixin:function(){this.invokeOnce("_scfl_tile")},_scfl_childViewsDidChange:function(a){this.invokeOnce("_scfl_tile")}.observes("childViews"),_scfl_layoutPropertyDidChange:function(){this.invokeOnce("_scfl_tile")}.observes("layoutDirection","align","flowPadding","canWrap","defaultFlowSpacing"),layoutDidChangeFor:function(j){var b=j._scfl_lastLayout,a=j.get("layout"),e=j.get("frame");if(!b){return arguments.callee.base.apply(this,arguments)}var g=YES;if(b.left&&b.left!==a.left){g=NO}else{if(b.top&&b.top!==a.top){g=NO}else{if(!j.get("fillWidth")&&b.width&&b.width!==a.width){g=NO}else{if(!b.width&&!j.get("fillWidth")&&e.width!==j._scfl_lastFrame.width){g=NO}else{if(!j.get("fillHeight")&&b.height&&b.height!==a.height){g=NO}else{if(!b.height&&!j.get("fillHeight")&&e.height!==j._scfl_lastFrame.height){g=NO}}}}}}if(g){return arguments.callee.base.apply(this,arguments)}this.invokeOnce("_scfl_tile");arguments.callee.base.apply(this,arguments)},observeChildLayout:function(a){if(a._scfl_isBeingObserved){return}a._scfl_isBeingObserved=YES;a.addObserver("flowSpacing",this,"_scfl_layoutPropertyDidChange");a.addObserver("isVisible",this,"_scfl_layoutPropertyDidChange");a.addObserver("useAbsoluteLayout",this,"_scfl_layoutPropertyDidChange");a.addObserver("calculatedWidth",this,"_scfl_layoutPropertyDidChange");a.addObserver("calculatedHeight",this,"_scfl_layoutPropertyDidChange");a.addObserver("startsNewRow",this,"_scfl_layoutPropertyDidChange");a.addObserver("isSpacer",this,"_scfl_layoutPropertyDidChange");a.addObserver("fillWidth",this,"_scfl_layoutPropertyDidChange");a.addObserver("fillHeight",this,"_scfl_layoutPropertyDidChange")},unobserveChildLayout:function(a){a._scfl_isBeingObserved=NO;a.removeObserver("flowSpacing",this,"_scfl_layoutPropertyDidChange");a.removeObserver("isVisible",this,"_scfl_layoutPropertyDidChange");a.removeObserver("useAbsoluteLayout",this,"_scfl_layoutPropertyDidChange");a.removeObserver("calculatedWidth",this,"_scfl_layoutPropertyDidChange");a.removeObserver("calculatedHeight",this,"_scfl_layoutPropertyDidChange");a.removeObserver("startsNewRow",this,"_scfl_layoutPropertyDidChange");a.removeObserver("isSpacer",this,"_scfl_layoutPropertyDidChange");a.removeObserver("fillWidth",this,"_scfl_layoutPropertyDidChange");a.removeObserver("fillHeight",this,"_scfl_layoutPropertyDidChange")},shouldIncludeChildInFlow:function(a,b){return b.get("isVisible")&&!b.get("useAbsoluteLayout")},flowSpacingForChild:function(a,b){var c=b.get("flowSpacing");if(SC.none(c)){c=this.get("defaultFlowSpacing")}if(SC.none(c)){c=0}if(SC.typeOf(c)===SC.T_NUMBER){c={left:c,right:c,bottom:c,top:c}}else{c.left=c.left||0;c.right=c.right||0;c.top=c.top||0;c.bottom=c.bottom||0}return c},flowSizeForChild:function(a,e){var c=e.get("calculatedWidth"),j=e.get("calculatedHeight");var g={},k=e.get("frame"),b=e.get("layout");e._scfl_lastFrame=k;if(c){g.width=c}else{g.width=k.width}if(j){g.height=j}else{g.height=k.height}if(e.get("isSpacer")){if(this.get("layoutDirection")===SC.LAYOUT_HORIZONTAL){g.width=b.minWidth||0}else{g.height=b.minHeight||0}}if(this.get("layoutDirection")===SC.LAYOUT_HORIZONTAL&&e.get("fillHeight")){g.height=b.minHeight||0}else{if(this.get("layoutDirection")===SC.LAYOUT_VERTICAL&&e.get("fillWidth")){g.width=b.minWidth||0}}if(b.width==undefined){e.adjust("width",k.width)}if(b.height==undefined){e.adjust("height",k.height)}return g},clippingFrame:function(){return{left:0,top:0,width:this.get("calculatedWidth"),height:this.get("calculatedHeight")}}.property("calculatedWidth","calculatedHeight"),_scfl_maxCollapsedRowLength:0,_scfl_totalCollapsedRowSize:0,_scfl_calculatedSizeDidChange:function(){if(this.get("autoResize")){if(this.get("layoutDirection")==SC.LAYOUT_VERTICAL){if(this.get("shouldResizeHeight")){this.adjust("minHeight",this.get("_scfl_maximumCollapsedRowLength"))}if(this.get("shouldResizeWidth")){this.adjust("minWidth",this.get("_scfl_totalCollapsedRowSize"))}}else{if(this.get("shouldResizeWidth")){this.adjust("minWidth",this.get("_scfl_maximumCollapsedRowLength"))}if(this.get("shouldResizeHeight")){this.adjust("minHeight",this.get("_scfl_totalCollapsedRowSize"))}}}}.observes("autoResize","shouldResizeWidth","_scfl_maximumCollapsedRowLength","_scfl_totalCollapsedRowSize","shouldResizeHeight"),_scfl_createPlan:function(){var f=this.get("layoutDirection"),a=this.get("_scfl_validFlowPadding"),e=this.get("frame");var c=(f===SC.LAYOUT_VERTICAL);var b={rows:undefined,maximumCollapsedRowLength:0,totalCollapsedRowSize:0,isVertical:f===SC.LAYOUT_VERTICAL,isHorizontal:f===SC.LAYOUT_HORIZONTAL,flowPadding:a,planStartPadding:a[c?"left":"top"],planEndPadding:a[c?"right":"bottom"],rowStartPadding:a[c?"top":"left"],rowEndPadding:a[c?"bottom":"right"],maximumRowLength:undefined,fitToPlanSize:undefined,align:this.get("align")};if(c){b.maximumRowLength=e.height-b.rowStartPadding-b.rowEndPadding;b.fitToPlanSize=e.width-b.planStartPadding-b.planEndPadding}else{b.maximumRowLength=e.width-b.rowStartPadding-b.rowEndPadding;b.fitToPlanSize=e.height-b.planStartPadding-b.planEndPadding}return b},_scfl_distributeChildrenIntoRows:function(e){var b=this.get("childViews"),a,j,c=b.length,f=e.isVertical,n=[],g;g=-1;j=0;while(j<c&&j!==g){g=j;var k={plan:e,rowLength:undefined,rowSize:undefined,shouldExpand:undefined,items:undefined,position:undefined};j=this._scfl_distributeChildrenIntoRow(b,j,k);n.push(k)}e.rows=n},_scfl_distributeChildrenIntoRow:function(f,t,n){var v,C=f.length,b=n.plan,j,a,e,c,w=[],p=0,q=b.isVertical,o,g,u=this.get("canWrap"),k=NO;var z=0;var B=n.plan.maximumRowLength;for(v=t;v<C;v++){j=f[v];k=k||(w.length>0&&j.get("startsNewRow"));if(!this.shouldIncludeChildInFlow(v,j)){continue}a=this.flowSizeForChild(v,j);e=this.flowSpacingForChild(v,j);c={width:a.width+e.left+e.right,height:a.height+e.top+e.bottom};g=c[q?"height":"width"];o=c[q?"width":"height"];if((k||(u&&p+g>B))&&w.length>0){break}var D={child:j,itemLength:g,itemSize:o,spacing:e,position:undefined,fillRow:q?j.get("fillWidth"):j.get("fillHeight"),isSpacer:j.get("isSpacer"),left:undefined,top:undefined,width:undefined,height:undefined};w.push(D);p+=g;z=Math.max(g,z)}n.rowLength=p;var A=u?z:n.rowLength;n.plan.maximumCollapsedRowLength=Math.max(A,n.plan.maximumCollapsedRowLength);n.items=w;return v},_scfl_positionChildrenInRows:function(e){var c=e.rows,b=c.length,a;for(a=0;a<b;a++){this._scfl_positionChildrenInRow(c[a])}},_scfl_positionChildrenInRow:function(p){var g=p.items,e=g.length,k,o,c,n=0,a=0,b,f=p.plan.align,j=YES;for(k=0;k<e;k++){o=g[k];if(o.isSpacer){a+=o.child.get("spaceUnits")||1}}if(f===SC.ALIGN_JUSTIFY){a+=e-1}b=Math.max(0,p.plan.maximumRowLength-p.rowLength)/a;c=0;if(a===0&&(f===SC.ALIGN_RIGHT||f===SC.ALIGN_BOTTOM)){c=p.plan.maximumRowLength-p.rowLength}else{if(a===0&&(f===SC.ALIGN_CENTER||f===SC.ALIGN_MIDDLE)){c=(p.plan.maximumRowLength/2)-(p.rowLength/2)}}c+=p.plan.rowStartPadding;for(k=0;k<e;k++){o=g[k];if(o.isSpacer){o.itemLength+=b*(o.child.get("spaceUnits")||1)}if(!o.fillRow){j=NO}n=Math.max(o.itemSize,n);o.position=c;c+=o.itemLength;if(f===SC.ALIGN_JUSTIFY&&k<e-1){c+=b}}p.shouldExpand=j;p.rowLength=c-p.plan.rowStartPadding;p.rowSize=n;p.plan.totalCollapsedRowSize+=p.rowSize},_scfl_positionRows:function(e){var n=e.rows,c=n.length,g,k,b,a=0,j=0,f;for(g=0;g<c;g++){if(n[g].shouldExpand){a++}j+=n[g].rowSize}f=e.fitToPlanSize-j;b=e.planStartPadding;for(g=0;g<c;g++){k=n[g];if(k.shouldExpand&&f>0){k.rowSize+=f/a;a--}k.position=b;b+=k.rowSize}},_scfl_applyPlan:function(k){var t=k.rows,b,c,q,f=0,o=0,j,a,e,p,g,n=k.isVertical;c=t.length;for(b=0;b<c;b++){q=t[b];f=Math.max(f,q.rowLength);o+=q.rowSize;j=q.items;e=j.length;for(a=0;a<e;a++){p=j[a];p.child.beginPropertyChanges();g={};g.left=p.spacing.left+(n?q.position:p.position);g.top=p.spacing.top+(n?p.position:q.position);if(p.fillRow){g[n?"width":"height"]=q.rowSize}if(p.isSpacer){g[n?"height":"width"]=p.itemLength}if(g.width!==undefined){g.width-=p.spacing.left+p.spacing.right}if(g.height!==undefined){g.height-=p.spacing.top+p.spacing.bottom}p.child.adjust(g);p.child._scfl_lastLayout=g;p.child.endPropertyChanges()}}o+=k.planStartPadding+k.planEndPadding;f+=k.rowStartPadding+k.rowEndPadding;this.beginPropertyChanges();this.set("calculatedHeight",n?f:o);this.set("calculatedWidth",n?o:f);this.set("_scfl_maximumCollapsedRowLength",k.maximumCollapsedRowLength);this.set("_scfl_totalCollapsedRowSize",k.totalCollapsedRowSize);this.endPropertyChanges()},_scfl_tile:function(){var g=this._scfl_createPlan();this._scfl_distributeChildrenIntoRows(g);this._scfl_positionChildrenInRows(g);this._scfl_positionRows(g);this._scfl_applyPlan(g);var e=this._scfl_isObserving||SC.CoreSet.create(),c=SC.CoreSet.create();var f=this.get("childViews"),b=f.length,a,j;for(a=0;a<b;a++){j=f[a];if(!e.contains(j)){this.observeChildLayout(j)}else{e.remove(j)}c.add(j)}b=e.length;for(a=0;a<b;a++){this.unobserveChildLayout(e[a])}},_scfl_frameDidChange:function(){if(this._scfl_isChangingSize){return}var b=this.get("frame"),a=this._scfl_lastFrameSize||{};this._scfl_lastFrameSize=SC.clone(b);if(a.width==b.width&&a.height==b.height){return}this.invokeOnce("_scfl_tile")}.observes("frame"),destroyMixin:function(){var c=this._scfl_isObserving;if(!c){return}var b=c.length,a;for(a=0;a<b;a++){this.unobserveChildLayout(c[a])}},reorder:function(b){if(!SC.typeOf(b)===SC.T_ARRAY){b=arguments}var c=b.length,e=this.childViews,a;this.beginPropertyChanges();while(c-->0){a=b[c];e.removeObject(a);e.unshiftObject(a)}this.endPropertyChanges();this._scfl_childViewsDidChange();return this}};SC.Gesturable={concatenatedProperties:["gestures"],gestures:[],initMixin:function(){this.createGestures()},createGestures:function(){var f=this.get("gestures"),b,a=f.length,c,e=[];for(b=0;b<a;b++){if(SC.typeOf(f[b])===SC.T_STRING){c=this.get(f[b])}else{c=f[b]}if(!c){throw"Could not find gesture named '"+f[b]+"' on view."}if(c.isClass){c=c.create({view:this})}if(SC.typeOf(f[b])===SC.T_STRING){this[f[b]]=c}e.push(c)}this.set("gestures",e)},touchStart:function(a){this.gestureTouchStart(a)},touchesDragged:function(a,b){this.gestureTouchesDragged(a,b)},touchEnd:function(a){this.gestureTouchEnd(a)},gestureTouchStart:function(f){f.isInteresting=0;var e=this.get("gestures"),b,a=e.length,c;for(b=0;b<a;b++){c=e[b];c.unassignedTouchDidStart(f)}},gestureTouchesDragged:function(c,f){var j=this.get("gestures"),b,a=j.length,e;for(b=0;b<a;b++){e=j[b];e.unassignedTouchesDidChange(c,f)}},gestureTouchEnd:function(f){var e=this.get("gestures"),b,a=e.length,c;for(b=0;b<a;b++){c=e[b];c.unassignedTouchDidEnd(f)}}};SC.InlineEditable={isInlineEditable:YES,isEditable:YES,exampleEditor:SC.InlineTextFieldView,isEditing:NO,inlineEditorDelegate:SC.InlineTextFieldDelegate,_editor:null,beginEditing:function(){var a;a=this.delegateFor("inlineEditorShouldBeginEditing",this.inlineEditorDelegate);if(a&&!a.inlineEditorShouldBeginEditing(this,this.get("value"))){return NO}this._editor=this.invokeDelegateMethod(this.inlineEditorDelegate,"acquireEditor",this);if(this._editor){return this._editor.beginEditing(this)}else{return NO}},commitEditing:function(){return this._editor?this._editor.commitEditing():NO},discardEditing:function(){return this._editor?this._editor.discardEditing():NO},inlineEditorShouldBeginEditing:function(){return !this.isEditing&&this.isEditable},inlineEditorWillBeginEditing:function(b,c,a){b.set("value",this.get("value"))},inlineEditorDidBeginEditing:function(b,c,a){this.set("isEditing",YES)},inlineEditorWillCommmitEditing:function(b,c,a){if(this.inlineEditorWillEndEditing){this.inlineEditorWillEndEditing(b,c)}},inlineEditorDidCommitEditing:function(b,c,a){a.setIfChanged("value",c);if(this.inlineEditorDidEndEditing){this.inlineEditorDidEndEditing(b,c)}this._endEditing()},inlineEditorWillDiscardEditing:function(b,a){if(this.inlineEditorWillEndEditing){this.inlineEditorWillEndEditing(b,this.get("value"))}},inlineEditorDidDiscardEditing:function(b,a){if(this.inlineEditorDidEndEditing){this.inlineEditorDidEndEditing(b,this.get("value"))}this._endEditing()},_endEditing:function(){if(this._editor){this.invokeDelegateMethod(this.inlineEditorDelegate,"releaseEditor",this._editor);this._editor=null}this.set("isEditing",NO)}};SC.InlineEditor={isInlineEditor:YES,isEditing:NO,inlineEditorDelegate:null,_target:null,beginEditing:function(b){if(this.get("isEditing")||!b){return NO}var a,c;c=this._target=b;a=this.delegateFor("inlineEditorWillBeginEditing",this.inlineEditorDelegate,c);if(a){a.inlineEditorWillBeginEditing(this,this.get("value"),c)}this.set("isEditing",YES);this.invokeLast(this._callDidBegin);return YES},_callDidBegin:function(){var b=this._target,a;a=this.delegateFor("inlineEditorDidBeginEditing",this.inlineEditorDelegate,b);if(a){a.inlineEditorDidBeginEditing(this,this.get("value"),b)}},commitEditing:function(){if(!this.get("isEditing")){return NO}var a,b=this._target;a=this.delegateFor("inlineEditorShouldCommitEditing",this.inlineEditorDelegate,b);if(a&&!a.inlineEditorShouldCommitEditing(this,this.get("value"),b)){return NO}a=this.delegateFor("inlineEditorWillCommitEditing",this.inlineEditorDelegate,b);if(a){a.inlineEditorWillCommitEditing(this,this.get("value"),b)}this._endEditing();a=this.delegateFor("inlineEditorDidCommitEditing",this.inlineEditorDelegate,b);if(a){a.inlineEditorDidCommitEditing(this,this.get("value"),b)}return YES},discardEditing:function(){if(!this.get("isEditing")){return NO}var a,b=this._target;a=this.delegateFor("inlineEditorShouldDiscardEditing",this.inlineEditorDelegate,b);if(a&&!a.inlineEditorShouldDiscardEditing(this,b)){return NO}a=this.delegateFor("inlineEditorWillDiscardEditing",this.inlineEditorDelegate,b);if(a){a.inlineEditorWillDiscardEditing(this,b)}this._endEditing();a=this.delegateFor("inlineEditorDidDiscardEditing",this.inlineEditorDelegate,b);if(a){a.inlineEditorDidDiscardEditing(this,b)}return YES},_endEditing:function(){this.set("isEditing",NO);this._target=null}};SC.InlineEditorDelegate={acquireEditor:function(a){},releaseEditor:function(a){},inlineEditorShouldBeginEditing:function(a,b){},inlineEditorWillBeginEditing:function(b,c,a){},inlineEditorDidBeginEditing:function(b,c,a){},inlineEditorShouldCommitEditing:function(b,c,a){},inlineEditorWillCommitEditing:function(b,c,a){},inlineEditorDidCommitEditing:function(b,c,a){},inlineEditorShouldDiscardEditing:function(b,a){},inlineEditorWillDiscardEditing:function(b,a){},inlineEditorDidDiscardEditing:function(b,a){},inlineEditorWillEndEditing:function(b,c,a){},inlineEditorDidEndEditing:function(b,c,a){}};SC.SCALE_NONE="none";SC.FILL="fill";SC.FILL_PROPORTIONALLY="fillProportionally";SC.BEST_FIT="fitBest";SC.BEST_FIT_DOWN_ONLY="fitBestDown";SC.InnerFrame={align:SC.ALIGN_CENTER,innerFrameForSize:function(a,c,k,b){var f=this.get("align"),e=this.get("scale"),j,g,n;n={x:0,y:0,width:k,height:b};if(e===SC.FILL){return n}j=k/a;g=b/c;switch(e){case SC.FILL_PROPORTIONALLY:e=j>g?j:g;break;case SC.BEST_FIT:e=j<g?j:g;break;case SC.BEST_FIT_DOWN_ONLY:if((a>k)||(c>b)){e=j<g?j:g}else{e=1}break;case SC.SCALE_NONE:e=1;break;default:if(isNaN(window.parseFloat(e))||(window.parseFloat(e)<=0)){SC.Logger.warn("SC.InnerFrame: The scale '%@' was not understood.  Scale must be one of SC.FILL, SC.FILL_PROPORTIONALLY, SC.BEST_FIT, SC.BEST_FIT_DOWN_ONLY or a positive number greater than 0.00.".fmt(e));return n}}a*=e;c*=e;n.width=Math.round(a);n.height=Math.round(c);switch(f){case SC.ALIGN_LEFT:n.x=0;n.y=(b/2)-(c/2);break;case SC.ALIGN_RIGHT:n.x=k-a;n.y=(b/2)-(c/2);break;case SC.ALIGN_TOP:n.x=(k/2)-(a/2);n.y=0;break;case SC.ALIGN_BOTTOM:n.x=(k/2)-(a/2);n.y=b-c;break;case SC.ALIGN_TOP_LEFT:n.x=0;n.y=0;break;case SC.ALIGN_TOP_RIGHT:n.x=k-a;n.y=0;break;case SC.ALIGN_BOTTOM_LEFT:n.x=0;n.y=b-c;break;case SC.ALIGN_BOTTOM_RIGHT:n.x=k-a;n.y=b-c;break;default:if(f!==SC.ALIGN_CENTER&&f!==SC.ALIGN_MIDDLE){SC.Logger.warn("SC.InnerFrame: The align '%@' was not understood.  Align must be one of SC.ALIGN_CENTER/SC.ALIGN_MIDDLE, SC.ALIGN_LEFT, SC.ALIGN_RIGHT, SC.ALIGN_TOP, SC.ALIGN_BOTTOM, SC.ALIGN_TOP_LEFT, SC.ALIGN_TOP_RIGHT, SC.ALIGN_BOTTOM_LEFT or SC.ALIGN_BOTTOM_RIGHT.".fmt(f))}n.x=(k/2)-(a/2);n.y=(b/2)-(c/2)}return n},scale:SC.FILL};SC.StaticLayout={hasStaticLayout:YES};SC.Validatable={initMixin:function(){this._validatable_validatorDidChange()},validator:null,errorLabel:null,isValid:function(){return SC.typeOf(this.get("value"))!==SC.T_ERROR}.property("value"),ownerForm:null,performValidate:function(c){var a=SC.VALIDATE_OK;if(this._validator){var b=this.get("ownerForm");if(c){a=this._validator.validatePartial(b,this);if((a==SC.VALIDATE_NO_CHANGE)&&(this._validator.validateChange(b,this)==SC.VALIDATE_OK)){a=SC.VALIDATE_OK}}else{a=this._validator.validateChange(b,this)}}return a},performValidateSubmit:function(){return this._validator?this._validator.validateSubmit(this.get("ownerForm"),this):SC.VALIDATE_OK},performValidateKeyDown:function(a){var b=a.getCharString();if(!b){return YES}return this._validator?this._validator.validateKeyDown(this.get("ownerForm"),this,b):YES},validatorObject:function(){return this._validator}.property(),validateSubmit:function(){return this.performValidateSubmit()},objectForFieldValue:function(b,a){return this._validator?this._validator.objectForFieldValue(b,this.get("ownerForm"),this):b},fieldValueForObject:function(a){return this._validator?this._validator.fieldValueForObject(a,this.get("ownerForm"),this):a},_validatable_displayObserver:function(){this.displayDidChange()}.observes("isValid"),renderMixin:function(a){a.setClass("invalid",!this.get("isValid"))},_validatable_validatorDidChange:function(){var a=this.get("ownerForm");var b=SC.Validator.findFor(a,this,this.get("validator"));if(b!=this._validator){this.propertyWillChange("validatorObject");if(this._validator){this._validator.detachFrom(a,this)}this._validator=b;if(this._validator){this._validator.attachTo(a,this)}this.propertyDidChange("validatorObject")}}.observes("validator","ownerForm")};SC.RenderDelegate={create:function(){var c=SC.beget(this);var b,a=arguments.length;for(b=0;b<a;b++){c.mixin(arguments[b])}return c},reopen:function(b){var c,a;for(c in b){a=b[c];if(!b.hasOwnProperty(c)){continue}if(typeof a==="function"&&a!==this[c]){a.base=this[c]||SC.K}if(a&&a.isEnhancement&&a!==this[c]){a=SC._enhance(this[c]||SC.K,a)}this[c]=a}},get:function(a){return this[a]},getPropertyFor:function(b,a){if(this[a+"For"]){return this[a+"For"](b,a)}return this[a]},className:undefined,render:function(b,a){},update:function(b,a){}};SC.RenderDelegate.extend=SC.RenderDelegate.create;SC.RenderDelegate.mixin=SC.RenderDelegate.reopen;sc_require("render_delegates/render_delegate");SC.BaseTheme.canvasImageRenderDelegate=SC.RenderDelegate.create({className:"canvasImage",render:function(e,b){var c=e.get("width")||0,a=e.get("height")||0;b.attr("width",c);b.attr("height",a)},update:function(a,f){var j=f[0],n=a.get("image"),e=a.get("frame"),q=e.width,o=e.height,p=a.get("innerFrame"),t=a.get("backgroundColor"),v=a.get("renderState"),b;var u=![p.x,p.y,p.width,p.height].isEqual(v._lastInnerFrameValues),k=![j.width,j.height].isEqual(v._lastElemSizeValues),g=a.didChangeFor("canvasImageRenderDelegate","backgroundColor"),c=a.didChangeFor("canvasImageRenderDelegate","image")||(n&&n.complete)!==v._lastImageComplete;if(k||u||g||c){if(j&&j.getContext){j.height=o;j.width=q;b=j.getContext("2d");b.clearRect(0,0,q,o);if(t){b.fillStyle=t;b.fillRect(0,0,q,o)}if(n&&n.complete){b.drawImage(n,Math.floor(p.x),Math.floor(p.y),Math.floor(p.width),Math.floor(p.height))}}v._lastInnerFrameValues=[p.x,p.y,p.width,p.height];v._lastElemSizeValues=[j.width,j.height];v._lastImageComplete=n&&n.complete}}});sc_require("render_delegates/render_delegate");SC.BaseTheme.containerRenderDelegate=SC.RenderDelegate.create({render:function(b,a){},update:function(){}});sc_require("render_delegates/render_delegate");SC.RenderDelegate.reopen({sizes:[SC.TINY_CONTROL_SIZE,SC.SMALL_CONTROL_SIZE,SC.REGULAR_CONTROL_SIZE,SC.LARGE_CONTROL_SIZE,SC.HUGE_CONTROL_SIZE,SC.JUMBO_CONTROL_SIZE],sizeFor:function(g){var f=g.get("controlSize"),c,b,a;if(f){if(!this[f]){this[f]={}}c=this[f];if(!c.name){c.name=f}return c}var e=g.get("frame");if(!e){c=this["sc-regular-size"];if(!c){c=this["sc-regular-size"]={}}if(!c.name){c.name="sc-regular-size"}return c}for(b=0;b<a;b++){key=sizes[b];c=this[key];if(!c){continue}if((c.width===undefined&&c.height===undefined&&c.minHeight===undefined&&c.minWidth===undefined&&c.maxHeight===undefined&&c.maxWidth===undefined)||(c.width!==undefined&&e.width!==c.width)||(c.minWidth!==undefined&&e.width<c.minWidth)||(c.maxWidth!==undefined&&e.width>c.maxWidth)||(c.height!==undefined&&e.height!==c.height)||(c.minHeight!==undefined&&e.height<c.minHeight)||(c.maxHeight!==undefined&&e.height<c.maxHeight)){continue}if(!c.name){c.name=key}return c}c=this["sc-regular-size"];if(!c){c=this["sc-regular-size"]={}}if(!c.name){c.name="sc-regular-size"}return c},addSizeClassName:function(c,b){var a=this.sizeFor(c);if(a){b.addClass(a.name)}},updateSizeClassName:function(c,a){var b=this.sizeFor(c);if(b){a.addClass(b.name)}},getPropertyFor:function(c,a){var b=this.sizeFor(c);if(b){if(b[a+"For"]){return b[a+"For"](c,a)}else{if(b[a]!==undefined){return b[a]}}}if(this[a+"For"]){return this[a+"For"]}return this[a]}});sc_require("render_delegates/render_delegate");SC.BaseTheme.imageRenderDelegate=SC.RenderDelegate.create({className:"image",render:function(g,c){var f=g.get("image"),b=g.get("imageValue"),e=g.get("type")||SC.IMAGE_TYPE_URL,a=g.get("toolTip");c=c.begin("img");c.attr("src",f.src);if(b&&e===SC.IMAGE_TYPE_CSS_CLASS){c.addClass(b);this._last_class=b}if(a){c.attr("title",a);c.attr("alt",a)}c.addStyle(this.imageStyles(g));c=c.end()},update:function(f,a){var e=f.get("image"),c=f.get("imageValue"),b=f.get("toolTip");a=a.find("img");a.attr("src",e.src);if(c!==this._last_class){a.setClass(this._last_class,NO)}if(c){a.addClass(c);this._last_class=c}if(b){a.attr("title",b);a.attr("alt",b)}a.css(this.imageStyles(f))},imageStyles:function(b){var a=b.get("innerFrame");return{position:"absolute",left:Math.round(a.x),top:Math.round(a.y),width:Math.round(a.width),height:Math.round(a.height)}}});sc_require("render_delegates/render_delegate");SC.BaseTheme.labelRenderDelegate=SC.RenderDelegate.create({className:"label",render:function(c,b){this.addSizeClassName(c,b);b.addStyle({fontWeight:c.get("fontWeight")||null,textAlign:c.get("textAlign")||null});b.setClass("ellipsis",c.get("needsEllipsis")||NO);b.setClass("icon",c.get("icon")||NO);var a=this._htmlForTitleAndIcon(c);b.push(a);c.get("renderState")._lastHTMLForTitleAndIcon=a},update:function(c,a){this.updateSizeClassName(c,a);a.css({fontWeight:c.get("fontWeight")||null,textAlign:c.get("textAlign")||null});a.setClass("ellipsis",c.get("needsEllipsis")||NO);var b=this._htmlForTitleAndIcon(c);if(c.get("renderState")._lastHTMLForTitleAndIcon!==b){a.html(b);c.get("renderState")._lastHTMLForTitleAndIcon=b}},_htmlForTitleAndIcon:function(f){var e=f.get("title"),c=f.get("hint"),b=f.get("escapeHTML"),a=f.get("icon")||"";if(e&&b){e=SC.RenderContext.escapeHTML(e)}if(c&&!e){if(b){c=SC.RenderContext.escapeHTML(c)}e="<span class='sc-hint'>"+c+"</span>"}if(a){if(a.indexOf("/")>=0){a='<img src="'+a+'" alt="" class="icon" />'}else{a='<img src="'+SC.BLANK_IMAGE_URL+'" alt="" class="icon '+a+'" />'}}return a+e}});sc_require("core");SC.Benchmark={verbose:NO,enabled:YES,events:{},stats:{},globalStartTime:null,addEvent:function(a,b){if(!b){b=new Date().getTime()}this.events[a]=b},start:function(b,a,f,e){if(!this.enabled){return}var g=(f||Date.now()),c;if(a){c=this._subStatFor(b,a)}else{c=this._statFor(b)}if(e&&c._starts.length>0){c._starts.push("ignore")}else{c._starts.push(g)}c._times.push({start:g,_subStats:{}});return b},end:function(c,b,g){var f;if(!this.enabled){return}if(b){f=this._subStatFor(c,b)}else{f=this._statFor(c)}var j=f._starts.pop();if(!j){SC.Logger.log('SC.Benchmark "%@" ended without a matching start.  No information was saved.'.fmt(c));return}if(j=="ignore"){return}var a=(g||Date.now());var e=a-j;f._times[f._times.length-1].end=a;f._times[f._times.length-1].dur=e;f.amt+=e;f.runs++;if(this.verbose){this.log(c)}},setGlobalStartTime:function(a){this.globalStartTime=a},bench:function(f,e,a){if(!e){e="bench%@".fmt(this._benchCount++)}if(!a){a=1}var b;while(--a>=0){var c=SC.Benchmark.start(e);b=f();SC.Benchmark.end(c)}return b},install:function(a,e,b){a["b__"+e]=a[e];var c=a["b__"+e];a[e]=function(){var g="%@(%@)".fmt(e,$A(arguments).join(", "));SC.Benchmark.start(g,b);var f=c.apply(this,arguments);SC.Benchmark.end(g);return f}},restore:function(a,b){a[b]=a["b__"+b]},report:function(c){if(c){return this._genReport(c)}var b=[];for(var a in this.stats){if(!this.stats.hasOwnProperty(a)){continue}b.push(this._genReport(a))}return b.join("\n")},timelineReport:function(a){a=(a)?"SproutCore Application":a;var b=[a,"User-Agent: %@".fmt(navigator.userAgent),"Report Generated: %@ (%@)".fmt(new Date().toString(),Date.now()),""];var e=this._compileChartData(true);for(var c=0;c<e.length;c++){if(e[c][4]){b.push(this._timelineGenSubReport(e[c]))}else{b.push(this._timelineGenReport(e[c]))}}return b.join("\n")},getTimelineChartContent:function(){var p=this._compileChartData(false);var j=p.length;if(j===0){return}var c=this.globalStartTime?this.globalStartTime:p[0][1];var e=p[j-1][2]-c;var u=25+j*30;var z=Math.ceil(e/200)+1;var A=z*50;var q=10,B=300;var v="<div class = 'sc-benchmark-timeline-chart' style = 'position:relative;'>";v+="<div class = 'sc-benchmark-top'></div>";for(var w=0;w<z;w++){v+="<div class = 'sc-benchmark-tick' style = '";v+="left: "+(q+w*50)+"px; ";v+="height: "+u+"px;";v+="'></div>";v+="<div class = 'sc-benchmark-tick-label' style = '";v+="left: "+(q+w*50)+"px; ";v+="'>"+(w*200)+"ms</div>"}for(w=0;w<j;w++){v+="<div class = 'sc-benchmark-row ";v+=(w%2===0)?"even":"odd";v+="' style = '";v+="top: "+(50+(w*30))+"px; ";v+="'></div>";var n=document.createElement("div");var g=p[w][1];var f=p[w][2];var a=p[w][3];v+="<div class = 'sc-benchmark-bar' style = '";v+="left:"+(q+((g-c)/4))+"px; width: "+((a/4))+"px;";v+="top: "+(28+(w*30))+"px;";v+="' title = 'start: "+(g-c)+" ms, end: "+(f-c)+" ms, duration: "+a+" ms'";v+=">";v+="&nbsp;"+p[w][0]+" <span class='sc-benchmark-emphasis'>";v+=a+"ms (start: "+(g-c)+"ms)";v+="</span>";v+="</div>"}var b=this.events,o=0;for(w in b){var k=b[w]-c;v+="<div class = 'sc-benchmark-event idx"+(o%10)+"' style = '";v+="left: "+(q+k/4)+"px; height: "+u+"px; top: 20px;";v+="' title = '"+w+": "+k+"'></div>";o++}v+="</div>";return{html:v,totalCapturedTime:e,pointsCaptured:j,width:A+q+B,height:u}},getTimelineChartView:function(){var a=SC.ScrollView.create({contentView:SC.StaticContentView.extend({}),reload:function(){var b=SC.Benchmark.getTimelineChartContent();this.contentView.set("content",b.html);this.contentView.adjust({width:b.width,height:b.height});this.chartContent=b;SC.RunLoop.invokeLater(SC.Benchmark,function(){this.contentView.notifyPropertyChange("frame")})}});a.reload();return a},timelineChart:function(a){SC.RunLoop.begin();var c=0;this.hideChart();var b=this.getTimelineChartView();var f=b.chartContent.pointsCaptured,e=b.chartContent.totalCapturedTime;this._benchmarkChart=SC.Pane.create({classNames:["sc-benchmark-pane"],layout:{left:20,right:20,bottom:20,top:20},childViews:["title","exit"],exit:SC.ButtonView.extend({layout:{right:20,top:20,width:100,height:30},title:"Hide Chart",target:this,action:"hideChart"}),title:SC.LabelView.extend({classNames:["sc-benchmark-title"],layout:{left:20,top:23,right:200,height:30},value:((a)?a:"SproutCore Application")+(" - Total Captured Time: "+e+" ms - Points Captured: "+f),fontWeight:"bold"})}).append();b.set("layout",{left:20,top:60,bottom:20,right:20});this._benchmarkChart.appendChild(b);SC.RunLoop.end()},hideChart:function(){if(this._benchmarkChart){this._benchmarkChart.remove();this._benchmarkChart=null}return YES},tryToPerform:function(b,a){if(this[b]){return this[b](a)}return NO},log:function(e){var c=this.report(e).split("\n"),b=c.length,a;for(a=0;a<b;a++){SC.Logger.log(c[a])}},startProfile:function(a){if(!this.enabled){return}SC.Logger.profile(a)},endProfile:function(a){if(!this.enabled){return}SC.Logger.profileEnd(a)},loadPreloadEvents:function(){var g=SC.benchmarkPreloadEvents,f=[],b,a,c;if(typeof webkitPerformnce!=="undefined"){SC.mixin(g,webkitPerformane.timing)}if(!this.globalStartTime){var e=["navigation","navigationStart","headStart"];a=e.length;for(b=0;b<a;b++){if(g[e[b]]){this.globalStartTime=g[e[b]];break}}}this.javascriptStartTime=g.headStart;SC.mixin(this.events,g);this._hasLoadedPreloadEvents=true},_loadBenchmarksFromEvents:function(){if(!this._hasLoadedPreloadEvents){this.loadPreloadEvents()}var b=this.events;for(var a in b){if(a.substr(-3)!=="End"){continue}var c=a.substr(0,a.length-3);if(!b[c+"Start"]){continue}SC.Benchmark.start(c,undefined,b[c+"Start"]);SC.Benchmark.end(c,undefined,b[c+"End"]);delete b[c+"Start"];delete b[c+"End"]}},_compileChartData:function(n){this._loadBenchmarksFromEvents();var p=[],a;for(var q in this.stats){var f=this.stats[q];for(var g=0;g<f._times.length;g++){var t=f._times[g];a=(f._times.length>1)?(g+1)+" - "+q:q;p.push([a,t.start,t.end,t.dur,false]);if(n){var b=t._subStats;for(var c in b){var o=b[c];for(var e=0;e<o._times.length;e++){var u=o._times[e];a=(o._times.length>1)?(e+1)+" - "+c:c;p.push([a,u.start,u.end,u.dur,true])}}}}}p.sort(function(k,j){if(k[1]<j[1]){return -1}else{if(k[1]==j[1]){if(k[3]&&!j[3]){return -1}if(!k[3]&&j[3]){return 1}return 0}}return 1});return p},_genReport:function(a){var b=this._statFor(a);var e=(b.runs>0)?(Math.floor(b.amt*1000/b.runs)/1000):0;var c=b._times[b._times.length-1];return"BENCH %@ msec: %@ (%@x); latest: %@".fmt(e,(b.name||a),b.runs,c.end-c.start)},_timelineGenReport:function(a){if(this.globalStartTime){return"BENCH start: %@ msec, duration: %@ msec,  %@".fmt((a[1]-this.globalStartTime),a[3],a[0])}else{return"BENCH duration: %@ msec, %@".fmt(a[3],a[0])}},_timelineGenSubReport:function(a){if(this.globalStartTime){return"   CHECKPOINT BENCH start: %@ msec, duration: %@ msec,  %@".fmt((a[1]-this.globalStartTime),a[3],a[0])}else{return"   CHECKPOINT BENCH duration: %@ msec, %@".fmt(a[3],a[0])}},_subStatFor:function(e,c){var f=this.stats[c]._times.length;if(f===0){return}var a=this.stats[c]._times[this.stats[c]._times.length-1]._subStats;var b=a[e];if(!b){a[e]={runs:0,amt:0,name:e,_starts:[],_times:[]};b=a[e]}return b},_statFor:function(b){var a=this.stats[b];if(!a){a=this.stats[b]={runs:0,amt:0,name:b,_starts:[],_times:[]};a=this.stats[b]}return a},reset:function(){this.stats={}},_bench:function(b,a){SC.Benchmark.bench(b,a,1)},_benchCount:1};SC.Benchmark=SC.Benchmark;SC.Task=SC.Object.extend({run:function(a){}});sc_require("tasks/task");SC.TaskQueue=SC.Task.extend({init:function(){var a=this;this._doIdleEntry=function(){a._idleEntry()};this._tasks=[]},runWhenIdle:NO,runLimit:50,interval:50,isRunning:NO,minimumIdleDuration:500,_tasks:null,hasTasks:function(){return this._tasks.length>0}.property("taskCount").cacheable(),taskCount:function(){return this._tasks.length}.property().cacheable(),push:function(a){this._tasks.push(a);this.notifyPropertyChange("taskCount")},next:function(){if(this._tasks.length<1){return null}var a=this._tasks.shift();this.notifyPropertyChange("taskCount");return a},_taskCountDidChange:function(){this._setupIdle()}.observes("taskCount"),_setupIdle:function(){if(this.get("runWhenIdle")&&!this._idleIsScheduled&&this.get("taskCount")>0){setTimeout(this._doIdleEntry,this.get("interval"));this._idleIsScheduled=YES}},_idleEntry:function(){this._idleIsScheduled=NO;var a=SC.RunLoop.lastRunLoopEnd;if(Date.now()-a>this.get("minimumIdleDuration")){SC.run(this.run,this);SC.RunLoop.lastRunLoopEnd=a}this._setupIdle()},run:function(a){this.set("isRunning",YES);if(!a){a=this.get("runLimit")}var b,c=Date.now();while(b=this.next()){b.run(this);if(Date.now()-c>a){break}}this.set("isRunning",NO)}});SC.backgroundTaskQueue=SC.TaskQueue.create({runWhenIdle:YES});sc_require("system/task_queue");SC.chance={preload_task:SC.Task.create({run:function(e){var g=SC.chance.bank,c,b=g.length,a=SC.chance.images;for(c=0;c<b;c++){if(a.length<1){return SC.chance.didPreloadImages()}var f=a.pop();g[c].className=f}setTimeout(function(){SC.run(function(){SC.backgroundTaskQueue.push(SC.chance.preload_task)})},0)}}),images:[],bank:[],PRELOAD_CONCURRENCY:50,preloadImages:function(){if(window.CHANCE_SLICES){this.images=window.CHANCE_SLICES}var e=this.bank,a,b=this.PRELOAD_CONCURRENCY;for(a=0;a<b;a++){var c=document.createElement("div");document.body.appendChild(c);e.push(c)}SC.run(function(){SC.backgroundTaskQueue.push(SC.chance.preload_task)})},didPreloadImages:function(){var c=this.bank,b,a=c.length;for(b=0;b<a;b++){document.body.removeChild(c[b]);c[b]=undefined}}};SC.Cookie=SC.Object.extend({name:null,value:"",expires:null,path:null,domain:null,secure:NO,isCookie:YES,destroy:function(){this.set("expires",-1);this.write();arguments.callee.base.apply(this,arguments)},write:function(){var e=this.get("name"),g=this.get("value"),a=this.get("expires"),k=this.get("path"),f=this.get("domain"),j=this.get("secure"),b="",c;if(a){if(typeof a===SC.T_NUMBER){c=new Date();c.setTime(c.getTime()+(a*24*60*60*1000))}else{if(SC.DateTime&&a.get&&a.get("milliseconds")){c=new Date(a.get("milliseconds"))}else{if(a.toUTCString&&a.toUTCString.apply){c=a}}}if(c){b="; expires="+c.toUTCString()}}if(!SC.none(k)){b+="; path="+k}if(!SC.none(f)){b+="; domain="+f}if(j===YES){b+="; secure"}document.cookie=e+"="+encodeURIComponent(g)+b;return this}});SC.Cookie.mixin({find:function(a){if(document.cookie&&document.cookie!==""){var e=document.cookie.split(";");for(var c=0;c<e.length;c++){var b=SC.String.trim(String(e[c]));if(b.substring(0,a.length+1)===(a+"=")){return SC.Cookie.create({name:a,value:decodeURIComponent(b.substring(a.length+1))})}}}return null}});SC.CookieMonster={nomNomNom:function(b){var a=SC.kindOf(b,SC.Cookie);if(a){SC.Logger.log("YUM!");return b.destroy()}SC.Logger.error("Y U PASS ME NO COOKIE? %@",b);return NO}};SC.mixin(SC.$.fn,{setClass:function(e,c){if(SC.none(e)){return this}var f=SC.typeOf(e)!==SC.T_STRING,a=this._fixupClass,b;this.each(function(){if(this.nodeType!==1){return}var k=this.className.split(/\s+/),j=NO;if(f){for(var g in e){if(e.hasOwnProperty(g)){j=a(k,g,e[g])||j}}}else{j=a(k,e,c)}if(j){this.className=k.join(" ")}});return this},_fixupClass:function(e,a,c){var b=e.indexOf(a);if(c){if(b<0){e.push(a);return YES}}else{if(b>=0){e[b]=null;return YES}}return NO}});SC.ExceptionHandler={enabled:(SC.buildMode!=="debug"),handleException:function(a){if(this.isShowingErrorDialog){return NO}this._displayErrorDialog(a);return NO},_displayErrorDialog:function(b){var a=this._errorDialogHTMLForException(b),c=document.createElement("div");c.style.cssText="left: 0px; right: 0px; top: 0px; bottom: 0px; position: absolute; background-color: white; background-color: rgba(255,255,255,0.6); z-index:100;";c.innerHTML=a;document.body.appendChild(c);this.isShowingErrorDialog=YES},_errorDialogHTMLForException:function(b){var a;a=['<div id="sc-error-dialog" style="position: absolute; width: 500px; left: 50%; top: 50%; margin-left: -250px; background-color: white; border: 1px solid black; font-family: Monaco, monospace; font-size: 9px; letter-spacing: 1px; padding: 10px">',"An error has occurred which prevents the application from running:","<br><br>",b.message,'<div id="sc-error-dialog-reload-button" onclick="window.location.reload();" style="float: right; font-family: Monaco, monospace; font-size: 9px; letter-spacing: 1px; border: 1px solid black; padding: 3px; clear: both; margin-top: 20px; cursor: pointer;">',"Reload","</div>","</div>"];return a.join("")},isShowingErrorDialog:NO};SC.IMAGE_ABORTED_ERROR=SC.$error("SC.Image.AbortedError","Image",-100);SC.IMAGE_FAILED_ERROR=SC.$error("SC.Image.FailedError","Image",-101);SC.imageQueue=SC.Object.create({loadLimit:4,activeRequests:0,loadImage:function(a,f,g,e){var b=SC.typeOf(f);if(SC.none(g)&&SC.typeOf(f)===SC.T_FUNCTION){f=null;g=f}if(SC.typeOf(g)===SC.T_STRING){g=f[g]}if(SC.none(e)){e=SC.none(f)&&SC.none(g)}var c=this._imageEntryFor(a);if(c.status===this.IMAGE_LOADED){if(g){g.call(f||c.image,c.url,c.image)}}else{if(f||g){this._addCallback(c,f,g)}c.retainCount++;this._scheduleImageEntry(c,e)}},releaseImage:function(a,e,f){var c=this._imageEntryFor(a,NO);if(!c){return this}if(--c.retainCount<=0){this._deleteEntry(c)}else{if(e||f){var b=SC.typeOf(e);if(SC.none(f)&&SC.typeOf(e)===SC.T_FUNCTION){e=null;f=e}if(SC.typeOf(f)===SC.T_STRING){f=e[f]}this._removeCallback(c,e,f)}}},reloadImage:function(a){var b=this._imageEntryFor(a,NO);if(b&&b.status===this.IMAGE_LOADED){b.status=this.IMAGE_WAITING}},loadNextImage:function(){var c=null,a;if(this.get("activeRequests")>=this.get("loadLimit")){return}a=this._foregroundQueue;while(a.length>0&&!c){c=a.shift()}if(!c){a=this._backgroundQueue;while(a.length>0&&!c){c=a.shift()}}this.set("isLoading",!!c);if(c){var b=c.image;if(!b){return}$(b).bind("abort",this._imageDidAbort);$(b).bind("error",this._imageDidError);$(b).bind("load",this._imageDidLoad);b.src=c.url;this._loading.push(c);this.incrementProperty("activeRequests");this.loadNextImage()}},_imageEntryFor:function(c,a){if(a===undefined){a=YES}var e=this._images[c];if(!e&&a){var b=new Image();e=this._images[c]={url:c,status:this.IMAGE_WAITING,callbacks:[],retainCount:0,image:b};b.entry=e}return e},_deleteEntry:function(a){this._unscheduleImageEntry(a);delete this._images[a.url]},_addCallback:function(c,e,f){var b=c.callbacks;var a=b.find(function(g){return g[0]===e&&g[1]===f},this);if(!a){b.push([e,f])}b=null;return this},_removeCallback:function(b,c,e){var a=b.callbacks;a.forEach(function(g,f){if(g[0]===c&&g[1]===e){a[f]=null}},this);a=null;return this},_scheduleImageEntry:function(e,c){var b=this._backgroundQueue;var f=this._foregroundQueue;if(e.status===this.IMAGE_LOADED){return this}if((e.status===this.IMAGE_QUEUED)&&!c&&e.isBackground){b[b.indexOf(e)]=null;e.status=this.IMAGE_WAITING}if(e.status!==this.IMAGE_QUEUED){var a=(c)?b:f;a.push(e);e.status=this.IMAGE_QUEUED;e.isBackground=c}if(!this.isLoading){this.invokeLater(this.loadNextImage,100)}this.set("isLoading",YES);return this},_unscheduleImageEntry:function(b){if(b.status!==this.IMAGE_QUEUED){return this}var a=b.isBackground?this._backgroundQueue:this._foregroundQueue;a[a.indexOf(b)]=null;if(this._loading.indexOf(b)>=0){if(a.image){a.image.abort()}this.imageStatusDidChange(b,this.ABORTED)}return this},_imageDidAbort:function(){SC.run(function(){SC.imageQueue.imageStatusDidChange(this.entry,SC.imageQueue.ABORTED)},this)},_imageDidError:function(){SC.run(function(){SC.imageQueue.imageStatusDidChange(this.entry,SC.imageQueue.ERROR)},this)},_imageDidLoad:function(){SC.run(function(){SC.imageQueue.imageStatusDidChange(this.entry,SC.imageQueue.LOADED)},this)},imageStatusDidChange:function(c,a){if(!c){return}var b=c.url;var e;switch(a){case this.LOADED:e=c.image;break;case this.ABORTED:e=SC.IMAGE_ABORTED_ERROR;break;case this.ERROR:e=SC.IMAGE_FAILED_ERROR;break;default:e=SC.IMAGE_FAILED_ERROR;break}c.callbacks.forEach(function(g){var j=g[0],k=g[1];k.call(j,b,e)},this);c.callbacks=[];c.status=(a===this.LOADED)?this.IMAGE_LOADED:this.IMAGE_WAITING;var f=c.image;if(f){f.onload=f.onerror=f.onabort=null;if(a!==this.LOADED){c.image=null}}this._loading[this._loading.indexOf(c)]=null;if(this._loading.length>this.loadLimit*2){this._loading=this._loading.compact()}this.decrementProperty("activeRequests");this.loadNextImage()},init:function(){arguments.callee.base.apply(this,arguments);this._images={};this._loading=[];this._foregroundQueue=[];this._backgroundQueue=[]},IMAGE_LOADED:"loaded",IMAGE_QUEUED:"queued",IMAGE_WAITING:"waiting",ABORTED:"aborted",ERROR:"error",LOADED:"loaded"});SC.Math=SC.Object.create({near:function(c,b,a){if(!a){a=0.00001}return Math.abs(c-b)<=a},round:function(e,a){if(!a){a=0}var b=Math.pow(10,a);if(a<0){var c=b.toString();b=c.substring(0,c.indexOf("1")+1)}e=e.valueOf();return Math.round(e*b)/b}});SC.LOG_MODULE_LOADING=YES;SC.Module=SC.Object.create({isModuleReady:function(a){var b=SC.MODULE_INFO[a];return b?!!b.isReady:NO},loadModule:function(b,j,a){var c=SC.MODULE_INFO[b],k,g;var n=SC.A(arguments).slice(3);var e=SC.LOG_MODULE_LOADING;var o,f;if(a===undefined&&SC.typeOf(j)===SC.T_FUNCTION){a=j;j=null}if(e){SC.Logger.log("SC.Module: Attempting to load '%@'".fmt(b))}if(!c){throw"SC.Module: could not find module '%@'".fmt(b)}c.isPrefetching=NO;if(c.isLoaded){if(e){SC.Logger.log("SC.Module: Module '%@' already loaded.".fmt(b))}if(c.source){if(e){SC.Logger.log("SC.Module: Evaluating JavaScript for module '%@'.".fmt(b))}this._evaluateStringLoadedModule(c)}if(a){if(SC.isReady){SC.Module._invokeCallback(b,j,a,n)}else{SC.ready(SC.Module,function(){SC.Module._invokeCallback(b,j,a,n)})}}return YES}else{if(e){SC.Logger.log("SC.Module: Module '%@' is not loaded, loading now.".fmt(b))}k=c.callbacks||[];if(a){k.push(function(){SC.Module._invokeCallback(b,j,a,n)})}c.callbacks=k;if(!c.isLoading){this._loadDependenciesForModule(b);this._loadCSSForModule(b);this._loadJavaScriptForModule(b);c.isLoading=YES}return NO}},prefetchModule:function(a){var b=SC.MODULE_INFO[a];if(b.isLoading||b.isLoaded){return}if(SC.LOG_MODULE_LOADING){SC.Logger.log("SC.Module: Prefetching module '%@'.".fmt(a))}this._loadDependenciesForModule(a);this._loadCSSForModule(a);this._loadJavaScriptForModule(a);b.isLoading=YES;b.isPrefetching=YES},_executeLazilyInstantiatedModule:function(b,c,n){var k=SC.LAZY_INSTANTIATION[b];var j;var a;var o,f;if(SC.LOG_MODULE_LOADING){SC.Logger.log("SC.Module: Module '%@' is marked for lazy instantiation, instantiating it now…".fmt(b))}f=k.length;for(o=0;o<f;o++){try{k[o]()}catch(g){SC.Logger.error("SC.Module: Failed to lazily instatiate entry for  '%@'".fmt(b))}}delete SC.LAZY_INSTANTIATION[b];j=this._targetForTargetName(c);a=this._methodForMethodNameInTarget(n,j);if(!a){throw"SC.Module: could not find callback for lazily instantiated module '%@'".fmt(b)}},_evaluateStringLoadedModule:function(b){var a=b.source;jQuery.globalEval(a);delete b.source;if(b.cssSource){var c=document.createElement("style");c.setAttribute("type","text/css");if(c.styleSheet){c.styleSheet.cssText=b.cssSource}else{var e=document.createTextNode(b.cssSource);c.appendChild(e)}document.getElementsByTagName("head")[0].appendChild(c)}b.isReady=YES},_loadCSSForModule:function(e){var g=document.getElementsByTagName("head")[0];var f=SC.MODULE_INFO[e];var k=f.styles||[];var b=k.length;var c;var j;var a;if(!g){g=document.documentElement}b=k.length;for(a=0;a<b;a++){c=k[a];if(c.length>0){if(SC.LOG_MODULE_LOADING){SC.Logger.log("SC.Module: Loading CSS file in '%@' -> '%@'".fmt(e,c))}j=document.createElement("link");j.setAttribute("href",c);j.setAttribute("rel","stylesheet");j.setAttribute("type","text/css");g.appendChild(j)}}j=null},_loadJavaScriptForModule:function(b){var c=SC.MODULE_INFO[b];var e;var a;var f=c.dependencies;var g=YES;if(f&&f.length>0){g=this._dependenciesMetForModule(b)}if(c.isPrefetched){a=c.stringURL}else{if(g){a=c.scriptURL}else{a=c.stringURL}}if(a.length>0){if(SC.LOG_MODULE_LOADING){SC.Logger.log("SC.Module: Loading JavaScript file in '%@' -> '%@'".fmt(b,a))}e=document.createElement("script");e.setAttribute("type","text/javascript");e.setAttribute("src",a);if(SC.browser.isIE){e.onreadystatechange=function(){if(this.readyState=="complete"||this.readyState=="loaded"){SC.Module._moduleDidLoad(b)}}}else{e.onload=function(){SC.Module._moduleDidLoad(b)}}document.body.appendChild(e)}},_dependenciesMetForModule:function(c){var f=SC.MODULE_INFO[c].dependencies||[];var b,a=f.length;var g;var e;for(b=0;b<a;b++){g=f[b];e=SC.MODULE_INFO[g];if(!e){throw"SC.loadModule: Unable to find dependency %@ for module %@.".fmt(g,c)}if(!e.isReady){return NO}}return YES},_loadDependenciesForModule:function(a){var b=SC.MODULE_INFO[a];var f=SC.LOG_MODULE_LOADING;var n=b.dependencies||[];var g=YES;var j=n.length;var o;var e;var c;var k;for(o=0;o<j;o++){e=n[o];c=SC.MODULE_INFO[e];if(!c){throw"SC.Module: could not find required module '%@' for module '%@'".fmt(e,a)}else{if(c.isLoading){g=NO;k=c.dependents;if(!k){c.dependents=k=[]}k.push(a)}else{if(c.isReady){continue}else{g=NO;k=c.dependents;if(!k){c.dependents=k=[]}k.push(a);if(f){SC.Logger.log("SC.Module: '%@' depends on '%@', loading dependency…".fmt(a,e))}SC.Module.loadModule(e)}}}}},_invokeCallback:function(c,e,a,b){var j;var g;g=this._targetForTargetName(e);j=this._methodForMethodNameInTarget(a,g);if(!j){if(SC.LAZY_INSTANTIATION[c]){this._executeLazilyInstantiatedModule(c,e,a);g=this._targetForTargetName(e);j=this._methodForMethodNameInTarget(a,g)}else{throw"SC.Module: could not find callback for '%@'".fmt(c)}}if(!b){b=[]}b.unshift(c);var f=!!SC.RunLoop.currentRunLoop;if(f){SC.run(function(){j.apply(g,b)})}else{j.apply(g,b)}},_invokeCallbacksForModule:function(c){var f=SC.MODULE_INFO[c],e;if(!f){return}if(SC.LOG_MODULE_LOADING){SC.Logger.log("SC.Module: Module '%@' has completed loading, invoking callbacks.".fmt(c))}e=f.callbacks||[];for(var b=0,a=e.length;b<a;++b){e[b]()}},_evaluateAndInvokeCallbacks:function(a){var c=SC.MODULE_INFO;var b=c[a];var e=SC.LOG_MODULE_LOADING;if(e){SC.Logger.log("SC.Module: Evaluating and invoking callbacks for '%@'.".fmt(a))}if(b.source){this._evaluateStringLoadedModule(b)}b.isReady=YES;if(SC.isReady){SC.Module._invokeCallbacksForModule(a);delete b.callbacks}else{SC.ready(SC,function(){SC.Module._invokeCallbacksForModule(a);delete b.callbacks})}var j=b.dependents||[];var f,n;for(var k=0,g=j.length;k<g;k++){f=j[k];n=c[f];if(n.isLoaded&&this._dependenciesMetForModule(f)){if(e){SC.Logger.log("SC.Module: Now that %@ has loaded, all dependencies for a dependent %@ are met.".fmt(a,f))}this._evaluateAndInvokeCallbacks(f)}}},_moduleDidLoad:function(b){var c=SC.MODULE_INFO[b];var f=SC.LOG_MODULE_LOADING;var e;var g,a;if(f){SC.Logger.log("SC.Module: Module '%@' finished loading.".fmt(b))}if(!c){if(f){SC.Logger.log("SC._moduleDidLoad() called for unknown module '@'.".fmt(b))}c=SC.MODULE_INFO[b]={isLoaded:YES,isReady:YES};return}if(c.isLoaded){if(f){SC.Logger.log("SC._moduleDidLoad() called more than once for module '%@'. Skipping.".fmt(b))}return}delete c.isLoading;c.isLoaded=YES;if(!c.isPrefetching){e=this._dependenciesMetForModule(b);if(e){this._evaluateAndInvokeCallbacks(b)}else{if(f){SC.Logger.log("SC.Module: Dependencies for '%@' not met yet, waiting to evaluate.".fmt(b))}}}else{delete c.isPrefetching;if(f){SC.Logger.log("SC.Module: Module '%@' was prefetched, not evaluating until needed.".fmt(b))}}},_targetForTargetName:function(a){if(SC.typeOf(a)===SC.T_STRING){return SC.objectForPropertyPath(a)}return a},_methodForMethodNameInTarget:function(a,b){if(SC.typeOf(a)===SC.T_STRING){return SC.objectForPropertyPath(a,b)}return a}});SC.ready(function(){var f=SC.MODULE_INFO;var c;var e;var a;for(c in f){e=f[c];if(e.isPrefetched){var b=c;a=SC.Task.create({run:function(){SC.Module.prefetchModule(b)}});SC.backgroundTaskQueue.push(a)}}});SC.TextSelection=SC.Object.extend(SC.Copyable,SC.Freezable,{start:-1,end:-1,length:function(){var b=this.get("start");var a=this.get("end");if((b)===-1||(a===-1)){return -1}else{return a-b}}.property("start","end").cacheable(),init:function(){arguments.callee.base.apply(this,arguments);this.freeze()},copy:function(){return SC.TextSelection.create({start:this.get("start"),end:this.get("end")})},toString:function(){var a=this.get("length");if(a&&a>0){if(a===1){return"[%@ character selected: {%@, %@}]".fmt(a,this.get("start"),this.get("end"))}else{return"[%@ characters selected: {%@, %@}]".fmt(a,this.get("start"),this.get("end"))}}else{return"[no text selected; caret at %@]".fmt(this.get("start"))}}});SC.UserDefaults=SC.Object.extend({ready:NO,userDomain:null,appDomain:null,_defaults:null,_safari3DB:null,defaults:function(a){this._defaults=a;this.allPropertiesDidChange()},readDefault:function(k){var c,a,n,j,o,g;k=this._normalizeKeyName(k);a=this._userKeyName(k);if(this._written){c=this._written[a]}if(SC.browser.msie=="7.0"){n=document.body;try{n.load("SC.UserDefaults")}catch(b){SC.Logger.error("Couldn't load userDefaults in IE7: "+b.description)}}else{if(this.HTML5DB_noLocalStorage){g=this._safari3DB}else{n=window.localStorage;if(!n&&window.globalStorage){n=window.globalStorage[window.location.hostname]}}}if(n||g){j=["SC.UserDefaults",a].join("-at-");if(SC.browser.msie=="7.0"){c=n.getAttribute(j.replace(/\W/gi,""))}else{if(g){c=this.dataHash[j]}else{c=n[j]}}if(!SC.none(c)){try{c=SC.json.decode(c)}catch(f){}}}o=this.delegate;if(o&&o.userDefaultsNeedsDefault){c=o.userDefaultsNeedsDefault(this,k,a)}if((c===undefined)&&this._defaults){c=this._defaults[a]||this._defaults[k]}return c},writeDefault:function(o,k){var f,b,p,n,q,j;o=this._normalizeKeyName(o);f=this._userKeyName(o);b=this._written;if(!b){b=this._written={}}b[f]=k;if(SC.browser.msie=="7.0"){p=document.body}else{if(this.HTML5DB_noLocalStorage){j=this._safari3DB}else{p=window.localStorage;if(!p&&window.globalStorage){p=window.globalStorage[window.location.hostname]}}}n=["SC.UserDefaults",f].join("-at-");if(p||j){var a=SC.json.encode(k);if(SC.browser.msie=="7.0"){p.setAttribute(n.replace(/\W/gi,""),a);p.save("SC.UserDefaults")}else{if(j){var c=this;j.transaction(function(e){e.executeSql("delete from SCLocalStorage where key = ?",[n],function(){e.executeSql("insert into SCLocalStorage(key, value) VALUES ('"+n+"', '"+a+"');",[],c._nullDataHandler,c.killTransaction)})});this.dataHash[n]=a}else{try{p[n]=a}catch(g){SC.Logger.error("Failed using localStorage. "+g)}}}}q=this.delegate;if(q&&q.userDefaultsDidChange){q.userDefaultsDidChange(this,o,k,f)}return this},resetDefault:function(n){var a,f,b,o,k,j;a=this._normalizeKeyName(n);f=this._userKeyName(a);this.propertyWillChange(n);this.propertyWillChange(a);b=this._written;if(b){delete b[f]}if(SC.browser.msie=="7.0"){o=document.body}else{if(this.HTML5DB_noLocalStorage){j=this._safari3DB}else{o=window.localStorage;if(!o&&window.globalStorage){o=window.globalStorage[window.location.hostname]}}}k=["SC.UserDefaults",f].join("-at-");if(o){if(SC.browser.msie=="7.0"){o.setAttribute(k.replace(/\W/gi,""),null);o.save("SC.UserDefaults")}else{if(j){var c=this;j.transaction(function(e){e.executeSql("delete from SCLocalStorage where key = ?",[k],null)});delete this.dataHash[k]}else{try{delete o[k]}catch(g){SC.Logger.warn("Deleting local storage encountered a problem. "+g)}}}}this.propertyDidChange(n);this.propertyDidChange(a);return this},unknownProperty:function(a,b){if(b===undefined){return this.readDefault(a)}else{this.writeDefault(a,b);return b}},_normalizeKeyName:function(a){if(a.indexOf(":")<0){var b=this.get("appDomain")||"app";a=[b,a].join(":")}return a},_userKeyName:function(b){var a=this.get("userDomain")||"(anonymous)";return[a,b].join("-at-")},_domainDidChange:function(){var a=NO;if(this.get("userDomain")!==this._scud_userDomain){this._scud_userDomain=this.get("userDomain");a=YES}if(this.get("appDomain")!==this._scud_appDomain){this._scud_appDomain=this.get("appDomain");a=YES}if(a){this.allPropertiesDidChange()}}.observes("userDomain","appDomain"),init:function(){arguments.callee.base.apply(this,arguments);jQuery.readyWait++;if(SC.userDefaults&&SC.userDefaults.get("dataHash")){var g=SC.userDefaults.get("dataHash");if(g){this.dataHash=SC.userDefaults.get("dataHash")}}this._scud_userDomain=this.get("userDomain");this._scud_appDomain=this.get("appDomain");if(SC.browser.msie=="7.0"){document.body.addBehavior("#default#userData")}this.HTML5DB_noLocalStorage=((parseInt(SC.browser.webkit,0)>523)&&(parseInt(SC.browser.webkit,0)<528));if(this.HTML5DB_noLocalStorage){var f;try{if(!window.openDatabase){SC.Logger.error("Trying to load a database with safari version 3.1 to get SC.UserDefaults to work. You are either in a previous version or there is a problem with your browser.");return}else{var a="scdb",c="1.0",b="SproutCore database",n=65536;f=openDatabase(a,c,b,n)}}catch(k){SC.Logger.error("Trying to load a database with safari version 3.1 to get SC.UserDefaults to work. You are either in a previous version or there is a problem with your browser.");return}if(f){var j=this;f.transaction(function(e){e.executeSql("CREATE TABLE IF NOT EXISTS SCLocalStorage(key TEXT NOT NULL PRIMARY KEY, value TEXT NOT NULL);",[],j._nullDataHandler,j.killTransaction)});f.transaction(function(e){e.parent=j;e.executeSql("SELECT * from SCLocalStorage;",[],function(v,q){var t={},u;for(var p=0,o=q.rows.length;p<o;p++){u=q.rows.item(p);t[u.key]=u.value}v.parent.dataHash=t;SC.run(function(){jQuery.ready(true)})},j.killTransaction)});this._safari3DB=f}}else{jQuery.ready(true)}},_killTransaction:function(b,a){return true},_nullDataHandler:function(b,a){}});SC.userDefaults=SC.UserDefaults.create();SC.mixin({convertHsvToHex:function(k,B,z){var a=0,n=0,w=0;if(z>0){var j=(k==1)?0:Math.floor(k*6),o=(k==1)?0:(k*6)-j,e=z*(1-B),c=z*(1-(B*o)),A=z*(1-(B*(1-o))),u=[[z,A,e],[c,z,e],[e,z,A],[e,c,z],[A,e,z],[z,e,c]];a=Math.round(255*u[j][0]);n=Math.round(255*u[j][1]);w=Math.round(255*u[j][2])}return this.parseColor("rgb("+a+","+n+","+w+")")},convertHexToHsv:function(j){var c=this.expandColor(j),a=Math.max(Math.max(c[0],c[1]),c[2]),e=Math.min(Math.min(c[0],c[1]),c[2]),g=(a===0)?0:(1-e/a),b=a/255,f=(a==e)?0:((a==c[0])?((c[1]-c[2])/(a-e)/6):((a==c[1])?((c[2]-c[0])/(a-e)/6+1/3):((c[0]-c[1])/(a-e)/6+2/3)));f=(f<0)?(f+1):((f>1)?(f-1):f);return[f,g,b]},PARSE_COLOR_RGBRE:/^rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i,PARSE_COLOR_HEXRE:/^\#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/,expandColor:function(b){var c,f,e,a;c=this.parseColor(b);if(c){f=parseInt(c.slice(1,3),16);e=parseInt(c.slice(3,5),16);a=parseInt(c.slice(5,7),16);return[f,e,a]}},parseColor:function(e){var f=0,a="#",c,b;if(c=this.PARSE_COLOR_RGBRE.exec(e)){for(f=1;f<=3;f++){b=Math.max(0,Math.min(255,parseInt(c[f],0)));a+=this.toColorPart(b)}return a}if(c=this.PARSE_COLOR_HEXRE.exec(e)){if(c[1].length==3){for(f=0;f<3;f++){a+=c[1].charAt(f)+c[1].charAt(f)}return a}return"#"+c[1]}return false},toColorPart:function(a){if(a>255){a=255}var b=a.toString(16);if(a<16){return"0"+b}return b}});SC.mixin({_downloadFrames:0,download:function(e){var a=document.createElement("iframe"),c="DownloadFrame_"+this._downloadFrames;SC.$(a).attr("id",c);a.style.border="10px";a.style.width="0px";a.style.height="0px";a.style.position="absolute";a.style.top="-10000px";a.style.left="-10000px";if(!SC.browser.isSafari){SC.$(a).attr("src",e)}document.getElementsByTagName("body")[0].appendChild(a);if(SC.browser.isSafari){SC.$(a).attr("src",e)}this._downloadFrames=this._downloadFrames+1;if(!SC.browser.isSafari){var b=function(){document.body.removeChild(document.getElementById(c));c=null};b.invokeLater(null,2000)}a=null},getStyle:function(a,b){var c="";if(document.defaultView&&document.defaultView.getComputedStyle){c=document.defaultView.getComputedStyle(a,"").getPropertyValue(b)}else{if(a.currentStyle){b=b.replace(/\-(\w)/g,function(e,f){return f.toUpperCase()});c=a.currentStyle[b]}}return c},uniJapaneseConvert:function(f){var a,c="",b,e;for(b=0,e=f.length;b<e;b++){a=f.charCodeAt(b);a=((a>=65281&&a<=65392)?a-65248:a);a=(a===12540?45:a);c=c+String.fromCharCode(a)}return c},pointInElement:function(b,j,c,g){var k,e,a,f;j=jQuery(j);c=c||"border";k=SC.offset(j,g);if(c==="padding"){e=j.innerWidth();a=j.innerHeight();k.x+=window.parseInt(j.css("border-top-width").replace("px",""));k.y+=window.parseInt(j.css("border-left-width").replace("px",""))}else{e=j.outerWidth(c==="margin");a=j.outerHeight(c==="margin");if(c==="margin"){k.x-=window.parseInt(j.css("margin-top").replace("px",""));k.y-=window.parseInt(j.css("margin-left").replace("px",""))}}f={x:k.x,y:k.y,width:e,height:a};return SC.pointInRect(b,f)},switchScale:function(){$("head meta[name=viewport]").remove();if(window.innerWidth===window.screen.width){$("head").prepend('<meta name="viewport" content="width=device-width, initial-scale=0.5, maximum-scale=0.5, minimum-scale=0.5, user-scalable=0" />')}else{$("head").prepend('<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=0" />')}}});SC.mixin({ZERO_RANGE:{start:0,length:0},RANGE_NOT_FOUND:{start:0,length:-1},valueInRange:function(b,a){return(b>=0)&&(b>=a.start)&&(b<(a.start+a.length))},minRange:function(a){return a.start},maxRange:function(a){return(a.length<0)?-1:(a.start+a.length)},unionRanges:function(c,b){if((c==null)||(c.length<0)){return b}if((b==null)||(b.length<0)){return c}var e=Math.min(c.start,b.start),a=Math.max(SC.maxRange(c),SC.maxRange(b));return{start:e,length:a-e}},intersectRanges:function(c,b){if((c==null)||(b==null)){return SC.RANGE_NOT_FOUND}if((c.length<0)||(b.length<0)){return SC.RANGE_NOT_FOUND}var e=Math.max(SC.minRange(c),SC.minRange(b)),a=Math.min(SC.maxRange(c),SC.maxRange(b));if(a<e){return SC.RANGE_NOT_FOUND}return{start:e,length:a-e}},subtractRanges:function(c,b){if((c==null)||(b==null)){return SC.RANGE_NOT_FOUND}if((c.length<0)||(b.length<0)){return SC.RANGE_NOT_FOUND}var a=Math.max(SC.minRange(c),SC.minRange(b)),e=Math.min(SC.maxRange(c),SC.maxRange(b));if(a<e){return SC.RANGE_NOT_FOUND}return{start:e,length:a-e}},cloneRange:function(a){return{start:a.start,length:a.length}},rangesEqual:function(b,a){if(b===a){return true}if(b==null){return a.length<0}if(a==null){return b.length<0}return(b.start==a.start)&&(b.length==a.length)}});sc_require("tasks/task");SC.didPreloadBundle=function(){};SC.PreloadBundleTask=SC.Task.extend({bundle:null,target:"SC",action:"preloaded",run:function(a){var b;if(b=this.get("bundle")){var c=Date.now();SC.Module.loadModule(this.get("bundle"),this.get("target"),this.get("action"))}}});sc_require("system/string");SC.VALIDATE_OK=YES;SC.VALIDATE_NO_CHANGE=NO;SC.Validator=SC.Object.extend({fieldValueForObject:function(b,c,a){return b},objectForFieldValue:function(c,b,a){return c},validate:function(a,b){return true},validateError:function(a,b){return SC.$error(SC.String.loc("Invalid.General(%@)",b.get("fieldValue")),b.get("fieldKey"))},validateChange:function(b,c,a){return this.validate(b,c)?SC.VALIDATE_OK:this.validateError(b,c)},validateSubmit:function(a,b){return this.validate(a,b)?SC.VALIDATE_OK:this.validateError(a,b)},validatePartial:function(a,b){if(!b.get("isValid")){return this.validate(a,b)?SC.VALIDATE_OK:this.validateError(a,b)}else{return SC.VALIDATE_NO_CHANGE}},validateKeyDown:function(b,c,a){return true},attachTo:function(a,b){},detachFrom:function(a,b){}});SC.Validator.mixin({OK:true,NO_CHANGE:false,findFor:function(f,j,g){var c;if(!g){return}if(g instanceof SC.Validator){c=g}else{if(g.isClass){c=g.create()}else{if(SC.typeOf(g)===SC.T_STRING){var b=null;var a=g.match(/^(.+)\[(.*)\]/);if(a){g=a[1];b=a[2]}g=SC.String.classify(g);var e=SC.Validator[g];if(SC.none(e)){throw"validator %@ not found for %@".fmt(g,j)}else{if(b){if(!f){throw"named validator (%@) could not be found for field %@ because the field does not belong to a form".fmt(b,j)}if(!f._validatorHash){f._validatorHash={}}c=(b)?f._validatorHash[b]:null;if(!c){c=e.create()}if(b){f._validatorHash[b]=c}}else{c=e.create()}}}}}return c},fieldValueForObject:function(a,b,c){if(this.prototype&&this.prototype.fieldValueForObject){return this.prototype.fieldValueForObject(a,b,c)}else{return null}},objectForFieldValue:function(b,a,c){if(this.prototype&&this.prototype.objectForFieldValue){return this.prototype.objectForFieldValue(b,a,c)}else{return null}}});sc_require("validators/validator");SC.Validator.CreditCard=SC.Validator.extend({fieldValueForObject:function(a,b,c){if(typeof(a)=="string"&&a.length==16){a=[a.slice(0,4),a.slice(4,8),a.slice(8,12),a.slice(12,16)].join(" ")}return a},objectForFieldValue:function(b,a,c){return b.replace(/[\s-\.\:]/g,"")},validate:function(a,b){return this.checkNumber(b.get("fieldValue"))},validateError:function(b,c){var a=c.get("errorLabel")||"Field";return SC.$error(SC.String.loc("Invalid.CreditCard(%@)",a),a)},validateKeyDown:function(b,c,a){return !!a.match(/[0-9\- ]/)},checkNumber:function(n){if(!n||n.length===0){return YES}n=n.replace(/[^0-9]/g,"");var a="0123456789";var k=n.length;var g=parseInt(n,0);var p=n.toString();p=p.replace(/^\s+|\s+$/g,"");var o=0;var t=true;var b=false;var q;var e;for(var c=0;c<k;c++){q=""+p.substring(c,c+1);if(a.indexOf(q)=="-1"){t=false}}if(!t){b=false}if((k===0)&&(b)){b=false}else{if(k>=15){for(var f=k;f>0;f--){e=parseInt(g,0)%10;e=parseInt(e,0);o+=e;f--;g=g/10;e=parseInt(g,0)%10;e=e*2;switch(e){case 10:e=1;break;case 12:e=3;break;case 14:e=5;break;case 16:e=7;break;case 18:e=9;break;default:e=e}g=g/10;o+=e}if((o%10)===0){b=true}else{b=false}}}return b}});sc_require("validators/validator");SC.Validator.Date=SC.Validator.extend({format:"%b %d, %Y %i:%M:%S %p",fieldValueForObject:function(a,b,f){var e=this.get("format"),c;if(SC.typeOf(a)===SC.T_NUMBER){c=SC.DateTime.create(a)}else{if(a instanceof Date){c=a.getTime()}}if(c){a=c.toFormattedString(e)}return a},objectForFieldValue:function(c,a,f){var e=this.get("format"),b;if(c){b=SC.DateTime.parse(c,e);c=b?b._ms:null}return c}});sc_require("validators/validator");SC.Validator.DateTime=SC.Validator.extend({format:"%d/%m/%Y",fieldValueForObject:function(a,b,c){if(SC.kindOf(a,SC.DateTime)){a=a.toFormattedString(this.get("format"))}else{a=null}return a},objectForFieldValue:function(b,a,c){if(b){b=SC.DateTime.parse(b,this.get("format"))}return b}});sc_require("validators/validator");SC.Validator.Email=SC.Validator.extend({validate:function(a,b){return(b.get("fieldValue")||"").match(/.+@.+\...+/)},validateError:function(b,c){var a=c.get("errorLabel")||"Field";return SC.$error(SC.String.loc("Invalid.Email(%@)",a),a)}});SC.Validator.EmailOrEmpty=SC.Validator.Email.extend({validate:function(a,c){var b=c.get("fieldValue");return(b&&b.length>0)?b.match(/.+@.+\...+/):true}});sc_require("validators/validator");SC.Validator.NotEmpty=SC.Validator.extend({validate:function(a,c){var b=c.get("fieldValue");if(SC.none(b)){return NO}if(!SC.none(b.length)){return b.length>0}return YES},validateError:function(b,c){var a=c.get("errorLabel")||"Field";return SC.$error(SC.String.loc("Invalid.NotEmpty(%@)",SC.String.capitalize(a)),c.get("errorLabel"))}});sc_require("validators/validator");sc_require("system/utils/misc");SC.Validator.Number=SC.Validator.extend({places:0,fieldValueForObject:function(a,b,c){switch(SC.typeOf(a)){case SC.T_NUMBER:a=a.toFixed(this.get("places"));break;case SC.T_NULL:case SC.T_UNDEFINED:a="";break}return a},objectForFieldValue:function(c,b,e){var a;c=c.replace(/,/g,"");switch(SC.typeOf(c)){case SC.T_STRING:if(c.length===0){c=null}else{if(this.get("places")>0){c=parseFloat(c)}else{if(c.length==1&&c.match(/-/)){c=null}else{a=parseInt(c,0);if(isNaN(a)){c=SC.uniJapaneseConvert(c);c=parseInt(c,0);if(isNaN(c)){c=""}}else{c=a}}}}break;case SC.T_NULL:case SC.T_UNDEFINED:c=null;break}return c},validate:function(a,c){var b=c.get("fieldValue");return(b==="")||!(isNaN(b)||isNaN(parseFloat(b)))},validateError:function(b,c){var a=c.get("errorLabel")||"Field";return SC.$error(SC.String.loc("Invalid.Number(%@)",a),a)},validateKeyDown:function(b,c,a){var e=c.$input().val();if(!e){e=""}e+=a;if(this.get("places")===0){if(a.length===0){return true}else{return e.match(/^[\-{0,1}]?[0-9,\0]*/)[0]===e}}else{if(a.length===0){return true}else{return e.match(/^[\-{0,1}]?[0-9,\0]*\.?[0-9\0]+/)===e}}}});sc_require("validators/validator");SC.Validator.Password=SC.Validator.extend({attachTo:function(a,b){arguments.callee.base.apply(this,arguments);if(!this.fields){this.fields=[]}this.fields.push(b)},validate:function(f){if(!this.fields||this.fields.length===0){return true}var e=false;var b=false;var a=true;var c=this.fields[0].get("fieldValue");this.fields.forEach(function(j){var g=j.get("fieldValue");if(g!=c){a=false}if(!g||g.length===0){e=true}if(g&&g.length>0){b=true}});if(f){return(b===false)?false:a}else{return(e===true)?true:a}},updateFields:function(c,b){if(!this.fields||this.fields.length===0){return true}var a=SC.String.loc("Invalid.Password");var e=this._field;this.fields.forEach(function(g){var j=(b)?null:((g==e)?a:"");c.setErrorFor(g,j)});return(b)?SC.VALIDATE_OK:a},validateChange:function(b,c,a){return this.updateFields(b,this.validate(false))},validateSubmit:function(a,b){return this.updateFields(a,this.validate(true))},validatePartial:function(b,c){var a=!this._field.get("isValid");if(a){return this.updateFields(b,this.validate(false))}else{return SC.VALIDATE_NO_CHANGE}}});sc_require("validators/validator");SC.Validator.PositiveInteger=SC.Validator.extend({defaultValue:null,fieldValueForObject:function(a,b,c){switch(SC.typeOf(a)){case SC.T_NUMBER:a=a.toFixed(0);break;case SC.T_NULL:case SC.T_UNDEFINED:a=this.get("defaultValue");break}return a},objectForFieldValue:function(b,a,c){b=b.replace(/,/g,"");switch(SC.typeOf(b)){case SC.T_STRING:if(b.length===0){b=this.get("defaultValue")}else{b=parseInt(b,0)}break;case SC.T_NULL:case SC.T_UNDEFINED:b=this.get("defaultValue");break}if(isNaN(b)){return this.get("defaultValue")}return b},validate:function(a,c){var b=c.get("fieldValue");return(b==="")||!isNaN(b)},validateError:function(b,c){var a=c.get("errorLabel")||"Field";return SC.$error(SC.String.loc("Invalid.Number(%@)",a),a)},validateKeyDown:function(b,c,a){var e=c.$input().val();if(!e){e=""}e+=a;if(a.length===0){return true}else{return e.match(/^[0-9\0]*/)[0]===e}}});SC.ContainerView=SC.View.extend({classNames:["sc-container-view"],renderDelegateName:"containerRenderDelegate",nowShowing:null,contentView:null,contentViewBindingDefault:SC.Binding.single(),replaceContent:function(a){this.removeAllChildren();if(a){this.appendChild(a)}},createChildViews:function(){var a=this.get("contentView");if(a){a=this.contentView=this.createChildView(a);this.childViews=[a]}},awake:function(){arguments.callee.base.apply(this,arguments);var a=this.get("nowShowing");if(a&&a.length>0){this.nowShowingDidChange()}},nowShowingDidChange:function(){var c=this.get("nowShowing");if(c===SC.CONTENT_SET_DIRECTLY){return}var a=(this._instantiatedLastView===YES)?this.get("contentView"):null;this._instantiatedLastView=NO;if(SC.typeOf(c)===SC.T_STRING&&c.length>0){if(c.indexOf(".")>0){c=SC.objectForPropertyPath(c)}else{var b=this.getPath(c);c=SC.kindOf(b,SC.CoreView)?b:SC.objectForPropertyPath(c,this.get("page"))}}if(SC.typeOf(c)===SC.T_CLASS){if(c.kindOf(SC.CoreView)){c=this.createChildView(c);this._instantiatedLastView=YES}else{c=null}}if(c&&!(c instanceof SC.CoreView)){c=null}this.set("contentView",c);if(a){a.destroy()}}.observes("nowShowing"),contentViewDidChange:function(){this.replaceContent(this.get("contentView"))}.observes("contentView")});sc_require("mixins/validatable");SC.FieldView=SC.View.extend(SC.Control,SC.Validatable,{isTextArea:NO,ariaRole:"textbox",_field_isMouseDown:NO,fieldValue:function(){var a=this.get("value");if(SC.typeOf(a)===SC.T_ERROR){a=a.get("errorValue")}return this.fieldValueForObject(a)}.property("value","validator").cacheable(),$input:function(){if(this.get("isTextArea")){return this.$("textarea").andSelf().filter("textarea")}else{return this.$("input").andSelf().filter("input")}},setFieldValue:function(b){if(SC.none(b)){b=""}var a=this.$input();if(a.val()!==b){a.val(b)}return this},getFieldValue:function(){return this.$input().val()},_field_fieldValueDidChange:function(a){SC.run(function(){this.fieldValueDidChange(NO)},this)},fieldValueDidChange:function(a){var c=this.getFieldValue();var b=this.objectForFieldValue(c,a);this.setIfChanged("value",b)},_field_valueDidChange:function(){this.setFieldValue(this.get("fieldValue"))}.observes("fieldValue"),didCreateLayer:function(){this.setFieldValue(this.get("fieldValue"));SC.Event.add(this.$input(),"change",this,this._field_fieldValueDidChange)},didAppendToDocument:function(){if(this.get("isTextArea")){this.setFieldValue(this.get("fieldValue"));SC.Event.add(this.$input(),"change",this,this._field_fieldValueDidChange)}},willDestroyLayer:function(){SC.Event.remove(this.$input(),"change",this,this._field_fieldValueDidChange)},mouseDown:function(a){this._field_isMouseDown=YES;a.allowDefault();return YES},mouseExited:function(a){if(this._field_isMouseDown){this.set("isActive",NO)}a.allowDefault();return YES},mouseEntered:function(a){this.set("isActive",this._field_isMouseDown);a.allowDefault();return YES},mouseUp:function(a){if(this._field_isMouseDown){this.set("isActive",NO)}this._field_isMouseDown=NO;a.allowDefault();return YES},keyDown:function(b){if(b.which===9||b.keyCode===9){var a=b.shiftKey?this.get("previousValidKeyView"):this.get("nextValidKeyView");if(a){a.becomeFirstResponder()}else{b.allowDefault()}return YES}if(this.performValidateKeyDown(b)){this._isKeyDown=YES;b.allowDefault()}else{b.stop()}return YES},acceptsFirstResponder:function(){if(SC.FOCUS_ALL_CONTROLS){return this.get("isEnabled")}return NO}.property("isEnabled"),_field_setFieldValue:function(b){this.propertyWillChange("fieldValue");if(this.fieldValueForObject){b=this.fieldValueForObject(b)}var a=this.setFieldValue(b);this.propertyDidChange("fieldValue");return a},_field_getFieldValue:function(){var a=this.getFieldValue();if(this.objectForFieldValue){a=this.objectForFieldValue(a)}return a},render:function(a,b){arguments.callee.base.apply(this,arguments);if(b){a.attr("aria-multiline",this.get("isTextArea"));a.attr("aria-disabled",!this.get("isEnabled"))}}});SC.IMAGE_STATE_NONE="none";SC.IMAGE_STATE_LOADING="loading";SC.IMAGE_STATE_LOADED="loaded";SC.IMAGE_STATE_FAILED="failed";SC.IMAGE_TYPE_NONE="NONE";SC.IMAGE_TYPE_URL="URL";SC.IMAGE_TYPE_CSS_CLASS="CSS_CLASS";SC.BLANK_IMAGE_DATAURL="data:image/gif;base64,R0lGODlhAQABAJAAAP///wAAACH5BAUQAAAALAAAAAABAAEAAAICBAEAOw==";SC.BLANK_IMAGE_URL=SC.browser.msie&&SC.browser.msie<8?"/static/sproutcore/foundation/en/eurekajview/source/resources/blank.gif":SC.BLANK_IMAGE_DATAURL;SC.BLANK_IMAGE=new Image();SC.BLANK_IMAGE.src=SC.BLANK_IMAGE_URL;SC.BLANK_IMAGE.width=SC.BLANK_IMAGE.height=1;SC.ImageView=SC.View.extend(SC.Control,SC.InnerFrame,{classNames:"sc-image-view",ariaRole:"img",displayProperties:["frame","image","innerFrame","toolTip","imageValue","type"],renderDelegateName:function(){return(this.get("useCanvas")?"canvasImage":"image")+"RenderDelegate"}.property("useCanvas").cacheable(),tagName:function(){return this.get("useCanvas")?"canvas":"div"}.property("useCanvas").cacheable(),canLoadInBackground:NO,image:SC.BLANK_IMAGE,imageValue:function(){var a=this.get("value");return a&&a.isEnumerable?a.firstObject():a}.property("value").cacheable(),innerFrame:function(){var c=this.get("image"),b=c.width,a=c.height,e=this.get("frame");if(SC.none(e)){return{x:0,y:0,width:0,height:0}}return this.innerFrameForSize(b,a,e.width,e.height)}.property("align","image","scale","frame").cacheable(),localize:YES,status:SC.IMAGE_STATE_NONE,type:function(){var a=this.get("imageValue");if(SC.ImageView.valueIsUrl(a)){return SC.IMAGE_TYPE_URL}else{if(!SC.none(a)){return SC.IMAGE_TYPE_CSS_CLASS}}return SC.IMAGE_TYPE_NONE}.property("imageValue").cacheable(),useCanvas:function(){return SC.platform.supportsCanvas&&!this.get("useStaticLayout")&&this.get("type")!==SC.IMAGE_TYPE_CSS_CLASS}.property("useStaticLayout","type").cacheable(),useImageQueue:YES,value:null,viewDidResize:function(){var b=this.get("layer"),c,a;if(b){c=b.offsetWidth;a=b.offsetHeight;if(this._cachedWidth!==c||this._cachedHeight!==a){this.notifyPropertyChange("frame");this._cachedWidth=c;this._cachedHeight=a}}},init:function(){arguments.callee.base.apply(this,arguments);this._image_valueDidChange();if(this.get("useImageCache")!==undefined){SC.Logger.warn("%@ has useImageCache set, please set useImageQueue instead".fmt(this));this.set("useImageQueue",this.get("useImageCache"))}},layerDidChange:function(){if(this.get("useCanvas")){this.set("layerNeedsUpdate",YES)}}.observes("layer"),_image_valueDidChange:function(){var b=this.get("imageValue"),a=this.get("type");if(b!==this._iv_value){this._iv_value=b;this.set("image",SC.BLANK_IMAGE);if(a!==SC.IMAGE_TYPE_CSS_CLASS){this.set("status",SC.IMAGE_STATE_LOADING);if(!this._loadImageUsingCache()){this._loadImage()}}}}.observes("imageValue"),_loadImageUsingCache:function(){var c=this.get("imageValue"),b=this.get("type");if(b===SC.IMAGE_TYPE_URL&&this.get("useImageQueue")){var a=this.get("isVisibleInWindow")||this.get("canLoadInBackground");SC.imageQueue.loadImage(c,this,this._loadImageUsingCacheDidComplete,a);return YES}return NO},_loadImageUsingCacheDidComplete:function(a,c){var b=this.get("imageValue");if(b===a){if(SC.ok(c)){this.didLoad(c)}else{this.didError(c)}}},_loadImage:function(){var e=this.get("imageValue"),b=this.get("type"),c=this,g,a;if(b===SC.IMAGE_TYPE_URL){g=new Image();var f=function(){SC.run(function(){c._loadImageDidComplete(e,SC.$error("SC.Image.FailedError","Image",-101))})};var j=function(){SC.run(function(){c._loadImageDidComplete(e,g)})};a=$(g);a.bind("error",f);a.bind("abort",f);a.bind("load",j);g.src=e;return YES}return NO},_loadImageDidComplete:function(a,c){var b=this.get("imageValue");if(b===a){if(SC.ok(c)){this.didLoad(c)}else{this.didError(c)}}},didLoad:function(a){this.set("status",SC.IMAGE_STATE_LOADED);if(!a){a=SC.BLANK_IMAGE}this.set("image",a)},didError:function(a){this.set("status",SC.IMAGE_STATE_FAILED);this.set("image",SC.BLANK_IMAGE)}});SC.ImageView.valueIsUrl=function(a){return a?a.indexOf("/")>=0:NO};sc_require("views/field");sc_require("system/text_selection");sc_require("mixins/static_layout");sc_require("mixins/editable");SC.TextFieldView=SC.FieldView.extend(SC.StaticLayout,SC.Editable,{tagName:"label",classNames:["sc-text-field-view"],isTextField:YES,ariaRole:"textbox",applyImmediately:YES,commitOnBlur:YES,isPassword:NO,isTextArea:NO,hint:"",formattedHint:function(){var a=this.get("hint");return typeof(a)==="string"&&this.get("localize")?SC.String.loc(a):a}.property("hint","localize").cacheable(),localize:YES,isEditing:NO,defaultTabbingEnabled:YES,isContextMenuEnabled:YES,continuouslyUpdatesValue:null,allowsErrorAsValue:YES,leftAccessoryView:null,rightAccessoryView:null,spellCheckEnabled:YES,maxLength:5096,shouldRenderBorder:YES,supportsAutoResize:YES,autoResizeLayer:function(){return this.$input()[0]}.property("layer").cacheable(),autoResizeText:function(){return this.get("value")}.property("value").cacheable(),autoResizePadding:SC.propertyFromRenderDelegate("autoResizePadding",20),_hintON:YES,init:function(){var a=this.get("value");this._hintON=(!a||a&&a.length===0)?YES:NO;var b=this.get("continouslyUpdatesValue");if(b!==null&&b!==undefined){this.set("applyImmediately",b)}return arguments.callee.base.apply(this,arguments)},isEditable:YES,selection:function(q,o){var f=this.$input()[0],g,a,c;if(o===undefined){if(f){a=null;c=null;if(!f.value){a=c=0}else{try{if("selectionStart" in f){a=f.selectionStart}if("selectionEnd" in f){c=f.selectionEnd}}catch(j){return null}if(a===null||c===null){var p=document.selection;if(p){var n=p.type;if(n&&(n==="None"||n==="Text")){g=p.createRange();if(!this.get("isTextArea")){var b=g.text.length;a=Math.abs(g.moveStart("character",0-(f.value.length+1)));c=a+b}else{var k=g.duplicate();k.moveToElementText(f);k.setEndPoint("EndToStart",g);a=k.text.length;c=a+g.text.length}}}}}return SC.TextSelection.create({start:a,end:c})}else{return null}}else{if(!o||!o.kindOf||!o.kindOf(SC.TextSelection)){throw"When setting the selection, you must specify an SC.TextSelection instance."}if(f){if(f.setSelectionRange){f.setSelectionRange(o.get("start"),o.get("end"))}else{g=f.createTextRange();a=o.get("start");g.move("character",a);g.moveEnd("character",o.get("end")-a);g.select()}}return o}}.property("fieldValue").cacheable(),displayProperties:["formattedHint","fieldValue","isEditing","isEditable","leftAccessoryView","rightAccessoryView","isTextArea"],createChildViews:function(){arguments.callee.base.apply(this,arguments);this.accessoryViewObserver()},acceptsFirstResponder:function(){return this.get("isEnabled")}.property("isEnabled"),accessoryViewObserver:function(){var g,k=["leftAccessoryView","rightAccessoryView"],a=k.length,b,f,e,j;for(b=0;b<a;b++){f=k[b];e=this["_"+f];j=this.get(f);if(!(e&&j&&(e===j))){if(e){g=e.get("classNames");g=g.without("sc-text-field-accessory-view");e.set("classNames",g);this.removeChild(e);e=null;this["_"+f]=null}if(j){if(j.isClass){j=j.create({layoutView:this})}g=j.get("classNames");var c="sc-text-field-accessory-view";if(g.indexOf(c)<0){g=SC.clone(g);g.push(c);j.set("classNames",g)}this.appendChild(j);this["_"+f]=j}}}}.observes("leftAccessoryView","rightAccessoryView"),layoutChildViewsIfNeeded:function(a){if(!a){a=this.get("isVisibleInWindow")}if(a&&this.get("childViewsNeedLayout")){var b=this.get("rightAccessoryView");if(b&&b.get){var c=b.get("layout");if(c){c.left=null;if(!c.right){c.right=0}b.adjust({layout:c})}}}arguments.callee.base.apply(this,arguments)},render:function(f,g){arguments.callee.base.apply(this,arguments);var a,e,c,b;a=this.get("fieldValue");if(SC.none(a)){a=""}a=String(a);f.setClass("not-empty",a.length>0);if(g){f.attr("aria-multiline",this.get("isTextArea"));f.attr("aria-disabled",!this.get("isEnabled"));f.attr("aria-readonly",this.get("isEnabled")&&!this.get("isEditable"))}if(!SC.ok(this.get("value"))){f.attr("aria-invalid",YES)}e=this._getAccessoryViewWidths();c=e.left;b=e.right;if(c){c+="px"}if(b){b+="px"}this._renderField(f,g,a,c,b);if(SC.browser.mozilla){this.invokeLast(this._applyFirefoxCursorFix)}},_forceRenderFirstTime:NO,_renderFieldLikeFirstTime:function(){this.set("_forceRenderFirstTime",YES)}.observes("isTextArea"),_renderField:function(c,k,u,g,p){var q=this.get("formattedHint"),v,D,w,e,A,b,n,f,t=this.get("spellCheckEnabled"),C,j=this.get("maxLength"),a;c.setClass("text-area",this.get("isTextArea"));a=SC.browser.isWebkit&&(parseInt(SC.browser.webkit,0)<532);c.setClass("oldWebKitFieldPadding",a);C=t?' spellcheck="true"':' spellcheck="false"';if(k||this._forceRenderFirstTime){this._forceRenderFirstTime=NO;v=this.get("isEnabled")?(this.get("isEditable")?"":'readonly="readonly"'):'disabled="disabled"';D=this.get("layerId");if(this.get("shouldRenderBorder")){c.push('<span class="border"></span>')}w="";if(g||p){w='style="';if(g){w+="left: "+g+"; "}if(p){w+="right: "+p+";"}w+='"'}c.push('<span class="padding" '+w+">");u=this.get("escapeHTML")?SC.RenderContext.escapeHTML(u):u;if(!SC.platform.input.placeholder&&(!u||(u&&u.length===0))){u=q;c.setClass("sc-hint",YES)}f=(SC.browser.mozilla&&(parseFloat(SC.browser.mozilla)<1.9||SC.browser.mozilla.match(/1\.9\.0|1\.9\.1/)))?"field oldGecko":"field";if(this.get("isTextArea")){c.push('<textarea class="',f,'" name="',D,'" ',v,' placeholder="',q,'"',C,' maxlength="',j,'">',u,"</textarea></span>")}else{e="text";if(this.get("isPassword")&&(u!==q||SC.browser.isIE||SC.platform.input.placeholder)){e="password"}c.push('<input class="',f,'" type="',e,'" name="',D,'" ',v,' value="',u,'" placeholder="',q,'"',C,' maxlength="',j,'" /></span>')}}else{var o=this.$input(),z=o[0],B=this.get("value");if(!B||(B&&B.length===0)){if(this._hintON&&!this.get("isFirstResponder")){if(this.get("isPassword")&&z.type==="password"&&!SC.browser.isIE){z.type="text"}if(!SC.platform.input.placeholder){c.setClass("sc-hint",YES)}}else{if(this.get("isPassword")&&z.type==="text"&&!SC.browser.isIE){z.type="password"}if(!SC.platform.input.placeholder){c.setClass("sc-hint",NO);o.val("")}}}if(SC.platform.input.placeholder){o.attr("placeholder",q)}b=o[0];if(b){if(!this.get("isEnabled")){b.disabled="true";b.readOnly=null}else{if(!this.get("isEditable")){b.disabled=null;b.readOnly="true"}else{b.disabled=null;b.readOnly=null}}n=b.parentNode.style;if(g){if(n.left!==g){n.left=g}}else{n.left=null}if(p){if(n.right!==p){n.right=p}}else{n.right=null}}}},_getAccessoryViewWidths:function(){var c={},o=["left","right"],e=o.length,g,j,p,n,a,k,f,b;for(g=0;g<e;g++){j=o[g];p=this.get(j+"AccessoryView");if(p){if(p.isClass){p=p.create({layoutView:this})}if(p.get){b=p.get("frame");if(b){a=b.width;if(a){k=p.get("layout");if(k){f=k[j];a+=f}c[j]=a}}}}}return c},didCreateLayer:function(){arguments.callee.base.apply(this,arguments);if(!SC.platform.input.placeholder&&this._hintON){var b=this.$input().val();if(!b||(b&&b.length===0)){this.$input().val(this.get("formattedHint"))}}if(this.get("isTextArea")){this.invokeLast(this._addTextAreaEvents)}else{this._addTextAreaEvents();if(SC.browser.mozilla){var a=this.$input();SC.Event.add(a,"keypress",this,this._firefox_dispatch_keypress)}}},_addTextAreaEvents:function(){var a=this.$input();SC.Event.add(a,"focus",this,this._textField_fieldDidFocus);SC.Event.add(a,"blur",this,this._textField_fieldDidBlur);SC.Event.add(a,"select",this,this._textField_selectionDidChange);if(SC.browser.mozilla){this._cacheInputElement=this.$input();this._cachePaddingElement=this.$(".padding")}},willDestroyLayer:function(){arguments.callee.base.apply(this,arguments);var a=this.$input();SC.Event.remove(a,"focus",this,this._textField_fieldDidFocus);SC.Event.remove(a,"blur",this,this._textField_fieldDidBlur);SC.Event.remove(a,"select",this,this._textField_selectionDidChange);SC.Event.remove(a,"keypress",this,this._firefox_dispatch_keypress)},_textField_fieldDidFocus:function(a){SC.run(function(){this.set("focused",YES);this.fieldDidFocus(a);var b=this.get("value");if(!SC.platform.input.placeholder&&((!b)||(b&&b.length===0))){this._hintON=NO}},this)},_textField_fieldDidBlur:function(a){SC.run(function(){this.set("focused",NO);this.fieldDidBlur(this._origEvent||a);var b=this.get("value");if(!SC.platform.input.placeholder&&((!b)||(b&&b.length===0))){this._hintON=YES}},this)},fieldDidFocus:function(a){this.becomeFirstResponder();this.beginEditing(a);if(this._didHideInterceptForPane){this._didHideInterceptForPane.showTouchIntercept();this._didHideInterceptForPane=null}var b=this.get("pane");if(b&&b.get("hasTouchIntercept")){b.hideTouchIntercept();this._didHideInterceptForPane=this.get("pane")}},fieldDidBlur:function(a){this.resignFirstResponder();if(this.get("commitOnBlur")){this.commitEditing(a)}var b=this._didHideInterceptForPane;if(b){b.showTouchIntercept();b=null}},_field_fieldValueDidChange:function(a){if(this.get("focused")){SC.run(function(){this.fieldValueDidChange(NO)},this)}},_topOffsetForFirefoxCursorFix:3,_applyFirefoxCursorFix:function(){if(parseFloat(SC.browser.mozilla)<1.9&&!this.get("useStaticLayout")){var k,e,c,n,b,j,f,g;f=this._cacheInputElement;g=this._cachePaddingElement;if(g&&g[0]){j=g[0];b=SC.$(j).offset();if(SC.browser.compareVersion(1,9,2)<0&&f[0].tagName.toLowerCase()==="input"){k=b.top+this._topOffsetForFirefoxCursorFix}else{k=b.top}e=b.left;c=j.offsetWidth;n=j.offsetHeight;var a="position: fixed; top: %@px; left: %@px; width: %@px; height: %@px;".fmt(k,e,c,n);if(!this._prevStyle||this._prevStyle!=a){f.attr("style",a)}this._prevStyle=a}}return this},_firefox_dispatch_keypress:function(a){var e=this.get("selection"),f=this.get("value"),c=f?f.length:0,b;if(!e||((e.get("length")===0&&(e.get("start")===0)||e.get("end")===c))){b=SC.RootResponder.responder;if(a.keyCode===9){return}b.keypress.call(b,a);a.stopPropagation()}},_textField_selectionDidChange:function(){this.notifyPropertyChange("selection")},didBecomeKeyResponderFrom:function(a){if(this.get("isVisibleInWindow")){var b=this.$input()[0];try{if(b){b.focus()}}catch(c){}if(!this._txtFieldMouseDown){this.invokeLast(this._selectRootElement)}}},_selectRootElement:function(){var a=this.$input()[0];if(a){a.select()}else{this._textField_selectionDidChange()}},didLoseKeyResponderTo:function(a){var b=this.$input()[0];if(b){b.blur()}this.invokeLater("scrollToOriginIfNeeded",100)},scrollToOriginIfNeeded:function(){var b=this.get("pane");if(!b){return}var a=b.get("firstResponder");if(!a||!a.get("isTextField")){document.body.scrollTop=document.body.scrollLeft=0}},parentViewDidResize:function(){if(SC.browser.mozilla){this.invokeLast(this._applyFirefoxCursorFix)}arguments.callee.base.apply(this,arguments)},keyDown:function(b){var j=b.which,f=b.keyCode,c=false,e,a;if((j===SC.Event.KEY_RETURN&&!b.isIMEInput)&&!this.get("isTextArea")){return NO}if(j===SC.Event.KEY_ESC){return NO}if((j===SC.Event.KEY_TAB||f===SC.Event.KEY_TAB)&&this.get("defaultTabbingEnabled")){a=b.shiftKey?this.get("previousValidKeyView"):this.get("nextValidKeyView");if(a){a.becomeFirstResponder()}else{b.allowDefault()}return YES}if(!SC.platform.input.maxlength&&this.get("isTextArea")){var g=this.get("value");if(g&&((!SC.browser.mozilla&&j>47)||(SC.browser.mozilla&&((j>32&&j<43)||j>47)&&!(f>36&&f<41)))&&(g.length>=this.get("maxLength"))){c=true}}if((this.performValidateKeyDown(b)||SC.platform.touch)&&!c){this._isKeyDown=YES;b.allowDefault()}else{b.stop()}if(this.get("applyImmediately")){this.invokeLater(this.fieldValueDidChange,1)}return YES},keyUp:function(a){if(SC.browser.mozilla&&a.keyCode===SC.Event.KEY_RETURN){this.fieldValueDidChange()}this.notifyPropertyChange("selection");this._isKeyDown=NO;a.allowDefault();return YES},mouseDown:function(a){var b=this.get("fieldValue");this._txtFieldMouseDown=YES;if(!this.get("isEnabled")){a.stop();return YES}else{return arguments.callee.base.apply(this,arguments)}},mouseUp:function(a){this._txtFieldMouseDown=NO;this.notifyPropertyChange("selection");if(!this.get("isEnabled")){a.stop();return YES}return arguments.callee.base.apply(this,arguments)},touchStart:function(a){return this.mouseDown(a)},touchEnd:function(a){return this.mouseUp(a)},mouseWheel:function(a){if(this.get("isTextArea")){a.allowDefault();return YES}else{return NO}},selectStart:function(a){return YES},_valueObserver:function(){var b=this.get("value"),a;if(b&&b.length>0){this._hintON=NO;a=this.get("maxLength");if(!SC.platform.input.maxlength&&b.length>a){this.set("value",b.substr(0,a))}}else{this._hintON=YES}}.observes("value")});sc_require("views/text_field");sc_require("system/utils/misc");sc_require("delegates/inline_text_field");sc_require("mixins/inline_editor");SC.InlineTextFieldView=SC.TextFieldView.extend(SC.InlineEditor,{classNames:["inline-editor"],_topOffsetForFirefoxCursorFix:0,_updateViewStyle:function(b){var c="",a=SC.getStyle(b,"font-size");if(a&&a.length>0){c=c+"font-size: "+a+" !important; "}a=SC.getStyle(b,"font-family");if(a&&a.length>0){c=c+"font-family: "+a+" !important; "}a=SC.getStyle(b,"font-weight");if(a&&a.length>0){c=c+"font-weight: "+a+" !important; "}a=SC.getStyle(b,"z-index");if(a&&a.length>0){c=c+"z-index: "+a+" !important; "}a=SC.getStyle(b,"line-height");if(a&&a.length>0){c=c+"line-height: "+a+" !important; "}a=SC.getStyle(b,"text-align");if(a&&a.length>0){c=c+"text-align: "+a+" !important; "}a=SC.getStyle(b,"top-margin");if(a&&a.length>0){c=c+"top-margin: "+a+" !important; "}a=SC.getStyle(b,"bottom-margin");if(a&&a.length>0){c=c+"bottom-margin: "+a+" !important; "}a=SC.getStyle(b,"left-margin");if(a&&a.length>0){c=c+"left-margin: "+a+" !important; "}a=SC.getStyle(b,"right-margin");if(a&&a.length>0){c=c+"right-margin: "+a+" !important; "}return c},_updateViewPaddingStyle:function(b){var c="",a=SC.getStyle(b,"padding-top");if(a&&a.length>0){c=c+"top: "+a+" !important; "}a=SC.getStyle(b,"padding-bottom");if(a&&a.length>0){c=c+"bottom: "+a+" !important; "}a=SC.getStyle(b,"padding-left");if(a&&a.length>0){c=c+"left: "+a+" !important; "}a=SC.getStyle(b,"padding-right");if(a&&a.length>0){c=c+"right: "+a+" !important; "}return c},updateStyle:function(e){if(e.length){e=e[0]}var a=document.getElementById("sc-inline-text-field-style"),c=this._updateViewStyle(e),f=this._updateViewPaddingStyle(e),g=".inline-editor input{"+c+"}.inline-editor textarea{"+c+"}.inline-editor .padding{"+f+"}";if(!a){var b=document.getElementsByTagName("head")[0];a=document.createElement("style");a.type="text/css";a.media="screen";a.id="sc-inline-text-field-style";b.appendChild(a)}if(a.styleSheet){a.styleSheet.cssText=g}else{a.innerHTML=g}},positionOverTargetView:function(n,e,c,b,f){if(!c){c=n.get("pane")}if(!f){f=n.$()[0]}if(!b){var j=n.get("frame");b=SC.offset(f);b.height=j.height;b.width=j.width}var k={},a=c.$()[0],g=n.get("layout");k.height=b.height;k.width=b.width;if(e&&g.left){k.left=b.x-g.left-a.offsetLeft-1;if(SC.browser.msie==7){k.left--}}else{k.left=b.x-a.offsetLeft-1;if(SC.browser.msie==7){k.left--}}if(e&&g.top){k.top=b.y-g.top-a.offsetTop;if(SC.browser.msie==7){k.top=k.top-2}}else{k.top=b.y-a.offsetTop;if(SC.browser.msie==7){k.top=k.top-2}}this.set("layout",k)},multiline:NO,isTextArea:function(){return this.get("multiline")}.property("multiline").cacheable(),beginEditing:function(b,a){if(!b(a)){return NO}var e=a.get("pane"),c=this.get("exampleElement");this.beginPropertyChanges();if(c){if(c.length){c=c[0]}}else{c=a.$()[0]}this.updateStyle(c);this.positionOverTargetView(a,this.get("isCollection"),e,this.get("exampleFrame"),c);this._previousFirstResponder=e?e.get("firstResponder"):null;this.becomeFirstResponder();this.endPropertyChanges();return YES}.enhance(),blurEditor:function(a){if(!this.get("isEditing")){return YES}return this.commitOnBlur?this.commitEditing():this.discardEditing()},_endEditing:function(b){var a=b();if(this.get("isFirstResponder")){var c=this.get("pane");if(c&&this._previousFirstResponder){c.makeFirstResponder(this._previousFirstResponder)}else{this.resignFirstResponder()}}this._previousFirstResponder=null;return a}.enhance(),mouseDown:function(a){arguments.callee.base.call(this,a);return this.get("isEditing")},touchStart:function(a){this.mouseDown(a)},keyDown:function(a){var b=this.interpretKeyEvents(a);this.fieldValueDidChange(true);return !b?NO:b},insertText:null,_scitf_blurInput:function(){var a=this.$input()[0];if(a){a.blur()}a=null},willRemoveFromParent:function(){return this._scitf_blurInput()},willLoseFirstResponder:function(b,a){if(b!==this){return}this._previousFirstResponder=null;this._origEvent=a;this._scitf_blurInput();return this.blurEditor(a)},cancel:function(){this.discardEditing();return YES},fieldValueDidChange:function(a){arguments.callee.base.call(this,a)},insertNewline:function(a){if(this.get("isTextArea")){a.allowDefault();return arguments.callee.base.call(this,a)}else{if(this.get("value")!=this.$input().val()){this.set("value",this.$input().val())}this.commitEditing();return YES}},insertTab:function(a){var c=this.target;this.resignFirstResponder();this.commitEditing();if(c){var b=c.get("nextValidKeyView");if(b&&b.beginEditing){b.beginEditing()}}return YES},insertBacktab:function(a){var c=this.target;this.resignFirstResponder();this.commitEditing();if(c){var b=c.get("previousValidKeyView");if(b&&b.beginEditing){b.beginEditing()}}return YES},deleteForward:function(a){a.allowDefault();return YES},deleteBackward:function(a){a.allowDefault();return YES}});SC.mixin(SC.InlineTextFieldView,{inlineEditorDelegate:SC.InlineTextFieldDelegate,label:null,editor:null,beginEditing:function(c){var a,e,b,f,g;if(SC.typeOf(c)===SC.T_HASH){b=c;if(!b.delegate||!b.exampleElement||!b.frame){SC.error("Delegate, exampleElement, and frame options are required.");return NO}c=b.delegate;f=b.value}else{f=c.get("value")}g=SC.beget(c);g.mixin({inlineEditorWillBeginEditing:function(){if(c.inlineEditorWillBeginEditing){c.inlineEditorWillBeginEditing.apply(c,arguments)}},inlineEditorDidBeginEditing:function(){if(c.inlineEditorDidBeginEditing){c.inlineEditorDidBeginEditing.apply(c,arguments)}},inlineEditorWillCommitEditing:function(k,n,j){if(c.inlineEditorWillCommitEditing){c.inlineEditorWillCommitEditing(k,n,j)}if(c.inlineEditorWillEndEditing){c.inlineEditorWillEndEditing(k,n)}},inlineEditorDidCommitEditing:function(k,n,j){if(c.inlineEditorDidCommitEditing){c.inlineEditorDidCommitEditing(k,n,j)}if(c.inlineEditorDidEndEditing){c.inlineEditorDidEndEditing(k,n)}SC.InlineTextFieldView._endEditing()},inlineEditorWillDiscardEditing:function(k,j){if(c.inlineEditorWillDiscardEditing){c.inlineEditorWillDiscardEditing(k,j)}if(c.inlineEditorWillEndEditing){c.inlineEditorWillEndEditing(k,this.get("value"))}},inlineEditorDidDiscardEditing:function(k,j){if(c.inlineEditorDidDiscardEditing){c.inlineEditorDidDiscardEditing(k,j)}if(c.inlineEditorDidEndEditing){c.inlineEditorDidEndEditing(k,this.get("value"))}SC.InlineTextFieldView._endEditing()}});if(c.inlineEditorShouldBeginEditing&&!c.inlineEditorShouldBeginEditing(c,f)){return NO}this.editor=e=this.inlineEditorDelegate.acquireEditor(c);e.set("value",f);if(b){e.set("exampleElement",b.exampleElement);e.set("exampleFrame",b.frame);e.set("multiline",b.multiline);e.set("escapeHTML",b.escapeHTML);e.set("isCollection",b.isCollection);e.set("commitOnBLur",b.commitOnBlur);e.set("validator",b.validator)}if(e){return e.beginEditing(g)}else{return NO}},commitEditing:function(){return this.inlineEditorDelegate.editor?this.inlineEditorDelegate.editor.commitEditing():NO},discardEditing:function(){return this.inlineEditorDelegate.editor?this.inlineEditorDelegate.editor.discardEditing():NO},_endEditing:function(){this.inlineEditorDelegate.releaseEditor(this.editor);this.editor=null}});sc_require("mixins/inline_editable");sc_require("mixins/inline_editor_delegate");sc_require("delegates/inline_text_field");SC.REGULAR_WEIGHT="normal";SC.BOLD_WEIGHT="bold";SC.LabelView=SC.View.extend(SC.Control,SC.InlineEditable,{classNames:["sc-label-view"],displayProperties:["displayTitle","textAlign","fontWeight","icon","escapeHTML","needsEllipsis","hint"],inlineEditorDelegate:SC.InlineTextFieldDelegate,isEditable:NO,exampleEditor:SC.InlineTextFieldView,fontWeight:null,escapeHTML:YES,escapeHTMLBindingDefault:SC.Binding.oneWay().bool(),localize:NO,localizeBindingDefault:SC.Binding.oneWay().bool(),formatter:null,value:"",hint:null,icon:null,textAlign:null,supportsAutoResize:YES,autoResizeLayer:function(){return this.get("layer")}.property("layer").cacheable(),autoResizeText:function(){return this.get("displayTitle")}.property("displayTitle").cacheable(),autoResizePadding:SC.propertyFromRenderDelegate("autoResizePadding",10),renderDelegateName:"labelRenderDelegate",displayTitle:function(){var j,f;j=this.get("value");f=this.getDelegateProperty("formatter",this.displayDelegate);if(f){var g=(SC.typeOf(f)===SC.T_FUNCTION)?f(j,this):f.fieldValueForObject(j,this);if(!SC.none(g)){j=g}}if(SC.typeOf(j)===SC.T_ARRAY){var e=[];for(var b=0,c=j.get("length");b<c;b++){var a=j.objectAt(b);if(!SC.none(a)&&a.toString){a=a.toString()}e.push(a)}j=e.join(",")}if(!SC.none(j)&&j.toString){j=j.toString()}if(j&&this.getDelegateProperty("localize",this.displayDelegate)){j=SC.String.loc(j)}return j}.property("value","localize","formatter").cacheable(),hintValue:function(){var a=this.get("hint");return a}.property("hint").cacheable(),doubleClick:function(a){return this.beginEditing()},inlineEditorDidBeginEditing:function(b,c,e,a){this._oldOpacity=this.get("layout").opacity||1;this.adjust("opacity",0);b(c,e,a)}.enhance(),inlineEditorDidEndEditing:function(){this.adjust("opacity",this._oldOpacity);this._oldOpacity=null}});SC.allowsBackspaceToPreviousPage=NO;SC.HORIZONTAL_ORIENTATION="horizontal";SC.VERTICAL_ORIENTATION="vertical";if(typeof CHANCE_SLICES==="undefined"){var CHANCE_SLICES=[]}CHANCE_SLICES=CHANCE_SLICES.concat(["__s19_0","__s19_1","__s19_2","__s19_3","__s19_4","__s19_5","__s19_6","__s19_7","__s19_8","__s19_9","__s19_10","__s19_11","__s19_12","__s19_13","__s19_14","__s19_15","__s19_16","__s19_17","__s19_18","__s19_19","__s19_20","__s19_21","__s19_22","__s19_23","__s19_24","__s19_25","__s19_26","__s19_27","__s19_28","__s19_29","__s19_30","__s19_31","__s19_32"]);SC.BORDER_BEZEL="sc-bezel-border";SC.BORDER_BLACK="sc-black-border";SC.BORDER_GRAY="sc-gray-border";SC.BORDER_TOP="sc-top-border";SC.BORDER_BOTTOM="sc-bottom-border";SC.BORDER_NONE=null;SC.Border={borderTop:0,borderRight:0,borderBottom:0,borderLeft:0,borderStyle:SC.BORDER_GRAY,hasBorder:YES,displayProperties:["borderStyle"],_BORDER_REGEXP:(/-border$/),initMixin:function(){console.warn("SC.Border is deprecated, please set border in your layout");this._sc_border_borderStyleDidChange();this._sc_border_borderDimensionsDidChange()},renderMixin:function(a,c){var b=this.get("borderStyle");if(b){if(this._BORDER_REGEXP.exec(b)){a.addClass(b)}else{a.addStyle("border","1px "+b+" solid")}}},_sc_border_borderStyleDidChange:function(){var a=this.get("borderStyle"),b=SC.Border.dimensions[a];if(b){this.beginPropertyChanges();this.set("borderTop",b);this.set("borderRight",b);this.set("borderBottom",b);this.set("borderLeft",b);this.endPropertyChanges()}},_sc_border_borderDimensionsDidChange:function(){var e=this.get("borderTop"),a=this.get("borderRight"),b=this.get("borderBottom"),c=this.get("borderLeft");this.adjust({borderTop:e,borderRight:a,borderBottom:b,borderLeft:c})}.observes("borderTop","borderRight","borderBottom","borderLeft")};SC.mixin(SC.Border,{dimensions:{"sc-bezel-border":1,"sc-black-border":1,"sc-gray-border":1,"sc-top-border":1,"sc-bottom-border":1}});SC.CollectionFastPath={initMixin:function(){this._indexMap={}},poolForExampleView:function(a){var b="_pool_"+SC.guidFor(a);if(!this[b]){this[b]=[]}return this[b]},createItemViewFromExampleView:function(c,b){var a=this.createItemView(c,null,b);if(a.isPoolable){a.owningPool=this.poolForExampleView(c)}a.createdFromExampleView=c;return a},configureItemView:function(b,a){b.beginPropertyChanges();b.setIfChanged("content",a.content);b.setIfChanged("contentIndex",a.contentIndex);b.setIfChanged("parentView",a.parentView);b.setIfChanged("layerId",a.layerId);b.setIfChanged("isEnabled",a.isEnabled);b.setIfChanged("isSelected",a.isSelected);b.setIfChanged("outlineLevel",a.outlineLevel);b.setIfChanged("layout",a.layout);b.setIfChanged("disclosureState",a.disclosureState);b.setIfChanged("isVisibleInWindow",a.isVisibleInWindow);b.setIfChanged("isGroupView",a.isGroupView);b.setIfChanged("page",this.page);b.endPropertyChanges()},wakePooledView:function(b,a){this.configureItemView(b,a);if(b.awakeFromPool){b.awakeFromPool(b.owningPool,this)}},allocateItemView:function(e,b){var a;if(e.prototype.isPoolable){var c=this.poolForExampleView(e);if(c.length>0){a=c.pop();this.wakePooledView(a,b)}}if(!a){a=this.createItemViewFromExampleView(e,b)}return a},releaseItemView:function(b){if(!b.isPoolable){b.destroy();return}var a=b.owningPool;a.push(b);if(b.hibernateInPool){b.hibernateInPool(a,this)}},contentIndexIsGroup:function(a,e,c){var f=this.get("contentDelegate");var b=this.get("_contentGroupIndexes"),g=NO;g=b&&b.contains(c);if(g){g=f.contentIndexIsGroup(this,this.get("content"),c)}return g},exampleViewForItem:function(g,e){var b=this.get("contentDelegate"),c=this.get("_contentGroupIndexes"),f,a,j=this.contentIndexIsGroup(this,this.get("content"),e);if(j){f=this.get("contentGroupExampleViewKey");if(f&&g){a=g.get(f)}if(!a){a=this.get("groupExampleView")||this.get("exampleView")}}else{f=this.get("contentExampleViewKey");if(f&&g){a=g.get(f)}if(!a){a=this.get("exampleView")}}return a},setAttributesForItem:function(g,e,c){var b=this.get("contentDelegate"),j=this.contentIndexIsGroup(this,this.get("content"),e),a=this.exampleViewForItem(g,e),f=this.get("content");c.createdFromExampleView=a;c.parentView=this.get("containerView")||this;c.contentIndex=e;c.owner=c.displayDelegate=this;c.content=g;c.page=this.page;c.layerId=this.layerIdFor(e);c.isEnabled=b.contentIndexIsEnabled(this,f,e);c.isSelected=b.contentIndexIsSelected(this,f,e);c.outlineLevel=b.contentIndexOutlineLevel(this,f,e);c.disclosureState=b.contentIndexDisclosureState(this,f,e);c.isVisibleInWindow=this.get("isVisibleInWindow");c.isGroupView=j;c.layout=this.layoutForContentIndex(e);if(!c.layout){c.layout=a.prototype.layout}},mappedViewsForItem:function(a,b){if(!b){b=this._viewMap}return b[SC.guidFor(a)]},mappedViewForItem:function(c,b,e){if(!e){e=this._viewMap}var a=e[SC.guidFor(c)];if(!a){return undefined}return a[b]},mapView:function(f,c,b,j){if(!j){j=this._viewMap}var e=SC.guidFor(f),a=j[e];if(!a){a=j[e]={_length:0}}a[c]=b;a._length++},unmapView:function(f,c,j){if(!j){j=this._viewMap}var e=SC.guidFor(f),a=j[e];if(!a){return}if(a[c]){var b=a[c];delete a[c];a._length--;if(a._length<=0){delete j[e]}}},itemViewForContentIndex:function(b){var e=this.get("content");if(!e){return}var c=e.objectAt(b);if(!c){return null}var f=this.exampleViewForItem(c,b),a=this._indexMap[b];if(a&&a.createdFromExampleView!==f){this.removeItemView(a);this.unmapView(c,b);a=null}if(!a){a=this.addItemView(f,c,b)}return a},nearestMappedViewIndexForItem:function(f,c,g){var b=this.mappedViewsForItem(f,g);if(!b){return null}var e=null,k=-1,j=0;for(var a in b){a=parseInt(a,10);if(isNaN(a)){continue}j=Math.abs(c-a);if(k<0||j<k){k=j;e=a}}return e},remapItemViews:function(b){var o=this._viewMap||{},a=(this._viewMap={}),n=(this._indexMap={}),p=[],k=this.get("content"),u;if(!k){return}var g=this._itemsToAdd;b.forEach(function(w){u=k.objectAt(w);var A=this.mappedViewsForItem(u,o);if(A){if(A[w]){var z=A[w];this.unmapView(u,w,o);this.mapView(u,w,z,a);n[w]=z}else{p.push(w)}}else{g.push(w)}},this);for(var t=0,j=p.length;t<j;t++){var q=p[t];u=k.objectAt(q);var f=this.nearestMappedViewIndexForItem(u,q,o),c;if(!SC.none(f)){c=this.mappedViewForItem(u,f,o);var e=this.exampleViewForItem(u,q);if(e===c.createdFromExampleView){this.unmapView(u,f,o);this.mapView(u,q,c,a);n[q]=c}else{g.push(q)}}else{g.push(q)}}return o},reloadIfNeeded:function(g,b){var e=this.get("content"),f;if(!g||!g.isIndexSet){g=this.get("nowShowing")}if(!b){f=this._invalidIndexes;if(!f||!this.get("isVisibleInWindow")){return this}this._invalidIndexes=NO;if(f.isIndexSet&&f.contains(g)){f=YES}if(this.willReload){this.willReload(f===YES?null:f)}}var j=this._itemsToAdd||(this._itemsToAdd=[]);var a=this.remapItemViews(g);this.processRemovals(a);if(f){this.processUpdates(f===YES?g:f)}this.processAdds();if(!b){this.clearDOMPools()}j.length=0;if(!b){var c=this.computeLayout();if(c){this.adjust(c)}if(this.didReload){this.didReload(f===YES?null:f)}}return this},processRemovals:function(c){var g=this.get("content");for(var e in c){var b=c[e];for(var f in b){f=parseInt(f,10);if(isNaN(f)){continue}var a=b[f];if(this._indexMap[f]===a){delete this._indexMap[f]}a._isInCollection=NO;this.removeItemView(a)}}},processUpdates:function(f){var b=this._itemsToUpdate,e=this.get("content"),c,a;f.forEach(function(g){c=e.objectAt(g);if(a=this.mappedViewForItem(c,g)){if(!a._isInCollection){return}var j=this.exampleViewForItem(c,g);this.updateItemView(a,j,c,g)}},this)},processAdds:function(){var g=this.get("content");var j=this._itemsToAdd,b,a=j.length,f,e;for(b=0;b<a;b++){f=j[b];e=g.objectAt(f);var k=this.exampleViewForItem(e,f);var c=this.addItemView(k,e,f)}},clearDOMPools:function(){var a=this._domPools||(this._domPools={});for(var b in a){this.clearDOMPool(a[b])}},domPoolSize:10,clearDOMPool:function(c){var b,a=c.length,e;for(b=this.domPoolSize;b<a;b++){e=c[b];this.removeChild(e);this.releaseItemView(e)}c.length=Math.min(c.length,this.domPoolSize)},domPoolForExampleView:function(e){var c=this._domPools||(this._domPools={}),a=SC.guidFor(e);var b=c[a];if(!b){b=c[a]=[]}return b},itemFromDOMPool:function(c){var b=this.domPoolForExampleView(c);if(b.length<1){return null}var a=b.shift();if(a.wakeFromDOMPool){a.wakeFromDOMPool()}return a},sendToDOMPool:function(a){var b=this.domPoolForExampleView(a.createdFromExampleView);b.push(a);var c=a.get("frame");a.adjust({top:-c.height});a.set("layerId",SC.guidFor(a));if(a.sleepInDOMPool){a.sleepInDOMPool()}},addItemView:function(f,e,c){var a,b=this._TMP_ATTRS||(this._TMP_ATTRS={});this.setAttributesForItem(e,c,b);if(a=this.itemFromDOMPool(f)){this.configureItemView(a,b);a._isInCollection=YES;this.mapView(e,c,a);this._indexMap[c]=a;return a}a=this.allocateItemView(f,b);this.appendChild(a);a._isInCollection=YES;this.mapView(e,c,a);this._indexMap[c]=a;return a},removeItemView:function(a){if(a.get("layerIsCacheable")){this.sendToDOMPool(a)}else{this.removeChild(a)}a._isInCollection=NO},updateItemView:function(e,f,c,b){if(!e.get("layerIsCacheable")||e.createdFromExampleView!==f){this.unmapView(e,b);delete this._indexMap[b];this.removeItemView(e,c,b);var g=this.addItemView(f,c,b)}else{var a=this._TMP_ATTRS||(this._TMP_ATTRS={});this.setAttributesForItem(c,b,a);this.configureItemView(e,a)}},_lastTopUpdate:0,_lastLeftUpdate:0,_tolerance:100,touchScrollDidChange:function(j,g){if(Date.now()-this._lastTouchScrollTime<25){return}var k=this.get("clippingFrame");var f=this._inScrollClippingFrame||(this._inScrollClippingFrame={x:0,y:0,width:0,height:0});f.x=k.x;f.y=k.y;f.width=k.width;f.height=k.height;f.x=j;f.y=g;var e=this.contentIndexesInRect(f);if(!e){return}var b=this.get("length"),a=e.get("max"),c=e.get("min");if(a>b||c<0){e=e.copy();e.remove(b,a-b).remove(c,0-c).freeze()}if(this._lastNowShowing){if(e.contains(this._lastNowShowing)&&this._lastNowShowing.contains(e)){return}}this._lastNowShowing=e;this.reloadIfNeeded(e,YES);this._lastTouchScrollTime=Date.now()}};SC.CollectionGroup={classNames:["sc-collection-group"]};SC.CollectionRowDelegate={isCollectionRowDelegate:YES,itemHeight:24,rowSpacing:0,rowPadding:0,rowHeight:function(b,c){var a=this.get("rowPadding");var e=this.get("itemHeight");if(c!==undefined){this.set("itemHeight",c-a*2);return c}return e+a*2}.property("itemHeight","rowPadding"),customRowHeightIndexes:null,contentIndexRowHeight:function(a,b,c){return this.get("rowHeight")}};SC.CollectionViewDelegate={isCollectionViewDelegate:YES,collectionViewSelectionForProposedSelection:function(a,b){return b},collectionViewShouldSelectIndexes:function(a,b,c){return b},collectionViewShouldDeselectIndexes:function(a,b){return b},collectionViewShouldDeleteIndexes:function(a,b){return b},collectionViewDeleteContent:function(a,c,b){if(!c){return NO}if(SC.typeOf(c.destroyAt)===SC.T_FUNCTION){c.destroyAt(b);a.selectPreviousItem(NO,1);return YES}else{if(SC.typeOf(c.removeAt)===SC.T_FUNCTION){c.removeAt(b);a.selectPreviousItem(NO,1);return YES}else{return NO}}},collectionViewShouldBeginDrag:function(a){return YES},collectionViewDragDataTypes:function(a){return[]},collectionViewDragDataForType:function(a,c,b){return null},collectionViewComputeDragOperations:function(a,b,c){return c},collectionViewValidateDragOperation:function(b,e,f,c,a){return(a&SC.DROP_ON)?SC.DRAG_NONE:f},collectionViewPerformDragOperation:function(b,e,f,c,a){return SC.DRAG_NONE},collectionViewDragViewFor:function(a,b){return null},ghostActsLikeCursor:NO};SC.NavigationBuilder={isNavigationBuilder:YES,navigationTransitions:NO,initMixin:function(){var b=SC.Animatable;if(b&&!this.isAnimatable){this.mixin(b)}else{if(!b){SC.Logger.error("SC.NavigationView and SC.NavigationBuilder require SC.Animatable to perform animations, but it is not present. Please ensure your app or framework references it.")}}var a=this.get("navigationTransitions");if(!a&&SC.Animatable){a={left:{duration:0.25,timing:SC.Animatable.TRANSITION_EASE_IN_OUT,action:"navigationBuildDidFinish"},transform:{duration:0.25,timing:SC.Animatable.TRANSITION_EASE_IN_OUT,action:"navigationBuildDidFinish"}}}if(SC.Animatable){SC.mixin(this.transitions,a)}},metrics:function(){var a=this.computeFrameWithParentFrame();return a},transform:function(a){if(SC.platform.supportsCSS3DTransforms){this.adjust("transform","translate3d("+a+"px,0px,0px)")}else{this.adjust("transform","translate("+a+"px,0px)")}},buildInNavigation:function(){var a=this.metrics();this.disableAnimation();this.transform(this.get("buildDirection")===SC.TO_LEFT?a.width:-a.width);this.enableAnimation();this.invokeLater("transform",10,0)},buildOutNavigation:function(){var a=this.metrics();this.transform(this.get("buildDirection")===SC.TO_LEFT?-a.width:a.width)},buildIn:function(){this.buildInNavigation()},buildOut:function(){this.buildOutNavigation()},resetBuild:function(){this.transform(0)},navigationBuildDidFinish:function(){if(this.isBuildingIn){this.buildInDidFinish()}else{if(this.isBuildingOut){this.buildOutDidFinish()}}}};SC.Scrollable={isScrollable:true,verticalLineScroll:20,horizontalLineScroll:20,verticalPageScroll:function(){return this.get("innerFrame").height}.property("innerFrame"),horizontalPageScroll:function(){return this.get("innerFrame").width}.property("innerFrame"),hasVerticalScroller:function(){return this.get("scrollFrame").height>this.get("innerFrame").height}.property("scrollFrame"),hasHorizontalScroller:function(){return this.get("scrollFrame").width>this.get("innerFrame").width}.property("scrollFrame"),scrollBy:function(a){var b=this.get("scrollFrame");var c=this.get("innerFrame");if(!this.get("hasVerticalScroller")){a.y=0}if(b.height<=c.height){a.y=0}if(!this.get("hasHorizontalScroller")){a.x=0}if(b.width<=c.width){a.x=0}var e={x:b.x-(a.x||0),y:b.y-(a.y||0)};this.set("scrollFrame",e);e=this.get("scrollFrame");return{x:e.x-b.x,y:e.y-b.y}},scrollTo:function(a,b){this.set("scrollFrame",{x:0-a,y:0-b})},scrollToVisible:function(b){var g=this.get("innerFrame");var e=this.get("scrollFrame");var a=this.convertFrameFromView(b.get("frame"),b);a.x-=(g.x+e.x);a.y-=(g.y+e.y);var c={x:0-e.x,y:0-e.y,width:g.width,height:g.height};c.y-=Math.max(0,SC.minY(c)-SC.minY(a));c.x-=Math.max(0,SC.minX(c)-SC.minX(a));c.y+=Math.max(0,SC.maxY(a)-SC.maxY(c));c.x+=Math.max(0,SC.maxX(a)-SC.maxX(c));this.scrollTo(c.x,c.y)},scrollDownLine:function(a){if(a===undefined){a=1}return this.scrollBy({y:this.get("verticalLineScroll")*a}).y},scrollUpLine:function(a){if(a===undefined){a=1}return 0-this.scrollBy({y:0-this.get("verticalLineScroll")*a}).y},scrollRightLine:function(a){if(a===undefined){a=1}return this.scrollTo({y:this.get("horizontalLineScroll")*a}).x},scrollLeftLine:function(a){if(a===undefined){a=1}return 0-this.scrollTo({y:0-this.get("horizontalLineScroll")*a}).x},scrollDownPage:function(a){if(a===undefined){a=1}return this.scrollBy({y:this.get("verticalPageScroll")*a}).y},scrollUpPage:function(a){if(a===undefined){a=1}return 0-this.scrollBy({y:0-this.get("verticalPageScroll")*a}).y},scrollRightPage:function(a){if(a===undefined){a=1}return this.scrollTo({y:this.get("horizontalPageScroll")*a}).x},scrollLeftPage:function(a){if(a===undefined){a=1}return 0-this.scrollTo({y:0-this.get("horizontalPageScroll")*a}).x}};SC.ModalPane=SC.Pane.extend({classNames:"sc-modal",_openPaneCount:0,paneWillAppend:function(a){this._openPaneCount++;if(!this.get("isVisibleInWindow")){this.append()}return this},paneDidRemove:function(a){this._openPaneCount--;if(this._openPaneCount<=0){this._openPaneCount=0;if(this.get("isVisibleInWindow")){this.remove()}}},mouseDown:function(b){var a=this.get("owner");if(a&&a.modalPaneDidClick){a.modalPaneDidClick(b)}},touchStart:function(a){this.mouseDown(a)}});sc_require("panes/modal");SC.PanelPane=SC.Pane.extend({classNames:["sc-panel"],acceptsKeyPane:YES,ariaRole:"dialog",ariaLabel:null,isModal:YES,modalPane:SC.ModalPane.extend({classNames:"for-sc-panel"}),contentView:null,contentViewBindingDefault:SC.Binding.single(),replaceContent:function(a){this.removeAllChildren();if(a){this.appendChild(a)}},createChildViews:function(){var a=this.contentView;if(a){a=this.contentView=this.createChildView(a);this.childViews=[a]}},contentViewDidChange:function(){this.replaceContent(this.get("contentView"))}.observes("contentView"),renderDelegateName:"panelRenderDelegate",_modalPane:function(){var a=this.get("modalPane");if(a&&a.isClass){a=a.create({owner:this});this.set("modalPane",a)}return a},appendTo:function(a){var b;if(!this.get("isVisibleInWindow")&&this.get("isModal")&&(b=this._modalPane())){this._isShowingModal=YES;b.paneWillAppend(this)}return arguments.callee.base.apply(this,arguments)},remove:function(){var b,a=arguments.callee.base.apply(this,arguments);if(this._isShowingModal){this._isShowingModal=NO;if(b=this._modalPane()){b.paneDidRemove(this)}}return a},destroy:function(){var a=this.get("modalPane");if(a&&!a.isClass){a.destroy()}arguments.callee.base.apply(this,arguments)},_isModalDidChange:function(){var b,a=this.get("isModal");if(a){if(!this._isShowingModal&&this.get("isVisibleInWindow")&&(b=this._modalPane())){this._isShowingModal=YES;b.paneWillAppend(this)}}else{if(this._isShowingModal&&(b=this._modalPane())){this._isShowingModal=NO;b.paneDidRemove(this)}}}.observes("isModal"),paneDidAttach:function(){var a=arguments.callee.base.apply(this,arguments);this.becomeKeyPane();return a},displayProperties:["ariaLabel"]});SC.TOGGLE_BEHAVIOR="toggle";SC.PUSH_BEHAVIOR="push";SC.TOGGLE_ON_BEHAVIOR="on";SC.TOGGLE_OFF_BEHAVIOR="off";SC.HOLD_BEHAVIOR="hold";SC.ButtonView=SC.View.extend(SC.Control,{acceptsFirstResponder:function(){if(SC.FOCUS_ALL_CONTROLS){return this.get("isEnabled")}return NO}.property("isEnabled"),classNames:["sc-button-view"],themeName:"square",value:null,toggleOnValue:YES,toggleOffValue:NO,localize:NO,localizeBindingDefault:SC.Binding.bool(),title:"",contentTitleKey:null,icon:null,contentIconKey:null,needsEllipsis:YES,displayTitle:function(){var a=this.get("title");return(a&&this.get("localize"))?SC.String.loc(a):(a||"")}.property("title","localize").cacheable(),keyEquivalent:null,buttonBehavior:SC.PUSH_BEHAVIOR,holdInterval:100,isDefault:NO,isDefaultBindingDefault:SC.Binding.oneWay().bool(),isCancel:NO,isCancelBindingDefault:SC.Binding.oneWay().bool(),action:null,target:null,supportFocusRing:NO,supportsAutoResize:YES,autoResizeLayer:function(){return this.get("layer")}.property("layer").cacheable(),autoResizeText:function(){return this.get("displayTitle")}.property("displayTitle").cacheable(),autoResizePadding:SC.propertyFromRenderDelegate("autoResizePadding",10),_labelMinWidthIE7:0,triggerActionAfterDelay:function(a){if(!this.get("isEnabled")){return NO}this.set("isActive",YES);this.invokeLater("triggerAction",200,a);return YES},triggerAction:function(a){this._action(a,YES);this.didTriggerAction();this.set("isActive",NO)},didTriggerAction:function(){},titleMinWidth:80,init:function(){arguments.callee.base.apply(this,arguments);var a=this.get("keyEquivalent");if(a){this._defaultKeyEquivalent=a}if(!SC.none(this.get("value"))){this._button_valueDidChange()}},ariaRole:"button",displayProperties:["icon","displayTitle","value","displayToolTip","isDefault","isCancel","escapeHTML","needsEllipsis","hint","titleMinWidth","supportFocusRing"],renderDelegateName:"buttonRenderDelegate",contentPropertyDidChange:function(k,c){var b=this.get("displayDelegate"),f=this.get("content"),j;var e=this.getDelegateProperty("contentValueKey",b);if(e&&(c===e||c==="*")){this.set("value",f?(f.get?f.get(e):f[e]):null)}var a=this.getDelegateProperty("contentTitleKey",b);if(a&&(c===a||c==="*")){this.set("title",f?(f.get?f.get(a):f[a]):null)}var g=this.getDelegateProperty("contentIconKey",b);if(g&&(c===g||c==="*")){this.set("icon",f?(f.get?f.get(g):f[g]):null)}return this},_button_displayObserver:function(){this.displayDidChange()}.observes("title","icon","value"),performKeyEquivalent:function(c,b){if(!this.get("isVisibleInWindow")){return NO}if(!this.get("isEnabled")){return NO}var a=this.get("keyEquivalent");if(a){if(a===c){return this.triggerAction(b)}}else{if((this.get("isDefault")&&(c==="return"))||(this.get("isCancel")&&(c==="escape"))){return this.triggerAction(b)}}return NO},computeIsSelectedForValue:function(e){var b=this.get("toggleOnValue"),c,a;if(SC.typeOf(e)===SC.T_ARRAY){if(e.length===1){c=(e[0]==b)}else{c=null;e.find(function(f){a=(f==b);if(c===null){c=a}else{if(a!==c){c=SC.MIXED_STATE}}return c===SC.MIXED_STATE})}}else{if(e===SC.MIXED_STATE){c=SC.MIXED_STATE}else{c=(e===b)}}return c},_button_valueDidChange:function(){var b=this.get("value"),a=this.computeIsSelectedForValue(b);this.set("isSelected",a)}.observes("value"),_button_isSelectedDidChange:function(){var c=this.get("isSelected"),b=this.computeIsSelectedForValue(this.get("value"));if((c!==SC.MIXED_STATE)&&(b!==c)){var a=(c)?"toggleOnValue":"toggleOffValue";this.set("value",this.get(a))}}.observes("isSelected"),_defaultKeyEquivalent:null,_isDefaultOrCancelDidChange:function(){var b=!!this.get("isDefault"),a=!b&&this.get("isCancel");if(b){this.set("keyEquivalent","return")}else{if(a){this.set("keyEquivalent","escape")}else{this.set("keyEquivalent",this._defaultKeyEquivalent)}}}.observes("isDefault","isCancel"),mouseDown:function(a){var b=this.get("buttonBehavior");if(!this.get("isEnabled")){return YES}this.set("isActive",YES);this._isMouseDown=YES;if(b===SC.HOLD_BEHAVIOR){this._action(a)}else{if(!this._isFocused&&(b!==SC.PUSH_BEHAVIOR)){this._isFocused=YES;this.becomeFirstResponder()}}return YES},mouseExited:function(a){if(this._isMouseDown){this.set("isActive",NO)}return YES},mouseEntered:function(a){if(this._isMouseDown){this.set("isActive",YES)}return YES},mouseUp:function(b){if(this._isMouseDown){this.set("isActive",NO)}this._isMouseDown=false;if(this.get("buttonBehavior")!==SC.HOLD_BEHAVIOR){var a=this.$().within(b.target);if(a&&this.get("isEnabled")){this._action(b)}}return YES},touchStart:function(b){var a=this.get("buttonBehavior");if(!this.get("isEnabled")){return YES}this.set("isActive",YES);if(a===SC.HOLD_BEHAVIOR){this._action(b)}else{if(!this._isFocused&&(a!==SC.PUSH_BEHAVIOR)){this._isFocused=YES;this.becomeFirstResponder()}}b.preventDefault();return YES},touchesDragged:function(a,b){if(!this.touchIsInBoundary(a)){if(!this._touch_exited){this.set("isActive",NO)}this._touch_exited=YES}else{if(this._touch_exited){this.set("isActive",YES)}this._touch_exited=NO}a.preventDefault();return YES},touchEnd:function(a){this._touch_exited=NO;this.set("isActive",NO);if(this.get("buttonBehavior")!==SC.HOLD_BEHAVIOR){if(this.touchIsInBoundary(a)&&this.get("isEnabled")){this._action()}}a.preventDefault();return YES},keyDown:function(b){if(!this.get("isEnabled")){return YES}if(b.which===9||b.keyCode===9){var a=b.shiftKey?this.get("previousValidKeyView"):this.get("nextValidKeyView");if(a){a.becomeFirstResponder()}else{b.allowDefault()}return YES}if(b.which===13||b.which===32){this.triggerActionAfterDelay(b);return YES}b.allowDefault();return NO},_action:function(a,c){switch(this.get("buttonBehavior")){case SC.TOGGLE_BEHAVIOR:var b=this.get("isSelected");if(b){this.set("value",this.get("toggleOffValue"))}else{this.set("value",this.get("toggleOnValue"))}break;case SC.TOGGLE_ON_BEHAVIOR:this.set("value",this.get("toggleOnValue"));break;case SC.TOGGLE_OFF_BEHAVIOR:this.set("value",this.get("toggleOffValue"));break;case SC.HOLD_BEHAVIOR:this._runHoldAction(a,c);break;default:this._runAction(a)}},_runAction:function(a){var c=this.get("action"),e=this.get("target")||null,b=this.getPath("pane.rootResponder");if(c){if(this._hasLegacyActionHandler()){this._triggerLegacyActionHandler(a)}else{if(b){b.sendAction(c,e,this,this.get("pane"),null,this)}}}},_runHoldAction:function(a,b){if(this.get("isActive")){this._runAction();if(!b){SC.RunLoop.begin();this.invokeLater("_runHoldAction",this.get("holdInterval"),a);SC.RunLoop.end()}}},_hasLegacyActionHandler:function(){var a=this.get("action");if(a&&(SC.typeOf(a)===SC.T_FUNCTION)){return true}if(a&&(SC.typeOf(a)===SC.T_STRING)&&(a.indexOf(".")!=-1)){return true}return false},_triggerLegacyActionHandler:function(evt){if(!this._hasLegacyActionHandler()){return false}var action=this.get("action");if(SC.typeOf(action)===SC.T_FUNCTION){this.action(evt)}if(SC.typeOf(action)===SC.T_STRING){eval("this.action = function(e) { return "+action+"(this, e); };");this.action(evt)}},didBecomeKeyResponderFrom:function(a){if(!this._isFocused){this._isFocused=YES;this.becomeFirstResponder();if(this.get("isVisibleInWindow")){this.$().focus()}}},willLoseKeyResponderTo:function(a){if(this._isFocused){this._isFocused=NO}},didAppendToDocument:function(){if(parseInt(SC.browser.msie,0)===7&&this.get("useStaticLayout")){var f=this.get("layout"),e=this.$(),a=0;if(e&&e[0]&&(a=e[0].clientWidth)&&a!==0&&this._labelMinWidthIE7===0){var c=this.$(".sc-button-label"),k=parseInt(c.css("paddingRight"),0),b=parseInt(c.css("paddingLeft"),0),j=parseInt(c.css("marginRight"),0),g=parseInt(c.css("marginLeft"),0);if(j=="auto"){SC.Logger.log(j+","+g+","+k+","+b)}if(!k&&isNaN(k)){k=0}if(!b&&isNaN(b)){b=0}if(!j&&isNaN(j)){j=0}if(!g&&isNaN(g)){g=0}this._labelMinWidthIE7=a-(k+b)-(j+g);c.css("minWidth",this._labelMinWidthIE7+"px")}else{this.invokeLater(this.didAppendToDocument,1)}}}});SC.ButtonView.CLICK_AND_HOLD_DELAY=SC.browser.msie?600:300;SC.REGULAR_BUTTON_HEIGHT=24;sc_require("panes/panel");sc_require("views/button");SC.BUTTON1_STATUS="button1";SC.BUTTON2_STATUS="button2";SC.BUTTON3_STATUS="button3";SC.AlertPane=SC.PanelPane.extend({classNames:["sc-alert"],ariaRole:"alertdialog",delegate:null,icon:"sc-icon-alert-48",message:"",ariaLabel:function(){return this.get("message")}.property("message").cacheable(),description:"",displayDescription:function(){var a=this.get("description");if(!a||a.length===0){return a}a=SC.RenderContext.escapeHTML(a);return'<p class="description">'+a.split("\n").join('</p><p class="description">')+"</p>"}.property("description").cacheable(),caption:"",displayCaption:function(){var a=this.get("caption");if(!a||a.length===0){return a}a=SC.RenderContext.escapeHTML(a);return'<p class="caption">'+a.split("\n").join('</p><p class="caption">')+"</p>"}.property("caption").cacheable(),button1:SC.outlet("contentView.childViews.1.childViews.1"),button2:SC.outlet("contentView.childViews.1.childViews.0"),button3:SC.outlet("contentView.childViews.2.childViews.0"),buttonThreeWrapper:SC.outlet("contentView.childViews.2"),layout:{top:0.3,centerX:0,width:500},contentView:SC.View.extend({useStaticLayout:YES,layout:{left:0,right:0,top:0,height:"auto"},childViews:[SC.View.extend(SC.StaticLayout,{classNames:["info"],render:function(a,c){var b=this.get("pane");if(b.get("icon")=="blank"){a.addClass("plain")}a.push('<img src="'+SC.BLANK_IMAGE_URL+'" class="icon '+b.get("icon")+'" />');a.begin("h1").attr("class","header").text(b.get("message")||"").end();a.push(b.get("displayDescription")||"");a.push(b.get("displayCaption")||"");a.push('<div class="separator"></div>')}}),SC.View.extend({layout:{bottom:13,height:24,right:18,width:466},childViews:["cancelButton","okButton"],classNames:["text-align-right"],cancelButton:SC.ButtonView.extend({useStaticLayout:YES,actionKey:SC.BUTTON2_STATUS,localize:YES,titleMinWidth:64,layout:{right:5,height:"auto",width:"auto",bottom:0},isCancel:YES,action:"dismiss",isVisible:NO}),okButton:SC.ButtonView.extend({useStaticLayout:YES,actionKey:SC.BUTTON1_STATUS,localize:YES,titleMinWidth:64,layout:{left:0,height:"auto",width:"auto",bottom:0},isDefault:YES,action:"dismiss",isVisible:NO})}),SC.View.extend({layout:{bottom:13,height:24,left:18,width:150},childViews:[SC.ButtonView.extend({useStaticLayout:YES,actionKey:SC.BUTTON3_STATUS,localize:YES,titleMinWidth:64,layout:{left:0,height:"auto",width:"auto",bottom:0},action:"dismiss",isVisible:NO})]})]}),dismiss:function(b){var a=this.delegate,c,e,f;if(a&&a.alertPaneDidDismiss){a.alertPaneDidDismiss(this,b.get("actionKey"))}if(e=(b&&b.get("customAction"))){if(SC.typeOf(e)===SC.T_FUNCTION){e.call(e)}else{c=this.getPath("pane.rootResponder");if(c){f=b.get("target");c.sendAction(e,f||a,this,this,null,this)}}}this.remove()},alertInfoDidChange:function(){var a=this.getPath("contentView.childViews.0");if(a){a.displayDidChange()}}.observes("icon","message","displayDescription","displayCaption")});SC.AlertPane.mixin({show:function(g){g=SC.AlertPane._argumentsCall.apply(this,arguments);var a=this.create(g),o=0,j=g.buttons,f,k,b,e,c;if(j){j.forEach(function(p){o++;if(!p){return}f=a.get("button%@".fmt(o));k=p.title;b=p.action;e=p.target;c=g.themeName||"capsule";f.set("title".fmt(o),k);if(b){f.set("customAction".fmt(o),b)}if(e){f.set("target".fmt(o),e)}f.set("isVisible",!!k);f.set("themeName",c)})}else{f=a.get("button1");f.set("title","OK");f.set("isVisible",YES)}var n=a.append();a.adjust("height",a.childViews[0].$().height());a.updateLayout();return n},warn:function(a){a=SC.AlertPane._argumentsCall.apply(this,arguments);a.icon="sc-icon-alert-48";return this.show(a)},info:function(a){a=SC.AlertPane._argumentsCall.apply(this,arguments);a.icon="sc-icon-info-48";return this.show(a)},error:function(a){a=SC.AlertPane._argumentsCall.apply(this,arguments);a.icon="sc-icon-error-48";return this.show(a)},plain:function(a){a=SC.AlertPane._argumentsCall.apply(this,arguments);a.icon="blank";return this.show(a)},_argumentsCall:function(b){var a=b;if(SC.typeOf(b)!==SC.T_HASH){var c=this._normalizeArguments(arguments);a={message:c[0],description:c[1],caption:c[2],delegate:c[7],icon:(c[6]||"sc-icon-alert-48"),themeName:"capsule"};if(SC.typeOf(c[3])===SC.T_STRING||SC.typeOf(c[4])===SC.T_STRING||SC.typeOf(c[5])===SC.T_STRING){a.buttons=[{title:c[3]},{title:c[4]},{title:c[5]}]}}return a},_normalizeArguments:function(b){b=SC.A(b);var a=b.length,c=b[a-1];if(SC.typeOf(c)!==SC.T_STRING){b[a-1]=null}else{c=null}b[7]=c;return b}});sc_require("panes/panel");SC.PalettePane=SC.PanelPane.extend({classNames:["sc-palette"],isModal:NO,modalPane:SC.ModalPane,isAnchored:NO,_mouseOffsetX:null,_mouseOffsetY:null,mouseDown:function(a){var b=this.get("frame");this._mouseOffsetX=b?(b.x-a.pageX):0;this._mouseOffsetY=b?(b.y-a.pageY):0;return YES},mouseDragged:function(a){if(!this.isAnchored){this.set("layout",{width:this.layout.width,height:this.layout.height,left:this._mouseOffsetX+a.pageX,top:this._mouseOffsetY+a.pageY});this.updateLayout()}return YES},touchStart:function(a){return this.mouseDown(a)},touchesDragged:function(a){return this.mouseDragged(a)}});sc_require("panes/palette");SC.PICKER_MENU="menu";SC.PICKER_FIXED="fixed";SC.PICKER_POINTER="pointer";SC.PICKER_MENU_POINTER="menu-pointer";SC.POINTER_LAYOUT=["perfectRight","perfectLeft","perfectTop","perfectBottom"];SC.PickerPane=SC.PalettePane.extend({classNames:["sc-picker"],isAnchored:YES,isModal:YES,pointerPos:"perfectRight",pointerPosX:0,pointerPosY:0,anchorElement:null,anchorCached:null,preferType:null,preferMatrix:null,pointerOffset:null,extraRightOffset:0,removeTarget:null,removeAction:null,popup:function(e,c,f,a){var b;if(e){b=e.isView?e.get("layer"):e}this.beginPropertyChanges();this.set("anchorElement",b);if(c){this.set("preferType",c)}if(f){this.set("preferMatrix",f)}if(a){this.set("pointerOffset",a)}this.endPropertyChanges();this.positionPane();this._hideOverflow();return this.append()},positionPane:function(g){g=g&&this.get("anchorCached");var b=g?this.get("anchorCached"):this.get("anchorElement"),c=this.get("preferType"),e=this.get("preferMatrix"),f=this.get("layout"),a;if(b){if(!g){b=this.computeAnchorRect(b);this.set("anchorCached",b)}if(b.x===0&&b.y===0){return}a=SC.cloneRect(b);if(c){switch(c){case SC.PICKER_MENU:case SC.PICKER_FIXED:if(!e||e.length!==3){this.set("preferMatrix",[1,4,3])}a.x+=((this.preferMatrix[2]===0)?a.width:0)+this.preferMatrix[0];a.y+=((this.preferMatrix[2]===3)?a.height:0)+this.preferMatrix[1];break;default:a.y+=a.height;break}}else{a.y+=a.height}a=this.fitPositionToScreen(a,this.get("frame"),b);this.adjust({width:a.width,height:a.height,left:a.x,top:a.y})}else{this.adjust({width:f.width,height:f.height,centerX:0,centerY:0})}this.updateLayout();return this},computeAnchorRect:function(c){var f,b,e,a=SC.RootResponder.responder.computeWindowSize();if(c.getBoundingClientRect){f=c.getBoundingClientRect();b={x:f.left,y:f.top,width:f.width,height:f.height};if(b.width===undefined||b.height===undefined){e=SC.$(c);b.width=e.outerWidth();b.height=e.outerHeight()}}else{b=SC.offset(c);e=SC.$(c);b.width=e.outerWidth();b.height=e.outerHeight()}b.height=(a.height-b.y)<b.height?(a.height-b.y):b.height;if(!SC.browser.msie&&window.scrollX>0||window.scrollY>0){b.x+=window.scrollX;b.y+=window.scrollY}else{if(SC.browser.msie&&(document.documentElement.scrollTop>0||document.documentElement.scrollLeft>0)){b.x+=document.documentElement.scrollLeft;b.y+=document.documentElement.scrollTop}}return b},fitPositionToScreen:function(f,c,b){var a=SC.RootResponder.responder.computeWindowSize(),e={x:0,y:0,width:a.width,height:a.height};c.x=f.x;c.y=f.y;if(this.preferType){switch(this.preferType){case SC.PICKER_MENU:c=this.fitPositionToScreenMenu(e,c,this.get("isSubMenu"));break;case SC.PICKER_MENU_POINTER:this.setupPointer(b);c=this.fitPositionToScreenMenuPointer(e,c,b);break;case SC.PICKER_POINTER:this.setupPointer(b);c=this.fitPositionToScreenPointer(e,c,b);break;case SC.PICKER_FIXED:break;default:break}}else{c=this.fitPositionToScreenDefault(e,c,b)}this.displayDidChange();return c},fitPositionToScreenDefault:function(c,e,b){if(SC.maxX(e)>c.width){var g=Math.max(SC.maxX(b),e.width);e.x=Math.min(g,c.width)-e.width}if(SC.minX(e)<0){e.x=SC.minX(Math.max(b,0));if(SC.maxX(e)>c.width){e.x=Math.max(0,c.width-e.width)}}if(SC.maxY(e)>c.height){g=Math.max((b.y-e.height),0);if(g>c.height){e.y=Math.max(0,c.height-e.height)}else{e.y=g}}if(SC.minY(e)<0){g=Math.min(SC.maxY(b),(c.height-b.height));e.y=Math.max(g,0)}return e},fitPositionToScreenMenu:function(c,b,a){if(a){b.x-=this.get("submenuOffsetX");b.y-=Math.floor(this.get("menuHeightPadding")/2)}if((b.x+b.width)>(c.width-20)){if(a){b.x=b.x-(b.width*2)}else{b.x=c.width-b.width-20}}if(b.x<7){b.x=7}if(b.y<7){b.height+=b.y;b.y=7}if(b.height+b.y+35>=c.height){if(b.height+50>=c.height){b.y=SC.MenuPane.VERTICAL_OFFSET;b.height=c.height-(SC.MenuPane.VERTICAL_OFFSET*2)}else{b.y+=(c.height-(b.height+b.y+35))}}return b},fitPositionToScreenMenuPointer:function(c,e,b){e=this.fitPositionToScreenPointer(c,e,b);if(e.height+e.y+35>=c.height){e.height=c.height-e.y-(SC.MenuPane.VERTICAL_OFFSET*2)}return e},fitPositionToScreenPointer:function(t,p,q){var k=[this.pointerOffset[0],this.pointerOffset[1],this.pointerOffset[2],this.pointerOffset[3]];var g=[[q.x+q.width+k[0],q.y+parseInt(q.height/2,0)-40],[q.x-p.width+k[1],q.y+parseInt(q.height/2,0)-40],[q.x+parseInt((q.width/2)-(p.width/2),0),q.y-p.height+k[2]],[q.x+parseInt((q.width/2)-(p.width/2),0),q.y+q.height+k[3]]];var c=[[q.x+q.width+p.width+k[0],q.y+parseInt(q.height/2,0)+p.height-24],[q.x+k[1],q.y+parseInt(q.height/2,0)+p.height-24],[q.x+parseInt((q.width/2)-(p.width/2),0)+p.width,q.y+k[2]],[q.x+parseInt((q.width/2)-(p.width/2),0)+p.width,q.y+q.height+p.height+k[3]]];var j=[[g[0][1]>0?0:0-g[0][1],c[0][0]<t.width?0:c[0][0]-t.width,c[0][1]<t.height?0:c[0][1]-t.height,g[0][0]>0?0:0-g[0][0]],[g[1][1]>0?0:0-g[1][1],c[1][0]<t.width?0:c[1][0]-t.width,c[1][1]<t.height?0:c[1][1]-t.height,g[1][0]>0?0:0-g[1][0]],[g[2][1]>0?0:0-g[2][1],c[2][0]<t.width?0:c[2][0]-t.width,c[2][1]<t.height?0:c[2][1]-t.height,g[2][0]>0?0:0-g[2][0]],[g[3][1]>0?0:0-g[3][1],c[3][0]<t.width?0:c[3][0]-t.width,c[3][1]<t.height?0:c[3][1]-t.height,g[3][0]>0?0:0-g[3][0]]];var e=this.preferMatrix;if(e[4]===-1){p.x=q.x+parseInt(q.width/2,0);p.y=q.y+parseInt(q.height/2,0)-parseInt(p.height/2,0);this.set("pointerPos",SC.POINTER_LAYOUT[0]+" fallback");this.set("pointerPosY",parseInt(p.height/2,0)-40)}else{p.x=g[e[4]][0];p.y=g[e[4]][1];this.set("pointerPos",SC.POINTER_LAYOUT[e[4]]);this.set("pointerPosY",0)}this.set("pointerPosX",0);for(var n=0,b,o=SC.POINTER_LAYOUT.length;n<o;n++){b=e[n];if(j[b][0]===0&&j[b][1]===0&&j[b][2]===0&&j[b][3]===0){if(e[4]!==b){p.x=g[b][0];p.y=g[b][1];this.set("pointerPosY",0);this.set("pointerPos",SC.POINTER_LAYOUT[b])}n=SC.POINTER_LAYOUT.length}else{if((b===0||b===1)&&j[b][0]===0&&j[b][1]===0&&j[b][2]<p.height-91&&j[b][3]===0){if(e[4]!==b){p.x=g[b][0];this.set("pointerPos",SC.POINTER_LAYOUT[b])}p.y=g[b][1]-j[b][2];this.set("pointerPosY",j[b][2]);n=SC.POINTER_LAYOUT.length}else{if((b===0||b===1)&&j[b][0]===0&&j[b][1]===0&&j[b][2]<=p.height-51&&j[b][3]===0){if(e[4]!==b){p.x=g[b][0]}p.y=g[b][1]-(p.height-51);this.set("pointerPosY",(p.height-53));this.set("pointerPos",SC.POINTER_LAYOUT[b]+" extra-low");n=SC.POINTER_LAYOUT.length}else{if((b===2||b===3)&&j[b][0]===0&&j[b][1]<=parseInt(p.width/2,0)-this.get("extraRightOffset")&&j[b][2]===0&&j[b][3]===0){if(e[4]!==b){p.y=g[b][1]}p.x=g[b][0]-(parseInt(p.width/2,0)-this.get("extraRightOffset"));this.set("pointerPos",SC.POINTER_LAYOUT[b]+" extra-right");n=SC.POINTER_LAYOUT.length}else{if((b===2||b===3)&&j[b][0]===0&&j[b][1]===0&&j[b][2]===0&&j[b][3]<=parseInt(p.width/2,0)-this.get("extraRightOffset")){if(e[4]!==b){p.y=g[b][1]}p.x=g[b][0]+(parseInt(p.width/2,0)-this.get("extraRightOffset"));this.set("pointerPos",SC.POINTER_LAYOUT[b]+" extra-left");n=SC.POINTER_LAYOUT.length}}}}}}return p},setupPointer:function(g){var j=this.pointerOffset,f=SC.PickerPane;if(!j||j.length!==4){if(this.get("preferType")==SC.PICKER_MENU_POINTER){switch(this.get("controlSize")){case SC.TINY_CONTROL_SIZE:this.set("pointerOffset",f.TINY_PICKER_MENU_POINTER_OFFSET);this.set("extraRightOffset",f.TINY_PICKER_MENU_EXTRA_RIGHT_OFFSET);break;case SC.SMALL_CONTROL_SIZE:this.set("pointerOffset",f.SMALL_PICKER_MENU_POINTER_OFFSET);this.set("extraRightOffset",f.SMALL_PICKER_MENU_EXTRA_RIGHT_OFFSET);break;case SC.REGULAR_CONTROL_SIZE:this.set("pointerOffset",f.REGULAR_PICKER_MENU_POINTER_OFFSET);this.set("extraRightOffset",f.REGULAR_PICKER_MENU_EXTRA_RIGHT_OFFSET);break;case SC.LARGE_CONTROL_SIZE:this.set("pointerOffset",f.LARGE_PICKER_MENU_POINTER_OFFSET);this.set("extraRightOffset",f.LARGE_PICKER_MENU_EXTRA_RIGHT_OFFSET);break;case SC.HUGE_CONTROL_SIZE:this.set("pointerOffset",f.HUGE_PICKER_MENU_POINTER_OFFSET);this.set("extraRightOffset",f.HUGE_PICKER_MENU_EXTRA_RIGHT_OFFSET);break}}else{var e=(g.width<16)?((g.width<4)?9:6):0,b=(g.height<16)?((g.height<4)?9:6):0,c=f.PICKER_POINTER_OFFSET;var k=[c[0]+e,c[1]-e,c[2]-b,c[3]+b];this.set("pointerOffset",k);this.set("extraRightOffset",f.PICKER_EXTRA_RIGHT_OFFSET)}}if(!this.preferMatrix||this.preferMatrix.length!==5){this.set("preferMatrix",this.get("preferType")==SC.PICKER_MENU_POINTER?[3,0,1,2,3]:[0,1,2,3,2])}},displayProperties:["preferType","pointerPos","pointerPosY"],renderDelegateName:"pickerRenderDelegate",modalPaneDidClick:function(a){var e=this.get("frame"),g=this.get("removeTarget")||null,c=this.get("removeAction"),b=this.get("rootResponder");if(!this.clickInside(e,a)){if(c){b.sendAction(c,g,this,this,null,this)}else{this.remove()}return YES}return NO},mouseDown:function(a){return this.modalPaneDidClick(a)},clickInside:function(b,a){return SC.pointInRect({x:a.pageX,y:a.pageY},b)},windowSizeDidChange:function(b,a){this.positionPane()},remove:function(){if(this.get("isVisibleInWindow")&&this.get("isPaneAttached")){this._showOverflow()}return arguments.callee.base.apply(this,arguments)},_hideOverflow:function(){var b=SC.$(document.body),a=SC.$(".sc-main"),e=parseInt(a.css("minWidth"),0),f=parseInt(a.css("minHeight"),0),c=SC.RootResponder.responder.get("currentWindowSize");if(c.width>=e&&c.height>=f){SC.PICKERS_OPEN++;if(SC.PICKERS_OPEN>0){b.css("overflow","hidden")}}},_showOverflow:function(){var a=SC.$(document.body);if(SC.PICKERS_OPEN>0){SC.PICKERS_OPEN--}if(SC.PICKERS_OPEN===0){a.css("overflow","visible")}}});SC.PICKERS_OPEN=0;SC.PickerPane.PICKER_POINTER_OFFSET=[9,-9,-18,18];SC.PickerPane.PICKER_EXTRA_RIGHT_OFFSET=20;SC.PickerPane.TINY_PICKER_MENU_POINTER_OFFSET=[9,-9,-18,18];SC.PickerPane.TINY_PICKER_MENU_EXTRA_RIGHT_OFFSET=12;SC.PickerPane.SMALL_PICKER_MENU_POINTER_OFFSET=[9,-9,-8,8];SC.PickerPane.SMALL_PICKER_MENU_EXTRA_RIGHT_OFFSET=11;SC.PickerPane.REGULAR_PICKER_MENU_POINTER_OFFSET=[9,-9,-12,12];SC.PickerPane.REGULAR_PICKER_MENU_EXTRA_RIGHT_OFFSET=12;SC.PickerPane.LARGE_PICKER_MENU_POINTER_OFFSET=[9,-9,-16,16];SC.PickerPane.LARGE_PICKER_MENU_EXTRA_RIGHT_OFFSET=17;SC.PickerPane.HUGE_PICKER_MENU_POINTER_OFFSET=[9,-9,-18,18];SC.PickerPane.HUGE_PICKER_MENU_EXTRA_RIGHT_OFFSET=12;SC.SeparatorView=SC.View.extend({classNames:["sc-separator-view"],tagName:"span",layoutDirection:SC.LAYOUT_HORIZONTAL,render:function(a,b){if(b){a.push("<span></span>")}a.addClass(this.get("layoutDirection"))}});sc_require("views/button");sc_require("views/separator");SC.MenuItemView=SC.View.extend(SC.ContentDisplay,{classNames:["sc-menu-item"],displayProperties:["title","isEnabled","isSeparator","isChecked"],ariaRole:"menuitem",escapeHTML:YES,acceptsFirstResponder:YES,blocksIEDeactivate:YES,isContextMenuEnabled:NO,content:null,isSeparator:function(){return this.getContentProperty("itemSeparatorKey")===YES}.property("content").cacheable(),isEnabled:function(){return this.getContentProperty("itemIsEnabledKey")!==NO&&this.getContentProperty("itemSeparatorKey")!==YES}.property("content.isEnabled").cacheable(),isChecked:function(){return this.getContentProperty("itemCheckboxKey")}.property(),subMenu:function(){var c=this.get("content"),b,a;if(!c){return null}a=this.get("parentMenu");b=c.get(a.itemSubMenuKey);if(b){if(SC.kindOf(b,SC.MenuPane)){b.set("isModal",NO);b.set("isSubMenu",YES);b.set("parentMenu",a);return b}else{return SC.MenuPane.create({layout:{width:200},items:b,isModal:NO,isSubMenu:YES,parentMenu:a,controlSize:a.get("controlSize")})}}return null}.property("content").cacheable(),hasSubMenu:function(){return !!this.get("subMenu")}.property("subMenu").cacheable(),init:function(){arguments.callee.base.apply(this,arguments);this.contentDidChange()},render:function(b,k){var c=this.get("content"),a,g,f=this.get("parentMenu"),e=this.get("itemWidth")||f.layout.width,j=this.get("itemHeight")||SC.DEFAULT_MENU_ITEM_HEIGHT;this.set("itemWidth",e);this.set("itemHeight",j);if(this.get("isSeparator")){b.attr("role","separator")}else{if(this.get("isChecked")){b.attr("role","menuitemcheckbox");b.attr("aria-checked",true)}}b=b.begin("a").addClass("menu-item");if(this.get("isSeparator")){b.push('<span class="separator"></span>');b.addClass("disabled")}else{g=c.get(f.itemIconKey);if(g){this.renderImage(b,g);b.addClass("has-icon")}g=this.get("title");if(SC.typeOf(g)!==SC.T_STRING){g=g.toString()}this.renderLabel(b,g);if(this.get("isChecked")){b.push('<div class="checkbox"></div>')}if(this.get("hasSubMenu")){this.renderBranch(b)}g=this.getContentProperty("itemShortCutKey");if(g){this.renderShortcut(b,g)}}b=b.end()},renderImage:function(b,e){var a,c;if(e&&SC.ImageView.valueIsUrl(e)){a=e;c=""}else{c=e;a=SC.BLANK_IMAGE_URL}b.begin("img").addClass("image").addClass(c).attr("src",a).end()},renderLabel:function(b,a){if(this.get("escapeHTML")){a=SC.RenderContext.escapeHTML(a)}b.push("<span class='value ellipsis'>"+a+"</span>")},renderBranch:function(a){a.push('<span class="has-branch"></span>')},renderShortcut:function(b,a){b.push('<span class = "shortcut">'+a+"</span>")},showSubMenu:function(){var a=this.get("subMenu");if(a){a.set("mouseHasEntered",NO);a.popup(this,[0,0,0])}this._subMenuTimer=null},title:function(){var b=this.getContentProperty("itemTitleKey"),a=this.getPath("parentMenu.localize");if(a&&b){b=SC.String.loc(b)}return b||""}.property("content.title").cacheable(),getContentProperty:function(b){var a=this.get("content"),c=this.get("parentMenu");if(a){return a.get(c.get(b))}},mouseUp:function(b){var a;a=this.getPath("parentMenu.rootMenu.targetMenuItem");if(a){a.performAction()}return YES},performAction:function(){if(!this.get("isEnabled")){this.getPath("parentMenu.rootMenu").remove();return YES}if(this.get("hasSubMenu")){return NO}var b=this.getContentProperty("itemDisableMenuFlashKey"),a;if(b){this.sendAction()}else{this._flashCounter=0;a=this.getPath("parentMenu.rootMenu");a._isFlashing=YES;this.invokeLater(this.flashHighlight,25);this.invokeLater(this.sendAction,150)}return YES},sendAction:function(){var c=this.getContentProperty("itemActionKey"),e=this.getContentProperty("itemTargetKey"),b=this.getPath("parentMenu.rootMenu"),a;this.getPath("parentMenu.rootMenu").remove();b._isFlashing=NO;c=(c===undefined)?b.get("action"):c;e=(e===undefined)?b.get("target"):e;b.set("selectedItem",this.get("content"));if(SC.typeOf(c)===SC.T_FUNCTION){c.apply(e,[b])}else{a=this.getPath("pane.rootResponder")||SC.RootResponder.responder;if(a){a.sendAction(c,e,b)}}},flashHighlight:function(){var a=this._flashCounter,b=this.$();if(a%2===0){b.addClass("focus")}else{b.removeClass("focus")}if(a<=2){this.invokeLater(this.flashHighlight,50);this._flashCounter++}},mouseDown:function(a){return YES},mouseEntered:function(a){var c=this.get("parentMenu"),b=c.get("rootMenu");if(b._isFlashing){return}c.set("mouseHasEntered",YES);this.set("mouseHasEntered",YES);c.set("currentMenuItem",this);if(this.get("isEnabled")){this.becomeFirstResponder()}if(this.get("hasSubMenu")){this._subMenuTimer=this.invokeLater(this.showSubMenu,100)}return YES},mouseExited:function(a){var b,c;if(this.get("hasSubMenu")){c=this._subMenuTimer;if(c){c.invalidate()}else{this.invokeLater(this.checkMouseLocation,100)}}else{b=this.get("parentMenu");if(b.get("currentMenuItem")===this){b.set("currentMenuItem",null)}}return YES},touchStart:function(a){this.mouseEntered(a);return YES},touchEnd:function(a){return this.mouseUp(a)},touchEntered:function(a){return this.mouseEntered(a)},touchExited:function(a){return this.mouseExited(a)},checkMouseLocation:function(){var b=this.get("subMenu"),c=this.get("parentMenu"),a,e;if(!b.get("mouseHasEntered")){a=c.get("currentMenuItem");if(a===this||a===null){e=c.get("previousMenuItem");if(e){e.resignFirstResponder()}this.resignFirstResponder();b.remove()}}},moveUp:function(b,a){var c=this.get("parentMenu");if(c){c.moveUp(this)}return YES},moveDown:function(b,a){var c=this.get("parentMenu");if(c){c.moveDown(this)}return YES},moveRight:function(b,a){this.showSubMenu();return YES},insertText:function(b,a){var c=this.get("parentMenu");if(c){c.insertText(b,a)}},keyDown:function(a){return this.interpretKeyEvents(a)},keyUp:function(a){return YES},cancel:function(a){this.getPath("parentMenu.rootMenu").remove();return YES},didBecomeFirstResponder:function(a){if(a!==this){return}var b=this.get("parentMenu");if(b){b.set("currentSelectedMenuItem",this)}},willLoseFirstResponder:function(a){if(a!==this){return}var b=this.get("parentMenu");if(b){b.set("currentSelectedMenuItem",null);b.set("previousSelectedMenuItem",this)}},insertNewline:function(b,a){this.mouseUp(a)},closeParent:function(){this.$().removeClass("focus");var a=this.get("parentMenu");if(a){a.remove()}},clickInside:function(b,a){return SC.pointInRect({x:a.pageX,y:a.pageY},b)},contentDidChange:function(){var b=this.get("content"),a=this._content;if(b===a){return}var c=this.contentPropertyDidChange;if(a&&a.removeObserver){a.removeObserver("*",this,c)}this._content=b;if(b&&b.addObserver){b.addObserver("*",this,c)}this.contentPropertyDidChange(b,"*")}.observes("content"),contentPropertyDidChange:function(j,n){var b=this.get("parentMenu");if(!b){return}var a=SC.MenuItemView._contentPropertyToMenuItemPropertyMapping,k=SC.keys(a),f,g,e,c;if(n==="*"){for(f=0,g=k.length;f<g;++f){e=k[f];c=a[e];this.notifyPropertyChange(c)}}else{for(f=0,g=k.length;f<g;++f){e=k[f];if(b.get(e)===n){c=a[e];this.notifyPropertyChange(c)}}}}});SC.MenuItemView._contentPropertyToMenuItemPropertyMapping={itemTitleKey:"title",itemIsEnabledKey:"isEnabled",itemSeparatorKey:"isSeparator",itemSubMenuKey:"subMenu"};sc_require("panes/picker");sc_require("views/menu_item");SC.MenuPane=SC.PickerPane.extend({classNames:["sc-menu"],ariaRole:"menu",items:[],controlSize:SC.REGULAR_CONTROL_SIZE,itemHeight:SC.propertyFromRenderDelegate("itemHeight",20),itemSeparatorHeight:SC.propertyFromRenderDelegate("itemSeparatorHeight",9),menuHeight:0,menuHeightPadding:SC.propertyFromRenderDelegate("menuHeightPadding",6),submenuOffsetX:SC.propertyFromRenderDelegate("submenuOffsetX",2),selectedItem:null,exampleView:SC.MenuItemView,anchor:null,isSubMenu:NO,localize:YES,acceptsMenuPane:YES,isContextMenuEnabled:NO,popup:function(b,c){var a;this.beginPropertyChanges();if(b){a=b.isView?b.get("layer"):b}this.set("anchorElement",a);this.set("anchor",b);if(c){this.set("preferMatrix",c)}this.adjust("height",this.get("menuHeight"));this.positionPane();this.set("defaultResponder",this);this.endPropertyChanges();this._hideOverflow();this.append()},remove:function(){var a=this.get("parentMenu");this.set("currentMenuItem",null);this.closeOpenMenus();this.resignMenuPane();if(a){a.becomeMenuPane()}return arguments.callee.base.apply(this,arguments)},itemTitleKey:"title",itemIsEnabledKey:"isEnabled",itemValueKey:"value",itemIconKey:"icon",itemHeightKey:"height",itemSubMenuKey:"subMenu",itemSeparatorKey:"separator",itemTargetKey:"target",itemActionKey:"action",itemCheckboxKey:"checkbox",itemShortCutKey:"shortcut",itemKeyEquivalentKey:"keyEquivalent",itemDisableMenuFlashKey:"disableMenuFlash",itemLayerIdKey:"layerId",menuItemKeys:["itemTitleKey","itemValueKey","itemIsEnabledKey","itemIconKey","itemSeparatorKey","itemActionKey","itemCheckboxKey","itemShortCutKey","itemHeightKey","itemSubMenuKey","itemKeyEquivalentKey","itemTargetKey","itemLayerIdKey"],preferType:SC.PICKER_MENU,isModal:YES,_menuView:null,init:function(){return arguments.callee.base.apply(this,arguments)},displayProperties:["controlSize"],renderDelegateName:"menuRenderDelegate",createChildViews:function(){var b,a,c;b=this.createChildView(SC.MenuScrollView,{borderStyle:SC.BORDER_NONE,controlSize:this.get("controlSize")});a=this._menuView=SC.View.create();c=this.get("menuItemViews");a.set("layout",{top:0,left:0,height:this.get("menuHeight")});a.replaceAllChildren(c);b.set("contentView",a);this.childViews=[b];return this},paneDidAttach:function(){var a=(this.rootResponder=SC.RootResponder.responder);a.panes.add(this);this.set("currentWindowSize",a.computeWindowSize());this.set("isPaneAttached",YES);this.parentViewDidChange();this._notifyDidAppendToDocument();this.becomeMenuPane();return this},becomeMenuPane:function(){if(this.rootResponder){this.rootResponder.makeMenuPane(this)}return this},resignMenuPane:function(){if(this.rootResponder){this.rootResponder.makeMenuPane(null)}return this},menuItemViews:function(){return this.createMenuItemViews()}.property("displayItems").cacheable(),createMenuItemViews:function(){var g=[],u=this.get("displayItems"),a=this.get("exampleView"),z,n,t,p,f,b,k,v,c,e,o,j,q,B,A,w;if(!u){return g}p=this.get("itemHeightKey");f=this.get("itemSeparatorKey");b=this.get("itemHeight");e=this.get("itemKeyEquivalentKey");k=this.get("itemSeparatorHeight");B=this.get("itemLayerIdKey");c=Math.floor(this.get("menuHeightPadding")/2);v=c;j=this.menuItemKeys.map(SC._menu_fetchKeys,this);w=u.get("length");for(q=0;q<w;q++){z=u[q];t=z.get(p);if(!t){t=z.get(f)?k:b}A={layout:{height:t,top:v},contentDisplayProperties:j,content:z,parentMenu:this};if(z.get(B)){A.layerId=z.get(B)}n=this._menuView.createChildView(a,A);g[q]=n;v+=t;o=z.get(e);if(o){if(SC.typeOf(o)===SC.T_ARRAY){o.forEach(function(C){this._keyEquivalents[C]=n},this)}else{this._keyEquivalents[o]=n}}}this.set("menuHeight",v+c);return g},menuItemViewForContentIndex:function(a){var b=this.get("menuItemViews");if(!b){return undefined}return b.objectAt(a)},_keyEquivalents:{},rootMenu:function(){if(this.get("isSubMenu")){return this.getPath("parentMenu.rootMenu")}return this}.property("isSubMenu").cacheable(),windowSizeDidChange:function(b,a){this.remove();return arguments.callee.base.apply(this,arguments)},displayItems:function(){var e=this.get("items"),c=this.get("localize"),k=this.get("itemHeight"),b,f=[],a,g,j;if(!e){return null}b=e.get("length");for(a=0;a<b;a++){g=e.objectAt(a);if(!g){continue}j=SC.typeOf(g);if(j===SC.T_STRING){g=SC.Object.create({title:g,value:g,isEnabled:YES})}else{if(j===SC.T_HASH){g=SC.Object.create(g)}else{if(j===SC.T_ARRAY){g=this.convertArrayMenuItemToObject(g)}}}g.contentIndex=a;f.push(g)}return f}.property("items").cacheable(),_sc_menu_itemsDidChange:function(){var a=this.get("menuItemViews");this._menuView.replaceAllChildren(a);this._menuView.adjust("height",this.get("menuHeight"))}.observes("items"),convertArrayMenuItemToObject:function(g){SC.Logger.warn("Support for Array-based menu items has been deprecated.  Please update your menus to use a hash.");var f,c=SC._menu_fetchKeys,b=SC._menu_fetchItem,k,e=SC.Object.create(),a,j;f=this.menuItemKeys.map(c,this);e[f[0]]=g[0];e[f[1]]=g[1];e[f[2]]=g[2];e[f[3]]=g[3];e[f[4]]=g[4];e[f[5]]=g[5];e[f[6]]=g[6];e[f[7]]=g[7];e[f[8]]=g[8];e[f[9]]=g[9];e[f[10]]=g[10];e[f[11]]=g[11];e[f[12]]=g[12];return e},currentMenuItem:function(a,b){if(b!==undefined){if(this._currentMenuItem!==null){this.set("previousMenuItem",this._currentMenuItem)}this._currentMenuItem=b;this.setPath("rootMenu.targetMenuItem",b);return b}return this._currentMenuItem}.property().cacheable(),_sc_menu_currentMenuItemDidChange:function(){var a=this.get("currentMenuItem"),b=this.get("previousMenuItem");if(b){if(b.get("hasSubMenu")&&a===null){}else{b.resignFirstResponder();this.closeOpenMenusFor(b)}}if(a&&a.get("isEnabled")){a.scrollToVisible()}}.observes("currentMenuItem"),closeOpenMenusFor:function(a){if(!a){return}var b=a.get("parentMenu");while(b&&a){b=a.get("subMenu");if(b){b.remove();a.resignFirstResponder();a=b.get("previousMenuItem")}}},closeOpenMenus:function(){this.closeOpenMenusFor(this.get("previousMenuItem"))},mouseDown:function(a){this.modalPaneDidClick(a);return YES},mouseEntered:function(a){this.set("mouseHasEntered",YES)},keyUp:function(a){var b=this.interpretKeyEvents(a);return !b?NO:b},moveUp:function(){var c=this.get("currentMenuItem"),e=this.get("menuItemViews"),b,f,a;if(!c){a=e.get("length")-1}else{b=c.getPath("content.contentIndex");if(b===0){return YES}a=b-1}while(a>=0){if(e[a].get("isEnabled")){this.set("currentMenuItem",e[a]);e[a].becomeFirstResponder();break}a--}return YES},moveDown:function(){var e=this.get("currentMenuItem"),f=this.get("menuItemViews"),b=f.get("length"),c,g,a;if(!e){a=0}else{c=e.getPath("content.contentIndex");if(c===b){return YES}a=c+1}while(a<b){if(f[a].get("isEnabled")){this.set("currentMenuItem",f[a]);f[a].becomeFirstResponder();break}a++}return YES},insertText:function(b,a){var e=this._timer,c=this._keyBuffer;if(e){e.invalidate()}e=this._timer=SC.Timer.schedule({target:this,action:"clearKeyBuffer",interval:500,isPooled:NO});c=c||"";c+=b.toUpperCase();this.selectMenuItemForString(c);this._keyBuffer=c;return YES},performKeyEquivalent:function(e,a,b){if(!b&&!this.get("isVisibleInWindow")){return NO}var c=this._keyEquivalents[e];if(c){c.performAction(YES);return YES}if(e==="escape"||e==="return"){this.remove();return YES}return NO},selectMenuItemForString:function(c){var e=this.get("menuItemViews"),g,j,b,a,f;if(!e){return}f=c.length;a=e.get("length");for(b=0;b<a;b++){g=e.objectAt(b);j=g.get("title");if(!j){continue}j=j.replace(/ /g,"").substr(0,f).toUpperCase();if(j===c){this.set("currentMenuItem",g);g.becomeFirstResponder();break}}},clearKeyBuffer:function(){this._keyBuffer=""},modalPaneDidClick:function(a){this.remove();return YES}});SC._menu_fetchKeys=function(a){return this.get(a)};SC._menu_fetchItem=function(a){if(!a){return null}return this.get?this.get(a):this[a]};SC.MenuPane.VERTICAL_OFFSET=23;sc_require("panes/panel");SC.SheetPane=SC.PanelPane.extend({classNames:["sc-sheet"],modalPane:SC.ModalPane,transitionDuration:200,_state:"NO_VIEW",init:function(){arguments.callee.base.apply(this,arguments);if(SC.Animatable){SC.SheetPane.ANIMATABLE_AVAILABLE=YES;this.mixin(SC.Animatable);if(!this.transitions){this.transitions={}}if(!this.transitions.top){this.transitions.top={duration:this.transitionDuration===200?0.3:this.transitionDuration/1000,action:"_complete",target:this}}}},append:function(){var a=this.get("layout");if(!a.height||!a.top){a=SC.View.convertLayoutToAnchoredLayout(a,this.computeParentDimensions())}a.top=-1*a.height;if(this.disableAnimation){this.disableAnimation()}this.adjust(a);this.updateLayout();if(this.enableAnimation){this.enableAnimation()}return arguments.callee.base.apply(this,arguments)},remove:function(){var b=this,a=arguments;this.invokeLater(function(){a.callee.base.apply(b,a)},this.transitionDuration);this.slideUp();return this},paneDidAttach:function(){var a=arguments.callee.base.apply(this,arguments);this.slideDown();return a},slideDown:function(){this._state=SC.SheetPane.ANIMATING;this._direction=SC.SheetPane.SLIDE_DOWN;if(SC.SheetPane.ANIMATABLE_AVAILABLE){this.transitions.top.timing=SC.Animatable.TRANSITION_EASE_OUT;this.adjust("top",0)}else{this._start=Date.now();this._end=this._start+this.get("transitionDuration");this.tick()}},slideUp:function(){this._state=SC.SheetPane.ANIMATING;this._direction=SC.SheetPane.SLIDE_UP;if(SC.SheetPane.ANIMATABLE_AVAILABLE){var a=this.get("layout");this.transitions.top.timing=SC.Animatable.TRANSITION_EASE_IN;this.adjust("top",-1*a.height)}else{this._start=Date.now();this._end=this._start+this.get("transitionDuration");this.tick()}},_complete:function(){var a=this._direction;if(a===SC.SheetPane.SLIDE_DOWN){if(!SC.SheetPane.ANIMATABLE_AVAILABLE){this.adjust("top",0)}this.adjust({centerX:0,left:null});if(SC.browser.mozilla){this.parentViewDidChange()}}else{var b=this.get("layout");if(!SC.SheetPane.ANIMATABLE_AVAILABLE){this.adjust("top",-1*b.height)}}this._state=SC.SheetPane.READY;this.updateLayout()},blurTo:function(a){this.setFirstResponder("")},tick:function(){this._timer=null;var b=Date.now();var f=(b-this._start)/(this._end-this._start),j=this,a=this._direction,c=this.get("layout"),e,g;if(f<0){f=0}if(f>=1){this._complete();return this}g=Math.floor(c.height*f);if(a==SC.SheetPane.SLIDE_DOWN){j.adjust("top",0-(c.height-g))}else{if(a==SC.SheetPane.SLIDE_UP){j.adjust("top",0-g)}}this._timer=this.invokeLater(this.tick,20);j.updateLayout();return this}});SC.SheetPane.mixin({ANIMATABLE_AVAILABLE:NO,NO_VIEW:"NO_VIEW",ANIMATING:"ANIMATING",READY:"READY",SLIDE_DOWN:"SLIDEDOWN",SLIDE_UP:"SLIDEUP"});SC.BaseTheme.buttonRenderDelegate=SC.RenderDelegate.create({className:"button","sc-small-size":{height:18,autoResizePadding:15},"sc-regular-size":{height:24,autoResizePadding:20},"sc-huge-size":{height:30,autoResizePadding:30},"sc-jumbo-size":{height:44,autoResizePadding:50},render:function(j,c){this.addSizeClassName(j,c);var f,b=j.get("toolTip"),a=j.get("isSelected")||NO,e=j.get("isActive")||NO,g=SC.guidFor(j)+"-label";c.setClass({icon:!!j.get("icon")||NO,def:j.get("isDefault"),cancel:j.get("isCancel"),active:e,sel:a});if(b){c.attr("title",b);c.attr("alt",b)}this.includeSlices(j,c,SC.THREE_SLICE);c.attr("aria-pressed",e.toString());c.attr("aria-labelledby",g);c=c.begin("label").addClass("sc-button-label").id(g);j.get("theme").labelRenderDelegate.render(j,c);c=c.end();if(j.get("supportFocusRing")){c=c.begin("div").addClass("focus-ring");this.includeSlices(j,c,SC.THREE_SLICE);c=c.end()}},update:function(b,a){this.updateSizeClassName(b,a);if(b.get("isActive")){a.addClass("active")}a.attr("aria-pressed",b.get("isActive").toString());a.setClass("icon",!!b.get("icon")||NO);a.setClass("def",b.get("isDefault")||NO);a.setClass("cancel",b.get("isCancel")||NO);b.get("theme").labelRenderDelegate.update(b,a.find("label"))}});SC.BaseTheme.checkboxRenderDelegate=SC.RenderDelegate.create({className:"checkbox",render:function(a,c){this.addSizeClassName(a,c);var f=a.get("theme"),g,b;b=SC.guidFor(a)+"-label";var e=a.get("isSelected")||NO;var n=a.get("isActive");var k=!a.get("isEnabled");var j;if(e===SC.MIXED_STATE){j="mixed"}else{if(e){j="true"}else{j="false"}}c.attr("role","checkbox");c.attr("aria-checked",j);c.attr("aria-labelledby",b);c.setClass({sel:e,active:n,disabled:k});c.push('<span class = "button"></span>');c=c.begin("span").addClass("label").id(b);f.labelRenderDelegate.render(a,c);c=c.end()},update:function(j,c){this.updateSizeClassName(j,c);var g=j.get("theme");var e=j.get("isSelected");var f=j.get("isActive");var b=!j.get("isEnabled");var a;if(e===SC.MIXED_STATE){a="mixed"}else{if(e){a="true"}else{a="false"}}c.attr("aria-checked",a);g.labelRenderDelegate.update(j,c.find("span.label"));c.setClass({sel:e,active:f,disabled:b})}});SC.BaseTheme.collectionRenderDelegate=SC.RenderDelegate.create({className:"collection",render:function(b,a){a.setClass("focus",b.get("isFirstResponder"));a.setClass("disabled",!b.get("isEnabled"));a.setClass("active",b.get("isActive"))},update:function(b,a){a.setClass("focus",b.get("isFirstResponder"));a.setClass("disabled",!b.get("isEnabled"));a.setClass("active",b.get("isActive"))}});SC.BaseTheme.disclosureRenderDelegate=SC.RenderDelegate.create({className:"disclosure",render:function(j,a){this.addSizeClassName(j,a);var f=j.get("theme"),c=j.get("value"),g=j.get("title");var e=SC.guidFor(j)+"-label";a.attr("aria-expanded",c);a.attr("aria-labelledby",e);if(j.get("isSelected")){a.addClass("sel")}var b="";b+=j.get("isSelected")?"open":"closed";if(j.get("isActive")){b+=" active"}a.push('<img src = "'+SC.BLANK_IMAGE_URL+'" class = "disclosure button '+b+'" />');a=a.begin("span").addClass("sc-button-label").id(e);f.labelRenderDelegate.render(j,a);a=a.end()},update:function(f,a){this.updateSizeClassName(f,a);var c=f.get("theme"),b=f.get("value"),e=f.get("title");a.attr("aria-expanded",b);if(f.get("isSelected")){a.addClass("sel")}a.find("img").setClass({open:f.get("isSelected"),closed:!f.get("isSelected"),active:f.get("isActive")});c.labelRenderDelegate.update(f,a.find("span.sc-button-label"))}});SC.THREE_SLICE=["left","middle","right"];SC.NINE_SLICE=["top-left","top","top-right","left","middle","right","bottom-left","bottom","bottom-right"];SC.RenderDelegate.reopen({includeSlices:function(f,c,e){for(var b=0,a=e.length;b<a;b++){c.push('<div class="'+e[b]+'"></div>')}}});SC.BaseTheme.imageButtonRenderDelegate=SC.RenderDelegate.create({className:"image-button",render:function(e,b){var c=e.get("image"),a=e.get("toolTip");this.addSizeClassName(e,b);b.addClass("no-min-width");if(a){b.attr("title",a);b.attr("alt",a)}if(c){b.push("<div class='img "+c+"'></div>")}else{b.push("<div class='img'></div>")}},update:function(e,b){var c,a;this.updateSizeClassName(e,b);if(e.didChangeFor("imageButtonRenderDelegate","toolTip")){a=e.get("toolTip");b.attr("title",a);b.attr("alt",a)}if(e.didChangeFor("imageButtonRenderDelegate","image")){c=e.get("image");b.children()[0].className="img "+c}}});SC.BaseTheme.MASTER_DETAIL_DIVIDER_WIDTH=1;SC.BaseTheme.masterDetailRenderDelegate=SC.RenderDelegate.create({className:"master-detail",dividerWidth:1,render:function(b,a){a.setClass("round-toolbars",SC.platform.touch)},update:function(b,a){a.setClass("round-toolbars",SC.platform.touch)}});SC.BaseTheme.panelRenderDelegate=SC.RenderDelegate.create({className:"panel",render:function(c,b){b=b.begin("div").addClass("panel-background");this.includeSlices(c,b,SC.NINE_SLICE);b=b.end();var a=c.get("ariaLabel");b.attr("aria-label",a||"")},update:function(c,b){var a=c.get("ariaLabel");b.attr("aria-label",a||"")}});sc_require("render_delegates/panel");SC.BaseTheme.pickerRenderDelegate=SC.RenderDelegate.create({className:"picker",render:function(g,c){var a=g.get("theme").panelRenderDelegate;a.render(g,c);var b=g.get("preferType");var f=g.get("pointerPos");var e=g.get("pointerPosY");if(b==SC.PICKER_POINTER||b==SC.PICKER_MENU_POINTER){c.push('<div class="sc-pointer '+f+'" style="margin-top: '+e+'px"></div>');c.addClass(f)}},update:function(j,g){var a=j.get("theme").panelRenderDelegate;a.update(j,g);var b=j.get("preferType");var f=j.get("pointerPos");var e=j.get("pointerPosY");if(b==SC.PICKER_POINTER||b==SC.PICKER_MENU_POINTER){var c=g.find(".sc-pointer");c.attr("class","sc-pointer "+f);c.attr("style","margin-top: "+e+"px");g.addClass(f)}}});sc_require("render_delegates/picker");SC.BaseTheme.menuRenderDelegate=SC.BaseTheme.pickerRenderDelegate.create({className:"menu",render:function(c,b,a){this.addSizeClassName(b,a);c(b,a)}.enhance(),update:function(c,b,a){this.updateSizeClassName(b,a);c(b,a)}.enhance(),itemHeight:20,itemSeparatorHeight:9,menuHeightPadding:6,menuWidthPadding:50,minimumMenuWidth:50,submenuOffsetX:2,verticalOffset:23,"sc-tiny-size":{itemHeight:10,itemSeparatorHeight:2,menuHeightPadding:2,submenuOffsetX:0},"sc-small-size":{itemHeight:16,itemSeparatorHeight:7,menuHeightPadding:4,submenuOffsetX:2},"sc-large-size":{itemHeight:60,itemSeparatorHeight:20,menuHeightPadding:0,submenuOffsetX:4},"sc-huge-size":{itemHeight:20,itemSeparatorHeight:9,menuHeightPadding:0,submenuOffsetX:0}});SC.BaseTheme.popupButtonRenderDelegate=SC.RenderDelegate.create({render:function(b,a){a.attr("aria-haspopup","true");b.get("theme").buttonRenderDelegate.render(b,a)},update:function(b,a){b.get("theme").buttonRenderDelegate.update(b,a)}});SC.BaseTheme.progressRenderDelegate=SC.RenderDelegate.create({className:"progress",render:function(j,b){this.addSizeClassName(j,b);var g=j.get("theme"),a=j.get("maximum"),e=j.get("minimum"),c=j.get("ariaValue");var f;if(j.get("isIndeterminate")){f=120}else{f=j.get("value")}b.attr("aria-valuemax",a);b.attr("aria-valuemin",e);b.attr("aria-valuenow",c);b.attr("aria-valuetext",c);b.setClass({indeterminate:j.get("isIndeterminate"),running:j.get("isRunning"),disabled:!j.get("isEnabled"),"sc-empty":(f<=0),"sc-complete":(f>=100)});b=b.begin("div").addClass("track");this.includeSlices(j,b,SC.THREE_SLICE);b=b.end();b=b.begin("div").addClass("content");b.css("width",(f*100)+"%");this.includeSlices(j,b,SC.THREE_SLICE);b=b.end()},update:function(j,f){this.updateSizeClassName(j,f);var g=j.get("theme"),a=j.get("maximum"),c=j.get("minimum"),b=j.get("ariaValue");f.attr("aria-valuemax",a);f.attr("aria-valuemin",c);f.attr("aria-valuenow",b);f.attr("aria-valuetext",b);var e;if(j.get("isIndeterminate")){e=120}else{e=j.get("value")}f.setClass({indeterminate:j.get("isIndeterminate"),running:j.get("isRunning"),disabled:!j.get("isEnabled"),"sc-empty":(e<=0),"sc-complete":(e>=100)});f.find(".content").css("width",(e*100)+"%")}});SC.BaseTheme.radioRenderDelegate=SC.RenderDelegate.create({className:"radio",render:function(g,b){this.addSizeClassName(g,b);var f=g.get("theme");var a=g.get("isSelected"),c=g.get("width"),e=SC.guidFor(g)+"-label";b.setClass({active:g.get("isActive"),mixed:g.get("isMixed"),sel:g.get("isSelected"),disabled:!g.get("isEnabled")});b.attr("role","radio");b.attr("aria-checked",a);b.attr("aria-labelledby",e);b.attr("aria-disabled",g.get("isEnabled")?"false":"true");if(c){b.css("width",c)}b.push('<span class = "button"></span>');b=b.begin("span").addClass("sc-button-label").id(e);f.labelRenderDelegate.render(g,b);b=b.end()},update:function(g,a){this.updateSizeClassName(g,a);var f=g.get("theme");var b=g.get("isSelected"),c=g.get("width"),e=g.get("value");a.setClass({active:g.get("isActive"),mixed:g.get("isMixed"),sel:g.get("isSelected"),disabled:!g.get("isEnabled")});a.attr("aria-disabled",g.get("isEnabled")?"false":"true");a.attr("aria-checked",b);a.css("width",c?c:null);f.labelRenderDelegate.update(g,a.find(".sc-button-label"))}});SC.BaseTheme.radioGroupRenderDelegate=SC.RenderDelegate.create({className:"radio-group",render:function(k,f){this.addSizeClassName(k,f);var j=k.get("theme"),e=SC.guidFor(this),c=k.get("items"),b,a=c.length,g;f.addClass(k.get("layoutDirection"));f.attr("role","radiogroup");f.attr("aria-disabled",k.get("isEnabled")?"false":"true");for(b=0;b<a;b++){g=c[b];f=f.begin("div").addClass("radio-"+b).attr("index",b).addClass(j.classNames).addClass(j.radioRenderDelegate.className).addClass("sc-radio-button");j.radioRenderDelegate.render(g,f);f=f.end()}k.get("renderState").radioCount=b},update:function(a,e){this.updateSizeClassName(a,e);var f=a.get("theme"),b=SC.guidFor(this),j=a.get("items"),k,g=j.length,n;e.addClass(a.get("layoutDirection"));e.attr("aria-disabled",a.get("isEnabled")?"false":"true");if(a.get("renderState").radioCount!==g){var c=SC.RenderContext(e[0]);this.render(a,c);c.update();return}for(k=0;k<g;k++){n=j[k];f.radioRenderDelegate.update(n,e.find(".radio-"+k))}},updateRadioAtIndex:function(e,a,b){var c=e.get("items")[b];e.get("theme").radioRenderDelegate.update(c,a.find(".radio-"+b))},indexForEvent:function(e,b,a){var c=$(a.target).closest(".sc-radio-button").attr("index");if(isNaN(c)){return undefined}return parseInt(c,0)}});SC.BaseTheme.segmentRenderDelegate=SC.RenderDelegate.create({className:"segment",render:function(f,b){var c=f.get("theme"),e,a;a={"sc-first-segment":f.get("isFirstSegment"),"sc-middle-segment":f.get("isMiddleSegment"),"sc-last-segment":f.get("isLastSegment"),"sc-overflow-segment":f.get("isOverflowSegment")};if(!SC.none(f.get("index"))){a["sc-segment-"+f.get("index")]=YES}b.setClass(a);e=c.buttonRenderDelegate;e.render(f,b)},update:function(g,a){var e=g.get("theme"),f,c,b={};b={"sc-first-segment":g.get("isFirstSegment"),"sc-middle-segment":g.get("isMiddleSegment"),"sc-last-segment":g.get("isLastSegment"),"sc-overflow-segment":g.get("isOverflowSegment")||NO};if(!SC.none(g.get("index"))){b["sc-segment-"+g.get("index")]=YES}a.setClass(b);f=e.buttonRenderDelegate;f.update(g,a)}});SC.BaseTheme.segmentedRenderDelegate=SC.RenderDelegate.create({className:"segmented",render:function(b,a){this.addSizeClassName(b,a);a.addStyle("text-align",b.get("align"))},update:function(b,a){this.updateSizeClassName(b,a);a.css("text-align",b.get("align"))},segmentWidths:function(g){var f=g.$(".sc-segment-view"),b,e=[];for(var a=0,c=f.length;a<c-1;a++){b=f[a];e[a]=b.getBoundingClientRect().width}return e},overflowSegmentWidth:function(c){var b=c.$(".sc-segment-view"),a;a=b[b.length-1];return a.getBoundingClientRect().width},indexForClientPosition:function(a,k,g){var f=a.$(".sc-segment-view"),b,e,c,j,n;n={x:k,y:g};for(e=0,b=f.length;e<b;e++){c=f[e];j=c.getBoundingClientRect();j={x:j.left,y:j.top,width:(j.right-j.left),height:(j.bottom-j.top)};if(SC.pointInRect(n,j)){return e}}return -1}});SC.BaseTheme.sliderRenderDelegate=SC.RenderDelegate.create({className:"slider",render:function(g,c){this.addSizeClassName(g,c);var b=SC.BLANK_IMAGE_URL,a=g.get("maximum"),f=g.get("minimum"),e=g.get("ariaValue");c.attr("aria-valuemax",a);c.attr("aria-valuemin",f);c.attr("aria-valuenow",e);c.attr("aria-valuetext",e);c.attr("aria-orientation","horizontal");c=c.begin("span").addClass("track");this.includeSlices(g,c,SC.THREE_SLICE);c.push('<img src="',b,'" class="sc-handle" style="left: ',g.get("value"),'%" />',"</span>");c=c.end();g.get("renderState")._cachedHandle=null},update:function(k,b){this.updateSizeClassName(k,b);var a=k.get("maximum"),e=k.get("minimum"),c=k.get("ariaValue");b.attr("aria-valuemax",a);b.attr("aria-valuemin",e);b.attr("aria-valuenow",c);b.attr("aria-valuetext",c);b.attr("aria-orientation","horizontal");if(k.didChangeFor("sliderRenderDelegate","value")){var g=k.get("renderState")._cachedHandle;if(!g){g=k.get("renderState")._cachedHandle=b.find(".sc-handle")}var j=k.get("frame"),f=k.get("value");if(j&&SC.platform.supportsCSS3DTransforms){f=(f/100)*j.width;g[0].style.cssText="-webkit-transform: translate3d("+f+"px,0,0);"}else{g.css("left",f+"%")}}}});SC.BaseTheme.SourceList=SC.BaseTheme.subtheme("source-list");SC.BaseTheme.toolbarRenderDelegate=SC.RenderDelegate.create({className:"toolbar",render:function(b,a){},update:function(){}});SC.BaseTheme.wellRenderDelegate=SC.RenderDelegate.create({className:"well",render:function(b,a){this.includeSlices(b,a,SC.NINE_SLICE)},update:function(){}});SC.BaseTheme.workspaceRenderDelegate=SC.RenderDelegate.create({className:"workspace",render:function(){},update:function(){}});SC.DRAG_LINK=4;SC.DRAG_COPY=1;SC.DRAG_MOVE=2;SC.DRAG_NONE=0;SC.DRAG_ANY=15;SC.DRAG_DATA=8;SC.DRAG_AUTOSCROLL_ZONE_THICKNESS=20;SC.View.reopen({init:function(a){a();if(this.get("isDropTarget")){SC.Drag.addDropTarget(this)}if(this.get("isScrollable")){SC.Drag.addScrollableView(this)}}.enhance(),destroy:function(a){if(this.get("isDropTarget")){SC.Drag.removeDropTarget(this)}if(this.get("isScrollable")){SC.Drag.removeScrollableView(this)}return a()}.enhance()});SC.Drag=SC.Object.extend({source:null,ghostView:null,ghostActsLikeCursor:NO,dragView:null,ghost:YES,sourceIsDraggable:YES,slideBack:YES,ghostOffset:{x:0,y:0},location:{},dataTypes:function(){if(this.dataSource){return this.dataSource.get("dragDataTypes")||[]}var e=this.data;if(e){var a=[];for(var b in e){if(e.hasOwnProperty(b)){a.push(b)}}return a}var c=this.get("source");if(c&&c.dragDataTypes){return c.get("dragDataTypes")||[]}return[]}.property().cacheable(),hasDataType:function(a){return(this.get("dataTypes").indexOf(a)>=0)},dataForType:function(a){if(this.dataSource){return this.dataSource.dragDataForType(this,a)}else{if(this.data){return this.data[a]}else{var b=this.get("source");if(b&&SC.typeOf(b.dragDataForType)==SC.T_FUNCTION){return b.dragDataForType(this,a)}else{return null}}}},dataSource:null,data:null,allowedDragOperations:SC.DRAG_ANY,_dragInProgress:YES,_dragViewWasVisible:null,startDrag:function(){if(this.get("sourceIsDraggable")){this._createGhostView()}var k=this.event;var f={x:k.pageX,y:k.pageY};this.set("location",f);if(this.get("sourceIsDraggable")){var b=this._getDragView();var n=b.get("parentView");var j=n?n.convertFrameToView(b.get("frame"),null):b.get("frame");if(this.get("ghost")){this._dragViewWasVisible=b.get("isVisible");b.set("isVisible",NO)}if(this.ghostActsLikeCursor){this.ghostOffset={x:14,y:14}}else{this.ghostOffset={x:(f.x-j.x),y:(f.y-j.y)}}if(!this._ghostViewHidden){this._positionGhostView(k)}if(k.makeTouchResponder){var o=this;SC.Timer.schedule({target:k,action:function(){if(!k.hasEnded){k.makeTouchResponder(o,YES)}},interval:1})}else{this.ghostView.rootResponder.dragDidStart(this,k)}}var a=this.source;if(a&&a.dragDidBegin){a.dragDidBegin(this,f)}var c=this._dropTargets();for(var g=0,e=c.length;g<e;g++){c[g].tryToPerform("dragStarted",this,k)}},cancelDrag:function(){var b=this._lastTarget,c=this.get("location");if(b&&b.dragExited){b.dragExited(this,this._lastMouseDraggedEvent)}if(this.get("sourceIsDraggable")){this._destroyGhostView();if(this.get("ghost")){if(this._dragViewWasVisible){this._getDragView().set("isVisible",YES)}this._dragViewWasVisible=null}}var a=this.source;if(a&&a.dragDidEnd){a.dragDidEnd(this,c,SC.DRAG_NONE)}this._lastTarget=null;this._dragInProgress=NO},touchStart:function(a){return YES},mouseDragged:function(a){var b=this._autoscroll(a);var g=this.get("location");if(!b&&(a.pageX===g.x)&&(a.pageY===g.y)){return}g={x:a.pageX,y:a.pageY};this.set("location",g);this._lastMouseDraggedEvent=a;var e=this.source;var c=this._lastTarget;var f=this._findDropTarget(a);var j=SC.DRAG_NONE;while(f&&(f!==c)&&(j===SC.DRAG_NONE)){if(f&&e&&e.dragSourceOperationMaskFor){j=e.dragSourceOperationMaskFor(this,f)}else{j=SC.DRAG_ANY}if((j!==SC.DRAG_NONE)&&f&&f.computeDragOperations){j=j&f.computeDragOperations(this,a,j)}else{j=SC.DRAG_NONE}this.allowedDragOperations=j;if(j===SC.DRAG_NONE){f=this._findNextDropTarget(f)}}if(f!==c){if(c&&c.dragExited){c.dragExited(this,a)}if(f){if(f.dragEntered){f.dragEntered(this,a)}if(f.dragUpdated){f.dragUpdated(this,a)}}this._lastTarget=f}else{if(f&&f.dragUpdated){f.dragUpdated(this,a)}}if(e&&e.dragDidMove){e.dragDidMove(this,g)}if(this.get("sourceIsDraggable")&&!this._ghostViewHidden){this._positionGhostView(a)}},touchesDragged:function(a){this.mouseDragged(a)},mouseUp:function(q){var j={x:q.pageX,y:q.pageY},k=this._lastTarget,f=this.allowedDragOperations;this.set("location",j);try{if(k&&k.acceptDragOperation&&k.acceptDragOperation(this,f)){f=k.performDragOperation?k.performDragOperation(this,f):SC.DRAG_NONE}else{f=SC.DRAG_NONE}}catch(n){SC.Logger.error("Exception in SC.Drag.mouseUp(acceptDragOperation|performDragOperation): %@".fmt(n))}try{if(k&&k.dragExited){k.dragExited(this,q)}}catch(o){SC.Logger.error("Exception in SC.Drag.mouseUp(target.dragExited): %@".fmt(o))}var c=this._dropTargets();for(var p=0,g=c.length;p<g;p++){try{c[p].tryToPerform("dragEnded",this,q)}catch(b){SC.Logger.error("Exception in SC.Drag.mouseUp(dragEnded on %@): %@".fmt(c[p],b))}}if(this.get("sourceIsDraggable")){this._destroyGhostView();if(this.get("ghost")){if(this._dragViewWasVisible){this._getDragView().set("isVisible",YES)}this._dragViewWasVisible=null}}var a=this.source;if(a&&a.dragDidEnd){a.dragDidEnd(this,j,f)}this._lastTarget=null;this._dragInProgress=NO},touchEnd:function(a){this.mouseUp(a)},_getDragView:function(){if(!this.dragView){if(!this.source||!this.source.isView){throw"Source can't be used as dragView, because it's not a view."}this.dragView=this.source}return this.dragView},_createGhostView:function(){var c=this,b=this._getDragView(),e=b.get("frame"),a;a=this.ghostView=SC.Pane.create({classNames:["sc-ghost-view"],layout:{top:e.y,left:e.x,width:e.width,height:e.height},owner:this,didCreateLayer:function(){if(b){var f=b.get("layer");if(f){f=f.cloneNode(true);f.style.top="0px";f.style.left="0px";this.get("layer").appendChild(f)}}}});a.append()},_positionGhostView:function(a){var c=this.get("location");c.x-=this.ghostOffset.x;c.y-=this.ghostOffset.y;var b=this.ghostView;if(b){b.adjust({top:c.y,left:c.x});b.invokeOnce("updateLayout")}},_ghostViewHidden:NO,hideGhostView:function(){if(this.ghostView&&!this._ghostViewHidden){this.ghostView.remove();this._ghostViewHidden=YES}},unhideGhostView:function(){if(this._ghostViewHidden){this._ghostViewHidden=NO;this._createGhostView()}},_destroyGhostView:function(){if(this.ghostView){this.ghostView.remove();this.ghostView=null;this._ghostViewHidden=NO}},_dropTargets:function(){if(this._cachedDropTargets){return this._cachedDropTargets}var b=[];var e=SC.Drag._dropTargets;for(var c in e){if(e.hasOwnProperty(c)){b.push(e[c])}}var g={};var f=SC.Drag._dropTargets;var a=function(j){if(!j){return 0}var n=SC.guidFor(j);var k=g[n];if(!k){k=1;while(j=j.get("parentView")){if(f[SC.guidFor(j)]!==undefined){k++}}g[n]=k}return k};b.sort(function(k,j){if(k===j){return 0}k=a(k);j=a(j);return(k>j)?-1:1});this._cachedDropTargets=b;return b},_findDropTarget:function(c){var j={x:c.pageX,y:c.pageY};var f,g;var e=this._dropTargets();for(var b=0,a=e.length;b<a;b++){f=e[b];if(!f.get("isVisibleInWindow")){continue}g=f.convertFrameToView(f.get("clippingFrame"),null);if(SC.pointInRect(j,g)){return f}}return null},_findNextDropTarget:function(a){var b=SC.Drag._dropTargets;while(a=a.get("parentView")){if(b[SC.guidFor(a)]){return a}}return null},_autoscroll:function(q){if(!q){q=this._lastAutoscrollEvent}if(!this._dragInProgress){return NO}var j=q?{x:q.pageX,y:q.pageY}:this.get("location"),k=this._findScrollableView(j),t=null,p,c,e,n,b,a,g;while(k&&!t){p=k.get("canScrollVertical")?1:0;c=k.get("canScrollHorizontal")?1:0;if(p||c){a=k.get("containerView");if(a){g=k.convertFrameToView(a.get("frame"),null)}else{p=c=0}}if(p){n=SC.maxY(g);e=n-SC.DRAG_AUTOSCROLL_ZONE_THICKNESS;if(j.y>=e&&j.y<=n){p=1}else{e=SC.minY(g);n=e+SC.DRAG_AUTOSCROLL_ZONE_THICKNESS;if(j.y>=e&&j.y<=n){p=-1}else{p=0}}}if(c){n=SC.maxX(g);e=n-SC.DRAG_AUTOSCROLL_ZONE_THICKNESS;if(j.x>=e&&j.x<=n){c=1}else{e=SC.minX(g);n=e+SC.DRAG_AUTOSCROLL_ZONE_THICKNESS;if(j.x>=e&&j.x<=n){c=-1}else{c=0}}}if(p||c){t=k}else{k=this._findNextScrollableView(k)}}if(t&&(this._lastScrollableView===t)){if((Date.now()-this._hotzoneStartTime)>100){this._horizontalScrollAmount*=1.05;this._verticalScrollAmount*=1.05}}else{this._lastScrollableView=t;this._horizontalScrollAmount=15;this._verticalScrollAmount=15;this._hotzoneStartTime=(t)?Date.now():null;c=p=0}if(t&&(c||p)){var o={x:c*this._horizontalScrollAmount,y:p*this._verticalScrollAmount};t.scrollBy(o)}if(t){if(q){this._lastAutoscrollEvent={pageX:q.pageX,pageY:q.pageY}}this.invokeLater(this._autoscroll,100,null);return YES}else{this._lastAutoscrollEvent=null;return NO}},_scrollableViews:function(){if(this._cachedScrollableView){return this._cachedScrollableView}var a=[];var c=SC.Drag._scrollableViews;for(var b in c){if(c.hasOwnProperty(b)){a.push(c[b])}}a=a.sort(function(g,e){var f=g;while(f=f.get("parentView")){if(e==f){return -1}}return 1});this._cachedScrollableView=a;return a},_findScrollableView:function(g){var c=this._scrollableViews(),b=c?c.length:0,e,f,a;for(a=0;a<b;a++){e=c[a];if(!e.get("isVisibleInWindow")){continue}f=e.convertFrameToView(e.get("clippingFrame"),null);if(SC.pointInRect(g,f)){return e}}return null},_findNextScrollableView:function(a){var b=SC.Drag._scrollableViews;while(a=a.get("parentView")){if(b[SC.guidFor(a)]){return a}}return null}});SC.Drag.mixin({start:function(b){var a=this.create(b);a.startDrag();return a},_dropTargets:{},_scrollableViews:{},addDropTarget:function(a){this._dropTargets[SC.guidFor(a)]=a},removeDropTarget:function(a){delete this._dropTargets[SC.guidFor(a)]},addScrollableView:function(a){this._scrollableViews[SC.guidFor(a)]=a},removeScrollableView:function(a){delete this._scrollableViews[SC.guidFor(a)]}});SC.MODIFIED_KEY_BINDINGS={"ctrl_.":"cancel",shift_tab:"insertBacktab",shift_left:"moveLeftAndModifySelection",shift_right:"moveRightAndModifySelection",shift_up:"moveUpAndModifySelection",shift_down:"moveDownAndModifySelection",alt_left:"moveLeftAndModifySelection",alt_right:"moveRightAndModifySelection",alt_up:"moveUpAndModifySelection",alt_down:"moveDownAndModifySelection",ctrl_a:"selectAll"};SC.BASE_KEY_BINDINGS={escape:"cancel",backspace:"deleteBackward","delete":"deleteForward","return":"insertNewline",tab:"insertTab",left:"moveLeft",right:"moveRight",up:"moveUp",down:"moveDown",home:"moveToBeginningOfDocument",end:"moveToEndOfDocument",pagedown:"pageDown",pageup:"pageUp"};SC.UndoManager=SC.Object.extend({undoActionName:function(){return this.undoStack?this.undoStack.name:null}.property("undoStack"),redoActionName:function(){return this.redoStack?this.redoStack.name:null}.property("redoStack"),canUndo:function(){return this.undoStack!=null}.property("undoStack"),canRedo:function(){return this.redoStack!=null}.property("redoStack"),undo:function(){this._undoOrRedo("undoStack","isUndoing")},redo:function(){this._undoOrRedo("redoStack","isRedoing")},isUndoing:NO,isRedoing:NO,groupingLevel:0,registerUndo:function(b,a){this.beginUndoGroup(a);this._activeGroup.actions.push(b);this.endUndoGroup(a)},beginUndoGroup:function(b){if(this._activeGroup){this.groupingLevel++}else{var a=this.isUndoing?"redoStack":"undoStack";this._activeGroup={name:b,actions:[],prev:this.get(a)};this.set(a,this._activeGroup);this.groupingLevel=1}},endUndoGroup:function(a){if(!this._activeGroup){raise("endUndoGroup() called outside group.")}if(this.groupingLevel>1){this.groupingLevel--}else{this._activeGroup=null;this.groupingLevel=0}this.propertyDidChange(this.isUndoing?"redoStack":"undoStack")},setActionName:function(a){if(!this._activeGroup){raise("setActionName() called outside group.")}this._activeGroup.name=a},_activeGroup:null,undoStack:null,redoStack:null,_undoOrRedo:function(a,c){if(this._activeGroup){return false}if(this.get(a)==null){return true}this.set(c,true);var f=this.get(a);this.set(a,f.prev);var b;var e=f.actions.length>1;if(e){this.beginUndoGroup(f.name)}while(b=f.actions.pop()){b()}if(e){this.endUndoGroup(f.name)}this.set(c,false)}});SC.CheckboxView=SC.ButtonView.extend(SC.StaticLayout,{classNames:["sc-checkbox-view","sc-checkbox-control"],ariaRole:"checkbox",themeName:null,renderDelegateName:"checkboxRenderDelegate",needsEllipsis:NO,acceptsFirstResponder:function(){if(SC.FOCUS_ALL_CONTROLS){return this.get("isEnabled")}return NO}.property("isEnabled"),_toggleValue:function(){var a=this.get("value")===this.get("toggleOnValue");this.set("value",a?this.get("toggleOffValue"):this.get("toggleOnValue"))},mouseDown:function(a){if(!this.get("isEnabled")){return YES}this.set("isActive",YES);this._isMouseDown=YES;if(a){a.allowDefault()}return YES},mouseUp:function(a){if(!this.get("isEnabled")){return YES}this.set("isActive",NO);this._isMouseDown=NO;this._toggleValue();if(this.get("buttonBehavior")!==SC.HOLD_BEHAVIOR){if(this.$().within(a.target)){this._action(a)}}return YES},keyDown:function(b){if(!this.get("isEnabled")){return YES}if(b.which===9||b.keyCode===9){var a=b.shiftKey?this.get("previousValidKeyView"):this.get("nextValidKeyView");if(a){a.becomeFirstResponder()}else{b.allowDefault()}return YES}if(b.which===13||b.which===32){this._toggleValue();if(this.get("buttonBehavior")!==SC.HOLD_BEHAVIOR){if(this.$().within(b.target)){this._action(b)}}return YES}b.allowDefault();return NO},touchStart:function(a){return this.mouseDown(a)},touchEnd:function(a){return this.mouseUp(a)}});SC.LIST_ITEM_ACTION_CANCEL="sc-list-item-cancel-action";SC.LIST_ITEM_ACTION_REFRESH="sc-list-item-cancel-refresh";SC.LIST_ITEM_ACTION_EJECT="sc-list-item-cancel-eject";SC.ListItemView=SC.View.extend(SC.InlineEditable,SC.Control,{classNames:["sc-list-item-view"],displayProperties:["disclosureState","escapeHTML"],content:null,contentIndex:null,hasContentIcon:NO,hasContentRightIcon:NO,hasContentBranch:NO,contentCheckboxKey:null,icon:null,contentIconKey:null,rightIcon:null,contentRightIconKey:null,contentValueKey:null,escapeHTML:YES,contentUnreadCountKey:null,contentIsBranchKey:null,outlineIndent:16,outlineLevel:0,disclosureState:SC.LEAF_NODE,validator:null,contentPropertyDidChange:function(){if(this.get("contentIsEditable")!==this.contentIsEditable()){this.notifyPropertyChange("contentIsEditable")}this.displayDidChange()},contentIsEditable:function(){var a=this.get("content");return a&&(a.get?a.get("isEditable")!==NO:NO)}.property("content").cacheable(),inlineEditorDelegate:SC.InlineTextFieldDelegate,$label:function(){return this.$("label")},_isInsideElementWithClassName:function(f,a){var c=this.get("layer");if(!c){return NO}var e=SC.$(a.target);var b=NO,g;while(!b&&e.length>0&&(e[0]!==c)){if(e.hasClass(f)){b=YES}e=e.parent()}e=c=null;return b},_isInsideCheckbox:function(b){var a=this.displayDelegate;var c=this.getDelegateProperty("contentCheckboxKey",a);return c&&this._isInsideElementWithClassName("sc-checkbox-view",b)},_isInsideDisclosure:function(a){if(this.get("disclosureState")===SC.LEAF_NODE){return NO}return this._isInsideElementWithClassName("sc-disclosure-view",a)},_isInsideRightIcon:function(c){var b=this.displayDelegate;var a=this.getDelegateProperty("hasContentRightIcon",b)||!SC.none(this.rightIcon);return a&&this._isInsideElementWithClassName("right-icon",c)},mouseDown:function(a){if(!this.get("contentIsEditable")){return NO}if(this._isInsideCheckbox(a)){this._addCheckboxActiveState();this._isMouseDownOnCheckbox=YES;this._isMouseInsideCheckbox=YES;return YES}else{if(this._isInsideDisclosure(a)){this._addDisclosureActiveState();this._isMouseDownOnDisclosure=YES;this._isMouseInsideDisclosure=YES;return YES}else{if(this._isInsideRightIcon(a)){this._addRightIconActiveState();this._isMouseDownOnRightIcon=YES;this._isMouseInsideRightIcon=YES;return YES}}}return NO},mouseUp:function(k){var c=NO,n,e,b,a,j,g;if(this._isMouseDownOnCheckbox){if(this._isInsideCheckbox(k)){n=this.displayDelegate;e=this.getDelegateProperty("contentCheckboxKey",n);b=this.get("content");if(b&&b.get){var f=b.get(e);f=(f===SC.MIXED_STATE)?YES:!f;b.set(e,f);this.displayDidChange()}}this._removeCheckboxActiveState();c=YES}else{if(this._isMouseDownOnDisclosure){if(this._isInsideDisclosure(k)){a=this.get("disclosureState");j=this.get("contentIndex");g=(!SC.none(j))?SC.IndexSet.create(j):null;n=this.get("displayDelegate");if(a===SC.BRANCH_OPEN){if(g&&n&&n.collapse){n.collapse(g)}else{this.set("disclosureState",SC.BRANCH_CLOSED)}this.displayDidChange()}else{if(a===SC.BRANCH_CLOSED){if(g&&n&&n.expand){n.expand(g)}else{this.set("disclosureState",SC.BRANCH_OPEN)}this.displayDidChange()}}}this._removeDisclosureActiveState();c=YES}else{if(this._isMouseDownOnRightIcon){this._removeRightIconActiveState();c=YES}}}this._isMouseInsideCheckbox=this._isMouseDownOnCheckbox=NO;this._isMouseDownOnDisclosure=this._isMouseInsideDisclosure=NO;this._isMouseInsideRightIcon=this._isMouseDownOnRightIcon=NO;return c},mouseMoved:function(a){if(this._isMouseDownOnCheckbox&&this._isInsideCheckbox(a)){this._addCheckboxActiveState();this._isMouseInsideCheckbox=YES}else{if(this._isMouseDownOnCheckbox){this._removeCheckboxActiveState();this._isMouseInsideCheckbox=NO}else{if(this._isMouseDownOnDisclosure&&this._isInsideDisclosure(a)){this._addDisclosureActiveState();this._isMouseInsideDisclosure=YES}else{if(this._isMouseDownOnDisclosure){this._removeDisclosureActiveState();this._isMouseInsideDisclosure=NO}else{if(this._isMouseDownOnRightIcon&&this._isInsideRightIcon(a)){this._addRightIconActiveState();this._isMouseInsideRightIcon=YES}else{if(this._isMouseDownOnRightIcon){this._removeRightIconActiveState();this._isMouseInsideRightIcon=NO}}}}}}return NO},touchStart:function(a){return this.mouseDown(a)},touchEnd:function(a){return this.mouseUp(a)},touchEntered:function(a){return this.mouseEntered(a)},touchExited:function(a){return this.mouseExited(a)},_addCheckboxActiveState:function(){if(this.get("isEnabled")){if(this._checkboxRenderDelegate){var a=this._checkboxRenderSource;a.set("isActive",YES);this._checkboxRenderDelegate.update(a,this.$(".sc-checkbox-view"))}else{this.$(".sc-checkbox-view").addClass("active")}}},_removeCheckboxActiveState:function(){if(this._checkboxRenderer){var a=this._checkboxRenderSource;a.set("isActive",NO);this._checkboxRenderDelegate.update(a,this.$(".sc-checkbox-view"))}else{this.$(".sc-checkbox-view").removeClass("active")}},_addDisclosureActiveState:function(){if(this.get("isEnabled")){if(this._disclosureRenderDelegate){var a=this._disclosureRenderSource;a.set("isActive",YES);this._disclosureRenderDelegate.update(a,this.$(".sc-disclosure-view"))}else{this.$(".sc-disclosure-view").addClass("active")}}},_removeDisclosureActiveState:function(){if(this._disclosureRenderer){var a=this._disclosureRenderSource;a.set("isActive",NO);this._disclosureRenderDelegate.update(a,this.$(".sc-disclosure-view"))}else{this.$(".sc-disclosure-view").addClass("active")}},_addRightIconActiveState:function(){this.$("img.right-icon").setClass("active",YES)},_removeRightIconActiveState:function(){this.$("img.right-icon").removeClass("active")},contentHitTest:function(b){var a=this.displayDelegate;var c=this.getDelegateProperty("contentValueKey",a);if(!c){return NO}var f=this.$label()[0];if(!f){return NO}var g=b.target,e=this.get("layer");while(g&&(g!==e)&&(g!==window)){if(g===f){return YES}g=g.parentNode}return NO},beginEditing:function(e,c){var g=this.$label(),f=this.get("parentView");if(c&&this.scrollToVisible()){var b=this.get("owner"),a=this.get("contentIndex");this.invokeLast(function(){var j=b.itemViewForContentIndex(a);if(j&&j.beginEditing){j.beginEditing(NO)}});return YES}else{if(!f||!g||g.get("length")===0){return NO}else{return e()}}}.enhance(),inlineEditorWillBeginEditing:function(e,w,u){var z=this.get("content"),n=this.get("displayDelegate"),k=this.getDelegateProperty("contentValueKey",n),o=this.get("parentView"),a=this.$label(),g=this.get("validator"),B,p,j,b,q,c,t,C,A,D;p=(k&&z)?(z.get?z.get(k):z[k]):z;B=this.computeFrameWithParentFrame(null);c=this._oldLineHeight=a.css("lineHeight");b=a.css("fontSize");q=this.$().css("top");if(q){q=parseInt(q.substring(0,q.length-2),0)}else{q=0}C=0;if(b&&c){A=b*1.5;if(A<c){a.css({lineHeight:"1.5"});C=(c-A)/2}else{oldLineHeight=null}}a=a[0];j=SC.offset(a);B.x=j.x;B.y=j.y+q+C;B.height=a.offsetHeight;B.width=a.offsetWidth;t=this.get("escapeHTML");e.set({value:p,exampleFrame:B,exampleElement:a,multiline:NO,isCollection:YES,validator:g,escapeHTML:t})},inlineEditorShouldBeginEditing:function(a){return YES},inlineEditorDidBeginEditing:function(b,e,f,a){b(e,f,a);var c=this.$label();this._oldOpacity=c.css("opacity");c.css("opacity",0);if(this._oldLineHeight){c.css({lineHeight:this._oldLineHeight})}}.enhance(),inlineEditorDidCommitEditing:function(e,g,c){var f=this.get("content");var a=this.displayDelegate;var b=this.getDelegateProperty("contentValueKey",a);if(b&&f){if(f.set){f.set(b,g)}else{f[b]=g}}else{this.set("content",g)}this.displayDidChange();this._endEditing()},_endEditing:function(a){this.$label().css("opacity",this._oldOpacity);a()}.enhance(),render:function(c,a){var g=this.get("content"),t=this.displayDelegate,b=this.get("outlineLevel"),f=this.get("outlineIndent"),q,o,n,u=[];u.push((this.get("contentIndex")%2===0)?"even":"odd");c.setClass("disabled",!this.get("isEnabled"));n=c.begin("div").addClass("sc-outline");if(b>=0&&f>0){n.addStyle("left",f*(b+1))}o=this.get("disclosureState");if(o!==SC.LEAF_NODE){this.renderDisclosure(n,o);u.push("has-disclosure")}q=this.getDelegateProperty("contentCheckboxKey",t);if(q){o=g?(g.get?g.get(q):g[q]):NO;if(o!==null){this.renderCheckbox(n,o);u.push("has-checkbox")}}if(this.getDelegateProperty("hasContentIcon",t)){q=this.getDelegateProperty("contentIconKey",t);o=(q&&g)?(g.get?g.get(q):g[q]):null;this.renderIcon(n,o);u.push("has-icon")}else{if(this.get("icon")){o=this.get("icon");this.renderIcon(n,o);u.push("has-icon")}}q=this.getDelegateProperty("contentValueKey",t);o=(q&&g)?(g.get?g.get(q):g[q]):g;if(o&&SC.typeOf(o)!==SC.T_STRING){o=o.toString()}if(this.get("escapeHTML")){o=SC.RenderContext.escapeHTML(o)}this.renderLabel(n,o);if(this.getDelegateProperty("hasContentRightIcon",t)){q=this.getDelegateProperty("contentRightIconKey",t);o=(q&&g)?(g.get?g.get(q):g[q]):null;this.renderRightIcon(n,o);u.push("has-right-icon")}q=this.getDelegateProperty("contentUnreadCountKey",t);o=(q&&g)?(g.get?g.get(q):g[q]):null;if(!SC.none(o)&&(o!==0)){this.renderCount(n,o);var e=["zero","one","two","three","four","five"];var p=o.toString().length;var k=e.length;var j=(p<k)?e[p]:e[k-1];u.push("has-count "+j+"-digit")}q=this.getDelegateProperty("listItemActionProperty",t);o=(q&&g)?(g.get?g.get(q):g[q]):null;if(o){this.renderAction(n,o);u.push("has-action")}if(this.getDelegateProperty("hasContentBranch",t)){q=this.getDelegateProperty("contentIsBranchKey",t);o=(q&&g)?(g.get?g.get(q):g[q]):NO;this.renderBranch(n,o);u.push("has-branch")}c.addClass(u);c=n.end()},renderDisclosure:function(a,e){var c=this.get("theme").disclosureRenderDelegate;a=a.begin("div").addClass("sc-disclosure-view").addClass("sc-regular-size").addClass(this.get("theme").classNames).addClass(c.get("className"));var b=this._disclosureRenderSource;if(!b){this._disclosureRenderSource=b=SC.Object.create({renderState:{},theme:this.get("theme")})}b.set("isSelected",e===SC.BRANCH_OPEN).set("isEnabled",this.get("isEnabled")).set("title","");c.render(b,a);a=a.end();this._disclosureRenderDelegate=c},renderCheckbox:function(a,e){var c=this.get("theme").checkboxRenderDelegate;a=a.begin("div").addClass("sc-checkbox-view").addClass("sc-regular-size").addClass(this.get("theme").classNames).addClass(c.get("className"));var b=this._checkboxRenderSource;if(!b){b=this._checkboxRenderSource=SC.Object.create({renderState:{},theme:this.get("theme")})}b.set("isSelected",e&&(e!==SC.MIXED_STATE)).set("isEnabled",this.get("isEnabled")&&this.get("contentIsEditable")).set("isActive",this._checkboxIsActive).set("title","");c.render(b,a);a=a.end();this._checkboxRenderDelegate=c},renderIcon:function(c,f){var b=null,e=null,a=[];if(f&&SC.ImageView.valueIsUrl(f)){b=f;e=""}else{e=f;b=SC.BLANK_IMAGE_URL}a.push(e,"icon");c.begin("img").addClass(a).attr("src",b).end()},renderLabel:function(b,a){b.push("<label>",a||"","</label>")},renderRightIcon:function(c,f){var b=null,e=null,a=[];if(f&&SC.ImageView.valueIsUrl(f)){b=f;e=""}else{e=f;b=SC.BLANK_IMAGE_URL}a.push("right-icon",e);c.begin("img").addClass(a).attr("src",b).end()},renderCount:function(a,b){a.push('<span class="count"><span class="inner">',b.toString(),"</span></span>")},renderAction:function(a,b){a.push('<img src="',SC.BLANK_IMAGE_URL,'" class="action" />')},renderBranch:function(c,b){var a=[];a.push("branch",b?"branch-visible":"branch-hidden");c.begin("span").addClass(a).push("&nbsp;").end()}});SC.ListItemView._deprecatedRenderWarningHasBeenIssued=false;sc_require("mixins/collection_view_delegate");sc_require("views/list_item");SC.DRAG_REORDER=16;SC.BENCHMARK_RELOAD=NO;SC.CollectionView=SC.View.extend(SC.CollectionViewDelegate,SC.CollectionContent,{classNames:["sc-collection-view"],displayProperties:["isFirstResponder","isEnabled","isActive"],renderDelegateName:"collectionRenderDelegate",ACTION_DELAY:200,useFastPath:NO,content:null,contentBindingDefault:SC.Binding.multiple(),length:0,nowShowing:function(){return this.computeNowShowing()}.property("length","clippingFrame").cacheable(),selection:null,isSelectable:YES,isSelectableBindingDefault:SC.Binding.bool(),isEnabled:YES,isEnabledBindingDefault:SC.Binding.bool(),isEditable:YES,isEditableBindingDefault:SC.Binding.bool(),canReorderContent:NO,canReorderContentBindingDefault:SC.Binding.bool(),canDeleteContent:NO,canDeleteContentBindingDefault:SC.Binding.bool(),canEditContent:NO,canEditContentBindingDefault:SC.Binding.bool(),isDropTarget:NO,useToggleSelection:NO,actOnSelect:NO,selectOnMouseDown:YES,exampleView:SC.ListItemView,contentExampleViewKey:null,groupExampleView:null,contentGroupExampleViewKey:null,action:null,target:null,contentValueKey:null,acceptsFirstResponder:NO,isActive:NO,calculatedHeight:0,calculatedWidth:0,computeLayout:function(){return null},layoutForContentIndex:function(a){return null},allContentIndexes:function(){return SC.IndexSet.create(0,this.get("length")).freeze()}.property("length").cacheable(),contentIndexesInRect:function(a){return null},computeNowShowing:function(){var c=this.contentIndexesInRect(this.get("clippingFrame"));if(!c){c=this.get("allContentIndexes")}else{var b=this.get("length"),a=c.get("max");if(a>b){c=c.copy().remove(b,a-b).freeze()}}return c},showInsertionPoint:function(a,b){},hideInsertionPoint:function(){},delegate:null,selectionDelegate:function(){var a=this.get("delegate"),b=this.get("content");return this.delegateFor("isCollectionViewDelegate",a,b)}.property("delegate","content").cacheable(),contentDelegate:function(){var a=this.get("delegate"),b=this.get("content");return this.delegateFor("isCollectionContent",a,b)}.property("delegate","content").cacheable(),_contentGroupIndexes:function(){return this.get("contentDelegate").contentGroupIndexes(this,this.get("content"))}.property("contentDelegate","content").cacheable(),contentRangeDidChange:function(e,b,c,a){if(!b&&(c==="[]")){this.notifyPropertyChange("_contentGroupIndexes");this.reload(a)}else{this.contentPropertyDidChange(b,c,a)}},contentPropertyDidChange:function(c,b,a){},updateContentRangeObserver:function(){var e=this.get("nowShowing"),a=this._cv_contentRangeObserver,c=this.get("content");if(!c){return}if(a){c.updateRangeObserver(a,e)}else{var b=this.contentRangeDidChange;a=c.addRangeObserver(e,this,b,null);this._cv_contentRangeObserver=a}},removeContentRangeObserver:function(){var b=this.get("content"),a=this._cv_contentRangeObserver;if(a){if(b){b.removeRangeObserver(a)}this._cv_contentRangeObserver=null}},contentLengthDidChange:function(){var a=this.get("content");this.set("length",a?a.get("length"):0)},_cv_contentDidChange:function(){var b=this.get("content"),a=this.contentLengthDidChange;if(b===this._content){return}this.removeContentRangeObserver();if(this._content){this._content.removeObserver("length",this,a)}this._content=b;if(b){b.addObserver("length",this,a)}this.contentLengthDidChange();this.contentRangeDidChange(b,null,"[]",null)}.observes("content"),_invalidIndexes:NO,reload:function(a){var b=this._invalidIndexes;if(a&&b!==YES){if(b){b.add(a)}else{b=this._invalidIndexes=a.clone()}}else{this._invalidIndexes=YES}if(this.get("isVisibleInWindow")){this.invokeOnce(this.reloadIfNeeded)}return this},reloadIfNeeded:function(){var F=this._invalidIndexes;if(!F||!this.get("isVisibleInWindow")){return this}this._invalidIndexes=NO;var C=this.get("content"),D,E,t,H=this.computeLayout(),G=SC.BENCHMARK_RELOAD,c=this.get("nowShowing"),I=this._sc_itemViews,u=this.get("containerView")||this,a,z,B,A,p,v,k,w,f,q,o,J,e,b,j,n,g;if(F.isIndexSet&&F.contains(c)){F=YES}if(this.willReload){this.willReload(F===YES?null:F)}a=this.get("exampleView");B=a?a.isReusableInCollections:NO;z=this.get("groupExampleView");A=z?z.isReusableInCollections:NO;if(F.isIndexSet){if(G){SC.Benchmark.start(G="%@#reloadIfNeeded (Partial)".fmt(this),YES)}v=[];k=[];w=[];F.forEach(function(K){t=I?I[K]:null;if(c.contains(K)){if(t&&t.parentView===u){k.push(K)}else{w.push(K)}}else{if(t&&t.parentView===u){v.push(K)}}},this);for(D=0,E=v.length;D<E;++D){q=v[D];t=I?I[q]:null;delete I[q];j=this.get("contentDelegate");n=this.get("_contentGroupIndexes");g=n&&n.contains(q);if(g){g=j.contentIndexIsGroup(this,C,q)}p=g?A:B;if(p){b=g?this._GROUP_VIEW_POOL:this._VIEW_POOL;b.push(t);t.destroyLayer()}J=t.get("layer");if(J&&J.parentNode){J.parentNode.removeChild(J)}u.removeChild(t);if(!p){t.destroy()}}for(D=0,E=k.length;D<E;++D){q=k[D];t=I?I[q]:null;o=this.itemViewForContentIndex(q,YES);t.destroyLayer();u.replaceChild(o,t)}for(D=0,E=w.length;D<E;++D){q=w[D];o=this.itemViewForContentIndex(q,YES);u.insertBefore(o,null)}if(G){SC.Benchmark.end(G)}}else{if(G){SC.Benchmark.start(G="%@#reloadIfNeeded (Full)".fmt(this),YES)}if(I){I.length=0}f=u.get("childViews");if(f){f=f.copy()}u.beginPropertyChanges();if(this.willRemoveAllChildren){this.willRemoveAllChildren()}u.destroyLayer().removeAllChildren();if(f){for(D=0,E=f.length;D<E;++D){o=f[D];g=o.get("isGroupView");p=g?A:B;if(p){b=g?this._GROUP_VIEW_POOL:this._VIEW_POOL;b.push(o);o.destroyLayer()}else{o.destroy()}}}f=[];c.forEach(function(K){f.push(this.itemViewForContentIndex(K,YES))},this);u.set("childViews",f);u.replaceLayer();u.endPropertyChanges();if(G){SC.Benchmark.end(G)}}if(H){this.adjust(H)}if(this.didReload){this.didReload(F===YES?null:F)}return this},_TMP_ATTRS:{},_COLLECTION_CLASS_NAMES:["sc-collection-item"],_GROUP_COLLECTION_CLASS_NAMES:["sc-collection-item","sc-group-item"],_VIEW_POOL:null,_GROUP_VIEW_POOL:null,itemViewForContentIndex:function(q,a){var F;var D=this._sc_itemViews;if(!D){D=this._sc_itemViews=[]}else{if(!a&&(F=D[q])){return F}}var u=this.get("content"),w=u.objectAt(q),k=this.get("contentDelegate"),o=this.get("_contentGroupIndexes"),n=NO,G,p,z,g,A,e,b,c,C,j,f,v,B;n=o&&o.contains(q);if(n){n=k.contentIndexIsGroup(this,u,q)}if(n){G=this.get("contentGroupExampleViewKey");if(G&&w){p=w.get(G)}if(!p){p=this.get("groupExampleView")||this.get("exampleView")}A="_GROUP_VIEW_POOL"}else{G=this.get("contentExampleViewKey");if(G&&w){p=w.get(G)}if(!p){p=this.get("exampleView")}A="_VIEW_POOL"}c=this.get("containerView")||this;g=this.layerIdFor(q);C=k.contentIndexIsEnabled(this,u,q);j=k.contentIndexIsSelected(this,u,q);f=k.contentIndexOutlineLevel(this,u,q);v=k.contentIndexDisclosureState(this,u,q);B=this.isVisibleInWindow;z=this.layoutForContentIndex(q);if(p&&p.isReusableInCollections){e=this[A];if(!e){e=this[A]=[]}if(e.length>0){F=e.pop();b=F.prepareForReuse;if(b){b.call(F)}F.beginPropertyChanges();F.set("contentIndex",q);F.set("layerId",g);F.set("isEnabled",C);F.set("isSelected",j);F.set("outlineLevel",f);F.set("disclosureState",v);F.set("isVisibleInWindow",B);F.set("parentView",c);SC.View.views[g]=F;if(z){F.set("layout",z)}else{F.set("layout",p.prototype.layout)}F.set("content",w);F.endPropertyChanges()}}if(!F){var t=this._TMP_ATTRS;t.contentIndex=q;t.content=w;t.owner=t.displayDelegate=this;t.parentView=c;t.page=this.page;t.layerId=g;t.isEnabled=C;t.isSelected=j;t.outlineLevel=f;t.disclosureState=v;t.isGroupView=n;t.isVisibleInWindow=B;if(n){t.classNames=this._GROUP_COLLECTION_CLASS_NAMES}else{t.classNames=this._COLLECTION_CLASS_NAMES}if(z){t.layout=z}else{delete t.layout}F=this.createItemView(p,q,t)}D[q]=F;return F},itemViewForContentObject:function(a){return this.itemViewForContentIndex(this.get("content").indexOf(a))},_TMP_LAYERID:[],createItemView:function(c,a,b){return c.create(b)},layerIdFor:function(a){var b=this._TMP_LAYERID;b[0]=SC.guidFor(this);b[1]=a;return b.join("-")},contentIndexForLayerId:function(c){if(!c||!(c=c.toString())){return null}var b=this._baseLayerId;if(!b){b=this._baseLayerId=SC.guidFor(this)+"-"}if((c.length<=b.length)||(c.indexOf(b)!==0)){return null}var a=Number(c.slice(c.lastIndexOf("-")+1));return isNaN(a)?null:a},itemViewForEvent:function(o){var e=this.getPath("pane.rootResponder");if(!e){return null}var c=SC.guidFor(this)+"-",a=c.length,f=o.target,j=this.get("layer"),g=null,b,n,k;while(f&&f!==document&&f!==j){b=f?SC.$(f).attr("id"):null;if(b&&(g=this.contentIndexForLayerId(b))!==null){break}f=f.parentNode}if(g===null||(f===j)){f=j=null;return null}if(g>=this.get("length")){throw"layout for item view %@ was found when item view does not exist (%@)".fmt(b,this)}return this.itemViewForContentIndex(g)},expand:function(b){if(!b){return this}var a=this.get("contentDelegate"),c=this.get("content");b.forEach(function(e){var f=a.contentIndexDisclosureState(this,c,e);if(f===SC.BRANCH_CLOSED){a.contentIndexExpand(this,c,e)}},this);return this},collapse:function(b){if(!b){return this}var a=this.get("contentDelegate"),c=this.get("content");b.forEach(function(e){var f=a.contentIndexDisclosureState(this,c,e);if(f===SC.BRANCH_OPEN){a.contentIndexCollapse(this,c,e)}},this);return this},_cv_selectionDidChange:function(){var c=this.get("selection"),b=this._cv_selection,a=this._cv_selectionContentDidChange;if(c===b){return}if(b){b.removeObserver("[]",this,a)}if(c){c.addObserver("[]",this,a)}this._cv_selection=c;this._cv_selectionContentDidChange()}.observes("selection"),_cv_selectionContentDidChange:function(){var c=this.get("selection"),b=this._cv_selindexes,a=this.get("content"),e;this._cv_selindexes=c?c.frozenCopy():null;if(b){b=b.indexSetForSource(a)}if(c){c=c.indexSetForSource(a)}if(c&&b){e=c.without(b).add(b.without(c))}else{e=c||b}if(e&&e.get("length")>0){this.reloadSelectionIndexes(e)}},_invalidSelection:NO,reloadSelectionIndexes:function(a){var b=this._invalidSelection;if(a&&(b!==YES)){if(b){b.add(a)}else{b=this._invalidSelection=a.copy()}}else{this._invalidSelection=YES}if(this.get("isVisibleInWindow")){this.invokeOnce(this.reloadSelectionIndexesIfNeeded)}return this},reloadSelectionIndexesIfNeeded:function(){var f=this._invalidSelection;if(!f||!this.get("isVisibleInWindow")){return this}var e=this.get("nowShowing"),b=this._invalidIndexes,a=this.get("content"),c=this.get("selection");this._invalidSelection=NO;if(b===YES||!e){return this}if(f===YES){f=e}if(b&&b.isIndexSet){f=f.without(b)}f.forEach(function(g){if(!e.contains(g)){return}var j=this.itemViewForContentIndex(g,NO);if(j){j.set("isSelected",c?c.contains(a,g):NO)}},this);return this},select:function(c,g){var e=this.get("content"),a=this.get("selectionDelegate"),b=this.get("_contentGroupIndexes"),f;if(!this.get("isSelectable")||!this.get("isEnabled")){return this}if(SC.typeOf(c)===SC.T_NUMBER){c=SC.IndexSet.create(c,1)}if(c&&c.get("length")>0){if(b&&b.get("length")>0){c=c.copy().remove(b)}c=a.collectionViewShouldSelectIndexes(this,c,g);if(!c||c.get("length")===0){return this}}else{c=null}if(g&&(f=this.get("selection"))){f=f.copy()}else{f=SC.SelectionSet.create()}if(c&&c.get("length")>0){if(c.get("length")===1){f.addObject(e.objectAt(c.get("firstObject")))}else{f.add(e,c)}}f=a.collectionViewSelectionForProposedSelection(this,f);if(!f){f=SC.SelectionSet.create()}this._selectionAnchor=null;this.set("selection",f.freeze());return this},deselect:function(b){var e=this.get("selection"),c=this.get("content"),a=this.get("selectionDelegate");if(!this.get("isSelectable")||!this.get("isEnabled")){return this}if(!e||e.get("length")===0){return this}if(SC.typeOf(b)===SC.T_NUMBER){b=SC.IndexSet.create(b,1)}b=a.collectionViewShouldDeselectIndexes(this,b);if(!b||b.get("length")===0){return this}e=e.copy().remove(c,b);e=a.collectionViewSelectionForProposedSelection(this,e);if(!e){e=SC.SelectionSet.create()}this.set("selection",e.freeze());return this},_findNextSelectableItemFromIndex:function(k,a){var c=this.get("length"),e=SC.IndexSet.create(),f=this.get("content"),n=this.get("selectionDelegate"),j=this.get("_contentGroupIndexes"),g,b;if(!j&&(n.collectionViewShouldSelectIndexes===this.collectionViewShouldSelectIndexes)){return k}while(k<c){if(!j||!j.contains(k)){e.add(k);g=n.collectionViewShouldSelectIndexes(this,e);if(g&&g.get("length")>=1){return k}e.remove(k)}k++}if(a===undefined){b=this.get("selection");a=b?b.get("max"):-1}return a},_findPreviousSelectableItemFromIndex:function(b,k){var c=SC.IndexSet.create(),g=this.get("content"),a=this.get("selectionDelegate"),f=this.get("_contentGroupIndexes"),e;if(SC.none(b)){b=-1}if(!f&&(a.collectionViewShouldSelectIndexes===this.collectionViewShouldSelectIndexes)){return b}while(b>=0){if(!f||!f.contains(b)){c.add(b);e=a.collectionViewShouldSelectIndexes(this,c);if(e&&e.get("length")>=1){return b}c.remove(b)}b--}if(k===undefined){var j=this.get("selection");k=j?j.get("min"):-1}if(SC.none(k)){k=-1}return k},selectPreviousItem:function(k,b){if(SC.none(b)){b=1}if(SC.none(k)){k=false}var g=this.get("selection"),f=this.get("content");if(g){g=g.indexSetForSource(f)}var j=g?g.get("min"):-1,a=g?g.get("max")-1:-1,e=this._selectionAnchor;if(SC.none(e)){e=j}if(k){if(a>e){a=a-b}else{j=this._findPreviousSelectableItemFromIndex(j-b)}if(SC.none(j)||(j<0)){j=0}if(!f.objectAt(j)){j=g?g.get("min"):-1}if(a<j){a=j}}else{j=this._findPreviousSelectableItemFromIndex(j-b);if(SC.none(j)||(j<0)){j=0}if(!f.objectAt(j)){j=g?g.get("min"):-1}a=j;e=null}var c=j;g=SC.IndexSet.create(j,a+1-j);this.scrollToContentIndex(c);this.select(g);this._selectionAnchor=e;return this},selectNextItem:function(k,n){if(SC.none(n)){n=1}if(SC.none(k)){k=false}var b=this.get("selection"),j=this.get("content");if(b){b=b.indexSetForSource(j)}var a=b?b.get("min"):-1,e=b?b.get("max")-1:-1,f=this._selectionAnchor,c=this.get("length");if(SC.none(f)){f=a}if(k){if(a<f){a=a+n}else{e=this._findNextSelectableItemFromIndex(e+n,e)}if(e>=c){e=c-1}if(!j.objectAt(e)){e=b?b.get("max")-1:-1}if(a>e){a=e}}else{e=this._findNextSelectableItemFromIndex(e+n,e);if(e>=c){e=c-1}if(!j.objectAt(e)){e=b?b.get("max")-1:-1}a=e;f=null}var g=e;b=SC.IndexSet.create(a,e-a+1);this.scrollToContentIndex(g);this.select(b);this._selectionAnchor=f;return this},deleteSelection:function(){if(!this.get("canDeleteContent")){return NO}var e=this.get("selection"),c=this.get("content"),a=this.get("selectionDelegate"),b=e&&c?e.indexSetForSource(c):null;if(!c||!b||b.get("length")===0){return NO}b=a.collectionViewShouldDeleteIndexes(this,b);if(!b||b.get("length")===0){return NO}a.collectionViewDeleteContent(this,this.get("content"),b);return YES},scrollToContentIndex:function(b){var a=this.itemViewForContentIndex(b);if(a){this.scrollToItemView(a)}return this},scrollToItemView:function(a){if(a){a.scrollToVisible()}return this},keyDown:function(a){var b=this.interpretKeyEvents(a);return !b?NO:b},keyUp:function(){return true},insertText:function(b,a){if(b===" "){var c=this.get("selection");if(c&&c.get("length")>0){this.invokeLater(this._cv_action,0,null,a)}return YES}else{return NO}},selectAll:function(a){var b=this.get("content"),c=b?SC.IndexSet.create(0,b.get("length")):null;this.select(c,NO);return YES},deselectAll:function(){var a=this.get("content"),b=a?SC.IndexSet.create(0,a.get("length")):null;this.deselect(b,NO);return YES},deleteBackward:function(a){return this.deleteSelection()},deleteForward:function(a){return this.deleteSelection()},moveDown:function(b,a){this.selectNextItem(false,this.get("itemsPerRow")||1);this._cv_performSelectAction(null,a,this.ACTION_DELAY);return true},moveUp:function(b,a){this.selectPreviousItem(false,this.get("itemsPerRow")||1);this._cv_performSelectAction(null,a,this.ACTION_DELAY);return true},moveLeft:function(p){if(p.ctrlKey||p.metaKey){return NO}if((this.get("itemsPerRow")||1)>1){this.selectPreviousItem(false,1);this._cv_performSelectAction(null,p,this.ACTION_DELAY)}else{var c=this.get("selection"),n=this.get("content"),j=c?c.indexSetForSource(n):null;if(j){var q=undefined,g=false,k=undefined;if(j.get("length")===1){k=j.get("firstObject");q=this.get("contentDelegate");var b=q.contentIndexDisclosureState(this,n,k);if(b!==SC.BRANCH_OPEN){g=true}}if(g){var a=q.contentIndexOutlineLevel(this,n,k)-1;if(a>=0){var f=-1;while(f<0){var e=this._findPreviousSelectableItemFromIndex(k-1);if(e<0){return false}k=e;var o=q.contentIndexOutlineLevel(this,n,k);if(o===a){f=e}}if(f!==-1){this.select(k)}}}else{this.collapse(j)}}}return true},moveRight:function(a){if(a.ctrlKey||a.metaKey){return NO}if((this.get("itemsPerRow")||1)>1){this.selectNextItem(false,1);this._cv_performSelectAction(null,a,this.ACTION_DELAY)}else{var e=this.get("selection"),c=this.get("content"),b=e?e.indexSetForSource(c):null;if(b){this.expand(b)}}return true},moveDownAndModifySelection:function(b,a){this.selectNextItem(true,this.get("itemsPerRow")||1);this._cv_performSelectAction(null,a,this.ACTION_DELAY);return true},moveUpAndModifySelection:function(b,a){this.selectPreviousItem(true,this.get("itemsPerRow")||1);this._cv_performSelectAction(null,a,this.ACTION_DELAY);return true},moveLeftAndModifySelection:function(b,a){if((this.get("itemsPerRow")||1)>1){this.selectPreviousItem(true,1);this._cv_performSelectAction(null,a,this.ACTION_DELAY)}return true},moveRightAndModifySelection:function(b,a){if((this.get("itemsPerRow")||1)>1){this.selectNextItem(true,1);this._cv_performSelectAction(null,a,this.ACTION_DELAY)}return true},insertNewline:function(e,c){var b=this.get("isEditable")&&this.get("canEditContent"),j,g,k,a,f;if(b){j=this.get("selection");g=this.get("content");if(j&&j.get("length")===1){k=j.indexSetForSource(g);a=k?k.get("min"):-1;b=a>=0}}if(b){f=this.itemViewForContentIndex(a);b=f&&SC.typeOf(f.beginEditing)===SC.T_FUNCTION}if(b){this.scrollToContentIndex(a);f=this.itemViewForContentIndex(a);f.beginEditing()}else{this.invokeLater(this._cv_action,0,f,null)}return YES},insertTab:function(b){var a=this.get("nextValidKeyView");if(a){a.becomeFirstResponder()}else{b.allowDefault()}return YES},insertBacktab:function(b){var a=this.get("previousValidKeyView");if(a){a.becomeFirstResponder()}else{b.allowDefault()}return YES},mouseDown:function(o){var k=this.itemViewForEvent(o),j=this.get("content"),f=k?k.get("contentIndex"):-1,c,e,b,a,p,g=NO,n=j.get("allowsMultipleSelection");if(!this.get("isEnabled")){return f>-1}if(!this.get("isSelectable")){return NO}c=this.mouseDownInfo={event:o,itemView:k,contentIndex:f,at:Date.now()};this.becomeFirstResponder();if(this.get("useToggleSelection")){if(this.get("selectOnMouseDown")){if(!k){return}b=this.get("selection");a=b&&b.containsObject(k.get("content"));if(a){this.deselect(f)}else{if(!n){this.select(f,NO);g=YES}else{this.select(f,YES);g=YES}}if(g&&this.get("actOnSelect")){this._cv_performSelectAction(k,o)}}return YES}if(!k){if(this.get("allowDeselectAll")){this.select(null,false)}return YES}b=this.get("selection");if(b){b=b.indexSetForSource(j)}a=b?b.contains(f):NO;c.modifierKeyPressed=p=o.ctrlKey||o.metaKey;if(p&&a){c.shouldDeselect=f>=0}else{if(o.shiftKey&&b&&b.get("length")>0&&n){b=this._findSelectionExtendedByShift(b,f);e=this._selectionAnchor;this.select(b);this._selectionAnchor=e}else{if(!p&&a){c.shouldReselect=f>=0}else{if((o.shiftKey||p)&&!n){this.select(null,false)}if(this.get("selectOnMouseDown")){this.select(f,p)}else{c.shouldSelect=f>=0}}}}c.previousContentIndex=f;return YES},mouseUp:function(n){var o=this.itemViewForEvent(n),e=this.mouseDownInfo,g=this.get("content"),f=o?o.get("contentIndex"):-1,c,a,b,j,p,k=g.get("allowsMultipleSelection");if(!this.get("isEnabled")){return f>-1}if(!this.get("isSelectable")){return NO}if(this.get("useToggleSelection")){if(!o||this.get("selectOnMouseDown")){return NO}c=this.get("selection");a=c&&c.containsObject(o.get("content"));if(a){this.deselect(f)}else{if(!k){this.select(f,NO)}else{this.select(f,YES)}}}else{if(e){p=e.contentIndex;f=(o)?o.get("contentIndex"):-1;if(e.shouldSelect){this.select(p,e.modifierKeyPressed)}if(e.shouldDeselect){this.deselect(p)}if(e.shouldReselect){b=this.get("isEditable")&&this.get("canEditContent");if(b){c=this.get("selection");b=c&&(c.get("length")===1)}if(b){j=this.itemViewForContentIndex(p);b=j&&(!j.contentHitTest||j.contentHitTest(n));b=(b&&j.beginEditing)?j.beginEditing():NO}if(!b){if(this._cv_reselectTimer){this._cv_reselectTimer.invalidate()}this._cv_reselectTimer=this.invokeLater(this.select,300,p,false)}}this._cleanupMouseDown()}}this._cv_performSelectAction(o,n,0,n.clickCount);return NO},_cleanupMouseDown:function(){var b=this.mouseDownInfo,a;if(b){for(a in b){if(!b.hasOwnProperty(a)){continue}delete b[a]}}this.mouseDownInfo=null},mouseMoved:function(c){var a=this.itemViewForEvent(c),b=this._lastHoveredItem;if(a!==b){if(b&&b.mouseExited){b.mouseExited(c)}if(a&&a.mouseEntered){a.mouseEntered(c)}}this._lastHoveredItem=a;if(a&&a.mouseMoved){a.mouseMoved(c)}return YES},mouseExited:function(b){var a=this._lastHoveredItem;this._lastHoveredItem=null;if(a&&a.mouseExited){a.mouseExited(b)}return YES},touchStart:function(e,a){var b=this.itemViewForEvent(e),c=b?b.get("contentIndex"):-1;if(!this.get("isEnabled")){return c>-1}this.becomeFirstResponder();this._touchSelectedView=b;if(!this.get("useToggleSelection")){if(b&&!b.get("isSelected")){b.set("isSelected",YES)}}return YES},touchesDragged:function(a,b){b.forEach(function(c){if(Math.abs(c.pageX-c.startX)>5||Math.abs(c.pageY-c.startY)>5){c.makeTouchResponder(c.nextTouchResponder)}},this)},touchEnd:function(f){var b=this._touchSelectedView,e=b?b.get("contentIndex"):-1,a=NO,c;if(!this.get("isEnabled")){return e>-1}if(b){b.set("isSelected",NO)}if(e>-1){if(this.get("useToggleSelection")){c=this.get("selection");a=c&&c.containsObject(b.get("content"))}if(a){this.deselect(e)}else{this.select(e,NO);this._cv_performSelectAction(b,f,0)}}this._touchSelectedView=null},touchCancelled:function(a){if(this._touchSelectedView){this._touchSelectedView.set("isSelected",NO);this._touchSelectedView=null}},_findSelectionExtendedByShift:function(f,k){if(!f||f.get("length")===0){return SC.IndexSet.create(k)}var e=this.get("content"),j=e.get("length")-1,c=f.get("min"),a=f.get("max")-1,g=this.mouseDownInfo,b=this._selectionAnchor;if(SC.none(b)){b=-1}if(k<c){c=k;if(b<0){this._selectionAnchor=b=a}}else{if(k>a){a=k;if(b<0){this._selectionAnchor=b=c}}else{if(k>=c&&k<=a){if(b<0){this._selectionAnchor=b=c}if(k===b){c=a=k}else{if(k>b){c=b;a=k}else{if(k<b){c=k;a=b}}}}}}return SC.IndexSet.create(c,a-c+1)},reorderDataType:function(){return"SC.CollectionView.Reorder."+SC.guidFor(this)}.property().cacheable(),dragContent:null,proposedInsertionIndex:null,proposedDropOperation:null,mouseDragged:function(k){var n=this.get("selectionDelegate"),f=this.get("content"),a=this.get("selection"),c=this.mouseDownInfo,g=this.get("_contentGroupIndexes"),e,b,j;if(!c||c.contentIndex<0){return YES}if((Date.now()-c.at)<123){return YES}if(n.collectionViewShouldBeginDrag(this)){if(!this.get("selectOnMouseDown")){e=SC.IndexSet.create(c.contentIndex)}else{e=a?a.indexSetForSource(f):null}if(e&&g&&g.get("length")>0){e=e.copy().remove(g);if(e.get("length")===0){e=null}else{e.freeze()}}if(!e){return YES}else{e=e.frozenCopy()}e={content:f,indexes:e};this.set("dragContent",e);b=this.get("dragDataTypes");if(b&&b.get("length")>0){j=n.collectionViewDragViewFor(this,e.indexes);if(!j){j=this._cv_dragViewFor(e.indexes)}j.createLayer();SC.Drag.start({event:c.event,source:this,dragView:j,ghost:NO,ghostActsLikeCursor:n.ghostActsLikeCursor,slideBack:YES,dataSource:this});this._cleanupMouseDown();this._lastInsertionIndex=null}else{this.set("dragContent",null)}return YES}},_cv_dragViewFor:function(g){var c=this.get("nowShowing").without(g),e=this.get("layer").cloneNode(false),b=SC.View.create({layer:e,parentView:this}),a=0,f;c=this.get("nowShowing").without(c);SC.$(e).css("backgroundColor","transparent").css("border","none").css("top",0).css("left",0);c.forEach(function(n){var o=this.itemViewForContentIndex(n),j,k;if(o){j=o.get("isSelected");o.set("isSelected",NO);o.updateLayerIfNeeded();k=o.get("layer");if(k){k=k.cloneNode(true)}o.set("isSelected",j);o.updateLayerIfNeeded()}if(k){e.appendChild(k);f=o.get("layout");if(f.height+f.top>a){a=f.height+f.top}}k=null},this);b.set("layout",{height:a});e=null;return b},dragDataTypes:function(){var a=this.get("selectionDelegate"),b=a.collectionViewDragDataTypes(this),c;if(this.get("canReorderContent")){b=b?b.copy():[];c=this.get("reorderDataType");if(b.indexOf(c)<0){b.push(c)}}return b?b:[]}.property(),dragDataForType:function(c,b){if(this.get("canReorderContent")){if(b===this.get("reorderDataType")){return this.get("dragContent")}}var a=this.get("selectionDelegate");return a.collectionViewDragDataForType(this,c,b)},computeDragOperations:function(c,b){var e=SC.DRAG_NONE,a=this.get("selectionDelegate");if(this.get("canReorderContent")){if(c.get("dataTypes").indexOf(this.get("reorderDataType"))>=0){e=SC.DRAG_REORDER}}e=a.collectionViewComputeDragOperations(this,c,e);if(e&SC.DRAG_REORDER){e=SC.DRAG_MOVE}return e},_computeDropOperationState:function(c,q,f){var j=this.convertFrameFromView(c.get("location"),null),p=SC.DROP_BEFORE,t=this.get("selectionDelegate"),e=this.get("canReorderContent"),u,k,a,n,g,b;var o=this.insertionIndexForLocation(j,SC.DROP_ON);if(SC.typeOf(o)===SC.T_ARRAY){p=o[1];o=o[0]}if(p===SC.DROP_ON){this.set("proposedInsertionIndex",o);this.set("proposedDropOperation",p);b=t.collectionViewValidateDragOperation(this,c,f,o,p);o=this.get("proposedInsertionIndex");p=this.get("proposedDropOperation");this._dropInsertionIndex=this._dropOperation=null;if(b!==SC.DRAG_NONE){return[o,p,b]}else{p=SC.DROP_BEFORE;o=this.insertionIndexForLocation(j,SC.DROP_BEFORE);if(SC.typeOf(o)===SC.T_ARRAY){p=o[1];o=o[0]}}}if((o>=0)&&e&&(p!==SC.DROP_ON)){u=c.dataForType(this.get("reorderDataType"));if(u){k=this.get("content");if(p===SC.DROP_BEFORE){a=u.indexes.contains(o-1);n=u.indexes.contains(o)}else{a=u.indexes.contains(o);n=u.indexes.contains(o-1)}if(a&&n){if(SC.none(this._lastInsertionIndex)){if(p===SC.DROP_BEFORE){while((o>=0)&&u.indexes.contains(o)){o--}}else{g=k?k.get("length"):0;while((o<g)&&u.indexes.contains(o)){o++}}}else{o=this._lastInsertionIndex}}if(o>=0){f=SC.DRAG_REORDER}}}this.set("proposedInsertionIndex",o);this.set("proposedDropOperation",p);f=t.collectionViewValidateDragOperation(this,c,f,o,p);o=this.get("proposedInsertionIndex");p=this.get("proposedDropOperation");this._dropInsertionIndex=this._dropOperation=null;return[o,p,f]},dragUpdated:function(g,b){var k=g.get("allowedDragOperations"),j=this._computeDropOperationState(g,b,k),a=j[0],c=j[1],f=j[2];if(f!==SC.DRAG_NONE){if((this._lastInsertionIndex!==a)||(this._lastDropOperation!==c)){var e=this.itemViewForContentIndex(a);this.showInsertionPoint(e,c)}this._lastInsertionIndex=a;this._lastDropOperation=c}else{this.hideInsertionPoint();this._lastInsertionIndex=this._lastDropOperation=null}return(f&SC.DRAG_REORDER)?SC.DRAG_MOVE:f},dragExited:function(){this.hideInsertionPoint();this._lastInsertionIndex=this._lastDropOperation=null},acceptDragOperation:function(a,b){return YES},performDragOperation:function(f,j){var a=this._computeDropOperationState(f,null,j),p=a[0],o=a[1],k=a[2],q=this.get("selectionDelegate"),c,t,e,n,b,g;if(k&SC.DRAG_REORDER){j=(j&SC.DRAG_MOVE)?SC.DRAG_REORDER:SC.DRAG_NONE}else{j=j&k}if(j===SC.DRAG_NONE){return j}c=q.collectionViewPerformDragOperation(this,f,j,p,o);if((c===SC.DRAG_NONE)&&(j&SC.DRAG_REORDER)){e=f.dataForType(this.get("reorderDataType"));if(!e){return SC.DRAG_NONE}n=this.get("content");g=e.indexes;if(g.get("length")===1){if(((o===SC.DROP_BEFORE)||(o===SC.DROP_AFTER))&&(g.get("min")===p)){return SC.DRAG_MOVE}}n.beginPropertyChanges();t=[];b=0;e.indexes.forEach(function(u){t.push(n.objectAt(u-b));n.removeAt(u-b);b++;if(u<p){p--}},this);if(o===SC.DROP_AFTER){p++}n.replace(p,0,t,o);this.select(SC.IndexSet.create(p,t.length));n.endPropertyChanges();j=SC.DRAG_MOVE}return j},collectionViewShouldBeginDrag:function(a){return this.get("canReorderContent")},insertionIndexForLocation:function(a,b){return -1},_cv_isVisibleInWindowDidChange:function(){if(this.get("isVisibleInWindow")){if(this._invalidIndexes){this.invokeOnce(this.reloadIfNeeded)}if(this._invalidSelection){this.invokeOnce(this.reloadSelectionIndexesIfNeeded)}}}.observes("isVisibleInWindow"),collectionViewShouldSelectItem:function(a,b){return this.get("isSelectable")},_TMP_DIFF1:SC.IndexSet.create(),_TMP_DIFF2:SC.IndexSet.create(),_cv_nowShowingDidChange:function(){var b=this.get("nowShowing"),a=this._sccv_lastNowShowing,e,f,c;if(a!==b){if(a&&b){f=this._TMP_DIFF1.add(a).remove(b);c=this._TMP_DIFF2.add(b).remove(a);e=f.add(c)}else{e=a||b}}if(e&&e.get("length")>0){this._sccv_lastNowShowing=b?b.frozenCopy():null;this.updateContentRangeObserver();this.reload(e)}if(f){f.clear()}if(c){c.clear()}}.observes("nowShowing"),init:function(){arguments.callee.base.apply(this,arguments);if(this.useFastPath){this.mixin(SC.CollectionFastPath)}if(this.get("canReorderContent")){this._cv_canReorderContentDidChange()}this._sccv_lastNowShowing=this.get("nowShowing").clone();if(this.content){this._cv_contentDidChange()}if(this.selection){this._cv_selectionDidChange()}},_cv_canReorderContentDidChange:function(){if(this.get("canReorderContent")){if(!this.get("isDropTarget")){this.set("isDropTarget",YES)}SC.Drag.addDropTarget(this)}}.observes("canReorderContent"),_cv_performSelectAction:function(b,e,c,a){var f;if(c===undefined){c=0}if(a===undefined){a=1}if((a>1)||this.get("actOnSelect")){if(this._cv_reselectTimer){this._cv_reselectTimer.invalidate()}f=this.get("selection");f=f?f.toArray():[];if(this._cv_actionTimer){this._cv_actionTimer.invalidate()}this._cv_actionTimer=this.invokeLater(this._cv_action,c,b,e,f)}},_cv_action:function(b,a,c){var e=this.get("action");var f=this.get("target")||null;this._cv_actionTimer=null;if(e){if(SC.typeOf(e)===SC.T_FUNCTION){return this.action(b,a)}var g=this.get("pane");if(g){g.rootResponder.sendAction(e,f,this,g,c)}}else{if(!b){return}else{if(SC.typeOf(b._action)==SC.T_FUNCTION){return b._action(a)}else{if(SC.typeOf(b.action)==SC.T_FUNCTION){return b.action(a)}}}}}});SC.DateFieldView=SC.TextFieldView.extend({value:null,showDate:YES,showTime:NO,formatTime:"%I:%M %p",formatDate:"%d/%m/%Y",formatDateTime:"%d/%m/%Y %I:%M %p",_dtConstants:["%a","%b","%d","%H","%I","%j","%m","%M","%p","%S","%U","%W","%y","%Y"],_wtConstants:[3,3,2,2,2,3,2,2,2,2,2,2,2,4],activeSelection:0,format:function(){var a=this.get("showTime");var b=this.get("showDate");if(a===YES&&b===YES){return this.get("formatDateTime")}if(a===YES){return this.get("formatTime")}return this.get("formatDate")}.property("showTime","showDate").cacheable(),validator:function(){return SC.Validator.DateTime.extend({format:this.get("format")})}.property("format").cacheable(),tabsSelections:function(){var g=[];var e=this.get("format");var n=this.get("_dtConstants");var b=this.get("_wtConstants");if(SC.empty(e)){throw"The format string is empty, and must be a valid string."}var j,o,c,f=0,a=0,k=0;while(f<e.length&&e.indexOf("%",f)!==-1){j=e.indexOf("%",f);o=e.substring(j,j+2);f=j+2;c=n.indexOf(o);if(c===-1){throw"SC.DateFieldView: The format's key '%@' is not supported.".fmt(o)}a=a+j-k;g.push(SC.Object.create({key:o,textSelection:SC.TextSelection.create({start:a,end:a+b[c]})}));a=a+b[c];k=f}j=o=c=null;return g}.property("format").cacheable(),updateTextSelectionObserver:function(){var a=this.get("activeSelection");var b=this.get("tabsSelections");if(this.get("isEditing")){this.selection(null,b[a].get("textSelection"))}}.observes("activeSelection","value"),updateValue:function(b,c){var f=(c===0)?-1:1;var e=this.get("value"),a;switch(b){case"%a":case"%d":case"%j":this.set("value",e.advance({day:f}));break;case"%b":case"%m":this.set("value",e.advance({month:f}));break;case"%H":case"%I":this.set("value",e.advance({hour:f}));break;case"%M":this.set("value",e.advance({minute:f}));break;case"%p":a=e.get("hour")>=12?-12:12;this.set("value",e.advance({hour:a}));break;case"%S":this.set("value",e.advance({second:f}));break;case"%U":this.set("value",e.advance({week1:f}));break;case"%W":this.set("value",e.advance({week0:f}));break;case"%y":case"%Y":this.set("value",e.advance({year:f}));break}},_selectRootElement:function(){},keyDown:function(a){if(this.interpretKeyEvents(a)){a.stop();return YES}return arguments.callee.base.apply(this,arguments)},ctrl_a:function(){return YES},moveUp:function(b){var a=this.get("activeSelection");var c=this.get("tabsSelections");this.updateValue(c[a].get("key"),1);return YES},moveDown:function(b){var a=this.get("activeSelection");var c=this.get("tabsSelections");this.updateValue(c[a].get("key"),0);return YES},insertText:function(a){return YES},moveRight:function(a){var c=this.get("tabsSelections");var b=this.get("activeSelection")+1;if(b===c.length){b=0}this.set("activeSelection",b);return YES},moveLeft:function(a){var c=this.get("tabsSelections");var b=this.get("activeSelection")-1;if(b===-1){b=c.length-1}this.set("activeSelection",b);return YES},insertTab:function(a){var c=this.get("tabsSelections");var b=this.get("activeSelection")+1;if(b<c.length){this.set("activeSelection",b);return YES}return NO},insertBacktab:function(a){var b=this.get("activeSelection")-1;if(b!==-1){this.set("activeSelection",b);return YES}return NO},mouseUp:function(b){var c=arguments.callee.base.apply(this,arguments);var f=this.get("selection");if(SC.none(f)){this.set("activeSelection",0)}else{var k=f.get("start");var j=this.get("tabsSelections");var a=j.length,g;for(var e=0;e<a;e++){g=j[e].get("textSelection");if(k>=g.get("start")&&k<=g.get("end")){this.set("activeSelection",e)}}}return c},deleteBackward:function(a){return YES},deleteForward:function(a){return YES}});SC.DisclosureView=SC.ButtonView.extend({classNames:["sc-disclosure-view"],renderDelegateName:"disclosureRenderDelegate",buttonBehavior:SC.TOGGLE_BEHAVIOR,toggleOnValue:YES,toggleOffValue:NO,valueBindingDefault:SC.Binding.bool(),keyDown:function(a){if(a.which===37||a.which===38){this.set("value",this.get("toggleOffValue"));return YES}if(a.which===39||a.which===40){this.set("value",this.get("toggleOnValue"));return YES}arguments.callee.base.apply(this,arguments)}});sc_require("views/collection");sc_require("mixins/collection_row_delegate");SC.ListView=SC.CollectionView.extend(SC.CollectionRowDelegate,{classNames:["sc-list-view"],acceptsFirstResponder:YES,showAlternatingRows:NO,render:function(a,b){a.setClass("alternating",this.get("showAlternatingRows"));return arguments.callee.base.apply(this,arguments)},rowDelegate:function(){var a=this.delegate,b=this.get("content");return this.delegateFor("isCollectionRowDelegate",a,b)}.property("delegate","content").cacheable(),_sclv_rowDelegateDidChange:function(){var e=this._sclv_rowDelegate,b=this.get("rowDelegate"),c=this._sclv_rowHeightDidChange,a=this._sclv_customRowHeightIndexesDidChange;if(e===b){return this}this._sclv_rowDelegate=b;if(e){e.removeObserver("rowHeight",this,c);e.removeObserver("customRowHeightIndexes",this,a)}if(!b){throw"Internal Inconsistancy: ListView must always have CollectionRowDelegate"}b.addObserver("rowHeight",this,c);b.addObserver("customRowHeightIndexes",this,a);this._sclv_rowHeightDidChange()._sclv_customRowHeightIndexesDidChange();return this}.observes("rowDelegate"),_sclv_rowHeightDidChange:function(){var b=this.get("rowDelegate"),a=b.get("rowHeight"),c;if(a===this._sclv_rowHeight){return this}this._sclv_rowHeight=a;c=SC.IndexSet.create(0,this.get("length"));this.rowHeightDidChangeForIndexes(c);return this},_sclv_customRowHeightIndexesDidChange:function(){var a=this.get("rowDelegate"),b=a.get("customRowHeightIndexes"),e=this._sclv_customRowHeightIndexes,c=this._sclv_customRowHeightIndexesContentDidChange;if((b===e)||(e&&e.isEqual(b))){return this}if(e&&this._sclv_isObservingCustomRowHeightIndexes){e.removeObserver("[]",this,c)}if(this._sclv_isObservingCustomRowHeightIndexes=b&&!b.get("isFrozen")){b.addObserver("[]",this,c)}this._sclv_customRowHeightIndexesContentDidChange();return this},_sclv_customRowHeightIndexesContentDidChange:function(){var a=this.get("rowDelegate"),b=a.get("customRowHeightIndexes"),c=this._sclv_customRowHeightIndexes,e;if(b&&c){e=b.copy().add(c)}else{e=b||c}this._sclv_customRowHeightIndexes=b?b.frozenCopy():null;this.rowHeightDidChangeForIndexes(e);return this},rowOffsetForContentIndex:function(k){if(k===0){return 0}var o=this.get("rowDelegate"),a=o.get("rowHeight"),g,f,c,b,n,j,e;f=k*a;g=this.get("rowSpacing");if(g){f+=k*g}if(o.customRowHeightIndexes&&(c=o.get("customRowHeightIndexes"))){b=this._sclv_offsetCache;if(!b){b=[];n=j=0;c.forEach(function(p){n+=this.rowHeightForContentIndex(p)-a;b[p+1]=n;j=p},this);this._sclv_max=j+1;this._sclv_offsetCache=b}n=b[k];if(n===undefined){n=b[k]=b[k-1];if(n===undefined){j=this._sclv_max;if(k<j){j=c.indexBefore(k)+1}n=b[k]=b[j]||0}}f+=n}return f},rowHeightForContentIndex:function(a){var b=this.get("rowDelegate"),f,c,g,e;if(b.customRowHeightIndexes&&(e=b.get("customRowHeightIndexes"))){c=this._sclv_heightCache;if(!c){c=[];g=this.get("content");e.forEach(function(j){c[j]=b.contentIndexRowHeight(this,g,j)},this);this._sclv_heightCache=c}f=c[a];if(f===undefined){f=b.get("rowHeight")}}else{f=b.get("rowHeight")}return f},rowHeightDidChangeForIndexes:function(b){var a=this.get("length");this._sclv_heightCache=this._sclv_offsetCache=null;if(b&&b.isIndexSet){b=b.get("min")}this.reload(SC.IndexSet.create(b,a-b));return this},computeLayout:function(){var a=this._sclv_layout;if(!a){a=this._sclv_layout={}}a.minHeight=this.rowOffsetForContentIndex(this.get("length"));this.set("calculatedHeight",a.minHeight);return a},layoutForContentIndex:function(b){var a=this.get("rowDelegate");return{top:this.rowOffsetForContentIndex(b),height:this.rowHeightForContentIndex(b)-a.get("rowPadding")*2,left:0,right:0}},contentIndexesInRect:function(k){var a=this.get("rowDelegate").get("rowHeight"),j=SC.minY(k),b=SC.maxY(k),n=k.height||0,g=this.get("length"),f,c,e;c=(j-(j%a))/a;f=this.rowOffsetForContentIndex(c);while(c>0&&f>j){c--;f-=this.rowHeightForContentIndex(c)}f+=this.rowHeightForContentIndex(c);while(c<g&&f<=j){c++;f+=this.rowHeightForContentIndex(c)}if(c<0){c=0}if(c>=g){c=g}e=c+((n-(n%a))/a);if(e>g){e=g}f=this.rowOffsetForContentIndex(e);while(e>=c&&f>=b){e--;f-=this.rowHeightForContentIndex(e)}f+=this.rowHeightForContentIndex(e);while(e<g&&f<b){e++;f+=this.rowHeightForContentIndex(e)}e++;if(e<c){e=c}if(e>g){e=g}return SC.IndexSet.create(c,e-c)},insertionPointView:SC.View.extend({classNames:"sc-list-insertion-point",render:function(a,b){if(b){a.push('<div class="anchor"></div>')}}}),showInsertionPoint:function(j,g){var k=this._insertionPointView;if(!k){k=this._insertionPointView=this.get("insertionPointView").create()}var e=j.get("contentIndex"),f=this.get("length"),c=SC.clone(j.get("layout")),a=j.get("outlineLevel"),b=j.get("outlineIndent")||0,n;if((e>=f)&&e>0){n=this.itemViewForContentIndex(f-1);if(n.get("isGroupView")){a=1;b=n.get("outlineIndent")}}if(SC.none(a)){a=-1}if(g&SC.DROP_ON){this.hideInsertionPoint();j.set("isSelected",YES);this._lastDropOnView=j}else{if(this._lastDropOnView){this._lastDropOnView.set("isSelected",NO);this._lastDropOnView=null}if(g&SC.DROP_AFTER){c.top+=c.height}c.height=2;c.right=0;c.left=((a+1)*b)+12;delete c.width;k.set("layout",c);this.appendChild(k)}},hideInsertionPoint:function(){if(this._lastDropOnView){this._lastDropOnView.set("isSelected",NO);this._lastDropOnView=null}var a=this._insertionPointView;if(a){a.removeFromParent().destroy()}this._insertionPointView=null},insertionIndexForLocation:function(j,p){var b={x:j.x,y:j.y,width:1,height:1},g=this.contentIndexesInRect(b),k=g.get("min"),n=this.get("length"),c,q,t,f,v,e,u,o,a;if(SC.none(k)||k<0){if((n===0)||(j.y<=this.rowOffsetForContentIndex(0))){k=0}else{if(j.y>=this.rowOffsetForContentIndex(n)){k=n}}}c=this.rowOffsetForContentIndex(k);q=c+this.rowHeightForContentIndex(k);if(p==SC.DROP_ON){if(this.get("isEditable")){t=Math.min(Math.floor((q-c)*0.2),5)}else{t=0}if(j.y>=(c+t)||j.y<=(q+t)){return[k,SC.DROP_ON]}}if((k<n)&&(j.y>=q-10)){k++}if(k>0){o=this.itemViewForContentIndex(k-1);u=(o?o.get("outlineIndent"):0)||0;e=o?o.get("outlineLevel"):0;if(k<n){o=this.itemViewForContentIndex(k);f=o?o.get("outlineLevel"):0;v=(o?o.get("outlineIndent"):0)||0;v*=f}else{f=o.get("isGroupView")?1:0;v=u*f}u*=e;if((f!==e)&&(v!==u)){if(u>v){k--;p=SC.DROP_AFTER}}}if(p===SC.DROP_BEFORE){o=(k<n)?this.itemViewForContentIndex(k):null;if(!o||o.get("isGroupView")){if(k>0){o=this.itemViewForContentIndex(k-1);if(!o.get("isGroupView")||(o.get("disclosureState")===SC.BRANCH_OPEN)){k=k-1;p=SC.DROP_AFTER}else{k=-1}}else{k=-1}}if(k<0){p=SC.DRAG_NONE}}return[k,p]},mouseWheel:function(a){var b=SC.InlineTextFieldView.editor;if(b&&b.get("isEditing")){if(b.get("delegate").get("displayDelegate")===this){SC.InlineTextFieldView.commitEditing()}}return NO},init:function(){arguments.callee.base.apply(this,arguments);this._sclv_rowDelegateDidChange()}});sc_require("views/list");SC.GridView=SC.ListView.extend({classNames:["sc-grid-view"],layout:{left:0,right:0,top:0,bottom:0},rowHeight:48,columnWidth:64,exampleView:SC.LabelView,insertionOrientation:SC.HORIZONTAL_ORIENTATION,itemsPerRow:function(){var b=this.get("frame"),a=this.get("columnWidth")||0;return(a<=0)?1:Math.floor(b.width/a)}.property("clippingFrame","columnWidth").cacheable(),contentIndexesInRect:function(f){var e=this.get("rowHeight")||48,b=this.get("itemsPerRow"),c=Math.floor(SC.minY(f)/e)*b,a=Math.ceil(SC.maxY(f)/e)*b;return SC.IndexSet.create(c,a-c)},layoutForContentIndex:function(j){var e=this.get("rowHeight")||48,a=this.get("clippingFrame").width,b=this.get("itemsPerRow"),f=Math.floor(a/b),g=Math.floor(j/b),c=j-(b*g);return{left:c*f,top:g*e,height:e,width:f}},computeLayout:function(){var f=this.get("content"),e=(f)?f.get("length"):0,c=this.get("rowHeight")||48,a=this.get("itemsPerRow"),g=Math.ceil(e/a);var b=this._cachedLayoutHash;if(!b){b=this._cachedLayoutHash={}}b.minHeight=g*c;this.calculatedHeight=b.minHeight;return b},insertionPointClass:SC.View.extend({classNames:["grid-insertion-point"],render:function(a,b){if(b){a.push('<span class="anchor"></span>')}}}),showInsertionPoint:function(c,g){if(!c){return}if(g===SC.DROP_ON){if(c!==this._dropOnInsertionPoint){this.hideInsertionPoint();this._dropOnInsertionPoint=c}}else{if(this._dropOnInsertionPoint){this._dropOnInsertionPoint=null}if(!this._insertionPointView){this._insertionPointView=this.insertionPointClass.create()}var b=this._insertionPointView;var a=c.get("frame");var e={height:a.height-6,x:a.x,y:a.y+6,width:0};if(!SC.rectsEqual(b.get("frame"),e)){b.set("frame",e)}if(b.parentNode!==c.parentNode){c.parentNode.appendChild(b)}}},hideInsertionPoint:function(){var a=this._insertionPointView;if(a){a.removeFromParent()}if(this._dropOnInsertionPoint){this._dropOnInsertionPoint=null}},insertionIndexForLocation:function(e,o){var g=this.get("frame"),j=this.get("clippingFrame"),p=this.get("itemsPerRow"),a=Math.floor(g.width/p),t=Math.floor((e.y-g.y-j.y)/this.get("rowHeight"));var n=SC.DROP_BEFORE,c=(e.x-g.x-j.x),b=Math.floor(c/a),q=(c/a)-b;if(o===SC.DROP_ON){if(q>0.8){b++}if((q>=0.2)&&(q<=0.8)){n=SC.DROP_ON}}else{if(q>0.45){b++}}var k=(t*p)+b;return[k,n]},_gv_clippingFrameDidChange:function(){var e=this.get("nowShowing"),c,b,a;this.notifyPropertyChange("itemsPerRow");a=e.get("length");for(b=0;b<a;b++){c=this.itemViewForContentIndex(b);c.adjust(this.layoutForContentIndex(b))}}.observes("clippingFrame")});SC.ImageButtonView=SC.ButtonView.extend({classNames:["sc-image-button-view"],themeName:null,renderDelegateName:"imageButtonRenderDelegate",displayProperties:["image"],image:null});SC.ANCHOR_TOP={top:0};SC.ANCHOR_LEFT={left:0};SC.ANCHOR_TOP_LEFT={top:0,left:0};SC.ANCHOR_BOTTOM={bottom:0};SC.ANCHOR_RIGHT={right:0};SC.ANCHOR_BOTTOM_RIGHT={bottom:0,right:0};SC.ToolbarView=SC.View.extend({classNames:["sc-toolbar-view"],ariaRole:"toolbar",renderDelegateName:"toolbarRenderDelegate",anchorLocation:null,layout:{left:0,height:32,right:0},init:function(){if(this.anchorLocation){this.layout=SC.merge(this.layout,this.anchorLocation)}arguments.callee.base.apply(this,arguments)}});sc_require("views/toolbar");SC.WorkspaceView=SC.View.extend({classNames:["sc-workspace-view"],displayProperties:["hasTopToolbar","hasBottomToolbar"],renderDelegateName:"workspaceRenderDelegate",topToolbar:SC.ToolbarView.extend(),bottomToolbar:null,contentView:SC.View.extend(),autoResizeToolbars:NO,defaultToolbarSize:44,largeToolbarSize:44,smallToolbarSize:30,toolbarSize:function(){if(!this.get("autoResizeToolbars")){return this.get("defaultToolbarSize")}if(this.get("orientation")===SC.HORIZONTAL_ORIENTATION){return this.get("smallToolbarSize")}return this.get("largeToolbarSize")}.property("autoHideMaster","orientation"),orientation:function(){var a=this.get("frame");if(a.width>a.height){return SC.HORIZONTAL_ORIENTATION}else{return SC.VERTICAL_ORIENTATION}}.property("frame").cacheable(),masterIsHidden:NO,masterIsHiddenDidChange:function(){var a,b=this.get("masterIsHidden");if(a=this.get("topToolbar")){a.set("masterIsHidden",b)}if(a=this.get("bottomToolbar")){a.set("masterIsHidden",b)}}.observes("masterIsHidden"),_scmd_tilePropertyDidChange:function(){this.invokeOnce("_scws_tile")}.observes("toolbarSize"),createChildViews:function(){arguments.callee.base.apply(this,arguments);var a=this.get("topToolbar");if(a){a=this.topToolbar=this.activeTopToolbar=this.createChildView(a);this.appendChild(a)}var c=this.get("bottomToolbar");if(c){c=this.bottomToolbar=this.activeBottomToolbar=this.createChildView(c);this.appendChild(c)}var b=this.get("contentView");b=this.contentView=this.activeContentView=this.createChildView(b);this.appendChild(b);this.invokeOnce("_scws_tile")},_scws_tile:function(){var b=0,f=0,a=this.get("topToolbar"),g=this.get("bottomToolbar"),e=this.get("contentView"),c=this.get("toolbarSize");if(a){a.set("layout",{left:0,right:0,top:0,height:c});b+=c}if(g){g.set("layout",{left:0,right:0,bottom:0,height:c});f+=c}this.contentView.set("layout",{left:0,right:0,top:b,bottom:f})},hasTopToolbar:function(){if(this.get("topToolbar")){return YES}return NO}.property("topToolbar").cacheable(),hasBottomToolbar:function(){if(this.get("bottomToolbar")){return YES}return NO}.property("bottomToolbar").cacheable(),childDidChange:function(){this._scws_tile()},activeTopToolbar:null,activeBottomToolbar:null,activeContentView:null,topToolbarDidChange:function(){var b=this.activeTopToolbar,a=this.get("topToolbar");if(b){this.removeChild(b)}if(a){this.appendChild(a)}this.activeTopToolbar=a;this.invokeLast("childDidChange")}.observes("topToolbar"),bottomToolbarDidChange:function(){var b=this.activeBottomToolbar,a=this.get("bottomToolbar");if(b){this.removeChild(b)}if(a){this.appendChild(a)}this.activeBottomToolbar=a;this.invokeLast("childDidChange")}.observes("bottomToolbar"),contentViewDidChange:function(){var b=this.activeContentView,a=this.get("contentView");if(b){this.removeChild(b)}if(a){this.appendChild(a)}this.activeContentView=a;this.invokeLast("childDidChange")}.observes("contentView")});sc_require("views/workspace");sc_require("views/toolbar");SC.MasterDetailView=SC.View.extend({classNames:["sc-master-detail-view"],renderDelegateName:"masterDetailRenderDelegate",masterView:SC.WorkspaceView.extend({topToolbar:SC.ToolbarView.extend({}),contentView:SC.View.extend({backgroundColor:"white"})}),detailView:SC.WorkspaceView.extend({topToolbar:SC.ToolbarView.extend({childViews:["showHidePicker"],showHidePicker:SC.ButtonView.extend({layout:{left:7,centerY:0,height:30,width:100},controlSize:SC.AUTO_CONTROL_SIZE,title:"Picker",action:"toggleMasterPicker",isVisible:NO,isVisibleBinding:".parentView.masterIsHidden"})})}),autoHideMaster:function(){if(SC.platform.touch){return YES}return NO}.property().cacheable(),masterWidth:250,dividerWidth:SC.propertyFromRenderDelegate("dividerWidth",1),masterIsHidden:function(){if(!this.get("autoHideMaster")){return NO}if(this.get("orientation")===SC.HORIZONTAL_ORIENTATION){return NO}return YES}.property("autoHideMaster","orientation"),orientation:SC.VERTICAL_ORIENTATION,_scmd_frameDidChange:function(){var b=this.get("frame"),a;if(b.width>b.height){a=SC.HORIZONTAL_ORIENTATION}else{a=SC.VERTICAL_ORIENTATION}this.setIfChanged("orientation",a)}.observes("frame"),init:function(){arguments.callee.base.apply(this,arguments);this._scmd_frameDidChange();this._scmd_masterIsHiddenDidChange()},toggleMasterPicker:function(a){if(!this.get("masterIsHidden")){return}if(this._picker&&this._picker.get("isVisibleInWindow")){this.hideMasterPicker()}else{this.showMasterPicker(a)}},showMasterPicker:function(b){if(this._picker&&this._picker.get("isVisibleInWindow")){return}if(!this._picker){var a=this.get("pickerPane");this._picker=a.create({})}this._picker.set("contentView",this.get("masterView"));this._picker.set("extraRightOffset",this.get("pointerDistanceFromEdge"));this.showPicker(this._picker,b)},hideMasterPicker:function(){if(this._picker&&this._picker.get("isVisibleInWindow")){this.hidePicker(this._picker)}},showPicker:function(b,a){b.popup(a,SC.PICKER_POINTER,[3,0,1,2,3],[9,-9,-18,18])},hidePicker:function(a){a.remove()},pickerPane:SC.PickerPane.extend({layout:{width:250,height:480},themeName:"popover"}),_picker:null,pointerDistanceFromEdge:46,_scmd_masterIsHiddenDidChange:function(){var a=this.get("masterIsHidden");this.get("masterView").set("masterIsHidden",a);this.get("detailView").set("masterIsHidden",a)}.observes("masterIsHidden"),_scmd_orientationDidChange:function(){this.invokeOnce("_scmd_tile")}.observes("orientation"),_scmd_retileProperties:function(){this.invokeOnce("_scmd_tile")}.observes("masterIsHidden","masterWidth"),createChildViews:function(){var b=this.get("masterView");b=this.masterView=this.createChildView(b);var a=this.get("detailView");a=this.detailView=this.createChildView(a);this.appendChild(a);this.invokeOnce("_scmd_tile")},_masterIsDrawn:NO,_scmd_tile:function(){var b=!this.get("masterIsHidden");var f=this.get("masterWidth"),e=this.get("masterView"),c=this.get("detailView");if(b){this.hideMasterPicker();if(!this._masterIsDrawn){if(this._picker){this._picker.set("contentView",null)}this.appendChild(e);this._masterIsDrawn=YES}e.set("layout",{left:0,top:0,bottom:0,width:f});var a=this.get("dividerWidth");c.set("layout",{left:f+a,right:0,top:0,bottom:0})}else{if(this._masterIsDrawn){this.removeChild(e);this._masterIsDrawn=NO}c.set("layout",{left:0,right:0,top:0,bottom:0})}}});SC.ScrollerView=SC.View.extend({classNames:["sc-scroller-view"],displayProperties:["thumbPosition","thumbLength","isEnabled","controlsHidden"],ariaRole:"scrollbar",shouldScrollToClick:NO,_touchScrollValue:NO,value:function(a,c){var b=this.get("minimum");if(c!==undefined){this._scs_value=c}c=this._scs_value||b;return Math.max(Math.min(c,this.get("maximum")),b)}.property("maximum","minimum").cacheable(),displayValue:function(){var a;if(this.get("_touchScrollValue")){a=this.get("_touchScrollValue")}else{a=this.get("value")}return a}.property("value","_touchScrollValue").cacheable(),proportion:0,maximum:100,minimum:0,isEnabled:function(a,b){if(b!==undefined){this._scsv_isEnabled=b}if(this._scsv_isEnabled!==undefined){return this._scsv_isEnabled}return this.get("proportion")<1}.property("proportion").cacheable(),_scsv_isEnabled:undefined,layoutDirection:SC.LAYOUT_VERTICAL,hasButtons:YES,scrollbarThickness:14,capLength:18,capOverlap:14,buttonLength:41,buttonOverlap:11,minimumThumbLength:20,render:function(c,a){var b={},n="",u=this.get("parentView"),f,p,j,g,q,o,k,e,t;switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:b["sc-vertical"]=YES;break;case SC.LAYOUT_HORIZONTAL:b["sc-horizontal"]=YES;break}b.disabled=!this.get("isEnabled");b["controls-hidden"]=this.get("controlsHidden");c.setClass(b);p=this.get("thumbLength");f=this.get("thumbPosition");if(a){if(this.get("hasButtons")){n='<div class="button-bottom"></div><div class="button-top"></div>'}else{n='<div class="endcap"></div>'}switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:c.push('<div class="track"></div>','<div class="cap"></div>',n,'<div class="thumb" style="height: '+p+"px; top: "+f+'px;">','<div class="thumb-center"></div>','<div class="thumb-top"></div>','<div class="thumb-bottom"></div></div>');c.attr("aria-orientation","vertical");break;case SC.LAYOUT_HORIZONTAL:c.push('<div class="track"></div>','<div class="cap"></div>',n,'<div class="thumb" style="width: '+p+"px; left: "+f+'px;">','<div class="thumb-center"></div>','<div class="thumb-top"></div>','<div class="thumb-bottom"></div></div>');c.attr("aria-orientation","horizontal")}c.attr("aria-valuemax",this.get("maximum"));c.attr("aria-valuemin",this.get("minimum"));c.attr("aria-valuenow",this.get("value"));c.attr("aria-controls",u.getPath("contentView.layerId"))}else{if(this.get("controlsHidden")){return}g=this.$(".thumb");this.adjustThumb(g,f,p);c.attr("aria-valuenow",this.get("value"))}},touchScrollDidStart:function(a){this.set("_touchScrollValue",a)},touchScrollDidEnd:function(a){this.set("_touchScrollValue",NO)},touchScrollDidChange:function(a){this.set("_touchScrollValue",a)},adjustThumb:function(b,a,c){this.adjustThumbPosition(b,a);this.adjustThumbSize(b,c)},adjustThumbPosition:function(b,a){if(this._thumbPosition===a){return}switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:b.css("top",a);break;case SC.LAYOUT_HORIZONTAL:b.css("left",a);break}this._thumbPosition=a},adjustThumbSize:function(a,b){if(this._thumbSize===b){return}switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:a.css("height",Math.max(b,this.get("minimumThumbLength")));break;case SC.LAYOUT_HORIZONTAL:a.css("width",Math.max(b,this.get("minimumThumbLength")));break}this._thumbSize=b},trackLength:function(){var a=this.get("scrollerLength");a-=this.capLength-this.capOverlap;a-=this.buttonLength-this.buttonOverlap;return a}.property("scrollerLength").cacheable(),scrollerLength:function(){switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:return this.get("frame").height;case SC.LAYOUT_HORIZONTAL:return this.get("frame").width}return 0}.property("frame").cacheable(),thumbLength:function(){var a;a=Math.floor(this.get("trackLength")*this.get("proportion"));a=isNaN(a)?0:a;return Math.max(a,this.get("minimumThumbLength"))}.property("trackLength","proportion").cacheable(),thumbPosition:function(){var j=this.get("displayValue"),c=this.get("maximum"),b=this.get("trackLength"),e=this.get("thumbLength"),g=this.get("capLength"),f=this.get("capOverlap"),a;a=(j/c)*(b-e);a+=g-f;return Math.floor(isNaN(a)?0:a)}.property("displayValue","maximum","trackLength","thumbLength").cacheable(),controlsHidden:function(){return this.get("proportion")>=1}.property("proportion").cacheable(),valueForPosition:function(j){var b=this.get("maximum"),a=this.get("trackLength"),c=this.get("thumbLength"),g=this.get("capLength"),e=this.get("capOverlap"),f;f=j-(g-e);f=f/(a-c);f=f*b;return f},mouseDown:function(o){if(!this.get("isEnabled")){return NO}this._altIsDown=o.altKey;this._shiftIsDown=o.shiftKey;var f=o.target,c=this.get("thumbPosition"),n,e,j,g=this.get("scrollerLength");if(f.className.indexOf("thumb")>=0){e=this.convertFrameFromView({x:o.pageX,y:o.pageY});e.x-=c;e.y-=c;this._thumbDragging=YES;this._thumbOffset=e;this._mouseDownLocation={x:o.pageX,y:o.pageY};this._thumbPositionAtDragStart=this.get("thumbPosition");this._valueAtDragStart=this.get("value")}else{if(f.className.indexOf("button-top")>=0){this.decrementProperty("value",(this._altIsDown?g:30));this.makeButtonActive(".button-top");this.startMouseDownTimer("scrollUp");this._isScrollingUp=YES}else{if(f.className.indexOf("button-bottom")>=0){this.incrementProperty("value",(this._altIsDown?g:30));this.makeButtonActive(".button-bottom");this.startMouseDownTimer("scrollDown");this._isScrollingDown=YES}else{var q=this.get("shouldScrollToClick");if(o.altKey){q=!q}var a=this.get("trackLength"),k=this.get("thumbLength"),b=this.convertFrameFromView({x:o.pageX,y:o.pageY}),p;switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:this._mouseDownLocation=p=b.y;break;case SC.LAYOUT_HORIZONTAL:this._mouseDownLocation=p=b.x;break}if(q){this.set("value",this.valueForPosition(p-(k/2)));c=this.get("thumbPosition");this._thumbDragging=YES;this._thumbOffset={x:b.x-c,y:b.y-c};this._mouseDownLocation={x:o.pageX,y:o.pageY};this._thumbPositionAtDragStart=c;this._valueAtDragStart=this.get("value")}else{if(p<c){this.decrementProperty("value",g);this.startMouseDownTimer("page")}else{this.incrementProperty("value",g);this.startMouseDownTimer("page")}}}}}return YES},mouseUp:function(a){var c=this._scs_buttonActive,b=NO,e;if(c){c.removeClass("active");b=YES}e=this._mouseDownTimer;if(e){e.invalidate();this._mouseDownTimer=null}this._thumbDragging=NO;this._isScrollingDown=NO;this._isScrollingUp=NO;return b},mouseDragged:function(t){var p,b,q,c,n=t.target,f=this._thumbPositionAtDragStart,j=this._isScrollingUp,v=this._isScrollingDown,e=this._scs_buttonActive,a;if(this._thumbDragging){switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:q=(t.pageY-this._mouseDownLocation.y);break;case SC.LAYOUT_HORIZONTAL:q=(t.pageX-this._mouseDownLocation.x);break}if(t.altKey){if(!this._altIsDown||(this._shiftIsDown!==t.shiftKey)){f=this._thumbPositionAtDragStart=f+q;q=0;this._mouseDownLocation={x:t.pageX,y:t.pageY};this._valueAtDragStart=this.get("value")}if(t.shiftKey){q=-q}this.set("value",Math.round(this._valueAtDragStart+q*2))}else{c=f+q;b=this.get("trackLength")-this.get("thumbLength");this.set("value",Math.round((c/b)*this.get("maximum")))}}else{if(j||v){var u=NO,g=NO;var o=this.$(".button-top")[0].getBoundingClientRect();var k=this.$(".button-bottom")[0].getBoundingClientRect();switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:if(t.clientY<o.bottom){u=YES}else{g=YES}break;case SC.LAYOUT_HORIZONTAL:if(t.clientX<o.right){u=YES}else{g=YES}break}if((u||g)&&u!==j){if(e){e.removeClass("active")}this._mouseDownTimerAction=u?"scrollUp":"scrollDown";if(u){this.makeButtonActive(".button-top")}else{if(g){this.makeButtonActive(".button-bottom")}}this._isScrollingUp=u;this._isScrollingDown=g}}}this._altIsDown=t.altKey;this._shiftIsDown=t.shiftKey;return YES},startMouseDownTimer:function(b,a){var c;this._mouseDownTimerAction=b;this._mouseDownTimer=SC.Timer.schedule({target:this,action:this.mouseDownTimerDidFire,interval:a?0:300})},mouseDownTimerDidFire:function(){var e=this.get("scrollerLength"),a=SC.device.get("mouseLocation"),c=this.get("thumbPosition"),b=this.get("thumbLength"),f=50;switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:a=this.convertFrameFromView(a).y;break;case SC.LAYOUT_HORIZONTAL:a=this.convertFrameFromView(a).x;break}switch(this._mouseDownTimerAction){case"scrollDown":this.incrementProperty("value",this._altIsDown?e:30);break;case"scrollUp":this.decrementProperty("value",this._altIsDown?e:30);break;case"page":f=150;if(a<c){this.decrementProperty("value",e)}else{if(a>c+b){this.incrementProperty("value",e)}}}this._mouseDownTimer=SC.Timer.schedule({target:this,action:this.mouseDownTimerDidFire,interval:f})},makeButtonActive:function(a){this._scs_buttonActive=this.$(a).addClass("active")}});SC.TouchScrollerView=SC.ScrollerView.extend({classNames:["sc-touch-scroller-view"],scrollbarThickness:12,capLength:5,capOverlap:0,hasButtons:NO,buttonOverlap:36,adjustThumb:function(e,b,g){var c=this.$(".thumb-inner");var a=this.get("scrollerLength")-this.capLength,f=this.get("minimum")+this.capLength;if(b+g>a){b=Math.min(a-20,b);g=a-b}if(b<f){g-=f-b;b=f}switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:if(this._thumbPosition!==b){e.css("-webkit-transform","translate3d(0px,"+b+"px,0px)")}if(this._thumbSize!==g){c.css("-webkit-transform","translate3d(0px,"+Math.round(g-1044)+"px,0px)")}break;case SC.LAYOUT_HORIZONTAL:if(this._thumbPosition!==b){e.css("-webkit-transform","translate3d("+b+"px,0px,0px)")}if(this._thumbSize!==g){c.css("-webkit-transform","translate3d("+Math.round(g-1044)+"px,0px,0px)")}break}this._thumbPosition=b;this._thumbSize=g},render:function(c,a){var b=[],n="",f,p,j,g,q,o,k,e,t;switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:b.push("sc-vertical");break;case SC.LAYOUT_HORIZONTAL:b.push("sc-horizontal");break}if(!this.get("isEnabled")){b.push("disabled")}if(this.get("controlsHidden")){b.push("controls-hidden")}c.addClass(b);p=this.get("thumbLength");f=this.get("thumbPosition");if(a){if(this.get("hasButtons")){n='<div class="button-bottom"></div><div class="button-top"></div>'}else{n='<div class="endcap"></div>'}switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:c.push('<div class="track"></div>','<div class="cap"></div>',n,'<div class="thumb">','<div class="thumb-top"></div>','<div class="thumb-clip">','<div class="thumb-inner" style="-webkit-transform: translateY('+(p-1044)+'px);">','<div class="thumb-center"></div>','<div class="thumb-bottom"></div></div></div></div>');break;case SC.LAYOUT_HORIZONTAL:c.push('<div class="track"></div>','<div class="cap"></div>',n,'<div class="thumb">','<div class="thumb-top"></div>','<div class="thumb-clip">','<div class="thumb-inner" style="-webkit-transform: translateX('+(p-1044)+'px);">','<div class="thumb-center"></div>','<div class="thumb-bottom"></div></div></div></div>')}}else{if(this.get("controlsHidden")){return}g=this.$(".thumb");this.adjustThumb(g,f,p)}}});sc_require("views/scroller");SC.NORMAL_SCROLL_DECELERATION=0.95;SC.FAST_SCROLL_DECELERATION=0.85;SC.ScrollView=SC.View.extend({classNames:["sc-scroll-view"],isScrollable:YES,contentView:null,horizontalAlign:SC.ALIGN_LEFT,verticalAlign:SC.ALIGN_TOP,horizontalScrollOffset:function(b,e){if(e!==undefined){var c=this.minimumHorizontalScrollOffset(),a=this.get("maximumHorizontalScrollOffset");this._scroll_horizontalScrollOffset=Math.max(c,Math.min(a,e))}return this._scroll_horizontalScrollOffset||0}.property().cacheable(),verticalScrollOffset:function(b,e){if(e!==undefined){var c=this.get("minimumVerticalScrollOffset"),a=this.get("maximumVerticalScrollOffset");this._scroll_verticalScrollOffset=Math.max(c,Math.min(a,e))}return this._scroll_verticalScrollOffset||0}.property().cacheable(),maximumScrollOffset:function(b,a,c){if(b>=a){return b-a}if(c===SC.ALIGN_LEFT||c===SC.ALIGN_TOP){return 0}else{if(c===SC.ALIGN_MIDDLE||c===SC.ALIGN_CENTER){return 0-Math.round((a-b)/2)}else{return 0-(a-b)}}},minimumScrollOffset:function(b,a,c){if(b>a){return 0}if(c===SC.ALIGN_LEFT||c===SC.ALIGN_TOP){return 0}else{if(c===SC.ALIGN_MIDDLE||c===SC.ALIGN_CENTER){return 0-Math.round((a-b)/2)}else{return 0-(a-b)}}},maximumHorizontalScrollOffset:function(){var c=this.get("contentView");var b=c?c.get("frame").width:0,a=c?c.get("calculatedWidth"):0;if(a){b=c.calculatedWidth}b*=this._scale;var e=this.get("containerView").get("frame").width;if(!this.get("canScrollHorizontal")){b=Math.min(b,e)}return this.maximumScrollOffset(b,e,this.get("horizontalAlign"))}.property(),maximumVerticalScrollOffset:function(){var a=this.get("contentView"),c=(a&&a.get("frame"))?a.get("frame").height:0,b=a?a.get("calculatedHeight"):0;if(b){c=b}c*=this._scale;var e=this.get("containerView").get("frame").height;if(!this.get("canScrollVertical")){c=Math.min(c,e)}return this.maximumScrollOffset(c,e,this.get("verticalAlign"))}.property(),minimumHorizontalScrollOffset:function(){var c=this.get("contentView");var b=c?c.get("frame").width:0,a=c?c.get("calculatedWidth"):0;if(a){b=a}b*=this._scale;var e=this.get("containerView").get("frame").width;if(!this.get("canScrollHorizontal")){b=Math.min(b,e)}return this.minimumScrollOffset(b,e,this.get("horizontalAlign"))}.property(),minimumVerticalScrollOffset:function(){var a=this.get("contentView");var c=(a&&a.get("frame"))?a.get("frame").height:0,b=a?a.get("calculatedHeight"):0;if(b){c=a.calculatedHeight}c*=this._scale;var e=this.get("containerView").get("frame").height;if(!this.get("canScrollVertical")){c=Math.min(c,e)}return this.minimumScrollOffset(c,e,this.get("verticalAlign"))}.property(),verticalLineScroll:20,horizontalLineScroll:20,verticalPageScroll:function(){return this.get("frame").height}.property("frame"),horizontalPageScroll:function(){return this.get("frame").width}.property("frame"),hasHorizontalScroller:YES,horizontalScrollerView:SC.ScrollerView,horizontalTouchScrollerView:SC.TouchScrollerView,isHorizontalScrollerVisible:YES,canScrollHorizontal:function(){return !!(this.get("hasHorizontalScroller")&&this.get("horizontalScrollerView")&&this.get("isHorizontalScrollerVisible"))}.property("isHorizontalScrollerVisible").cacheable(),autohidesHorizontalScroller:YES,hasVerticalScroller:YES,verticalScrollerView:SC.ScrollerView,verticalTouchScrollerView:SC.TouchScrollerView,isVerticalScrollerVisible:YES,canScrollVertical:function(){return !!(this.get("hasVerticalScroller")&&this.get("verticalScrollerView")&&this.get("isVerticalScrollerVisible"))}.property("isVerticalScrollerVisible").cacheable(),autohidesVerticalScroller:YES,verticalScrollerBottom:0,verticalOverlay:function(){if(SC.platform.touch){return YES}return NO}.property().cacheable(),horizontalOverlay:function(){if(SC.platform.touch){return YES}return NO}.property().cacheable(),verticalScrollerLayout:null,horizontalScrollerLayout:null,containerView:SC.ContainerView.extend({}),scrollTo:function(a,b){if(b===undefined&&SC.typeOf(a)===SC.T_HASH){b=a.y;a=a.x}if(!SC.none(a)){this.set("horizontalScrollOffset",a)}if(!SC.none(b)){this.set("verticalScrollOffset",b)}return this},scrollBy:function(a,b){if(b===undefined&&SC.typeOf(a)===SC.T_HASH){b=a.y;a=a.x}a=(a)?this.get("horizontalScrollOffset")+a:null;b=(b)?this.get("verticalScrollOffset")+b:null;return this.scrollTo(a,b)},scrollToVisible:function(b){if(arguments.length===0){return arguments.callee.base.apply(this,arguments)}var c=this.get("contentView");if(!c){return NO}var a=b.get("frame");if(!a){return NO}a=c.convertFrameFromView(a,b.get("parentView"));return this.scrollToRect(a)},scrollToRect:function(b){var a=SC.cloneRect(this.get("containerView").get("frame"));a.x=this.get("horizontalScrollOffset");a.y=this.get("verticalScrollOffset");var e=a.x,c=a.y;a.y-=Math.max(0,SC.minY(a)-SC.minY(b));a.x-=Math.max(0,SC.minX(a)-SC.minX(b));a.y+=Math.max(0,SC.maxY(b)-SC.maxY(a));a.x+=Math.max(0,SC.maxX(b)-SC.maxX(a));if((e!==a.x)||(c!==a.y)){this.scrollTo(a.x,a.y);return YES}else{return NO}},scrollDownLine:function(a){if(a===undefined){a=1}return this.scrollBy(null,this.get("verticalLineScroll")*a)},scrollUpLine:function(a){if(a===undefined){a=1}return this.scrollBy(null,0-this.get("verticalLineScroll")*a)},scrollRightLine:function(a){if(a===undefined){a=1}return this.scrollTo(this.get("horizontalLineScroll")*a,null)},scrollLeftLine:function(a){if(a===undefined){a=1}return this.scrollTo(0-this.get("horizontalLineScroll")*a,null)},scrollDownPage:function(a){if(a===undefined){a=1}return this.scrollBy(null,this.get("verticalPageScroll")*a)},scrollUpPage:function(a){if(a===undefined){a=1}return this.scrollBy(null,0-(this.get("verticalPageScroll")*a))},scrollRightPage:function(a){if(a===undefined){a=1}return this.scrollBy(this.get("horizontalPageScroll")*a,null)},scrollLeftPage:function(a){if(a===undefined){a=1}return this.scrollBy(0-(this.get("horizontalPageScroll")*a),null)},tile:function(){var c=this.get("hasHorizontalScroller")?this.get("horizontalScrollerView"):null;var k=c&&this.get("isHorizontalScrollerVisible");var o=this.get("hasVerticalScroller")?this.get("verticalScrollerView"):null;var g=o&&this.get("isVerticalScrollerVisible");var f=this.get("containerView");var u={left:0,top:0};var q,j,b,v,e,a;var n=((k)?c.get("scrollbarThickness"):0);var p=(g)?o.get("scrollbarThickness"):0;if(k){a=this.get("horizontalScrollerLayout");j={left:(a?a.left:0),bottom:(a?a.bottom:0),right:(a?a.right+p-1:p-1),height:n};c.set("layout",j);v=this.get("horizontalOverlay");u.bottom=v?0:(j.bottom+n)}else{u.bottom=0}if(c){c.set("isVisible",k)}if(g){n=n+this.get("verticalScrollerBottom");e=this.get("verticalScrollerLayout");j={top:(e?e.top:0),bottom:(e?e.bottom+n:n),right:(e?e.right:0),width:p};o.set("layout",j);b=this.get("verticalOverlay");u.right=b?0:(j.right+p)}else{u.right=0}if(o){o.set("isVisible",g)}f.adjust(u)},scrollerVisibilityDidChange:function(){this.tile()}.observes("isVerticalScrollerVisible","isHorizontalScrollerVisible"),_scroll_wheelDeltaX:0,_scroll_wheelDeltaY:0,mouseWheel:function(a){var b=(SC.browser.webkit&&SC.browser.version>533)?120:1;this._scroll_wheelDeltaX+=a.wheelDeltaX/b;this._scroll_wheelDeltaY+=a.wheelDeltaY/b;this.invokeLater(this._scroll_mouseWheel,10);return this.get("canScrollHorizontal")||this.get("canScrollVertical")},_scroll_mouseWheel:function(){this.scrollBy(this._scroll_wheelDeltaX,this._scroll_wheelDeltaY);if(SC.WHEEL_MOMENTUM&&this._scroll_wheelDeltaY>0){this._scroll_wheelDeltaY=Math.floor(this._scroll_wheelDeltaY*0.95);this._scroll_wheelDeltaY=Math.max(this._scroll_wheelDeltaY,0);this.invokeLater(this._scroll_mouseWheel,10)}else{if(SC.WHEEL_MOMENTUM&&this._scroll_wheelDeltaY<0){this._scroll_wheelDeltaY=Math.ceil(this._scroll_wheelDeltaY*0.95);this._scroll_wheelDeltaY=Math.min(this._scroll_wheelDeltaY,0);this.invokeLater(this._scroll_mouseWheel,10)}else{this._scroll_wheelDeltaY=0;this._scroll_wheelDeltaX=0}}},canScale:NO,_scale:1,scale:function(a,b){if(b!==undefined){this._scale=Math.min(Math.max(this.get("minimumScale"),b),this.get("maximumScale"))}return this._scale}.property().cacheable(),minimumScale:0.25,maximumScale:2,autoScaleRange:NO,_scale_css:"",updateScale:function(b){var a=this.get("contentView");if(!a){return}if(a.isScalable){this.get("contentView").applyScale(b);this._scale_css=""}else{this._scale_css="scale3d("+b+", "+b+", 1)"}},acceptsMultitouch:YES,decelerationRate:SC.NORMAL_SCROLL_DECELERATION,alwaysBounceHorizontal:NO,alwaysBounceVertical:YES,delaysContentTouches:YES,_touchScrollDidChange:function(){if(this.get("contentView").touchScrollDidChange){this.get("contentView").touchScrollDidChange(this._scroll_horizontalScrollOffset,this._scroll_verticalScrollOffset)}if(this.verticalScrollerView&&this.verticalScrollerView.touchScrollDidChange){this.verticalScrollerView.touchScrollDidChange(this._scroll_verticalScrollOffset)}if(this.horizontalScrollerView&&this.horizontalScrollerView.touchScrollDidChange){this.horizontalScrollerView.touchScrollDidChange(this._scroll_horizontalScrollOffset)}},_touchScrollDidStart:function(){if(this.get("contentView").touchScrollDidStart){this.get("contentView").touchScrollDidStart(this._scroll_horizontalScrollOffset,this._scroll_verticalScrollOffset)}if(this.verticalScrollerView&&this.verticalScrollerView.touchScrollDidStart){this.verticalScrollerView.touchScrollDidStart(this._touch_verticalScrollOffset)}if(this.horizontalScrollerView&&this.horizontalScrollerView.touchScrollDidStart){this.horizontalScrollerView.touchScrollDidStart(this._touch_horizontalScrollOffset)}},_touchScrollDidEnd:function(){if(this.get("contentView").touchScrollDidEnd){this.get("contentView").touchScrollDidEnd(this._scroll_horizontalScrollOffset,this._scroll_verticalScrollOffset)}if(this.verticalScrollerView&&this.verticalScrollerView.touchScrollDidEnd){this.verticalScrollerView.touchScrollDidEnd(this._touch_verticalScrollOffset)}if(this.horizontalScrollerView&&this.horizontalScrollerView.touchScrollDidEnd){this.horizontalScrollerView.touchScrollDidEnd(this._touch_horizontalScrollOffset)}},_applyCSSTransforms:function(b){var a="";this.updateScale(this._scale);a+="translate3d("+-this._scroll_horizontalScrollOffset+"px, "+-Math.round(this._scroll_verticalScrollOffset)+"px,0) ";a+=this._scale_css;if(b){b.style.webkitTransform=a;b.style.webkitTransformOrigin="top left"}},captureTouch:function(a){return YES},touchGeneration:0,touchStart:function(b){var a=++this.touchGeneration;if(!this.tracking&&this.get("delaysContentTouches")){this.invokeLater(this.beginTouchesInContent,150,a)}else{if(!this.tracking){this.invokeLater(this.beginTouchesInContent,1,a)}}this.beginTouchTracking(b,YES);return YES},beginTouchesInContent:function(b){if(b!==this.touchGeneration){return}var c=this.touch,a;if(c&&this.tracking&&!this.dragging&&!c.touch.scrollHasEnded){c.touch.captureTouch(this,YES);if(!c.touch.touchResponder){c.touch.makeTouchResponder(this)}else{if(c.needsScrollEnd){this._touchScrollDidEnd()}}}},beginTouchTracking:function(e,u){var j=e.averagedTouchesForView(this,u);var b=this._scroll_verticalScrollOffset||0,c=this._scroll_horizontalScrollOffset||0,n=c,k=b,f=NO;if(this.touch&&this.touch.timeout){clearTimeout(this.touch.timeout);this.touch.timeout=null;n=this.touch.startClipOffset.x;k=this.touch.startClipOffset.y;f=YES}var o=this.get("contentView");var a=o?o.get("frame").width:0,q=o?o.get("frame").height:0;if(o.calculatedWidth&&o.calculatedWidth!==0){a=o.calculatedWidth}if(o.calculatedHeight&&o.calculatedHeight!==0){q=o.calculatedHeight}var p=this.get("containerView").get("frame").width,w=this.get("containerView").get("frame").height;var g=this.convertFrameToView(this.get("frame"),null),v=(c+(j.x-g.x))/this._scale,t=(b+(j.y-g.y))/this._scale;this.touch={startTime:e.timeStamp,notCalculated:YES,enableScrolling:{x:a*this._scale>p||this.get("alwaysBounceHorizontal"),y:q*this._scale>w||this.get("alwaysBounceVertical")},scrolling:{x:NO,y:NO},enableBouncing:SC.platform.bounceOnScroll,startClipOffset:{x:n,y:k},lastScrollOffset:{x:c,y:b},startTouchOffset:{x:j.x,y:j.y},scrollVelocity:{x:0,y:0},startTouchOffsetInContent:{x:v,y:t},containerSize:{width:p,height:w},contentSize:{width:a,height:q},startScale:this._scale,startDistance:j.d,canScale:this.get("canScale")&&SC.platform.pinchToZoom,minimumScale:this.get("minimumScale"),maximumScale:this.get("maximumScale"),globalFrame:g,layer:this.get("contentView").get("layer"),resistanceCoefficient:0.998,resistanceAsymptote:320,decelerationFromEdge:0.05,accelerationToEdge:0.1,scrollTolerance:{x:15,y:15},scaleTolerance:5,secondaryScrollTolerance:30,scrollLock:500,decelerationRate:this.get("decelerationRate"),lastEventTime:e.timeStamp,touch:(u?e:(this.touch?this.touch.touch:null)),needsScrollEnd:f};if(!this.tracking){this.tracking=YES;this.dragging=NO}},_adjustForEdgeResistance:function(g,e,b,c,a){var f;if(g<e){f=g-e}else{if(g>b){f=b-g}else{return g}}f=Math.pow(c,Math.abs(f))*a;if(g<e){f=f-a}else{f=-f+a}return Math.min(Math.max(e,g),b)+f},touchesDragged:function(a,c){var b=a.averagedTouchesForView(this);this.updateTouchScroll(b.x,b.y,b.d,a.timeStamp)},updateTouchScroll:function(o,n,e,j){var g=this.touch,a=o-g.globalFrame.x,p=n-g.globalFrame.y,B,q,C,t,I,G;var c=((this._scroll_horizontalScrollOffset||0)+a)/this._scale,b=((this._scroll_verticalScrollOffset||0)+p)/this._scale;var F=c-g.startTouchOffset.x,E=b-g.startTouchOffset.y;var k=g.dragging;if(!g.scrolling.x&&Math.abs(F)>g.scrollTolerance.x&&g.enableScrolling.x){k=YES;g.scrolling.x=YES;g.scrollTolerance.y=g.secondaryScrollTolerance;g.startTouchOffset.x=o;F=0}if(!g.scrolling.y&&Math.abs(E)>g.scrollTolerance.y&&g.enableScrolling.y){k=YES;g.scrolling.y=YES;g.scrollTolerance.x=g.secondaryScrollTolerance;g.startTouchOffset.y=n;E=0}if(k&&!g.dragging){g.dragging=YES;this.dragging=YES;this._touchScrollDidStart()}if(!g.scrolling.x&&!g.scrolling.y&&!g.canScale){return}if(g.scrolling.x&&!g.scrolling.y){if(F>g.scrollLock&&!g.scrolling.y){g.enableScrolling.y=NO}}if(g.scrolling.y&&!g.scrolling.x){if(E>g.scrollLock&&!g.scrolling.x){g.enableScrolling.x=NO}}if(g.canScale){var v=g.startDistance,D=e-v;if(Math.abs(D)>g.scaleTolerance){g.scrolling.y=YES;g.scrolling.x=YES;var H=g.startScale*(e/Math.max(v,50));var w=this._adjustForEdgeResistance(H,g.minimumScale,g.maximumScale,g.resistanceCoefficient,g.resistanceAsymptote);this.dragging=YES;this._scale=w;var A=c*this._scale,z=b*this._scale}}I=this.minimumScrollOffset(g.contentSize.width*this._scale,g.containerSize.width,this.get("horizontalAlign"));G=this.minimumScrollOffset(g.contentSize.height*this._scale,g.containerSize.height,this.get("verticalAlign"));t=this.maximumScrollOffset(g.contentSize.width*this._scale,g.containerSize.width,this.get("horizontalAlign"));q=this.maximumScrollOffset(g.contentSize.height*this._scale,g.containerSize.height,this.get("verticalAlign"));C=g.startTouchOffsetInContent.x*this._scale-a;B=g.startTouchOffsetInContent.y*this._scale-p;if(g.enableBouncing){C=this._adjustForEdgeResistance(C,I,t,g.resistanceCoefficient,g.resistanceAsymptote);B=this._adjustForEdgeResistance(B,G,q,g.resistanceCoefficient,g.resistanceAsymptote)}else{C=Math.max(I,Math.min(t,C));B=Math.max(G,Math.min(q,B))}if(g.scrolling.x){this._scroll_horizontalScrollOffset=C}if(g.scrolling.y){this._scroll_verticalScrollOffset=B}this._applyCSSTransforms(g.layer);this._touchScrollDidChange();if(j-g.lastEventTime>=1||g.notCalculated){g.notCalculated=NO;var f=this._scroll_horizontalScrollOffset;var u=this._scroll_verticalScrollOffset;g.scrollVelocity.x=((f-g.lastScrollOffset.x)/Math.max(1,j-g.lastEventTime));g.scrollVelocity.y=((u-g.lastScrollOffset.y)/Math.max(1,j-g.lastEventTime));g.lastScrollOffset.x=f;g.lastScrollOffset.y=u;g.lastEventTime=j}},touchEnd:function(c){var a=this.touch,b=c.averagedTouchesForView(this);c.scrollHasEnded=YES;if(b.touchCount>0){this.beginTouchTracking(c,NO)}else{if(this.dragging){a.dragging=NO;a.lastEventTime=c.timeStamp;this.startDecelerationAnimation()}else{if(a.needsScrollEnd){this._touchScrollDidEnd()}c.captureTouch(this,YES);if(c.touchResponder&&c.touchResponder!==this){c.end()}else{if(!c.touchResponder||c.touchResponder===this){if(c.nextTouchResponder){c.makeTouchResponder(c.nextTouchResponder)}}else{}}this.touch=null}this.tracking=NO;this.dragging=NO}},touchCancelled:function(c){var a=this.touch,b=c.averagedTouchesForView(this);if(!this.touch||!this.touch.timeout){this.beginPropertyChanges();this.set("scale",this._scale);this.set("verticalScrollOffset",this._scroll_verticalScrollOffset);this.set("horizontalScrollOffset",this._scroll_horizontalScrollOffset);this.endPropertyChanges();this.tracking=NO;if(this.dragging){this._touchScrollDidEnd()}this.dragging=NO;this.touch=null}},startDecelerationAnimation:function(a){var b=this.touch;b.decelerationVelocity={x:b.scrollVelocity.x*10,y:b.scrollVelocity.y*10};this.decelerateAnimation()},bouncyBounce:function(c,f,e,g,j,b,a){if(f<e){if(c<0){c=c+((e-f)*j)}else{c=Math.min((e-f)*b+a,e-f-0.01)}}else{if(f>g){if(c>0){c=c-((f-g)*j)}else{c=-Math.min((f-g)*b+a,f-g-0.01)}}}return c},decelerateAnimation:function(){var b=this.touch,C=this._scale,B=this.minimumScrollOffset(b.contentSize.width*this._scale,b.containerSize.width,this.get("horizontalAlign")),A=this.minimumScrollOffset(b.contentSize.height*this._scale,b.containerSize.height,this.get("verticalAlign")),j=this.maximumScrollOffset(b.contentSize.width*this._scale,b.containerSize.width,this.get("horizontalAlign")),g=this.maximumScrollOffset(b.contentSize.height*this._scale,b.containerSize.height,this.get("verticalAlign")),a=Date.now(),e=Math.max(a-b.lastEventTime,1),v=this._scroll_horizontalScrollOffset+b.decelerationVelocity.x*(e/10),p=this._scroll_verticalScrollOffset+b.decelerationVelocity.y*(e/10);var u=b.decelerationFromEdge,w=b.accelerationToEdge;var o=!b.enableBouncing,n=!b.enableBouncing;if(v>=B&&v<=j){o=YES}if(p>=A&&p<=g){n=YES}v/=this._scale;p/=this._scale;var k=0;k=this.bouncyBounce(k,C,b.minimumScale,b.maximumScale,u,w,0);this._scale=C=C+k;v*=this._scale;p*=this._scale;B=this.minimumScrollOffset(b.contentSize.width*this._scale,b.containerSize.width,this.get("horizontalAlign"));A=this.minimumScrollOffset(b.contentSize.height*this._scale,b.containerSize.height,this.get("verticalAlign"));j=this.maximumScrollOffset(b.contentSize.width*this._scale,b.containerSize.width,this.get("horizontalAlign"));g=this.maximumScrollOffset(b.contentSize.height*this._scale,b.containerSize.height,this.get("verticalAlign"));if(o&&(v<B||v>j)){v=Math.max(B,Math.min(v,j));b.decelerationVelocity.x=0}if(n&&(p<A||p>g)){p=Math.max(A,Math.min(p,g));b.decelerationVelocity.y=0}this._scroll_horizontalScrollOffset=v;this._scroll_verticalScrollOffset=p;this._applyCSSTransforms(b.layer);this._touchScrollDidChange();var z=b.decelerationRate;b.decelerationVelocity.y*=Math.pow(z,(e/10));b.decelerationVelocity.x*=Math.pow(z,(e/10));b.decelerationVelocity.x=this.bouncyBounce(b.decelerationVelocity.x,v,B,j,u,w,0.3);b.decelerationVelocity.y=this.bouncyBounce(b.decelerationVelocity.y,p,A,g,u,w,0.3);var q=Math.abs(b.decelerationVelocity.x);var c=Math.abs(b.decelerationVelocity.y);if(c<0.05&&q<0.05&&Math.abs(k)<0.05){b.timeout=null;this.touch=null;this._touchScrollDidEnd();this.beginPropertyChanges();this.set("scale",this._scale);this.set("verticalScrollOffset",this._scroll_verticalScrollOffset);this.set("horizontalScrollOffset",this._scroll_horizontalScrollOffset);this.endPropertyChanges();return}var f=this;b.lastEventTime=Date.now();this.touch.timeout=setTimeout(function(){SC.run(f.decelerateAnimation(),f)},10)},createChildViews:function(){var b=[],a;if(SC.none(a=this.containerView)){a=SC.ContainerView}b.push(this.containerView=this.createChildView(a,{contentView:this.contentView,isScrollContainer:YES}));this.contentView=this.containerView.get("contentView");a=SC.platform.touch?this.get("horizontalTouchScrollerView"):this.get("horizontalScrollerView");if(a){if(this.get("hasHorizontalScroller")){a=this.horizontalScrollerView=this.createChildView(a,{layoutDirection:SC.LAYOUT_HORIZONTAL,valueBinding:"*owner.horizontalScrollOffset"});b.push(a)}else{this.horizontalScrollerView=null}}a=SC.platform.touch?this.get("verticalTouchScrollerView"):this.get("verticalScrollerView");if(a){if(this.get("hasVerticalScroller")){a=this.verticalScrollerView=this.createChildView(a,{layoutDirection:SC.LAYOUT_VERTICAL,valueBinding:"*owner.verticalScrollOffset"});b.push(a)}else{this.verticalScrollerView=null}}this.childViews=b;this.contentViewDidChange();this.tile()},init:function(){arguments.callee.base.apply(this,arguments);this._scroll_contentView=this.get("contentView");var a=this._scroll_contentView;if(a){a.addObserver("frame",this,this.contentViewFrameDidChange);a.addObserver("calculatedWidth",this,this.contentViewFrameDidChange);a.addObserver("calculatedHeight",this,this.contentViewFrameDidChange)}if(this.get("isVisibleInWindow")){this._scsv_registerAutoscroll()}},_scsv_registerAutoscroll:function(){if(this.get("isVisibleInWindow")){SC.Drag.addScrollableView(this)}else{SC.Drag.removeScrollableView(this)}}.observes("isVisibleInWindow"),contentViewDidChange:function(){var e=this.get("contentView"),a=this._scroll_contentView,b=this.contentViewFrameDidChange,c=this.contentViewLayerDidChange;if(e!==a){if(a){a.removeObserver("calculatedWidth",this,this.contentViewFrameDidChange);a.removeObserver("calculatedHeight",this,this.contentViewFrameDidChange);a.removeObserver("frame",this,b);a.removeObserver("layer",this,c)}this._scroll_contentView=e;if(e){e.addObserver("frame",this,b);e.addObserver("calculatedWidth",this,this.contentViewFrameDidChange);e.addObserver("calculatedHeight",this,this.contentViewFrameDidChange);e.addObserver("layer",this,c)}this.containerView.set("contentView",e);this.contentViewFrameDidChange()}}.observes("contentView"),render:function(a,b){this.invokeLast(this.adjustElementScroll);if(b){a.push('<div class="corner"></div>')}return arguments.callee.base.apply(this,arguments)},oldMaxHOffset:0,oldMaxVOffset:0,contentViewFrameDidChange:function(b){var v=this.get("contentView"),q=(v)?v.get("frame"):null,k=this._scale,c=0,z=0,o,n,t,A,u;if(!v||!q){return}c=v.get("calculatedWidth")||q.width||0;z=v.get("calculatedHeight")||q.height||0;c*=k;z*=k;if(!b&&(c===this._scroll_contentWidth)&&(z===this._scroll_contentHeight)){return}this._scroll_contentWidth=c;this._scroll_contentHeight=z;o=this.getPath("containerView.frame");n=o.width;t=o.height;if(this.get("hasHorizontalScroller")&&(v=this.get("horizontalScrollerView"))){if(this.get("autohidesHorizontalScroller")){this.set("isHorizontalScrollerVisible",c>n)}v.setIfChanged("maximum",c-n);v.setIfChanged("proportion",n/c)}if(this.get("hasVerticalScroller")&&(v=this.get("verticalScrollerView"))){if(this.get("autohidesVerticalScroller")){this.set("isVerticalScrollerVisible",z>t)}v.setIfChanged("maximum",z-t);v.setIfChanged("proportion",t/z)}if(!this.get("isVerticalScrollerVisible")&&(this.get("verticalScrollOffset")!==0)&&this.get("autohidesVerticalScroller")){this.set("verticalScrollOffset",0)}if(!this.get("isHorizontalScrollerVisible")&&(this.get("horizontalScrollOffset")!==0)&&this.get("autohidesHorizontalScroller")){this.set("horizontalScrollOffset",0)}var w=this.get("maximumVerticalScrollOffset"),p=this.get("verticalScrollOffset"),j=this.get("maximumHorizontalScrollOffset"),a=this.get("horizontalScrollOffset"),g=w<p,e=j<a;if(g||e){this.forceDimensionsRecalculation(e,g,p,a)}},frameDidChange:function(){this.contentViewFrameDidChange(YES)}.observes("frame"),contentViewLayerDidChange:function(){if(this._verticalScrollOffset!==0){this._verticalScrollOffset=-1}if(this._horizontalScrollOffset!==0){this._horizontalScrollOffset=-1}this.invokeLast(this.adjustElementScroll)},_scroll_horizontalScrollOffsetDidChange:function(){this.invokeLast(this.adjustElementScroll)}.observes("horizontalScrollOffset"),_scroll_verticalScrollOffsetDidChange:function(){this.invokeLast(this.adjustElementScroll)}.observes("verticalScrollOffset"),adjustElementScroll:function(){var a=this.get("containerView"),e=this.get("contentView"),c=this.get("verticalScrollOffset"),b=this.get("horizontalScrollOffset");if(e){if(SC.platform.touch){this._applyCSSTransforms(e.get("layer"))}if(e._viewFrameDidChange){e._viewFrameDidChange()}}if(a&&!SC.platform.touch){a=a.$()[0];if(a){if(c!==this._verticalScrollOffset){a.scrollTop=c;this._verticalScrollOffset=c}if(b!==this._horizontalScrollOffset){a.scrollLeft=b;this._horizontalScrollOffset=b}}}},forceDimensionsRecalculation:function(b,c,f,a){var g=a;var e=f;this.scrollTo(0,0);if(b&&c){this.scrollTo(this.get("maximumHorizontalScrollOffset"),this.get("maximumVerticalScrollOffset"))}if(b&&!c){this.scrollTo(this.get("maximumHorizontalScrollOffset"),e)}if(!b&&c){this.scrollTo(g,this.get("maximumVerticalScrollOffset"))}},_scroll_verticalScrollOffset:0,_scroll_horizontalScrollOffset:0});sc_require("views/scroll");SC.MenuScrollerView=SC.ScrollerView.extend({classNames:["sc-menu-scroller-view"],scrollDown:NO,value:function(a,c){if(c!==undefined){this._value=c}else{var b=this._value||0;return Math.min(b,this.get("maximum"))}}.property("maximum").cacheable(),maximum:0,isEnabled:YES,layoutDirection:SC.LAYOUT_VERTICAL,verticalLineScroll:20,ownerScrollValueKey:function(){return"verticalScrollOffset"}.property("layoutDirection").cacheable(),init:function(){switch(this.get("controlSize")){case SC.TINY_CONTROL_SIZE:this.set("scrollerThickness",SC.MenuScrollerView.TINY_SCROLLER_THICKNESS);break;case SC.SMALL_CONTROL_SIZE:this.set("scrollerThickness",SC.MenuScrollerView.SMALL_SCROLLER_THICKNESS);break;case SC.REGULAR_CONTROL_SIZE:this.set("scrollerThickness",SC.MenuScrollerView.REGULAR_SCROLLER_THICKNESS);break;case SC.LARGE_CONTROL_SIZE:this.set("scrollerThickness",SC.MenuScrollerView.LARGE_SCROLLER_THICKNESS);break;case SC.HUGE_CONTROL_SIZE:this.set("scrollerThickness",SC.MenuScrollerView.HUGE_SCROLLER_THICKNESS);break}return arguments.callee.base.apply(this,arguments)},render:function(a,c){a.addClass("sc-vertical");a.addClass(this.get("controlSize"));if(c){var b=this.get("scrollDown")?"arrowDown":"arrowUp";a.push('<span class="scrollArrow '+b+'">&nbsp;</span>')}a.setClass("disabled",!this.get("isEnabled"))},didCreateLayer:function(){},willDestroyLayer:function(){var a=this._sc_scroller_scrollDidChange;SC.Event.remove(this.$(),"scroll",this,a)},mouseEntered:function(a){this.set("isMouseOver",YES);this._invokeScrollOnMouseOver()},mouseExited:function(a){this.set("isMouseOver",NO)},_sc_scroller_valueDidChange:function(){}.observes("value"),_sc_scroller_armScrollTimer:function(){if(!this._sc_scrollTimer){SC.RunLoop.begin();var a=this._sc_scroller_scrollDidChange;this._sc_scrollTimer=this.invokeLater(a,50);SC.RunLoop.end()}},_sc_scroller_scrollDidChange:function(){var b=Date.now(),e=this._sc_lastScroll,c=this.get("layer"),a=0;if(e&&(b-e)<50){return this._sc_scroller_armScrollTimer()}this._sc_scrollTimer=null;this._sc_lastScroll=b;SC.RunLoop.begin();if(!this.get("isEnabled")){return}this._sc_scrollValue=a=c.scrollTop;this.set("value",a);SC.RunLoop.end()},_scrollMenu:function(){var b=this.get("value"),a;if(this.get("scrollDown")){a=b+this.verticalLineScroll;if(a<=this.get("maximum")){this.set("value",a)}}else{a=b-this.verticalLineScroll;if(a>=0){this.set("value",a)}else{if(b<=this.verticalLineScroll&&b>0){this.set("value",0)}}}return YES},_invokeScrollOnMouseOver:function(){this._scrollMenu();if(this.get("isMouseOver")){this.invokeLater(this._invokeScrollOnMouseOver,100)}}});SC.MenuScrollerView.REGULAR_SCROLLER_THICKNESS=18;SC.MenuScrollerView.TINY_SCROLLER_THICKNESS=10;SC.MenuScrollerView.SMALL_SCROLLER_THICKNESS=14;SC.MenuScrollerView.LARGE_SCROLLER_THICKNESS=23;SC.MenuScrollerView.HUGE_SCROLLER_THICKNESS=26;SC.MenuScrollView=SC.ScrollView.extend({classNames:["sc-menu-scroll-view"],maximumHorizontalScrollOffset:0,hasHorizontalScroller:NO,horizontalScrollerView:SC.MenuScrollerView,isHorizontalScrollerVisible:NO,canScrollHorizontal:NO,autohidesHorizontalScroller:NO,hasVerticalScroller:YES,verticalScrollerView:SC.MenuScrollerView,verticalScrollerView2:SC.MenuScrollerView,isVerticalScrollerVisible:YES,canScrollVertical:YES,autohidesVerticalScroller:YES,verticalScrollerBottom:0,controlSize:SC.REGULAR_CONTROL_SIZE,containerView:SC.ContainerView,scrollToVisible:function(b){if(arguments.length===0){return arguments.callee.base.apply(this,arguments)}var f=this.get("contentView");if(!f){return NO}var a=b.get("frame");if(!a){return NO}a=f.convertFrameFromView(a,b.get("parentView"));var c=this.get("verticalScrollerView2");if(c&&c.get("isVisible")){a.height+=c.get("frame").height}var e=this.get("verticalScrollerView");if(e&&e.get("isVisible")){a.top-=e.get("frame").height}return this.scrollToRect(a)},tile:function(){var j,B,k,b,z,n,c;j=this.get("hasVerticalScroller");B=j?this.get("verticalScrollerView"):null;k=j?this.get("verticalScrollerView2"):null;b=B&&this.get("isVerticalScrollerVisible");z=this.get("containerView");n={left:0,top:0};if(b){c=0;var a=B.get("scrollerThickness")||k.get("scrollerThickness");var o=this.get("contentView"),v,w=(o)?o.get("frame"):null,p=(w)?w.height:0,A=this.containerView.$()[0],q=this.get("verticalScrollOffset"),g={height:0,top:0,right:0,left:0},u={height:a,top:0,right:0,left:0},e={height:a,bottom:0,right:0,left:0},t={height:0,bottom:0,right:0,left:0};if(A){c=A.offsetHeight}if(q===0){n.top=0;n.bottom=a;B.set("layout",g);k.set("layout",e)}else{if(q>=(p-c-a)){n.top=a;n.bottom=0;B.set("layout",u);k.set("layout",t)}else{n.top=a;n.bottom=a;B.set("layout",u);k.set("layout",e)}}}if(B){B.set("isVisible",b);k.set("isVisible",b)}z.set("layout",n)},scrollerVisibilityDidChange:function(){this.tile()}.observes("isVerticalScrollerVisible","isHorizontalScrollerVisible","verticalScrollOffset"),createChildViews:function(){var c=[],b,a,e=this.get("controlSize");if(SC.none(b=this.containerView)){b=SC.ContainerView}c.push(this.containerView=this.createChildView(b,{contentView:this.contentView}));this.contentView=this.containerView.get("contentView");if((b=this.verticalScrollerView)&&(a=this.verticalScrollerView2)){if(this.get("hasVerticalScroller")){b=this.verticalScrollerView=this.createChildView(b,{layout:{top:0,left:0,right:0},controlSize:e,valueBinding:"*owner.verticalScrollOffset"});c.push(b);a=this.verticalScrollerView2=this.createChildView(a,{scrollDown:YES,layout:{bottom:0,left:0,right:0},controlSize:e,valueBinding:"*owner.verticalScrollOffset"});c.push(a)}else{this.verticalScrollerView=null;this.verticalScrollerView2=null}}this.childViews=c;this.contentViewFrameDidChange();this.tile()},init:function(){arguments.callee.base.apply(this,arguments);this._scroll_contentView=this.get("contentView");var a=this._scroll_contentView;if(a){a.addObserver("frame",this,this.contentViewFrameDidChange)}if(this.get("isVisibleInWindow")){this._scsv_registerAutoscroll()}},_scsv_registerAutoscroll:function(){if(this.get("isVisibleInWindow")){SC.Drag.addScrollableView(this)}else{SC.Drag.removeScrollableView(this)}}.observes("isVisibleInWindow"),contentViewFrameDidChange:function(){var c=this.get("contentView"),b,k=(c)?c.get("frame"):null,g=(k)?k.width:0,a=(k)?k.height:0,n=this.get("frame"),e,j;this._scroll_contentWidth=g;this._scroll_contentHeight=a;if(this.get("hasVerticalScroller")&&(c=this.get("verticalScrollerView"))&&(b=this.get("verticalScrollerView2"))){a-=1;if(this.get("autohidesVerticalScroller")){this.set("isVerticalScrollerVisible",a>n.height)}a-=this.get("verticalScrollerBottom");e=0;j=this.containerView.$()[0];if(j){e=j.offsetHeight}a=a-e;c.setIfChanged("maximum",a);b.setIfChanged("maximum",a)}},_scroll_horizontalScrollOffsetDidChange:function(){},_scroll_verticalScrollOffsetDidChange:function(){var b=this.get("verticalScrollOffset");var a=this.get("contentView");if(a){a.adjust("top",0-b)}}.observes("verticalScrollOffset")});sc_require("views/workspace");SC.TO_LEFT="TOLEFT";SC.TO_RIGHT="TORIGHT";SC.NavigationView=SC.WorkspaceView.extend({_views:null,_current:null,navigationContentView:SC.View,init:function(){arguments.callee.base.apply(this,arguments);this._views=[]},createChildViews:function(){arguments.callee.base.apply(this,arguments);var a=this.get("navigationContentView");if(a.isClass){a=this.createChildView(a)}this._defaultContent=this.navigationContentView=a;this.contentView.appendChild(a)},changeNavigationContent:function(a){var c=null,b=null;if(a){c=a.get("topToolbar");b=a.get("bottomToolbar")}if(c&&c.isClass){a.set("topToolbar",c=c.create())}if(b&&b.isClass){a.set("bottomToolbar",b=b.create())}this.beginPropertyChanges();this._current=a;this.set("navigationContentView",a?a:this._defaultContent);this.set("topToolbar",c);this.set("bottomToolbar",b);this.endPropertyChanges()},push:function(a){this._currentDirection=this._current?SC.TO_LEFT:null;if(this._current){this._views.push(this._current)}this.changeNavigationContent(a)},pop:function(){this._currentDirection=SC.TO_RIGHT;var a=this._views.pop();this.changeNavigationContent(a)},popToView:function(b){this._currentDirection=SC.TO_RIGHT;var e=this._views,a=e.length-1,c=e[a];while(c&&c!==b){this._views.pop();a--;c=e[a]}this.changeNavigationContent(c)},topToolbarDidChange:function(){var b=this.activeTopToolbar,a=this.get("topToolbar");if(b){if(this._currentDirection!==null){b.set("buildDirection",this._currentDirection);this.buildOutChild(b)}else{this.removeChild(b)}}if(a){if(this._currentDirection!==null){a.set("buildDirection",this._currentDirection);this.buildInChild(a)}else{this.appendChild(a)}}this.activeTopToolbar=a;this.invokeOnce("childDidChange")}.observes("topToolbar"),bottomToolbarDidChange:function(){var b=this.activeBottomToolbar,a=this.get("bottomToolbar");if(b){if(this._currentDirection!==null){b.set("buildDirection",this._currentDirection);this.buildOutChild(b)}else{this.removeChild(b)}}if(a){if(this._currentDirection!==null){a.set("buildDirection",this._currentDirection);this.buildInChild(a)}else{this.appendChild(a)}}this.activeBottomToolbar=a;this.invokeOnce("childDidChange")}.observes("topToolbar"),contentViewDidChange:function(){var b=this.activeNavigationContentView,a=this.get("navigationContentView");if(!a.isNavigationBuilder){a.mixin(SC.NavigationBuilder)}this._pendingBuildOut=b;this._pendingBuildIn=a;this.activeNavigationContentView=a;this.invokeOnce("childDidChange")}.observes("navigationContentView"),childDidChange:function(){var a=this._pendingBuildIn,b=this._pendingBuildOut;if(b){if(this._currentDirection!==null){b.set("buildDirection",this._currentDirection);this.contentView.buildOutChild(b)}else{this.contentView.removeChild(b)}}this._scws_tile();if(a){if(this._currentDirection!==null){a.set("buildDirection",this._currentDirection);this.contentView.buildInChild(a)}else{this.contentView.appendChild(a)}}}});sc_require("views/toolbar");SC.NavigationBarView=SC.ToolbarView.extend(SC.Gesturable,{init:function(){arguments.callee.base.apply(this,arguments);if(!SC.Animatable){SC.Logger.error("NavigationBarView requires SC.Animatable. Please make your app or framework require the animation framework. CRASH.")}},mixinAnimatable:function(){this.mixin(SC.Animatable);this.transitions=this.navigationTransitions},navigationTransitions:{opacity:{duration:0.25,action:"didFinishTransition"}},style:{opacity:1},gestures:["swipeGesture"],swipeGesture:SC.SwipeGesture,swipe:function(e,k,g){var f=(g===SC.SWIPE_LEFT)?"isSwipeLeft":"isSwipeRight",c=this.get("childViews"),j,b,a=c.get("length");for(b=0;b<a;b++){j=c[b];if(j.get(f)){k.makeTouchResponder(j);k.end();return}}},resetBuild:function(){if(!this.isAnimatable){this.mixinAnimatable()}},didFinishTransition:function(){if(this.isBuildingIn){this.buildInDidFinish()}else{if(this.isBuildingOut){this.buildOutDidFinish()}}},preBuildIn:function(){this.disableAnimation();this.adjust("opacity",0).updateLayout();this.enableAnimation();var c=this.get("childViews"),e,b,a=c.get("length");for(b=0;b<a;b++){e=c[b];if(e.disableNavigationTransition){continue}if(!e._nv_mixedIn){this.mixinNavigationChild(e)}e.disableAnimation();e.transform(this.buildDirection===SC.TO_LEFT?100:-100);e.enableAnimation()}},buildIn:function(){this.preBuildIn();this.invokeLater("startBuildIn",10)},startBuildIn:function(){this.adjust("opacity",1);var c=this.get("childViews"),e,b,a=c.get("length");for(b=0;b<a;b++){e=c[b];if(e.disableNavigationTransition){continue}e.transform(0)}},buildOut:function(){this.adjust("opacity",0);var c=this.get("childViews"),e,b,a=c.get("length");for(b=0;b<a;b++){e=c[b];if(e.disableNavigationTransition){continue}if(!e._nv_mixedIn){this.mixinNavigationChild(e)}e.transform(this.buildDirection===SC.TO_LEFT?-100:100)}},mixinNavigationChild:function(a){if(a.isAnimatable){return}a.mixin(SC.Animatable);a.mixin({transitions:{transform:{timing:SC.Animatable.TRANSITION_EASE_IN_OUT,duration:0.25}},naturalLayout:a.get("layout"),transform:function(b){if(SC.platform.supportsCSS3DTransforms){this.adjust("transform","translate3d("+b+"px,0px,0px)")}else{this.adjust("transform","translate("+b+"px,0px)")}}});a._nv_mixedIn=YES}});sc_require("views/button");SC.PopupButtonView=SC.ButtonView.extend({classNames:["sc-popup-button"],renderDelegateName:"popupButtonRenderDelegate",preferMatrix:null,menu:null,shouldLoadInBackground:NO,init:function(){arguments.callee.base.apply(this,arguments);this._setupMenu();if(this.get("shouldLoadInBackground")){SC.backgroundTaskQueue.push(SC.PopupButtonMenuLoader.create({popupButton:this}))}},_setupMenu:function(){var a=this.get("instantiatedMenu");if(this.isActiveBinding){this.isActiveBinding.disconnect()}this.isActiveBinding=null;if(a&&!a.isClass){this.isActiveBinding=this.bind("isActive",a,"isVisibleInWindow")}},_popup_menuDidChange:function(){this._setupMenu()}.observes("menu"),isActive:NO,_instantiateMenu:function(){var a=this.get("menu");if(!a||!a.isClass){return}this.menu=a.create();this._setupMenu()},instantiatedMenu:function(){var a=this.get("menu");if(a&&a.isClass){this._instantiateMenu();a=this.get("menu")}return a}.property("menu").cacheable(),action:function(a){var b=this.get("instantiatedMenu");if(!b){return NO}b.popup(this,this.get("preferMatrix"));return YES},mouseDown:function(a){if(!this.get("isEnabled")){return YES}this._isMouseDown=YES;this._action();this.invokeLast(this._recordMouseDownTimestamp);this.becomeFirstResponder();return YES},_recordMouseDownTimestamp:function(){this._menuRenderedTimestamp=new Date().getTime()},mouseUp:function(b){var e=new Date().getTime(),c=this._menuRenderedTimestamp,f=this.get("instantiatedMenu"),g=SC.platform.touch,a;if(f){a=f.getPath("rootMenu.targetMenuItem");if(a){if(!a.performAction()){f.remove()}}else{if(!g&&(e-c>SC.ButtonView.CLICK_AND_HOLD_DELAY)){f.remove()}}}this._isMouseDown=NO;arguments.callee.base.apply(this,arguments);return YES},mouseExited:function(a){return YES},performKeyEquivalent:function(b,a){if(!this.get("isEnabled")){return NO}var c=this.get("instantiatedMenu");return(!!c&&c.performKeyEquivalent(b,a,YES))}});SC.PopupButtonMenuLoader=SC.Task.extend({popupButton:null,run:function(){if(this.popupButton){this.popupButton._instantiateMenu()}}});SC.ProgressView=SC.View.extend(SC.Control,{classNames:["sc-progress-view"],displayProperties:["displayValue","ariaValue","minimum","maximum","isRunning","isEnabled","isIndeterminate","animatedBackgroundMatrix","offsetRange"],renderDelegateName:"progressRenderDelegate",value:0.5,valueBindingDefault:SC.Binding.single().notEmpty(),displayValue:function(){var b=this.get("minimum")||0,c=this.get("maximum")||1,a=this.get("value")||0;a=(a-b)/(c-b);if(a>1){a=1}if(isNaN(a)){a=0}if(a<b){a=0}if(a>c){a=1}return a}.property("value","maximum","minimum").cacheable(),ariaRole:"progressbar",ariaValue:function(){return this.get("value")}.property("value").cacheable(),minimum:0,minimumBindingDefault:SC.Binding.single().notEmpty(),contentMinimumKey:null,maximum:1,maximumBindingDefault:SC.Binding.single().notEmpty(),offsetRange:undefined,contentMaximumKey:null,isIndeterminate:NO,isIndeterminateBindingDefault:SC.Binding.bool(),isRunning:NO,isRunningBindingDefault:SC.Binding.bool(),animatedBackgroundMatrix:null,contentIsIndeterminateKey:null,_backgroundOffset:0,_currentBackground:1,_nextBackground:1,init:function(){arguments.callee.base.apply(this,arguments);this.animateProgressBar()},animateProgressBar:function(){if(this.get("isRunning")&&this.get("isVisibleInWindow")){this._animateProgressBar(500)}}.observes("isRunning","isVisibleInWindow"),_animateProgressBar:function(a){if(a===0){a=1000/30}if(this.get("isRunning")&&this.get("isVisibleInWindow")){this.displayDidChange();this.invokeLater(this._animateProgressBar,a,600)}},contentPropertyDidChange:function(c,a){var b=this.get("content");this.beginPropertyChanges().updatePropertyFromContent("value",a,"contentValueKey",b).updatePropertyFromContent("minimum",a,"contentMinimumKey",b).updatePropertyFromContent("maximum",a,"contentMaximumKey",b).updatePropertyFromContent("isIndeterminate",a,"contentIsIndeterminateKey",b).endPropertyChanges()}});SC.RadioView=SC.View.extend(SC.Control,{acceptsFirstResponder:function(){if(SC.FOCUS_ALL_CONTROLS){return this.get("isEnabled")}return NO}.property("isEnabled"),classNames:["sc-radio-view"],ariaRole:"radiogroup",displayProperties:["displayItems","isEnabled","layoutDirection"],renderDelegateName:"radioGroupRenderDelegate",itemAriaLabeledByKey:null,itemAriaLabelKey:null,value:null,layoutDirection:SC.LAYOUT_VERTICAL,escapeHTML:YES,items:[],itemTitleKey:null,itemWidthKey:null,itemValueKey:null,itemIsEnabledKey:null,itemIconKey:null,itemsDidChange:function(){if(this._items){this._items.removeObserver("[]",this,this.itemContentDidChange)}this._items=this.get("items");if(this._items){this._items.addObserver("[]",this,this.itemContentDidChange)}this.itemContentDidChange()}.observes("items"),itemContentDidChange:function(){this._renderAsFirstTime=YES;this.notifyPropertyChange("displayItems")},displayItems:function(){var p=this.get("items"),w=this.get("value"),k=SC.isArray(w),g=this.get("localize"),e=this.get("itemTitleKey"),f=this.get("itemValueKey"),v=this.get("itemWidthKey"),c=this.get("layoutDirection")===SC.LAYOUT_HORIZONTAL,o=this.get("itemIsEnabledKey"),F=this.get("itemIconKey"),j=this.get("itemAriaLabeledByKey"),H=this.get("itemAriaLabelKey"),E=this._displayItems||[],z=(p)?p.get("length"):0,C,G,q,t,n,D,B,u,b,a,A;for(n=0;n<z;n++){C=p.objectAt(n);if(SC.typeOf(C)===SC.T_ARRAY){G=C[0];t=C[1]}else{if(C){if(e){G=C.get?C.get(e):C[e]}else{G=(C.toString)?C.toString():null}if(v&&c){q=C.get?C.get(v):C[v]}if(f){t=C.get?C.get(f):C[f]}else{t=C}if(o){D=C.get?C.get(o):C[o]}else{D=YES}if(F){B=C.get?C.get(F):C[F]}else{B=null}if(j){a=C.get?C.get(j):C[j]}else{a=null}if(H){A=C.get?C.get(H):C[H]}else{A=null}}else{G=t=B=null;D=NO}}D=D&&this.get("isEnabled");if(C){u=(k)?(w.indexOf(t)>=0):(w===t)}else{u=NO}if(g){G=SC.String.loc(G)}E.push(SC.Object.create({title:G,icon:B,width:q,value:t,isEnabled:D,isSelected:(k&&w.indexOf(t)>=0&&w.length===1)||(w===t),isMixed:(k&&w.indexOf(t)>=0),isActive:this._activeRadioButton===n,theme:this.get("theme"),renderState:{}}))}return E}.property("isEnabled","value","items","itemTitleKey","itemWidthKey","itemValueKey","itemIsEnabledKey","localize","itemIconKey","itemAriaLabeledByKey","itemAriaLabelKey").cacheable(),mouseDown:function(a){if(!this.get("isEnabled")){return YES}var e=this.get("renderDelegate"),c=this.get("renderDelegateProxy"),f=this.$(),b=e.indexForEvent(c,f,a);this._activeRadioButton=b;if(b!==undefined){this.get("displayItems")[b].set("isActive",YES);e.updateRadioAtIndex(c,f,b)}a.allowDefault();return YES},mouseUp:function(a){if(!this.get("isEnabled")){return YES}var e=this.get("renderDelegate"),c=this.get("renderDelegateProxy"),f=this.$(),g=this.get("displayItems"),b=e.indexForEvent(c,f,a);if(this._activeRadioButton!==undefined&&b!==this._activeRadioButton){g[this._activeRadioButton].set("isActive",NO);e.updateRadioAtIndex(c,f,this._activeRadioButton)}this._activeRadioButton=undefined;if(b!==undefined){g[b].set("isActive",NO);e.updateRadioAtIndex(c,f,b);this.set("value",g[b].value)}a.allowDefault();return YES},keyDown:function(n){if(!this.get("isEnabled")){return YES}if(n.which===9||n.keyCode===9){var k=n.shiftKey?this.get("previousValidKeyView"):this.get("nextValidKeyView");if(k){k.becomeFirstResponder()}else{n.allowDefault()}return YES}if(n.which>=37&&n.which<=40){var j=this.get("renderDelegate"),g=this.get("renderDelegateProxy"),c=this.$(),f=this.get("displayItems"),b=this.get("value");for(var e=0,a=f.length;e<a;e++){if(b===f[e].value){break}}if(n.which===37||n.which===38){if(e<=0){e=f.length-1}else{e--}}if(n.which===39||n.which===40){if(e>=f.length-1){e=0}else{e++}}j.updateRadioAtIndex(g,c,e);this.set("value",f[e].value)}n.allowDefault();return NO},touchStart:function(a){return this.mouseDown(a)},touchEnd:function(a){return this.mouseUp(a)}});SC.SceneView=SC.ContainerView.extend({scenes:["master","detail"],nowShowing:null,transitionDuration:200,_state:"NO_VIEW",replaceContent:function(a){if(a&&this._state===this.READY){this.animateScene(a)}else{this.replaceScene(a)}return this},replaceScene:function(c){var e=this._targetView,f=this.STANDARD_LAYOUT,b=this.get("scenes"),a=b?b.indexOf(this.get("nowShowing")):-1;this._targetView=c;this._targetIndex=a;if(this._timer){this._timer.invalidate()}this._leftView=this._rightView=this._start=this._end=null;this._timer=null;this.removeAllChildren();if(e){e.set("layout",f)}if(c){c.set("layout",f)}if(c){this.appendChild(c)}this._state=c?this.READY:this.NO_VIEW},animateScene:function(b){var c=this._targetView,g=this._targetIndex,a=this.get("scenes"),f=a?a.indexOf(this.get("nowShowing")):-1,e;if(g<0||f<0||g===f){return this.replaceScene(b)}this._targetView=b;this._targetIndex=f;if(f>g){this._leftView=c;this._rightView=b;this._target=-1}else{this._leftView=b;this._rightView=c;this._target=1}this.removeAllChildren();if(c){this.appendChild(c)}if(b){this.appendChild(b)}this._start=Date.now();this._end=this._start+this.get("transitionDuration");this._state=this.ANIMATING;this.tick()},tick:function(){this._timer=null;var a=Date.now(),e=(a-this._start)/(this._end-this._start),j=this._target,g=this._leftView,b=this._rightView,c,f;if(e<0){e=0}if(!this.get("isVisibleInWindow")||(e>=1)){return this.replaceScene(this._targetView)}c=SC.clone(this.get("frame"));f=Math.floor(c.width*e);if(j>0){c.left=0-(c.width-f);g.set("layout",c);c=SC.clone(c);c.left=f;b.set("layout",c)}else{c.left=0-f;g.set("layout",c);c=SC.clone(c);c.left=c.width-f;b.set("layout",c)}this._timer=this.invokeLater(this.tick,20);return this},NO_VIEW:"NO_VIEW",ANIMATING:"ANIMATING",READY:"READY",STANDARD_LAYOUT:{top:0,left:0,bottom:0,right:0}});SC.SegmentView=SC.View.extend(SC.Control,{ariaRole:"tab",classNames:["sc-segment-view"],toolTip:null,isEnabled:YES,isActive:NO,isSelected:NO,controlSize:null,supportFocusRing:NO,displayProperties:["icon","displayTitle","value","displayToolTip","isDefault","isCancel","width","isFirstSegment","isMiddleSegment","isLastSegment","isOverflowSegment","index"],renderDelegateName:"segmentRenderDelegate",useStaticLayout:YES,title:"",value:null,icon:null,localize:NO,keyEquivalent:null,escapeHTML:YES,needsEllipsis:YES,displayTitle:function(){var a=this.get("title");if(this.get("localize")){a=SC.String.loc(a)}return a}.property("title","localize").cacheable(),width:null,localItem:null,widthDidChange:function(){this.adjust("width",this.get("width"))}.observes("width"),updateItem:function(e,c){var j=e.get("itemKeys"),g,a=e.get("viewKeys"),f,b;for(b=j.get("length")-1;b>=0;b--){g=e.get(j.objectAt(b));f=a.objectAt(b);if(!SC.none(c.get(g))){this.set(f,c.get(g))}}this.set("localItem",c)}});sc_require("views/segment");SC.SegmentedView=SC.View.extend(SC.Control,{acceptsFirstResponder:function(){if(SC.FOCUS_ALL_CONTROLS){return this.get("isEnabled")}return NO}.property("isEnabled").cacheable(),ariaRole:"tablist",classNames:["sc-segmented-view"],theme:"square",value:null,isEnabled:YES,allowsEmptySelection:NO,allowsMultipleSelection:NO,selectSegmentWhenTriggeringAction:NO,localize:YES,align:SC.ALIGN_CENTER,layoutDirection:SC.LAYOUT_HORIZONTAL,items:null,itemTitleKey:null,itemValueKey:null,itemIsEnabledKey:null,itemIconKey:null,itemWidthKey:null,itemActionKey:null,itemTargetKey:null,itemLayerIdKey:null,itemKeyEquivalentKey:null,overflowTitle:"&raquo;",overflowToolTip:"More&hellip;",overflowIcon:null,segmentViewClass:SC.SegmentView,itemKeys:["itemTitleKey","itemValueKey","itemIsEnabledKey","itemIconKey","itemWidthKey","itemToolTipKey","itemKeyEquivalentKey","itemLayerIdKey"],viewKeys:["title","value","isEnabled","icon","width","toolTip","keyEquivalent","layerId"],init:function(){arguments.callee.base.apply(this,arguments);var e=this.get("overflowTitle"),a=this.get("overflowToolTip"),b=this.get("overflowIcon"),c;c=this.get("segmentViewClass").create({controlSize:this.get("controlSize"),localize:this.get("localize"),title:e,toolTip:a,icon:b,isLastSegment:YES,isOverflowSegment:YES});this.appendChild(c);this.itemsDidChange()},itemsDidChange:function(){var p=this.get("items")||[],w,c,t=this.get("childViews"),n,e=t.lastObject(),u=this.get("value"),b,v=this.get("itemKeys"),a,q=this.get("viewKeys"),g,o=this.get("segmentViewClass"),k,f;if(t.get("length")-1>p.get("length")){for(k=t.get("length")-2;k>=p.get("length");k--){n=t.objectAt(k);if(SC.isArray(u)){u.removeObject(n.get("value"))}else{if(u===n.get("value")){u=null}}this.removeChild(n)}this.set("value",u)}else{if(t.get("length")-1<p.get("length")){for(k=t.get("length")-1;k<p.get("length");k++){n=o.create({controlSize:this.get("controlSize"),localize:this.get("localize")});this.insertBefore(n,e)}}}t=this.get("childViews");for(k=0;k<p.get("length");k++){c=p.objectAt(k);n=t.objectAt(k);if(SC.none(c)){continue}if(SC.typeOf(c)===SC.T_STRING){c=SC.Object.create({title:c.humanize().titleize(),value:c});this.set("itemTitleKey","title");this.set("itemValueKey","value")}else{if(SC.typeOf(c)===SC.T_HASH){c=SC.Object.create(c)}else{if(c instanceof SC.Object){for(f=v.get("length")-1;f>=0;f--){a=this.get(v.objectAt(f));if(a){c.removeObserver(a,this,this.itemContentDidChange);c.addObserver(a,this,this.itemContentDidChange,k)}}}else{SC.Logger.error("SC.SegmentedView items may be Strings, Objects (ie. Hashes) or SC.Objects only")}}}b=NO;if(SC.isArray(u)?u.indexOf(c.get(this.get("itemValueKey")))>=0:u===c.get(this.get("itemValueKey"))){b=YES}n.set("isSelected",b);n.set("index",k);n.set("isFirstSegment",k===0);n.set("isMiddleSegment",k<p.get("length")-1&&k>0);n.set("isLastSegment",k===p.get("length")-1);n.updateItem(this,c)}this.invokeLast(this.remeasure)}.observes("*items.[]"),itemContentDidChange:function(f,e,b,c){var a=this.get("items"),g=this.get("childViews"),j;j=g.objectAt(c);if(j){j.updateItem(this,f)}else{SC.Logger.warn("Item content change was observed on item without matching segment child view.")}this.invokeLast(this.remeasure)},viewDidResize:function(){var a=this.$().width();if(this.isOverflowing||a<=this.cachedMinimumWidth){this.adjustOverflow()}},isVisibleInWindowDidChange:function(){this.invokeLast(this.remeasure)}.observes("isVisibleInWindow"),remeasure:function(){var a=this.get("renderDelegate"),e=this.get("childViews"),c;if(this.get("isVisibleInWindow")){c=e.lastObject();c.set("isVisible",YES);for(var b=e.get("length")-1;b>=0;b--){e.objectAt(b).set("isVisible",YES)}this.cachedWidths=a.segmentWidths(this);this.cachedOverflowWidth=a.overflowSegmentWidth(this);this.adjustOverflow()}},adjustOverflow:function(){var k=this.get("childViews"),g,n=this.get("value"),b=k.lastObject(),f=this.$().width(),e=0,j,a,c;this.isOverflowing=NO;b.set("isSelected",NO);this.overflowItems=[];a=this.cachedWidths.length;for(c=0;c<a;c++){g=k.objectAt(c);e+=this.cachedWidths[c];j=(c===a-1)?e:e+this.cachedOverflowWidth;if(j>f){this.overflowItems.pushObject(g.get("localItem"));this.isOverflowing=YES;g.set("isVisible",NO);if(c===0){b.set("isFirstSegment",YES)}if(SC.isArray(n)?n.indexOf(g.get("value"))>=0:n===g.get("value")){b.set("isSelected",YES)}}else{g.set("isVisible",YES);if(c===0){b.set("isFirstSegment",NO)}}}if(this.isOverflowing){b.set("isVisible",YES)}else{b.set("isVisible",NO)}this.cachedMinimumWidth=e+this.cachedOverflowWidth},displayProperties:["align"],renderDelegateName:"segmentedRenderDelegate",displayItemIndexForEvent:function(a){var b=this.get("renderDelegate");if(b&&b.indexForClientPosition){return b.indexForClientPosition(this,a.clientX,a.clientY)}},keyDown:function(c){var j,k,e,f,g,b;if(c.which===9||c.keyCode===9){var a=c.shiftKey?this.get("previousValidKeyView"):this.get("nextValidKeyView");if(a){a.becomeFirstResponder()}else{c.allowDefault()}return YES}if(!this.get("allowsMultipleSelection")){j=this.get("childViews");f=j.get("length");g=this.get("value");b=SC.isArray(g);if(c.which===39||c.which===40){if(g){for(e=0;e<f-2;e++){k=j.objectAt(e);if(b?(g.indexOf(k.get("value"))>=0):(k.get("value")===g)){this.triggerItemAtIndex(e+1)}}}else{this.triggerItemAtIndex(0)}return YES}else{if(c.which===37||c.which===38){if(g){for(e=1;e<f-1;e++){k=j.objectAt(e);if(b?(g.indexOf(k.get("value"))>=0):(k.get("value")===g)){this.triggerItemAtIndex(e-1)}}}else{this.triggerItemAtIndex(f-2)}return YES}}}return NO},mouseDown:function(a){var c=this.get("childViews"),f,e=c.get("length")-1,b;if(!this.get("isEnabled")){return YES}b=this.displayItemIndexForEvent(a);if(b>=0){f=c.objectAt(b);f.set("isActive",YES);this.activeChildView=f;if(b===e){this.showOverflowMenu()}else{this._isMouseDown=YES}}return YES},mouseUp:function(a){var c,b;b=this.displayItemIndexForEvent(a);if(this._isMouseDown&&(b>=0)){this.triggerItemAtIndex(b);c=this.activeChildView;c.set("isActive",NO);this.activeChildView=null;this._isMouseDown=NO}return YES},mouseMoved:function(a){var e=this.get("childViews"),f=e.get("length")-1,c,g,b;if(this._isMouseDown){b=this.displayItemIndexForEvent(a);c=this.activeChildView;g=e.objectAt(b);if(g&&g!==c){if(c){c.set("isActive",NO)}g.set("isActive",YES);this.activeChildView=g;if(b===f){this.showOverflowMenu();this._isMouseDown=NO}}}return YES},mouseEntered:function(a){var c=this.get("childViews"),f,e=c.get("length")-1,b;if(this._isMouseDown){b=this.displayItemIndexForEvent(a);if(b===e){this.showOverflowMenu();this._isMouseDown=NO}else{if(b>=0){f=c.objectAt(b);f.set("isActive",YES);this.activeChildView=f}}}return YES},mouseExited:function(a){var b;if(this._isMouseDown){b=this.activeChildView;if(b){b.set("isActive",NO)}this.activeChildView=null}return YES},touchStart:function(f){var b=this.get("childViews"),e,c=b.get("length")-1,a;if(!this.get("isEnabled")){return YES}a=this.displayItemIndexForEvent(f);if(a>=0){e=b.objectAt(a);e.set("isActive",YES);this.activeChildView=e;if(a===c){this.showOverflowMenu()}else{this._isTouching=YES}}return YES},touchEnd:function(c){var b,a;a=this.displayItemIndexForEvent(c);if(this._isTouching&&(a>=0)){this.triggerItemAtIndex(a);b=this.activeChildView;b.set("isActive",NO);this.activeChildView=null;this._isTouching=NO}return YES},touchesDragged:function(a,f){var k=this.touchIsInBoundary(a),e=this.get("childViews"),g=e.get("length")-1,c,j,b;if(k){if(!this._isTouching){this._touchDidEnter(a)}b=this.displayItemIndexForEvent(a);c=this.activeChildView;j=e[b];if(j&&j!==c){if(c){c.set("isActive",NO)}j.set("isActive",YES);this.activeChildView=j;if(b===g){this.showOverflowMenu();this._isMouseDown=NO}}}else{if(this._isTouching){this._touchDidExit(a)}}this._isTouching=k;return YES},_touchDidExit:function(a){var b;if(this.isTouching){b=this.activeChildView;b.set("isActive",NO);this.activeChildView=null}return YES},_touchDidEnter:function(a){var c=this.get("childViews"),f,e=c.get("length")-1,b;b=this.displayItemIndexForEvent(a);if(b===e){this.showOverflowMenu();this._isTouching=NO}else{if(b>=0){f=c.objectAt(b);f.set("isActive",YES);this.activeChildView=f}}return YES},triggerItemAtIndex:function(n){var p=this.get("childViews"),j,b,q,c,k,g;j=p.objectAt(n);if(!j.get("isEnabled")){return this}k=this.get("allowsEmptySelection");g=this.get("allowsMultipleSelection");b=j.get("value");q=c=this.get("value");if(SC.empty(q)){q=[]}else{if(!SC.isArray(q)){q=[q]}}if(!g){if(k&&(q.get("length")===1)&&(q.objectAt(0)===b)){q=[]}else{q=[b]}}else{if(q.indexOf(b)>=0){if(q.get("length")>1||(q.objectAt(0)!==b)||k){q=q.without(b)}}else{q=q.concat([b])}}switch(q.get("length")){case 0:q=null;break;case 1:q=q.objectAt(0);break;default:break}var u=this.get("itemActionKey"),a=this.get("itemTargetKey"),f,o=null,e=this.getPath("pane.rootResponder"),t;if(u&&(t=this.get("items").objectAt(n))){f=t.get?t.get(u):t[u];if(a){o=t.get?t.get(a):t[a]}if(e){e.sendAction(f,o,this,this.get("pane"))}}if(c!==undefined&&(!f||this.get("selectSegmentWhenTriggeringAction"))){this.set("value",q)}f=this.get("action");if(f&&e){e.sendAction(f,this.get("target"),this,this.get("pane"))}},selectOverflowItem:function(b){var a=b.get("selectedItem");this.triggerItemAtIndex(a.get("index"));b.removeObserver("selectedItem",this,"selectOverflowItem");this.activeChildView.set("isActive",NO);this.activeChildView=null},showOverflowMenu:function(){var g=this.get("childViews"),b=g.get("length")-1,u=this.overflowItems,o,n,f,k;o=u.get("length");n=g.get("length")-1-o;k=this.get("value");f=SC.isArray(k);for(var c=0;c<o;c++){var t=u.objectAt(c),p=this.get("itemValueKey");if(f?k.indexOf(t.get(p))>=0:k===t.get(p)){t.set("isChecked",YES)}else{t.set("isChecked",NO)}t.set("index",n+c)}var q=this;var a=SC.MenuPane.create({layout:{width:200},items:u,itemTitleKey:this.get("itemTitleKey"),itemIconKey:this.get("itemIconKey"),itemIsEnabledKey:this.get("itemIsEnabledKey"),itemKeyEquivalentKey:this.get("itemKeyEquivalentKey"),itemCheckboxKey:"isChecked",modalPaneDidClick:function(){arguments.callee.base.apply(this,arguments);this.removeObserver("selectedItem",q,"selectOverflowItem");q.activeChildView.set("isActive",NO);q.activeChildView=null}});var e=this.get("layer");var j=e.childNodes[e.childNodes.length-1];a.popup(j);a.addObserver("selectedItem",this,"selectOverflowItem")},valueDidChange:function(){var e=this.get("value"),c,g=this.get("childViews"),j=Infinity,f=g.lastObject(),k,a;if(this.overflowItems){c=this.overflowItems.get("length");j=g.get("length")-1-c;f.set("isSelected",NO)}for(var b=g.get("length")-2;b>=0;b--){k=g.objectAt(b);if(SC.isArray(e)?e.indexOf(k.get("value"))>=0:e===k.get("value")){k.set("isSelected",YES);if(b>=j){f.set("isSelected",YES)}}else{k.set("isSelected",NO)}}}.observes("value")});sc_require("views/button");SC.SelectView=SC.ButtonView.extend({acceptsFirstResponder:function(){return this.get("isEnabled")}.property("isEnabled"),items:[],itemsBindingDefault:SC.Binding.multiple(),itemTitleKey:null,itemSortKey:null,itemValueKey:null,itemIconKey:null,itemSeparatorKey:"separator",itemIsEnabledKey:"isEnabled",localize:YES,disableSort:YES,classNames:["sc-select-view"],menu:null,_itemList:[],_itemIdx:null,value:null,checkboxEnabled:YES,showCheckbox:YES,_defaultVal:null,_defaultTitle:null,_defaultIcon:null,theme:"popup",displayProperties:["icon","value","controlSize","items"],preferMatrix:null,CUSTOM_MENU_ITEM_HEIGHT:20,isActiveBinding:"*menu.isVisibleInWindow",isDefaultPosition:NO,lastMenuWidth:null,exampleView:null,customViewMenuOffsetWidth:0,needsEllipsis:YES,menuPaneHeightPadding:0,menuItemPadding:35,isContextMenuEnabled:NO,supportFocusRing:YES,leftAlign:function(){switch(this.get("controlSize")){case SC.TINY_CONTROL_SIZE:return SC.SelectView.TINY_OFFSET_X;case SC.SMALL_CONTROL_SIZE:return SC.SelectView.SMALL_OFFSET_X;case SC.REGULAR_CONTROL_SIZE:return SC.SelectView.REGULAR_OFFSET_X;case SC.LARGE_CONTROL_SIZE:return SC.SelectView.LARGE_OFFSET_X;case SC.HUGE_CONTROL_SIZE:return SC.SelectView.HUGE_OFFSET_X}return 0}.property("controlSize"),sortObjects:function(b){if(!this.get("disableSort")){var a=this.get("itemSortKey")||this.get("itemTitleKey");b=b.sort(function(e,c){if(a){e=e.get?e.get(a):e[a];c=c.get?c.get(a):c[a]}return(e<c)?-1:((e>c)?1:0)})}return b},render:function(b,g){arguments.callee.base.apply(this,arguments);var c,p,w,A,D,j,f,C,k,u,a,t,e,o,E,z,v,B,q,n;p=this.get("items");p=this.sortObjects(p);w=p.length;A=this.get("itemTitleKey");D=this.get("itemIconKey");j=this.get("itemValueKey");f=this.get("itemSeparatorKey");C=this.get("showCheckbox");n=this.get("isEnabledKey");k=this.get("value");u=this.get("localize");t=[];e=YES;o=0;p.forEach(function(F){if(F||F===0){E=A?(F.get?F.get(A):F[A]):F.toString();E=u?SC.String.loc(E):E;z=D?(F.get?F.get(D):F[D]):null;if(SC.none(F[D])){z=null}v=(j)?(F.get?F.get(j):F[j]):F;if(!SC.none(k)&&!SC.none(v)){if(k===v){this.set("title",E);this.set("icon",z)}}if(v===this.get("value")){this.set("_itemIdx",o);e=!C?NO:YES}else{e=NO}q=(F.get?F.get(n):F[n]);if(NO!==q){q=YES}a=f?(F.get?F.get(f):F[f]):NO;if(o===0){this._defaultVal=v;this._defaultTitle=E;this._defaultIcon=z}var G=SC.Object.create({separator:a,title:E,icon:z,value:v,isEnabled:q,checkbox:e,target:this,action:"displaySelectedItem"});t.push(G)}o+=1;this.set("_itemList",t)},this);if(g){this.invokeLast(function(){var F=this.get("value");if(SC.none(F)){this.set("value",this._defaultVal);this.set("title",this._defaultTitle);this.set("icon",this._defaultIcon)}})}this.changeSelectPreferMatrix(this.get("_itemIdx"))},_action:function(q){var n,a,o,p,z,u,G,f,F,c,t,A,v,D,g,j,b,E,k;n=this.$(".sc-button-label")[0];var H=SC.SelectView.MENU_WIDTH_OFFSET;if(!this.get("isDefaultPosition")){switch(this.get("controlSize")){case SC.TINY_CONTROL_SIZE:H+=SC.SelectView.TINY_POPUP_MENU_WIDTH_OFFSET;break;case SC.SMALL_CONTROL_SIZE:H+=SC.SelectView.SMALL_POPUP_MENU_WIDTH_OFFSET;break;case SC.REGULAR_CONTROL_SIZE:H+=SC.SelectView.REGULAR_POPUP_MENU_WIDTH_OFFSET;break;case SC.LARGE_CONTROL_SIZE:H+=SC.SelectView.LARGE_POPUP_MENU_WIDTH_OFFSET;break;case SC.HUGE_CONTROL_SIZE:H+=SC.SelectView.HUGE_POPUP_MENU_WIDTH_OFFSET;break}}a=this.get("layer").offsetWidth+H;a=this.get("layer").offsetWidth;o=n.scrollWidth;p=this.get("lastMenuWidth");if(o){z=n.offsetWidth;if(o&&z){a=a+o-z}}if(!p||(a>p)){p=a}u=this.get("_itemList");var B=this.get("customViewClassName");var w=this.get("customViewMenuOffsetWidth");var e="sc-view sc-pane sc-panel sc-palette sc-picker sc-menu select-button sc-scroll-view sc-menu-scroll-view sc-container-view menuContainer sc-button-view sc-menu-item sc-regular-size";e=B?(e+" "+B):e;SC.prepareStringMeasurement("",e);for(t=0,E=u.length;t<E;++t){F=u.objectAt(t);G=SC.measureString(F.title).width;if(!f||(G>f)){f=G}}SC.teardownStringMeasurement();p=(f+this.menuItemPadding>p)?f+this.menuItemPadding:p;var C=SC.RootResponder.responder.get("currentWindowSize").width;if(p>C){p=(C-25)}this.set("lastMenuWidth",p);A=this.get("value");v=this.get("_itemList");D=this.get("controlSize");g=this.get("menuPaneHeightPadding");j=this.get("exampleView")||SC.MenuItemView;b=SC.MenuPane.create({classNames:["select-button"],items:v,exampleView:j,isEnabled:YES,menuHeightPadding:g,preferType:SC.PICKER_MENU,itemHeightKey:"height",layout:{width:p},controlSize:D,itemWidth:p});if(!b){return NO}b.popup(this,this.preferMatrix);this.set("menu",b);k=this._itemIdx;if(k&&k>-1){j=b.menuItemViewForContentIndex(k);if(j){j.becomeFirstResponder()}}this.set("isActive",YES);return YES},displaySelectedItem:function(a){var b=a.get("selectedItem");this.set("value",b.get("value"));this.set("title",b.get("title"));this.set("_itemIdx",b.get("contentIndex"))},changeSelectPreferMatrix:function(){var c=0,j=0;switch(this.get("controlSize")){case SC.TINY_CONTROL_SIZE:c=SC.SelectView.TINY_OFFSET_Y;j=SC.MenuPane.TINY_MENU_ITEM_HEIGHT;break;case SC.SMALL_CONTROL_SIZE:c=SC.SelectView.SMALL_OFFSET_Y;j=SC.MenuPane.SMALL_MENU_ITEM_HEIGHT;break;case SC.REGULAR_CONTROL_SIZE:c=SC.SelectView.REGULAR_OFFSET_Y;j=SC.MenuPane.REGULAR_MENU_ITEM_HEIGHT;break;case SC.LARGE_CONTROL_SIZE:c=SC.SelectView.LARGE_OFFSET_Y;j=SC.MenuPane.LARGE_MENU_ITEM_HEIGHT;break;case SC.HUGE_CONTROL_SIZE:c=SC.SelectView.HUGE_OFFSET_Y;j=SC.MenuPane.HUGE_MENU_ITEM_HEIGHT;break}var f=c,b=this.get("_itemIdx"),a=this.get("leftAlign"),g,e;if(this.get("isDefaultPosition")){g=[1,0,3];this.set("preferMatrix",g)}else{if(b){f=b*j+c}e=[a,-f,2];this.set("preferMatrix",e)}},mouseDown:function(a){if(!this.get("isEnabled")){return YES}this.set("isActive",YES);this._isMouseDown=YES;this.becomeFirstResponder();this._action();return YES},mouseUp:function(b){var e=this.get("menu"),a,c;if(e){a=e.getPath("rootMenu.targetMenuItem");if(a&&e.get("mouseHasEntered")){if(!a.performAction()){e.remove()}}else{if(b.timeStamp-this._mouseDownTimestamp>400){e.remove()}}}this._isMouseDown=NO;this.set("isActive",NO);return YES},mouseExited:function(){return YES},keyDown:function(a){if(this.interpretKeyEvents(a)){return YES}else{return arguments.callee.base.apply(this,arguments)}},interpretKeyEvents:function(a){if(a){if((a.keyCode===38||a.keyCode===40)){this._action()}else{if(a.keyCode===27){this.resignFirstResponder()}}}return arguments.callee.base.apply(this,arguments)},_button_isSelectedDidChange:function(){}.observes("isSelected")});SC.SelectView.TINY_OFFSET_X=0;SC.SelectView.TINY_OFFSET_Y=0;SC.SelectView.TINY_POPUP_MENU_WIDTH_OFFSET=0;SC.SelectView.SMALL_OFFSET_X=-18;SC.SelectView.SMALL_OFFSET_Y=3;SC.SelectView.SMALL_POPUP_MENU_WIDTH_OFFSET=7;SC.SelectView.REGULAR_OFFSET_X=-17;SC.SelectView.REGULAR_OFFSET_Y=3;SC.SelectView.REGULAR_POPUP_MENU_WIDTH_OFFSET=4;SC.SelectView.LARGE_OFFSET_X=-17;SC.SelectView.LARGE_OFFSET_Y=6;SC.SelectView.LARGE_POPUP_MENU_WIDTH_OFFSET=3;SC.SelectView.HUGE_OFFSET_X=0;SC.SelectView.HUGE_OFFSET_Y=0;SC.SelectView.HUGE_POPUP_MENU_WIDTH_OFFSET=0;SC.SelectView.MENU_WIDTH_OFFSET=-2;sc_require("views/button");SC.SelectButtonView=SC.ButtonView.extend({init:function(){arguments.callee.base.apply(this,arguments)},escapeHTML:YES,objects:[],objectsBindingDefault:SC.Binding.multiple(),nameKey:null,sortKey:null,valueKey:null,iconKey:null,isEnabledKey:"isEnabled",localize:YES,disableSort:YES,classNames:["select-button"],menu:null,itemList:[],itemIdx:null,value:null,checkboxEnabled:YES,separatorPosition:null,_defaultVal:null,_defaultTitle:null,_defaultIcon:null,theme:"popup",displayProperties:["icon","value","controlSize","objects","objects.[]"],preferMatrix:null,SELECT_BUTTON_SPRITE_WIDTH:28,isActiveBinding:"*menu.isVisibleInWindow",isDefaultPosition:NO,lastMenuWidth:null,customView:null,customViewClassName:null,customViewMenuOffsetWidth:0,needsEllipsis:YES,menuPaneHeightPadding:0,supportFocusRing:YES,isContextMenuEnabled:NO,leftAlign:function(){switch(this.get("controlSize")){case SC.TINY_CONTROL_SIZE:return SC.SelectButtonView.TINY_OFFSET_X;case SC.SMALL_CONTROL_SIZE:return SC.SelectButtonView.SMALL_OFFSET_X;case SC.REGULAR_CONTROL_SIZE:return SC.SelectButtonView.REGULAR_OFFSET_X;case SC.LARGE_CONTROL_SIZE:return SC.SelectButtonView.LARGE_OFFSET_X;case SC.HUGE_CONTROL_SIZE:return SC.SelectButtonView.HUGE_OFFSET_X}return 0}.property("controlSize"),sortObjects:function(b){if(!this.get("disableSort")){var a=this.get("sortKey")||this.get("nameKey");b=b.sort(function(e,c){if(a){e=e.get?e.get(a):e[a];c=c.get?c.get(a):c[a]}return(e<c)?-1:((e>c)?1:0)})}return b},render:function(b,f){arguments.callee.base.apply(this,arguments);var c,a,u,w,C,g,A,j,q,B,p,e,n,D,v,t,z,o,k;c=this.layout.width;if(f&&c){this.adjust({width:c-this.SELECT_BUTTON_SPRITE_WIDTH})}a=this.get("objects");a=this.sortObjects(a);u=a.length;w=this.get("nameKey");C=this.get("iconKey");g=this.get("valueKey");k=this.get("isEnabledKey");A=this.get("checkboxEnabled");j=this.get("value");q=this.get("localize");B=this.get("separatorPosition");p=[];e=YES;n=0;a.forEach(function(E){if(E){D=w?(E.get?E.get(w):E[w]):E.toString();D=q?SC.String.loc(D):D;v=C?(E.get?E.get(C):E[C]):null;if(SC.none(E[C])){v=null}t=(g)?(E.get?E.get(g):E[g]):E;if(!SC.none(j)&&!SC.none(t)){if(this._equals(j,t)){this.set("title",D);this.set("icon",v)}}if(this._equals(t,this.get("value"))){if(B>0&&B<u&&n>=u-B){n++}this.set("itemIdx",n);e=!A?NO:YES}else{e=NO}o=(k)?(E.get?E.get(k):E[k]):E;if(NO!==o){o=YES}if(n===0){this._defaultVal=t;this._defaultTitle=D;this._defaultIcon=v}var F=SC.Object.create({title:D,icon:v,value:t,isEnabled:o,checkbox:e,target:this,action:"displaySelectedItem"});p.push(F)}n+=1;if(B&&n===(u-B)){var G=SC.Object.create({separator:YES});p.push(G)}this.set("itemList",p)},this);if(f){this.invokeLast(function(){var E=this.get("value");if(SC.none(E)){this.set("value",this._defaultVal);this.set("title",this._defaultTitle);this.set("icon",this._defaultIcon)}})}this.changeSelectButtonPreferMatrix(this.itemIdx)},_equals:function(b,a){var c=YES;if(b&&SC.typeOf(b)===SC.T_HASH&&a&&SC.typeOf(a)===SC.T_HASH){for(var e in b){if(b[e]!==a[e]){c=NO}}}else{c=(b===a)}return c},_action:function(v){var n,a,q,t,C,z,J,f,I,c,w,D,A,G,g,j,u,b,H,k,p,K,o;n=this.$(".sc-button-label")[0];K=SC.SelectButtonView.MENU_WIDTH_OFFSET;if(!this.get("isDefaultPosition")){switch(this.get("controlSize")){case SC.TINY_CONTROL_SIZE:K+=SC.SelectButtonView.TINY_POPUP_MENU_WIDTH_OFFSET;break;case SC.SMALL_CONTROL_SIZE:K+=SC.SelectButtonView.SMALL_POPUP_MENU_WIDTH_OFFSET;break;case SC.REGULAR_CONTROL_SIZE:K+=SC.SelectButtonView.REGULAR_POPUP_MENU_WIDTH_OFFSET;break;case SC.LARGE_CONTROL_SIZE:K+=SC.SelectButtonView.LARGE_POPUP_MENU_WIDTH_OFFSET;break;case SC.HUGE_CONTROL_SIZE:K+=SC.SelectButtonView.HUGE_POPUP_MENU_WIDTH_OFFSET;break}}a=this.get("layer").offsetWidth+K;q=n.scrollWidth;t=this.get("lastMenuWidth");if(q){C=n.offsetWidth;if(q&&C){a=a+q-C}}if(!t||(a>t)){t=a}z=this.get("itemList");var E=this.get("customViewClassName"),B=this.get("customViewMenuOffsetWidth"),e="sc-view sc-pane sc-panel sc-palette sc-picker sc-menu select-button sc-scroll-view sc-menu-scroll-view sc-container-view menuContainer sc-button-view sc-menu-item sc-regular-size";e=E?(e+" "+E):e;k=(this.get("customView")||SC.MenuItemView).create();p=k.get("escapeHTML");var o=document.body;for(w=0,H=z.length;w<H;++w){I=z.objectAt(w);c=document.createElement("div");c.style.cssText="top:-10000px; left: -10000px;  position: absolute;";c.className=e;c.innerHTML=p?SC.RenderContext.escapeHTML(I.title):I.title;o.appendChild(c);J=c.offsetWidth+B;if(!f||(J>f)){f=J}o.removeChild(c)}f=(f>t)?f:t;var F=SC.RootResponder.responder.get("currentWindowSize").width;if(f>F){f=(F-25)}this.set("lastMenuWidth",t);D=this.get("value");A=this.get("itemList");G=this.get("controlSize");j=this.get("customView");u=j?j:SC.MenuItemView;b=SC.MenuPane.create({classNames:["select-button"],items:A,exampleView:u,isEnabled:YES,preferType:SC.PICKER_MENU,itemHeightKey:"height",layout:{width:f},controlSize:G,itemWidth:t,performKeyEquivalent:function(M,L){switch(M){case"tab":case"shift_tab":return YES;default:return arguments.callee.base.apply(this,arguments)}}});if(!b){return NO}b.popup(this,this.preferMatrix);this.set("menu",b);j=b.menuItemViewForContentIndex(this.get("itemIdx"));b.set("currentMenuItem",j);if(j){j.becomeFirstResponder()}this.set("isActive",YES);return YES},displaySelectedItem:function(a){var b=this.getPath("menu.selectedItem");if(!b){return NO}this.set("value",b.get("value"));this.set("title",b.get("title"));this.set("itemIdx",b.get("contentIndex"));return YES},changeSelectButtonPreferMatrix:function(){var b=0,k=0,e=0,f=0,n,g;switch(this.get("controlSize")){case SC.TINY_CONTROL_SIZE:b=SC.SelectButtonView.TINY_OFFSET_Y;k=SC.SelectButtonView.TINY_OFFSET_Y;e=SC.SelectButtonView.TINY_POPUP_MENU_WIDTH_OFFSET;break;case SC.SMALL_CONTROL_SIZE:b=SC.SelectButtonView.SMALL_OFFSET_Y;k=SC.SelectButtonView.SMALL_OFFSET_Y;e=SC.SelectButtonView.SMALL_POPUP_MENU_WIDTH_OFFSET;break;case SC.REGULAR_CONTROL_SIZE:b=SC.SelectButtonView.REGULAR_OFFSET_Y;k=SC.SelectButtonView.REGULAR_OFFSET_Y;e=SC.SelectButtonView.REGULAR_POPUP_MENU_WIDTH_OFFSET;break;case SC.LARGE_CONTROL_SIZE:b=SC.SelectButtonView.LARGE_OFFSET_Y;k=SC.SelectButtonView.LARGE_OFFSET_Y;e=SC.SelectButtonView.LARGE_POPUP_MENU_WIDTH_OFFSET;break;case SC.HUGE_CONTROL_SIZE:b=SC.SelectButtonView.HUGE_OFFSET_Y;k=SC.SelectButtonView.HUGE_OFFSET_Y;e=SC.SelectButtonView.HUGE_POPUP_MENU_WIDTH_OFFSET;break}var j=b,a=this.get("itemIdx"),p=this.get("leftAlign"),o,c;if(this.get("isDefaultPosition")){o=[1,0,3];this.set("preferMatrix",o)}else{if(a){j=a*k+b;n=this.get("separatorPosition");g=this.get("objects").length;if(n>0&&n<g&&a>=g-n){f=k-e;j-=f}}c=[p,-j,2];this.set("preferMatrix",c)}},mouseDown:function(a){if(!this.get("isEnabled")){return YES}this.set("isActive",YES);this._isMouseDown=YES;this.becomeFirstResponder();this._action();this.invokeLast(this._recordMouseDownTimestamp);return YES},_recordMouseDownTimestamp:function(){this._menuRenderedTimestamp=new Date().getTime()},mouseUp:function(b){var e=new Date().getTime(),c=this._menuRenderedTimestamp,f=this.get("menu"),g=SC.platform.touch,a;if(f){a=f.getPath("rootMenu.targetMenuItem");if(a&&a.get("mouseHasEntered")){if(!a.performAction()){f.remove()}}else{if(!g&&(e-c>SC.ButtonView.CLICK_AND_HOLD_DELAY)){if(!f.get("mouseHasEntered")&&!this.get("isDefaultPosition")){a=f.get("currentMenuItem");if(a&&!a.performAction()){f.remove()}}else{f.remove()}}}}this._isMouseDown=NO;this.set("isActive",NO);return YES},mouseExited:function(){return YES},keyDown:function(a){if(this.interpretKeyEvents(a)){return YES}else{return arguments.callee.base.apply(this,arguments)}},interpretKeyEvents:function(a){if(a){if((a.keyCode===38||a.keyCode===40)){this._action()}else{if(a.keyCode===27){this.resignFirstResponder()}}}return arguments.callee.base.apply(this,arguments)},acceptsFirstResponder:function(){return this.get("isEnabled")}.property("isEnabled"),insertTab:function(b){var a=this.get("nextValidKeyView");if(a){a.becomeFirstResponder()}else{b.allowDefault()}return YES},insertBacktab:function(b){var a=this.get("previousValidKeyView");if(a){a.becomeFirstResponder()}else{b.allowDefault()}return YES},_button_isSelectedDidChange:function(){}.observes("isSelected"),didAppendToDocument:function(){}});SC.SelectButtonView.TINY_OFFSET_X=0;SC.SelectButtonView.TINY_OFFSET_Y=0;SC.SelectButtonView.TINY_POPUP_MENU_WIDTH_OFFSET=0;SC.SelectButtonView.SMALL_OFFSET_X=-18;SC.SelectButtonView.SMALL_OFFSET_Y=3;SC.SelectButtonView.SMALL_POPUP_MENU_WIDTH_OFFSET=7;SC.SelectButtonView.REGULAR_OFFSET_X=-17;SC.SelectButtonView.REGULAR_OFFSET_Y=3;SC.SelectButtonView.REGULAR_POPUP_MENU_WIDTH_OFFSET=4;SC.SelectButtonView.LARGE_OFFSET_X=-17;SC.SelectButtonView.LARGE_OFFSET_Y=6;SC.SelectButtonView.LARGE_POPUP_MENU_WIDTH_OFFSET=3;SC.SelectButtonView.HUGE_OFFSET_X=0;SC.SelectButtonView.HUGE_OFFSET_Y=0;SC.SelectButtonView.HUGE_POPUP_MENU_WIDTH_OFFSET=0;SC.SelectButtonView.MENU_WIDTH_OFFSET=-2;SC.MenuPane.TINY_MENU_ITEM_HEIGHT=10;SC.MenuPane.TINY_MENU_ITEM_SEPARATOR_HEIGHT=2;SC.MenuPane.TINY_MENU_HEIGHT_PADDING=2;SC.MenuPane.TINY_SUBMENU_OFFSET_X=0;SC.MenuPane.SMALL_MENU_ITEM_HEIGHT=16;SC.MenuPane.SMALL_MENU_ITEM_SEPARATOR_HEIGHT=7;SC.MenuPane.SMALL_MENU_HEIGHT_PADDING=4;SC.MenuPane.SMALL_SUBMENU_OFFSET_X=2;SC.MenuPane.REGULAR_MENU_ITEM_HEIGHT=20;SC.MenuPane.REGULAR_MENU_ITEM_SEPARATOR_HEIGHT=9;SC.MenuPane.REGULAR_MENU_HEIGHT_PADDING=6;SC.MenuPane.REGULAR_SUBMENU_OFFSET_X=2;SC.MenuPane.LARGE_MENU_ITEM_HEIGHT=60;SC.MenuPane.LARGE_MENU_ITEM_SEPARATOR_HEIGHT=20;SC.MenuPane.LARGE_MENU_HEIGHT_PADDING=0;SC.MenuPane.LARGE_SUBMENU_OFFSET_X=4;SC.MenuPane.HUGE_MENU_ITEM_HEIGHT=20;SC.MenuPane.HUGE_MENU_ITEM_SEPARATOR_HEIGHT=9;SC.MenuPane.HUGE_MENU_HEIGHT_PADDING=0;SC.MenuPane.HUGE_SUBMENU_OFFSET_X=0;SC.SelectFieldView=SC.FieldView.extend({displayProperties:["objects","nameKey","valueKey","isEnabled"],acceptsFirstResponder:function(){return this.get("isEnabled")}.property("isEnabled"),tagName:"select",classNames:["sc-select-field-view"],objects:[],objectsBindingDefault:SC.Binding.multiple(),nameKey:null,sortKey:null,valueKey:null,emptyName:null,localize:NO,cpDidChange:YES,disableSort:NO,validateMenuItem:function(b,a){return YES},sortObjects:function(b){if(!this.get("disableSort")){var a=this.get("sortKey")||this.get("nameKey");if(a){b=b.sortProperty(a)}else{b=b.sort(function(e,c){if(a){e=e.get?e.get(a):e[a];c=c.get?c.get(a):c[a]}return(e<c)?-1:((e>c)?1:0)})}}return b},render:function(c,a){if(a||this.get("cpDidChange")){this.set("cpDidChange",NO);var g=this.get("nameKey");var o=this.get("valueKey");var n=this.get("objects");var b=this.get("value");var e,j;if(!this.get("isEnabled")){c.attr("disabled","disabled")}var k=this.get("localize");if(!o&&b){b=SC.guidFor(b)}if((b===null)||(b==="")){b="***"}if(n){n=this.sortObjects(n);if(!a){j=this.$input()[0];if(!j){return}j.innerHTML=""}var f=this.get("emptyName");if(f){if(k){f=SC.String.loc(f)}if(a){c.push('<option value="***">'+f+"</option>",'<option disabled="disabled"></option>')}else{e=document.createElement("option");e.value="***";e.innerHTML=f;j.appendChild(e);e=document.createElement("option");e.disabled="disabled";j.appendChild(e)}}n.forEach(function(u,t){if(u){var q=g?(u.get?u.get(g):u[g]):u.toString();if(k){q=SC.String.loc(q)}var v=(o)?(u.get?u.get(o):u[o]):u;if(!f&&t===0&&b==="***"){this.set("value",v)}if(v!==null&&v!==undefined){v=(SC.guidFor(v))?SC.guidFor(v):v.toString()}var p=(this.validateMenuItem&&this.validateMenuItem(v,q))?"":'disabled="disabled" ';if(a){c.push("<option "+p+'value="'+v+'">'+q+"</option>")}else{e=document.createElement("option");e.value=v;e.innerHTML=q;if(p.length>0){e.disable="disabled"}j.appendChild(e)}}else{if(a){c.push('<option disabled="disabled"></option>')}else{e=document.createElement("option");e.disabled="disabled";j.appendChild(e)}}},this);this.setFieldValue(b)}else{this.set("value",null)}}else{this.$().prop("disabled",!this.get("isEnabled"))}},_objectsObserver:function(){this.set("cpDidChange",YES)}.observes("objects"),_objectArrayObserver:function(){this.set("cpDidChange",YES);this.propertyDidChange("objects")}.observes("*objects.[]"),_nameKeyObserver:function(){this.set("cpDidChange",YES)}.observes("nameKey"),_valueKeyObserver:function(){this.set("cpDidChange",YES)}.observes("valueKey"),_isEnabledObserver:function(){this.set("cpDidChange",YES)}.observes("isEnabled"),$input:function(){return this.$()},mouseDown:function(a){if(!this.get("isEnabled")){a.stop();return YES}else{return arguments.callee.base.apply(this,arguments)}},touchStart:function(a){return this.mouseDown(a)},touchEnd:function(a){return this.mouseUp(a)},getFieldValue:function(){var g=arguments.callee.base.apply(this,arguments);var c=this.get("valueKey");var f=this.get("objects");var e=null;var a;if(g=="***"){g=null}else{if(g&&f){var j=(SC.typeOf(f.length)===SC.T_FUNCTION)?f.length():f.length;while(!e&&(--j>=0)){a=f.objectAt?f.objectAt(j):f[j];if(a===null||a===undefined){continue}if(c){a=(a.get)?a.get(c):a[c]}var b=(a!==null&&a!==undefined)?(SC.guidFor(a)?SC.guidFor(a):a.toString()):null;if(g==b){e=a}}}}return(c||e)?e:g},setFieldValue:function(a){if(SC.none(a)){a="***"}else{a=((a!==null&&a!==undefined)?(SC.guidFor(a)?SC.guidFor(a):a.toString()):null)}this.$input().val(a);return this},fieldDidFocus:function(){var a=this.get("isFocused");if(!a){this.set("isFocused",true)}},fieldDidBlur:function(){var a=this.get("isFocused");if(a){this.set("isFocused",false)}},_isFocusedObserver:function(){this.$().setClass("focus",this.get("isFocused"))}.observes("isFocused"),didCreateLayer:function(){var a=this.$input();if(this.get("isEnabled")===false){this.$()[0].disabled=true}SC.Event.add(a,"blur",this,this.fieldDidBlur);SC.Event.add(a,"focus",this,this.fieldDidFocus);SC.Event.add(a,"change",this,this._field_fieldValueDidChange)},willDestroyLayer:function(){var a=this.$input();SC.Event.remove(a,"focus",this,this.fieldDidFocus);SC.Event.remove(a,"blur",this,this.fieldDidBlur);SC.Event.remove(a,"change",this,this._field_fieldValueDidChange)}});SC.SliderView=SC.View.extend(SC.Control,{classNames:"sc-slider-view",ariaRole:"slider",value:0.5,valueBindingDefault:SC.Binding.single().notEmpty(),minimum:0,minimumBindingDefault:SC.Binding.single().notEmpty(),contentMinimumKey:null,maximum:1,maximumBindingDefault:SC.Binding.single().notEmpty(),contentMaximumKey:null,step:0.1,displayProperties:["displayValue","ariaValue","minimum","maximum","step","frame"],ariaValue:function(){return this.get("value")}.property("value").cacheable(),renderDelegateName:"sliderRenderDelegate",displayValue:function(){var b=this.get("minimum"),a=this.get("maximum"),e=this.get("value"),c=this.get("step");e=Math.min(Math.max(e,b),a);if(!SC.none(c)&&c!==0){e=Math.round(e/c)*c}if(e!==0){e=Math.floor((e-b)/(a-b)*100)}return e}.property("value","minimum","maximum","step").cacheable(),_isMouseDown:NO,mouseDown:function(a){if(!this.get("isEnabled")){return YES}this.set("isActive",YES);this._isMouseDown=YES;return this._triggerHandle(a,YES)},mouseDragged:function(a){return this._isMouseDown?this._triggerHandle(a):YES},mouseUp:function(a){if(this._isMouseDown){this.set("isActive",NO)}var b=this._isMouseDown?this._triggerHandle(a):YES;this._isMouseDown=NO;return b},mouseWheel:function(b){if(!this.get("isEnabled")){return YES}var e=this.get("minimum"),a=this.get("maximum"),c=this.get("value")+((b.wheelDeltaX+b.wheelDeltaY)*0.01),f=this.get("step"),g=Math.round(c/f)*f;if(c<e){this.setIfChanged("value",e)}else{if(c>a){this.setIfChanged("value",a)}else{this.setIfChanged("value",c)}}return YES},touchStart:function(a){return this.mouseDown(a)},touchEnd:function(a){return this.mouseUp(a)},touchesDragged:function(a){return this.mouseDragged(a)},_triggerHandle:function(n,f){var a=this.get("frame").width,c=this.get("minimum"),g=this.get("maximum"),b=this.get("step"),k=this.get("value"),e;if(f){e=this.convertFrameFromView({x:n.pageX}).x;this._evtDiff=n.pageX-e}else{e=n.pageX-this._evtDiff}e=Math.max(0,Math.min(e/a,1));if(f){var j=this.get("value");j=(j-c)/(g-c);if(Math.abs(j*a-e*a)<16){this._offset=j-e}else{this._offset=0}}e=Math.max(0,Math.min(e+this._offset,1));e=c+((g-c)*e);if(b!==0){e=Math.round(e/b)*b}if(Math.abs(k-e)>=0.01){this.set("value",e)}return YES},acceptsFirstResponder:function(){if(SC.FOCUS_ALL_CONTROLS){return this.get("isEnabled")}return NO}.property("isEnabled"),keyDown:function(c){if(c.which===9||c.keyCode===9){var b=c.shiftKey?this.get("previousValidKeyView"):this.get("nextValidKeyView");if(b){b.becomeFirstResponder()}else{c.allowDefault()}return YES}if(c.which>=37&&c.which<=40){var f=this.get("minimum"),a=this.get("maximum"),g=this.get("step"),e=a-f,k=0,j;if(c.which===37||c.which===38){if(g===0){if(e<100){k=this.get("value")-1}else{j=Math.abs(e/100);if(j<2){j=2}k=this.get("value")-Math.abs(e/100)}}else{k=this.get("value")-g}}if(c.which===39||c.which===40){if(g===0){if(e<100){k=this.get("value")+2}else{j=Math.abs(e/100);if(j<2){j=2}k=this.get("value")+j}}else{k=this.get("value")+g}}if(k>=f&&k<=a){this.set("value",k)}}else{c.allowDefault();return NO}return YES},contentPropertyDidChange:function(c,a){var b=this.get("content");this.beginPropertyChanges().updatePropertyFromContent("value",a,"contentValueKey",b).updatePropertyFromContent("minimum",a,"contentMinimumKey",b).updatePropertyFromContent("maximum",a,"contentMaximumKey",b).updatePropertyFromContent("isIndeterminate",a,"contentIsIndeterminateKey",b).endPropertyChanges()}});sc_require("mixins/collection_group");sc_require("views/disclosure");SC.SourceListGroupView=SC.View.extend(SC.Control,SC.CollectionGroup,{classNames:["sc-source-list-group"],content:null,isGroupVisible:YES,hasGroupTitle:YES,groupTitleKey:null,groupVisibleKey:null,render:function(a,b){a.push('<div role="button" class="sc-source-list-label sc-disclosure-view sc-button-view button disclosure no-disclosure">','<img src="'+SC.BLANK_IMAGE_URL+'" class="button" />','<span class="label"></span></div>')},createChildViews:function(){},contentPropertyDidChange:function(g,c){var f=this.get("content");var k=this.outlet("labelView");if(f===null){k.setIfChanged("isVisible",NO);this.setIfChanged("hasGroupTitle",NO);return}else{k.setIfChanged("isVisible",YES);this.setIfChanged("hasGroupTitle",YES)}var b=this.getDelegateProperty("groupTitleKey",this.displayDelegate);if((c=="*")||(b&&(c==b))){var j=(f&&f.get&&b)?f.get(b):f;if(j!=this._title){this._title=j;if(j){j=j.capitalize()}k.set("title",j)}}var e=this.getDelegateProperty("groupVisibleKey",this.displayDelegate);if((c=="*")||(e&&(c==e))){if(e){k.removeClassName("no-disclosure");var a=(f&&f.get)?!!f.get(e):YES;if(a!=this.get("isGroupVisible")){this.set("isGroupVisible",a);k.set("value",a)}}else{k.addClassName("no-disclosure")}}},disclosureValueDidChange:function(c){if(c==this.get("isGroupVisible")){return}var b=this.get("content");var a=this.getDelegateProperty("groupVisibleKey",this.displayDelegate);if(b&&b.set&&a){b.set(a,c)}this.set("isGroupVisible",c);if(this.owner&&this.owner.updateChildren){this.owner.updateChildren(true)}},labelView:SC.DisclosureView.extend({value:YES,_valueObserver:function(){if(this.owner){this.owner.disclosureValueDidChange(this.get("value"))}}.observes("value")})});sc_require("views/list");sc_require("views/source_list_group");SC.SourceListView=SC.ListView.extend({theme:"source-list",classNames:["sc-source-list"],rowHeight:32,selectOnMouseDown:NO,actOnSelect:YES});SC.SplitDividerView=SC.View.extend({classNames:["sc-split-divider-view"],mouseDown:function(a){var b=this.get("splitView");return(b)?b.mouseDownInThumbView(a,this):arguments.callee.base.apply(this,arguments)},doubleClick:function(a){var b=this.get("splitView");return(b)?b.doubleClickInThumbView(a,this):arguments.callee.base.apply(this,arguments)},touchStart:function(a){return this.mouseDown(a)}});sc_require("views/split_divider");SC.RESIZE_BOTH="resize-both";SC.RESIZE_TOP_LEFT="resize-top-left";SC.RESIZE_BOTTOM_RIGHT="resize-bottom-right";SC.SplitView=SC.View.extend({classNames:["sc-split-view"],displayProperties:["layoutDirection"],delegate:null,layoutDirection:SC.LAYOUT_HORIZONTAL,canCollapseViews:YES,autoresizeBehavior:SC.RESIZE_BOTTOM_RIGHT,defaultThickness:0.5,topLeftMinThickness:null,topLeftMaxThickness:null,bottomRightMinThickness:null,bottomRightMaxThickness:null,dividerThickness:null,isSplitView:YES,topLeftView:SC.View,dividerView:SC.SplitDividerView,bottomRightView:SC.View,topLeftThickness:function(){var a=this.get("topLeftView");return a?this.thicknessForView(a):0}.property("topLeftView").cacheable(),bottomRightThickness:function(){var a=this.get("bottomRightView");return a?this.thicknessForView(a):0}.property("bottomRightView").cacheable(),thumbViewCursor:null,canCollapseView:function(a){return this.invokeDelegateMethod(this.delegate,"splitViewCanCollapse",this,a)},thicknessForView:function(a){var c=this.get("layoutDirection"),b=a.get("frame");return(c===SC.LAYOUT_HORIZONTAL)?b.width:b.height},createChildViews:function(){var f=[],c=["topLeftView","dividerView","bottomRightView"],b=c.length,a,e;for(e=0;e<b;++e){if(a=this.get(c[e])){a=this[c[e]]=this.createChildView(a,{layoutView:this,rootElementPath:[e]});f.push(a)}}this.set("childViews",f);return this},updateChildLayout:function(){var b=this.get("topLeftView"),c=this.get("bottomRightView"),n=this.get("dividerView"),f=this.get("autoresizeBehavior"),o=this.get("layoutDirection"),a=this.get("frame"),e=this._desiredTopLeftThickness,p=this.get("dividerThickness"),k=(o===SC.LAYOUT_HORIZONTAL)?a.width:a.height,q=k-p-e,j,g;p=(!SC.none(p))?p:7;g=b.get("isCollapsed")||NO;b.setIfChanged("isVisible",!g);j=SC.clone(b.get("layout"));if(o===SC.LAYOUT_HORIZONTAL){j.top=0;j.left=0;j.bottom=0;switch(f){case SC.RESIZE_BOTH:throw"SC.RESIZE_BOTH is currently unsupported.";case SC.RESIZE_TOP_LEFT:j.right=q+p;delete j.width;break;case SC.RESIZE_BOTTOM_RIGHT:delete j.right;delete j.height;j.width=e;break}}else{j.top=0;j.left=0;j.right=0;switch(f){case SC.RESIZE_BOTH:throw"SC.RESIZE_BOTH is currently unsupported.";case SC.RESIZE_TOP_LEFT:j.bottom=q+p;delete j.height;break;case SC.RESIZE_BOTTOM_RIGHT:j.height=e;delete j.bottom;delete j.width;break}}b.set("layout",j);if(n){j=SC.clone(n.get("layout"));if(o===SC.LAYOUT_HORIZONTAL){j.width=p;j.top=0;j.bottom=0;delete j.height;switch(f){case SC.RESIZE_BOTH:throw"SC.RESIZE_BOTH is currently unsupported.";case SC.RESIZE_TOP_LEFT:j.right=q;delete j.left;delete j.centerX;delete j.centerY;break;case SC.RESIZE_BOTTOM_RIGHT:j.left=e;delete j.right;delete j.centerX;delete j.centerY;break}}else{j.height=p;j.left=0;j.right=0;delete j.width;switch(f){case SC.RESIZE_BOTH:throw"SC.RESIZE_BOTH is currently unsupported.";case SC.RESIZE_TOP_LEFT:j.bottom=q;delete j.top;delete j.centerX;delete j.centerY;break;case SC.RESIZE_BOTTOM_RIGHT:j.top=e;delete j.bottom;delete j.centerX;delete j.centerY;break}}n.set("layout",j)}g=c.get("isCollapsed")||NO;c.setIfChanged("isVisible",!g);j=SC.clone(c.get("layout"));if(o===SC.LAYOUT_HORIZONTAL){j.top=0;j.bottom=0;j.right=0;switch(f){case SC.RESIZE_BOTH:throw"SC.RESIZE_BOTH is currently unsupported.";case SC.RESIZE_BOTTOM_RIGHT:j.left=e+p;delete j.width;break;case SC.RESIZE_TOP_LEFT:j.width=q;delete j.left;break}}else{j.left=0;j.right=0;j.bottom=0;switch(f){case SC.RESIZE_BOTH:throw"SC.RESIZE_BOTH is currently unsupported.";case SC.RESIZE_BOTTOM_RIGHT:j.top=e+p;delete j.height;break;case SC.RESIZE_TOP_LEFT:delete j.top;j.height=q;break}}c.set("layout",j);this.notifyPropertyChange("topLeftThickness").notifyPropertyChange("bottomRightThickness")},renderLayout:function(b,a){if(a||this._recalculateDivider){var g=this.get("layoutDirection"),c=this.get("frame"),f=this.$(),n=this.get("defaultThickness"),e=this.get("autoresizeBehavior"),k=this.get("dividerThickness"),j;if(!this.get("thumbViewCursor")){this.set("thumbViewCursor",SC.Cursor.create())}k=!SC.none(k)?k:7;if(this._recalculateDivider===undefined&&n<1){this._recalculateDivider=YES}else{if(this._recalculateDivider){this._recalculateDivider=NO}}if(f[0]){j=(g===SC.LAYOUT_HORIZONTAL)?f[0].offsetWidth:f[0].offsetHeight}else{j=(g===SC.LAYOUT_HORIZONTAL)?c.width:c.height}if(SC.none(n)||(n>0&&n<1)){n=Math.floor((j-(k))*(n||0.5))}if(e===SC.RESIZE_BOTTOM_RIGHT){this._desiredTopLeftThickness=n}else{this._desiredTopLeftThickness=j-k-n}this._topLeftView=this.get("topLeftView");this._bottomRightView=this.get("bottomRightView");this._topLeftViewThickness=this.thicknessForView(this.get("topLeftView"));this._bottomRightThickness=this.thicknessForView(this.get("bottomRightView"));this._dividerThickness=this.get("dividerThickness");this._layoutDirection=this.get("layoutDirection");this._updateTopLeftThickness(0);this._setCursorStyle();this.updateChildLayout()}arguments.callee.base.apply(this,arguments)},render:function(a,b){arguments.callee.base.apply(this,arguments);if(this._inLiveResize){this._setCursorStyle()}if(this.get("layoutDirection")===SC.LAYOUT_HORIZONTAL){a.addClass("sc-horizontal")}else{a.addClass("sc-vertical")}},mouseDownInThumbView:function(a,c){var b=this.getPath("pane.rootResponder");if(!b){return NO}b.dragDidStart(this);this._mouseDownX=a.pageX;this._mouseDownY=a.pageY;this._thumbView=c;this._topLeftView=this.get("topLeftView");this._bottomRightView=this.get("bottomRightView");this._topLeftViewThickness=this.thicknessForView(this.get("topLeftView"));this._bottomRightThickness=this.thicknessForView(this.get("bottomRightView"));this._dividerThickness=this.get("dividerThickness");this._layoutDirection=this.get("layoutDirection");this.beginLiveResize();this._inLiveResize=YES;return YES},mouseDragged:function(a){var b=(this._layoutDirection===SC.LAYOUT_HORIZONTAL)?a.pageX-this._mouseDownX:a.pageY-this._mouseDownY;this._updateTopLeftThickness(b);return YES},mouseUp:function(a){if(this._inLiveResize===YES){this._thumbView=null;this._inLiveResize=NO;this.endLiveResize();return YES}var e=this.get("thumbViewCursor"),c=SC.clone(e),b=this.get("dividerView");e.set("cursorStyle",SC.SYSTEM_CURSOR);b.set("cursor",c);this.set("cursor",e);return NO},touchesDragged:function(a){return this.mouseDragged(a)},touchEnd:function(a){return this.mouseUp(a)},doubleClickInThumbView:function(b,e){var a=this._topLeftView,c=a.get("isCollapsed")||NO;if(!c&&!this.canCollapseView(a)){a=this._bottomRightView;c=a.get("isCollapsed")||NO;if(!c&&!this.canCollapseView(a)){return NO}}if(!c){this._uncollapsedThickness=this.thicknessForView(a);if(a===this._topLeftView){this._updateTopLeftThickness(this.topLeftThickness()*-1)}else{this._updateBottomRightThickness(this.bottomRightThickness()*-1)}if(!a.get("isCollapsed")){this._uncollapsedThickness=null}}else{if(a===this._topLeftView){this._updateTopLeftThickness(this._uncollapsedThickness)}else{this._updateBottomRightThickness(this._uncollapsedThickness)}a._uncollapsedThickness=null}this._setCursorStyle();return true},_updateTopLeftThickness:function(f){var a=this._topLeftView,c=this._bottomRightView,g=this.thicknessForView(a),j=this.thicknessForView(c),o=this._dividerThickness,n=0,b=this._topLeftViewThickness+f,t=this._layoutDirection,v=this.canCollapseView(c),q=b,p=this.get("topLeftMaxThickness"),e=this.get("topLeftMinThickness"),u,k,w;if(!a.get("isCollapsed")){n+=g}if(!c.get("isCollapsed")){n+=j}if(!SC.none(p)){q=Math.min(p,q)}if(!SC.none(e)){q=Math.max(e,q)}p=this.get("bottomRightMaxThickness");e=this.get("bottomRightMinThickness");u=n-q;if(!SC.none(p)){u=Math.min(p,u)}if(!SC.none(e)){u=Math.max(e,u)}q=n-u;q=this.invokeDelegateMethod(this.delegate,"splitViewConstrainThickness",this,a,q);q=Math.min(q,n);q=Math.max(0,q);k=a.get("collapseAtThickness");if(!k){k=0}w=c.get("collapseAtThickness");w=SC.none(w)?n:(n-w);if((b<=k)&&this.canCollapseView(a)){p=c.get("maxThickness");if(!p||(o+n)<=p){q=0}}else{if(b>=w&&this.canCollapseView(c)){p=a.get("maxThickness");if(!p||(o+n)<=p){q=n}}}if(q!=this.thicknessForView(a)){this._desiredTopLeftThickness=q;a.set("isCollapsed",q===0);c.set("isCollapsed",q>=n);this.updateChildLayout();this.displayDidChange()}},_updateBottomRightThickness:function(f){var a=this._topLeftView,c=this._bottomRightView,g=this.thicknessForView(a),j=this.thicknessForView(c),o=this._dividerThickness,n=0,b=this._topLeftViewThickness+f,t=this._layoutDirection,v=this.canCollapseView(c),q=b,p=this.get("topLeftMaxThickness"),e=this.get("topLeftMinThickness"),u,k,w;if(!a.get("isCollapsed")){n+=g}if(!c.get("isCollapsed")){n+=j}if(!SC.none(p)){q=Math.min(p,q)}if(!SC.none(e)){q=Math.max(e,q)}p=this.get("bottomRightMaxThickness");e=this.get("bottomRightMinThickness");u=n-q;if(!SC.none(p)){u=Math.min(p,u)}if(!SC.none(e)){u=Math.max(e,u)}q=n-u;q=this.invokeDelegateMethod(this.delegate,"splitViewConstrainThickness",this,a,q);q=Math.min(q,n);q=Math.max(0,q);k=a.get("collapseAtThickness");if(!k){k=0}w=c.get("collapseAtThickness");w=SC.none(w)?n:(n-w);if((b<=k)&&this.canCollapseView(a)){p=c.get("maxThickness");if(!p||(o+n)<=p){q=0}}else{if(b>=w&&this.canCollapseView(c)){p=a.get("maxThickness");if(!p||(o+n)<=p){q=n}}}if(q!=this.thicknessForView(a)){this._desiredTopLeftThickness=q;a.set("isCollapsed",q===0);c.set("isCollapsed",q>=n);this.updateChildLayout();this.displayDidChange()}},_setCursorStyle:function(){var f=this._topLeftView,g=this._bottomRightView,b=this.get("thumbViewCursor"),c=this.thicknessForView(f),e=this.thicknessForView(g),a=this.get("dividerView");this._layoutDirection=this.get("layoutDirection");if(f.get("isCollapsed")||c===this.get("topLeftMinThickness")||e==this.get("bottomRightMaxThickness")){b.set("cursorStyle",this._layoutDirection===SC.LAYOUT_HORIZONTAL?"e-resize":"s-resize")}else{if(g.get("isCollapsed")||c===this.get("topLeftMaxThickness")||e==this.get("bottomRightMinThickness")){b.set("cursorStyle",this._layoutDirection===SC.LAYOUT_HORIZONTAL?"w-resize":"n-resize")}else{if(SC.browser.msie){b.set("cursorStyle",this._layoutDirection===SC.LAYOUT_HORIZONTAL?"e-resize":"n-resize")}else{b.set("cursorStyle",this._layoutDirection===SC.LAYOUT_HORIZONTAL?"ew-resize":"ns-resize")}}}a.set("cursor",b);if(this._inLiveResize){this.set("cursor",b)}}.observes("layoutDirection"),splitViewCanCollapse:function(b,a){if(b.get("canCollapseViews")===NO){return NO}if(a.get("canCollapse")===NO){return NO}return YES},splitViewConstrainThickness:function(c,a,b){return b},_forceSplitCalculation:function(){this.updateLayout()}.observes("*pane.isPaneAttached"),viewDidResize:function(){arguments.callee.base.apply(this,arguments);this.notifyPropertyChange("topLeftThickness").notifyPropertyChange("bottomRightThickness")}.observes("layout")});SC.mixin(SC.View.prototype,{splitView:function(){var a=this;while(a&&!a.isSplitView){a=a.get("parentView")}return a}.property("parentView").cacheable()});sc_require("views/collection");SC.StackedView=SC.CollectionView.extend({classNames:["sc-stacked-view"],layout:{top:0,left:0,right:0,height:1},computeNowShowing:function(a){return this.get("allContentIndexes")},updateHeight:function(a){if(a){this._updateHeight()}else{this.invokeLast(this._updateHeight)}return this},_updateHeight:function(){var f=this.get("childViews"),b=f.get("length"),c,e,a;if(b===0){a=1}else{c=f.objectAt(b-1);e=c?c.get("layer"):null;a=e?(e.offsetTop+e.offsetHeight):1;e=null}this.adjust("height",a)},didReload:function(a){return this.updateHeight()},didCreateLayer:function(){return this.updateHeight()}});SC.StaticContentView=SC.View.extend(SC.StaticLayout,{classNames:["sc-static-content-view"],displayProperties:["content"],content:null,contentLayoutDidChange:function(){this._viewFrameDidChange()},useStaticLayout:YES,frame:function(){var a=this.get("layer"),b;if(!a){return{x:0,y:0,width:0,height:0}}if(a.getBoundingClientRect){b=a.getBoundingClientRect();return{x:0,y:0,width:b.width,height:b.height}}else{return{x:0,y:0,width:a.clientWidth,height:a.clientHeight}}}.property("content").cacheable(),parentViewDidResize:function(){this.contentLayoutDidChange()},didUpdateLayer:function(){this.contentLayoutDidChange()},render:function(a,c){var b=this.get("content");if(b){a.push(b||"")}},touchStart:function(a){a.allowDefault();return YES},touchEnd:function(a){a.allowDefault();return YES}});sc_require("views/segmented");SC.TOP_LOCATION="top";SC.TOP_TOOLBAR_LOCATION="top-toolbar";SC.BOTTOM_LOCATION="bottom";SC.TabView=SC.View.extend({classNames:["sc-tab-view"],displayProperties:["nowShowing"],nowShowing:null,items:[],isEnabled:YES,itemTitleKey:null,itemValueKey:null,itemIsEnabledKey:null,itemIconKey:null,itemWidthKey:null,itemToolTipKey:null,tabHeight:SC.REGULAR_BUTTON_HEIGHT,tabLocation:SC.TOP_LOCATION,userDefaultKey:null,_tab_nowShowingDidChange:function(){var a=this.get("nowShowing");this.get("containerView").set("nowShowing",a);this.get("segmentedView").set("value",a);return this}.observes("nowShowing"),_tab_saveUserDefault:function(){var a=this.get("nowShowing");var b=this.get("userDefaultKey");if(b){SC.userDefaults.set([b,"nowShowing"].join(":"),a)}}.observes("nowShowing"),_tab_itemsDidChange:function(){this.get("segmentedView").set("items",this.get("items"));return this}.observes("items"),init:function(){arguments.callee.base.apply(this,arguments);this._tab_nowShowingDidChange()._tab_itemsDidChange()},awake:function(){arguments.callee.base.apply(this,arguments);var a=this.get("userDefaultKey");if(a){a=[a,"nowShowing"].join(":");var b=SC.userDefaults.get(a);if(!SC.none(b)){this.set("nowShowing",b)}}},createChildViews:function(){var g=[],a,f,e,c=this.get("tabLocation"),b=this.get("tabHeight"),j=this.get("controlSize");if(c===SC.TOP_LOCATION){e={top:b/2+1,left:0,right:0,bottom:0,border:1}}else{if(c===SC.TOP_TOOLBAR_LOCATION){e={top:b+1,left:0,right:0,bottom:0,border:1}}else{e={top:0,left:0,right:0,bottom:(b/2)-1,border:1}}}f=this.containerView.extend({layout:e,ariaRole:"tabpanel"});a=this.containerView=this.createChildView(f);g.push(a);e=(c===SC.TOP_LOCATION||c===SC.TOP_TOOLBAR_LOCATION)?{height:b,left:0,right:0,top:0}:{height:b,left:0,right:0,bottom:0};this.segmentedView=this.get("segmentedView").extend({layout:e,controlSize:j,_sc_tab_segmented_valueDidChange:function(){var k=this.get("parentView");if(k){k.set("nowShowing",this.get("value"))}}.observes("value"),init:function(){var k=this.get("parentView");if(k){SC._TAB_ITEM_KEYS.forEach(function(n){this[n]=k.get(n)},this)}return arguments.callee.base.apply(this,arguments)}});a=this.segmentedView=this.createChildView(this.segmentedView);g.push(a);this.set("childViews",g);return this},containerView:SC.ContainerView.extend({renderDelegateName:"wellRenderDelegate"}),segmentedView:SC.SegmentedView});SC._TAB_ITEM_KEYS=["itemTitleKey","itemValueKey","itemIsEnabledKey","itemIconKey","itemWidthKey","itemToolTipKey","itemActionKey","itemTargetKey"];SC.ThumbView=SC.View.extend({classNames:["sc-thumb-view"],isEnabled:YES,isEnabledBindingDefault:SC.Binding.bool(),prepareContext:function(a,c){var b=this.get("splitView");if(b){this.set("cursor",b.get("thumbViewCursor"))}return arguments.callee.base.apply(this,arguments)},mouseDown:function(a){if(!this.get("isEnabled")){return NO}var b=this.get("splitView");return(b)?b.mouseDownInThumbView(a,this):arguments.callee.base.apply(this,arguments)},touchStart:function(a){return this.mouseDown(a)}});SC.WebView=SC.View.extend(SC.Control,{classNames:"sc-web-view",displayProperties:["value","shouldAutoResize"],shouldAutoResize:NO,render:function(a,e){var c=this.get("value"),b;if(e){a.push('<iframe src="'+c+'" style="position: absolute; width: 100%; height: 100%; border: 0px; margin: 0px; padding: 0px;"></iframe>')}else{if(c!==this._lastSrc){b=this.$("iframe");b.attr("src","javascript:;");b.attr("src",c)}}this._lastSrc=c},didCreateLayer:function(){var a=this.$("iframe");SC.Event.add(a,"load",this,this.iframeDidLoad)},iframeDidLoad:function(){if(this.get("shouldAutoResize")===YES){var a;var c=this.$("iframe")[0];if(c&&c.contentWindow){a=c.contentWindow;if(a&&a.document&&a.document.documentElement){var b=a.document.documentElement;if(!SC.browser.isIE){this.$().width(b.scrollWidth);this.$().height(b.scrollHeight)}else{this.$().width(b.scrollWidth+12);this.$().height(b.scrollHeight+5)}}}}}});SC.WELL_CONTAINER_PADDING=15;SC.WellView=SC.ContainerView.extend({classNames:"sc-well-view",contentLayout:{top:SC.WELL_CONTAINER_PADDING,bottom:SC.WELL_CONTAINER_PADDING,left:SC.WELL_CONTAINER_PADDING,right:SC.WELL_CONTAINER_PADDING},renderDelegateName:"wellRenderDelegate",createChildViews:function(){var a=this.get("contentView");if(a){a=this.contentView=this.createChildView(a);a.set("layout",this.contentLayout);this.childViews=[a]}},contentViewDidChange:function(){var a=this.get("contentView");a.set("layout",this.contentLayout);this.replaceContent(a)}.observes("contentView")});SC.MIXED_STATE="__MIXED__";SC.DataSource=SC.Object.extend({fetch:function(a,b){return NO},retrieveRecords:function(a,c,b){return this._handleEach(a,c,this.retrieveRecord,b)},commitRecords:function(c,b,j,g,k){var f,a,e;if(b.length>0){e=this.createRecords.call(this,c,b,k)}if(j.length>0){f=this.updateRecords.call(this,c,j,k);e=SC.none(e)?f:(e===f)?e:SC.MIXED_STATE}if(g.length>0){a=this.destroyRecords.call(this,c,g,k);e=SC.none(e)?a:(e===a)?e:SC.MIXED_STATE}return e||NO},cancel:function(a,b){return NO},updateRecords:function(a,b,c){return this._handleEach(a,b,this.updateRecord,null,c)},createRecords:function(a,b,c){return this._handleEach(a,b,this.createRecord,null,c)},destroyRecords:function(a,b,c){return this._handleEach(a,b,this.destroyRecord,null,c)},_handleEach:function(k,f,c,a,b){var g=f.length,n,j,o,e;for(n=0;n<g;n++){e=a?a[n]:b;o=c.call(this,k,f[n],e);if(j===undefined){j=o}else{if(j===YES){j=(o===YES)?YES:SC.MIXED_STATE}else{if(j===NO){j=(o===NO)?NO:SC.MIXED_STATE}}}}return !SC.none(j)?j:null},updateRecord:function(a,b,c){return NO},retrieveRecord:function(a,b,c){return NO},createRecord:function(a,b,c){return NO},destroyRecord:function(a,b,c){return NO}});sc_require("data_sources/data_source");SC.CascadeDataSource=SC.DataSource.extend({dataSources:null,from:function(a){var b=this.get("dataSources");if(!b){this.set("dataSources",b=[])}b.push(a);return this},fetch:function(c,j){var f=this.get("dataSources"),b=f?f.length:0,e=NO,k,g,a;for(a=0;(e!==YES)&&a<b;a++){g=f.objectAt(a);k=g.fetch?g.fetch.apply(g,arguments):NO;e=this._handleResponse(e,k)}return e},retrieveRecords:function(k,e,b){var c=this.get("dataSources"),f=c?c.length:0,g=NO,n,a,j;for(j=0;(g!==YES)&&j<f;j++){a=c.objectAt(j);n=a.retrieveRecords.apply(a,arguments);g=this._handleResponse(g,n)}return g},commitRecords:function(o,c,k,f,e){var b=this.get("dataSources"),g=b?b.length:0,j=NO,p,a,n;for(n=0;(j!==YES)&&n<g;n++){a=b.objectAt(n);p=a.commitRecords.apply(a,arguments);j=this._handleResponse(j,p)}return j},cancel:function(c,g){var f=this.get("dataSources"),b=f?f.length:0,e=NO,k,j,a;for(a=0;(e!==YES)&&a<b;a++){j=f.objectAt(a);k=j.cancel.apply(j,arguments);e=this._handleResponse(e,k)}return e},init:function(){arguments.callee.base.apply(this,arguments);var b=this.get("dataSources"),a=b?b.get("length"):0,c;while(--a>=0){c=b[a];if(SC.typeOf(c)===SC.T_STRING){b[a]=this.get(c)}}},_handleResponse:function(b,a){if(a===YES){return YES}else{if(b===NO){return(a===NO)?NO:SC.MIXED_STATE}else{return SC.MIXED_STATE}}}});sc_require("core");sc_require("models/record");SC.Query=SC.Object.extend(SC.Copyable,SC.Freezable,{isQuery:YES,conditions:null,orderBy:null,recordType:null,recordTypes:null,expandedRecordTypes:function(){var b=SC.CoreSet.create(),a,c;if(a=this.get("recordType")){this._scq_expandRecordType(a,b)}else{if(a=this.get("recordTypes")){a.forEach(function(e){this._scq_expandRecordType(e,b)},this)}else{this._scq_expandRecordType(SC.Record,b)}}c=SC.Query._scq_queriesWithExpandedRecordTypes;if(!c){c=SC.Query._scq_queriesWithExpandedRecordTypes=SC.CoreSet.create()}c.add(this);return b.freeze()}.property("recordType","recordTypes").cacheable(),_scq_expandRecordType:function(b,a){if(a.contains(b)){return}a.add(b);if(SC.typeOf(b)===SC.T_STRING){b=SC.objectForPropertyPath(b)}b.subclasses.forEach(function(c){this._scq_expandRecordType(c,a)},this)},parameters:null,location:"local",scope:null,isRemote:function(){return this.get("location")===SC.Query.REMOTE}.property("location").cacheable(),isLocal:function(){return this.get("location")===SC.Query.LOCAL}.property("location").cacheable(),isEditable:NO,contains:function(a,e){var f,b=YES;if(f=this.get("recordTypes")){b=f.find(function(g){return SC.kindOf(a,g)})}else{if(f=this.get("recordType")){b=SC.kindOf(a,f)}}if(!b){return NO}var c=this.get("scope");if(c&&!c.contains(a)){return NO}if(!this._isReady){this.parse()}if(!this._isReady){return NO}if(e===undefined){e=this.parameters||this}return this._tokenTree.evaluate(a,e)},containsRecordTypes:function(a){var b=this.get("recordType");if(b){return !!a.find(function(c){return SC.kindOf(c,b)})}else{if(b=this.get("recordTypes")){return !!b.find(function(c){return !!a.find(function(e){return SC.kindOf(e,c)})})}else{return YES}}},compare:function(g,e){var c=0,f,b,a,j;if(g===e){return 0}if(!this._isReady){this.parse()}if(!this._isReady){return SC.compare(g.get("id"),e.get("id"))}b=this._order;if(SC.typeOf(b)===SC.T_FUNCTION){c=b.call(null,g,e)}else{a=b?b.length:0;for(j=0;c===0&&(j<a);j++){f=b[j].propertyName;if(SC.Query.comparisons[f]){c=SC.Query.comparisons[f](g.get(f),e.get(f))}else{c=SC.compare(g.get(f),e.get(f))}if((c!==0)&&b[j].descending){c=(-1)*c}}}if(c!==0){return c}else{return SC.compare(g.get("id"),e.get("id"))}},_isReady:NO,parse:function(){var c=this.get("conditions"),e=this.get("queryLanguage"),b,a;b=this._tokenList=this.tokenizeString(c,e);a=this._tokenTree=this.buildTokenTree(b,e);this._order=this.buildOrder(this.get("orderBy"));this._isReady=!!a&&!a.error;if(a&&a.error){throw a.error}return this._isReady},queryWithScope:function(c){var b=SC.keyFor("__query__",SC.guidFor(this)),a=c[b];if(!a){c[b]=a=this.copy();a.set("scope",c);a.freeze()}return a},copyKeys:["conditions","orderBy","recordType","recordTypes","parameters","location","scope"],concatenatedProperties:["copyKeys"],copy:function(){var e={},c=this.get("copyKeys"),g=c?c.length:0,b,f,a;while(--g>=0){b=c[g];f=this.get(b);if(f!==undefined){e[b]=f}}a=this.constructor.create(e);e=null;return a},queryLanguage:{UNKNOWN:{firstCharacter:/[^\s'"\w\d\(\)\{\}]/,notAllowed:/[\-\s'"\w\d\(\)\{\}]/},PROPERTY:{firstCharacter:/[a-zA-Z_]/,notAllowed:/[^a-zA-Z_0-9\.]/,evalType:"PRIMITIVE",evaluate:function(f,b){var g=this.tokenValue.split(".");var a=g.length;if(a<2){return f.get(this.tokenValue)}var c=f;for(var e=0;e<a;e++){if(!c){return}if(c.get){c=c.get(g[e])}else{c=c[g[e]]}}return c}},NUMBER:{firstCharacter:/[\d\-]/,notAllowed:/[^\d\-\.]/,format:/^-?\d+$|^-?\d+\.\d+$/,evalType:"PRIMITIVE",evaluate:function(b,a){return parseFloat(this.tokenValue)}},STRING:{firstCharacter:/['"]/,delimeted:true,evalType:"PRIMITIVE",evaluate:function(b,a){return this.tokenValue}},PARAMETER:{firstCharacter:/\{/,lastCharacter:"}",delimeted:true,evalType:"PRIMITIVE",evaluate:function(b,a){return a[this.tokenValue]}},"%@":{rememberCount:true,reservedWord:true,evalType:"PRIMITIVE",evaluate:function(b,a){return a[this.tokenValue]}},OPEN_PAREN:{firstCharacter:/\(/,singleCharacter:true},CLOSE_PAREN:{firstCharacter:/\)/,singleCharacter:true},AND:{reservedWord:true,leftType:"BOOLEAN",rightType:"BOOLEAN",evalType:"BOOLEAN",evaluate:function(c,a){var e=this.leftSide.evaluate(c,a);var b=this.rightSide.evaluate(c,a);return e&&b}},OR:{reservedWord:true,leftType:"BOOLEAN",rightType:"BOOLEAN",evalType:"BOOLEAN",evaluate:function(c,a){var e=this.leftSide.evaluate(c,a);var b=this.rightSide.evaluate(c,a);return e||b}},NOT:{reservedWord:true,rightType:"BOOLEAN",evalType:"BOOLEAN",evaluate:function(c,a){var b=this.rightSide.evaluate(c,a);return !b}},"=":{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(c,a){var e=this.leftSide.evaluate(c,a);var b=this.rightSide.evaluate(c,a);return SC.isEqual(e,b)}},"!=":{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(c,a){var e=this.leftSide.evaluate(c,a);var b=this.rightSide.evaluate(c,a);return !SC.isEqual(e,b)}},"<":{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(c,a){var e=this.leftSide.evaluate(c,a);var b=this.rightSide.evaluate(c,a);return SC.compare(e,b)==-1}},"<=":{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(c,a){var e=this.leftSide.evaluate(c,a);var b=this.rightSide.evaluate(c,a);return SC.compare(e,b)!=1}},">":{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(c,a){var e=this.leftSide.evaluate(c,a);var b=this.rightSide.evaluate(c,a);return SC.compare(e,b)==1}},">=":{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(c,a){var e=this.leftSide.evaluate(c,a);var b=this.rightSide.evaluate(c,a);return SC.compare(e,b)!=-1}},BEGINS_WITH:{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(c,a){var b=this.leftSide.evaluate(c,a);var e=this.rightSide.evaluate(c,a);return(b&&b.indexOf(e)===0)}},ENDS_WITH:{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(e,b){var c=this.leftSide.evaluate(e,b);var a=this.rightSide.evaluate(e,b);return(c&&c.indexOf(a)===(c.length-a.length))}},CONTAINS:{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(f,a){var e=this.leftSide.evaluate(f,a)||[];var j=this.rightSide.evaluate(f,a);var c=SC.typeOf(e);if(c===SC.T_STRING){return(e.indexOf(j)!==-1)}else{if(c===SC.T_ARRAY||e.toArray){if(c!==SC.T_ARRAY){e=e.toArray()}var g=false;var b=0;while(g===false&&b<e.length){if(j==e[b]){g=true}b++}return g}}}},ANY:{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(e,a){var g=this.leftSide.evaluate(e,a);var b=this.rightSide.evaluate(e,a);var f=false;var c=0;while(f===false&&c<b.length){if(g==b[c]){f=true}c++}return f}},MATCHES:{reservedWord:true,leftType:"PRIMITIVE",rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(c,a){var e=this.leftSide.evaluate(c,a);var b=this.rightSide.evaluate(c,a);return b.test(e)}},TYPE_IS:{reservedWord:true,rightType:"PRIMITIVE",evalType:"BOOLEAN",evaluate:function(e,a){var c=SC.Store.recordTypeFor(e.storeKey);var b=this.rightSide.evaluate(e,a);var f=SC.objectForPropertyPath(b);return c==f}},"null":{reservedWord:true,evalType:"PRIMITIVE",evaluate:function(b,a){return null}},"undefined":{reservedWord:true,evalType:"PRIMITIVE",evaluate:function(b,a){return undefined}},"false":{reservedWord:true,evalType:"PRIMITIVE",evaluate:function(b,a){return false}},"true":{reservedWord:true,evalType:"PRIMITIVE",evaluate:function(b,a){return true}},YES:{reservedWord:true,evalType:"PRIMITIVE",evaluate:function(b,a){return true}},NO:{reservedWord:true,evalType:"PRIMITIVE",evaluate:function(b,a){return false}}},tokenizeString:function(D,z){var o=[],B=null,k=null,g=null,C=null,a=null,n=null,e=null,j=null,A=false,b=false,q=false,u=false,v={};function f(E,c){k=z[E];if(k.format&&!k.format.test(c)){E="UNKNOWN"}if(k.delimeted){u=true}if(!k.delimeted){for(var t in z){if(z[t].reservedWord&&t==c){E=t}}}k=z[E];if(k&&k.rememberCount){if(!v[E]){v[E]=0}c=v[E];v[E]+=1}o.push({tokenType:E,tokenValue:c});a=null;n=null;e=null}if(!D){return[]}var p=D.length;for(var w=0;w<p;w++){A=(w===p-1);B=D.charAt(w);u=false;if(a){k=z[a];b=k.delimeted?B===j:k.notAllowed.test(B);if(!b){e+=B}if(b||A){f(a,e)}if(A&&!b){u=true}}if(!a&&!u){for(g in z){k=z[g];if(k.firstCharacter&&k.firstCharacter.test(B)){a=g}}if(a){k=z[a];e=B;if(k.delimeted){e="";if(k.lastCharacter){j=k.lastCharacter}else{j=B}}if(k.singleCharacter||A){f(a,e)}}}}return o},buildTokenTree:function(o,a){var t=o.slice();var v=0;var z=[];var c=false;var u=[];if(!o||o.length===0){return{evaluate:function(){return true}}}function w(C){var E=C;if(E<0){return false}var D=a[t[E].tokenType];if(!D){u.push("logic for token '"+t[E].tokenType+"' is not defined");return false}t[E].evaluate=D.evaluate;return D}function b(E,C){var F=C;var D=w(F);if(!D){return false}if(E=="left"){return D.leftType}if(E=="right"){return D.rightType}}function q(C){var E=C;var D=w(E);if(!D){return false}else{return D.evalType}}function g(C){t.splice(C,1);if(C<=v){v--}}function A(C){var D=C||v;if(D>0){return true}else{return false}}function n(C){var D=C;if(D<0){return true}return(b("left",D)&&!t[D].leftSide)||(b("right",D)&&!t[D].rightSide)}function k(D,E){var C=(E<D)?"left":"right";if(D<0||E<0){return false}if(!b(C,D)){return false}if(!q(E)){return false}if(b(C,D)==q(E)){return true}else{return false}}function p(C){var D=C;if(!n(D)){return false}if(!A(D)){return false}if(k(D,D-1)){return true}else{return false}}function e(C){var D=C;if(n(D)){return false}if(!A(D)){return false}if(!n(D-1)){return false}if(k(D-1,D)){return true}else{return false}}function j(C){var D=C;if(D<1){return false}t[D].leftSide=t[D-1];g(D-1)}function B(C){var D=C;if(D<1){return false}t[D-1].rightSide=t[D];g(D)}function f(C){g(C);g(z.pop())}for(v=0;v<t.length;v++){c=false;if(t[v].tokenType=="UNKNOWN"){u.push("found unknown token: "+t[v].tokenValue)}if(t[v].tokenType=="OPEN_PAREN"){z.push(v)}if(t[v].tokenType=="CLOSE_PAREN"){f(v)}if(p(v)){j(v)}if(e(v)){B(v);c=true}if(c){v--}}if(t.length==1){t=t[0]}else{u.push("string did not resolve to a single tree")}if(u.length>0){return{error:u.join(",\n"),tree:t}}else{return t}},buildOrder:function(a){if(!a){return[]}else{if(SC.typeOf(a)===SC.T_FUNCTION){return a}else{var e=a.split(",");for(var b=0;b<e.length;b++){var c=e[b];c=c.replace(/^\s+|\s+$/,"");c=c.replace(/\s+/,",");c=c.split(",");e[b]={propertyName:c[0]};if(c[1]&&c[1]=="DESC"){e[b].descending=true}}return e}}}});SC.Query.mixin({LOCAL:"local",REMOTE:"remote",storeKeyFor:function(a){return a?a.get("storeKey"):null},containsRecords:function(j,f,e){var g=[];for(var b=0,a=f.get("length");b<a;b++){var c=f.objectAt(b);if(c&&j.contains(c)){g.push(c.get("storeKey"))}}g=SC.Query.orderStoreKeys(g,j,e);return g},orderStoreKeys:function(c,e,a){if(c){var b=c.sort(function(g,f){return SC.Query.compareStoreKeys(e,a,g,f)})}return c},compareStoreKeys:function(g,c,f,e){var b=c.materializeRecord(f),a=c.materializeRecord(e);return g.compare(b,a)},build:function(k,c,j,e){var a=null,g,b,n,f;if(c&&c.isQuery){if(c.get("location")===k){return c}else{return c.copy().set("location",k).freeze()}}if(typeof c===SC.T_STRING){g=SC.objectForPropertyPath(c);if(!g){throw"%@ did not resolve to a class".fmt(c)}c=g}else{if(c&&c.isEnumerable){g=[];c.forEach(function(o){if(typeof o===SC.T_STRING){o=SC.objectForPropertyPath(o)}if(!o){throw"cannot resolve record types: %@".fmt(c)}g.push(o)},this);c=g}else{if(!c){c=SC.Record}}}if(e===undefined){e=null}if(j===undefined){j=null}if(!e&&(typeof j!==SC.T_STRING)){a=j;j=null}if(!e&&!a){f=SC.Query._scq_recordTypeCache;if(!f){f=SC.Query._scq_recordTypeCache={}}b=f[k];if(!b){b=f[k]={}}if(c.isEnumerable){n=c.map(function(o){return SC.guidFor(o)});n=n.sort().join(":")}else{n=SC.guidFor(c)}if(j){n=[n,j].join("::")}g=b[n];if(!g){if(c.isEnumerable){a={recordTypes:c.copy()}}else{a={recordType:c}}a.location=k;a.conditions=j;g=b[n]=SC.Query.create(a).freeze()}}else{if(!a){a={}}if(!a.location){a.location=k}if(c&&c.isEnumerable){a.recordsTypes=c}else{a.recordType=c}if(j){a.conditions=j}if(e){a.parameters=e}g=SC.Query.create(a).freeze()}return g},local:function(c,a,b){return this.build(SC.Query.LOCAL,c,a,b)},remote:function(c,a,b){return this.build(SC.Query.REMOTE,c,a,b)},_scq_didDefineRecordType:function(){var a=SC.Query._scq_queriesWithExpandedRecordTypes;if(a){a.forEach(function(b){b.notifyPropertyChange("expandedRecordTypes")},this);a.clear()}}});SC.Query.comparisons={};SC.Query.registerComparison=function(a,b){SC.Query.comparisons[a]=b};SC.Query.registerQueryExtension=function(b,a){SC.Query.prototype.queryLanguage[b]=a};SC.Q=SC.Query.from;sc_require("system/query");SC.Record=SC.Object.extend({isRecord:YES,isParentRecord:NO,primaryKey:"guid",id:function(a,b){if(b!==undefined){this.writeAttribute(this.get("primaryKey"),b);return b}else{return SC.Store.idFor(this.storeKey)}}.property("storeKey").cacheable(),status:function(){return this.store.readStatus(this.storeKey)}.property("storeKey").cacheable(),store:null,storeKey:null,isDestroyed:function(){return !!(this.get("status")&SC.Record.DESTROYED)}.property("status").cacheable(),isEditable:function(a,b){if(b!==undefined){this._screc_isEditable=b}if(this.get("status")&SC.Record.READY){return this._screc_isEditable}else{return NO}}.property("status").cacheable(),_screc_isEditable:YES,isLoaded:function(){var b=SC.Record,a=this.get("status");return !((a===b.EMPTY)||(a===b.BUSY_LOADING)||(a===b.ERROR))}.property("status").cacheable(),relationships:null,attributes:function(){var a=this.get("store"),b=this.storeKey;return a.readEditableDataHash(b)}.property(),readOnlyAttributes:function(){var a=this.get("store"),c=this.storeKey,b=a.readDataHash(c);if(b){b=SC.clone(b,YES)}return b}.property(),nestedRecordNamespace:null,isNestedRecord:function(){var c=this.get("store"),e,b=this.get("storeKey"),a=c.parentStoreKeyExists(b);e=a?YES:NO;return e}.property().cacheable(),parentRecord:function(){var a=this.storeKey,b=this.get("store");return b.materializeParentRecord(a)}.property(),refresh:function(f,j){var c=this.get("store"),g,e,b=this.get("storeKey"),a=c.parentStoreKeyExists();e=f||(SC.none(f)&&SC.none(a));if(e){c.refreshRecord(null,null,b,j)}else{if(a){g=c.materializeRecord(a);g.refresh(f,j)}}return this},destroy:function(f){var c=this.get("store"),g,e,b=this.get("storeKey"),a=c.parentStoreKeyExists();e=f||(SC.none(f)&&SC.none(a));if(e){c.destroyRecord(null,null,b);this.notifyPropertyChange("status");this.propagateToAggregates()}else{if(a){g=c.materializeRecord(a);g.destroy(f)}}return this},recordDidChange:function(a){var b=this.get("parentRecord");if(b){b.recordDidChange()}this.get("store").recordDidChange(null,null,this.get("storeKey"),a);this.notifyPropertyChange("status");this.propagateToAggregates();return this},toJSON:function(){return this.get("attributes")},_editLevel:0,beginEditing:function(){this._editLevel++;return this},endEditing:function(a){if(--this._editLevel<=0){this._editLevel=0;this.recordDidChange(a)}return this},readAttribute:function(c){var a=this.get("store"),e=this.storeKey;var b=a.readDataHash(e);return b?b[c]:undefined},writeAttribute:function(c,g,f){var a=this.get("store"),e=this.storeKey,b;b=a.readEditableDataHash(e);if(!b){throw SC.Record.BAD_STATE_ERROR}if(g!==b[c]){if(!f){this.beginEditing()}b[c]=g;if(c===this.get("primaryKey")){SC.Store.replaceIdFor(e,g);this.propertyDidChange("id")}if(!f){this.endEditing(c)}}return this},propagateToAggregates:function(){var v=this.get("storeKey"),e=SC.Store.recordTypeFor(v),t,n,u,b,q;var j=e.aggregates;if(!j){var g=this.get("store").readDataHash(v);j=[];for(var c in g){if(this[c]&&this[c].get&&this[c].get("aggregate")===YES){j.push(c)}}e.aggregates=j}var p=SC.Record,a=p.DIRTY,f=p.READY_NEW,w=p.DESTROYED,z=p.READY_CLEAN,o;o=function(B){var k,A;if(B){k=this.get("status");if((k&a)||(k&f)||(k&w)){A=B.get("status");if(A===z){B.get("store").recordDidChange(B.constructor,null,B.get("storeKey"),null,YES)}}}};for(t=0,n=j.length;t<n;++t){u=j[t];b=this.get(u);q=SC.kindOf(b,SC.ManyArray)?b:[b];q.forEach(o,this)}},storeDidChangeProperties:function(a,b){if(a){this.notifyPropertyChange("status")}else{if(b){this.beginPropertyChanges();b.forEach(function(f){this.notifyPropertyChange(f)},this);this.notifyPropertyChange("status");this.endPropertyChanges()}else{this.allPropertiesDidChange()}var e=this.relationships,c=e?e.length:0;while(--c>=0){e[c].recordPropertyDidChange(b)}}},normalize:function(f){var p=this.primaryKey,c=this.get("id"),q=this.get("store"),u=this.get("storeKey"),t,k,e,z,j,w,b,a,o,v,n;var g=q.readEditableDataHash(u)||{};g[p]=c;z=q.readDataHash(u);for(t in this){k=this[t];if(k){e=k.typeClass;if(e){v=k.get("key")||t;b=SC.typeOf(e.call(k))===SC.T_CLASS;a=k.isNestedRecordTransform;if(!b&&!a){j=this.get(t);if(j!==undefined||(j===null&&f)){n=this[t];if(SC.instanceOf(n,SC.RecordAttribute)){j=n.fromType(this,t,j)}g[v]=j}}else{if(a){j=this.get(t);if(j&&j.normalize){j.normalize()}}else{if(b){j=z[v];if(j!==undefined){g[v]=j}else{o=k.get("defaultValue");if(SC.typeOf(o)===SC.T_FUNCTION){g[v]=o(this,t,o)}else{g[v]=o}}}}}}}}return this},unknownProperty:function(b,e){if(e!==undefined){var c=this.get("storeKey"),f=SC.Store.recordTypeFor(c);if(f.ignoreUnknownProperties===YES){this[b]=e;return e}var a=this.get("primaryKey");this.writeAttribute(b,e);if(b===a){SC.Store.replaceIdFor(c,e)}}return this.readAttribute(b)},commitRecord:function(j,f,k){var c=this.get("store"),g,e,b=this.get("storeKey"),a=c.parentStoreKeyExists();e=f||(SC.none(f)&&SC.none(a));if(e){c.commitRecord(undefined,undefined,this.get("storeKey"),j,k)}else{if(a){g=c.materializeRecord(a);g.commitRecord(j,f,k)}}return this},isError:function(){return this.get("status")&SC.Record.ERROR}.property("status").cacheable(),errorValue:function(){return this.get("isError")?SC.val(this.get("errorObject")):null}.property("isError").cacheable(),errorObject:function(){if(this.get("isError")){var a=this.get("store");return a.readError(this.get("storeKey"))||SC.Record.GENERIC_ERROR}else{return null}}.property("isError").cacheable(),set:function(a,c){var b=this[a];if(b&&b.isProperty&&b.get&&!b.get("isEditable")){return this}return arguments.callee.base.apply(this,arguments)},toString:function(){var a=this.get("store").readDataHash(this.get("storeKey"));return"%@(%@) %@".fmt(this.constructor.toString(),SC.inspect(a),this.statusString())},statusString:function(){var b=[],a=this.get("status");for(var c in SC.Record){if(c.match(/[A-Z_]$/)&&SC.Record[c]===a){b.push(c)}}return b.join(" ")},registerNestedRecord:function(g,f,j){var c,e,b,a,k;if(SC.none(j)){j=f}if(g&&g.get&&g.get("isRecord")){a=g}else{k=this._materializeNestedRecordType(g,f);a=this.createNestedRecord(k,g)}if(a){this.isParentRecord=YES;c=this.get("store");e=this.get("storeKey");b=a.get("storeKey");c.registerChildToParent(e,b,j)}return a},_materializeNestedRecordType:function(e,c){var a,f,b;if(SC.typeOf(e)===SC.T_HASH){a=this.get("nestedRecordNamespace");if(e.type&&!SC.none(a)){f=a[e.type]}}if(!f&&c&&this[c]){f=this[c].get("typeClass")}if(!f||!SC.kindOf(f,SC.Record)){throw"SC.Child: Error during transform: Invalid record type."}return f},createNestedRecord:function(k,g){var b,j,a,e,c=null,f=null;SC.run(function(){g=g||{};f=g[k.prototype.primaryKey];b=this.get("store");if(SC.none(b)){throw"Error: during the creation of a child record: NO STORE ON PARENT!"}if(!j&&(e=k.prototype.primaryKey)){j=g[e];a=j?b.storeKeyExists(k,j):null;if(a){b.writeDataHash(a,g);c=b.materializeRecord(a)}else{c=b.createRecord(k,g);if(SC.none(j)){a=c.get("storeKey");j="cr"+a;SC.Store.replaceIdFor(a,j);g=b.readEditableDataHash(a);g[e]=j}}}if(SC.none(f)&&this.generateIdForChild){this.generateIdForChild(c)}},this);return c},_nestedRecordKey:0,generateIdForChild:function(a){}});SC.Record.mixin({ignoreUnknownProperties:NO,CLEAN:1,DIRTY:2,EMPTY:256,ERROR:4096,READY:512,READY_CLEAN:513,READY_DIRTY:514,READY_NEW:515,DESTROYED:1024,DESTROYED_CLEAN:1025,DESTROYED_DIRTY:1026,BUSY:2048,BUSY_LOADING:2052,BUSY_CREATING:2056,BUSY_COMMITTING:2064,BUSY_REFRESH:2080,BUSY_REFRESH_CLEAN:2081,BUSY_REFRESH_DIRTY:2082,BUSY_DESTROYING:2112,BAD_STATE_ERROR:SC.$error("Internal Inconsistency"),RECORD_EXISTS_ERROR:SC.$error("Record Exists"),NOT_FOUND_ERROR:SC.$error("Not found "),BUSY_ERROR:SC.$error("Busy"),GENERIC_ERROR:SC.$error("Generic Error"),_nextChildKey:0,attr:function(a,b){return SC.RecordAttribute.attr(a,b)},fetch:function(b,a){return SC.FetchedAttribute.attr(b,a)},toMany:function(e,b){b=b||{};var c=b.nested||b.isNested;var a;if(c){a=SC.ChildrenAttribute.attr(e,b)}else{a=SC.ManyAttribute.attr(e,b)}return a},toOne:function(e,b){b=b||{};var c=b.nested||b.isNested;var a;if(c){a=SC.ChildAttribute.attr(e,b)}else{a=SC.SingleAttribute.attr(e,b)}return a},storeKeysById:function(){var b=SC.keyFor("storeKey",SC.guidFor(this)),a=this[b];if(!a){a=this[b]={}}return a},storeKeyFor:function(c){var b=this.storeKeysById(),a=b[c];if(!a){a=SC.Store.generateStoreKey();SC.Store.idsByStoreKey[a]=c;SC.Store.recordTypesByStoreKey[a]=this;b[c]=a}return a},storeKeyExists:function(c){var b=this.storeKeysById(),a=b[c];return a},find:function(a,b){return a.find(this,b)},extend:function(){var a=SC.Object.extend.apply(this,arguments);SC.Query._scq_didDefineRecordType(a);return a}});sc_require("data_sources/data_source");sc_require("models/record");SC.FixturesDataSource=SC.DataSource.extend({simulateRemoteResponse:NO,latency:50,cancel:function(a,b){return NO},fetch:function(a,b){if(b.get("location")!==SC.Query.LOCAL){throw SC.$error("SC.Fixture data source can only fetch local queries")}if(!b.get("recordType")&&!b.get("recordTypes")){throw SC.$error("SC.Fixture data source can only fetch queries with one or more record types")}if(this.get("simulateRemoteResponse")){this.invokeLater(this._fetch,this.get("latency"),a,b)}else{this._fetch(a,b)}},_fetch:function(a,c){var e=c.get("recordType"),b=c.get("recordTypes")||[e];b.forEach(function(f){if(SC.typeOf(f)===SC.T_STRING){f=SC.objectForPropertyPath(f)}if(f){this.loadFixturesFor(a,f)}},this);a.dataSourceDidFetchQuery(c)},retrieveRecords:function(a,c){var e=this.get("latency"),b=this.hasFixturesFor(c);if(!b){return b}if(this.get("simulateRemoteResponse")){this.invokeLater(this._retrieveRecords,e,a,c)}else{this._retrieveRecords(a,c)}return b},_retrieveRecords:function(a,b){b.forEach(function(e){var c=[],j=SC.Store.recordTypeFor(e),g=a.idFor(e),f=this.fixtureForStoreKey(a,e);c.push(e);a.dataSourceDidComplete(e,f,g)},this)},updateRecords:function(a,c,f){var e=this.get("latency"),b=this.hasFixturesFor(c);if(!b){return b}if(this.get("simulateRemoteResponse")){this.invokeLater(this._updateRecords,e,a,c)}else{this._updateRecords(a,c)}return b},_updateRecords:function(a,b){b.forEach(function(c){var e=a.readDataHash(c);this.setFixtureForStoreKey(a,c,e);a.dataSourceDidComplete(c)},this)},createRecords:function(a,b,e){var c=this.get("latency");if(this.get("simulateRemoteResponse")){this.invokeLater(this._createRecords,c,a,b)}else{this._createRecords(a,b)}return YES},_createRecords:function(a,b){b.forEach(function(f){var j=a.idFor(f),g=a.recordTypeFor(f),e=a.readDataHash(f),c=this.fixturesFor(g);if(!j){j=this.generateIdFor(g,e,a,f)}this._invalidateCachesFor(g,f,j);c[j]=e;a.dataSourceDidComplete(f,null,j)},this)},destroyRecords:function(a,c,f){var e=this.get("latency"),b=this.hasFixturesFor(c);if(!b){return b}if(this.get("simulateRemoteResponse")){this.invokeLater(this._destroyRecords,e,a,c)}else{this._destroyRecords(a,c)}return b},_destroyRecords:function(a,b){b.forEach(function(e){var g=a.idFor(e),f=a.recordTypeFor(e),c=this.fixturesFor(f);this._invalidateCachesFor(f,e,g);if(g){delete c[g]}a.dataSourceDidDestroy(e)},this)},loadFixturesFor:function(a,j,c){var b=[],f,e,g;f=this.fixturesFor(j);for(e in f){g=j.storeKeyFor(e);if(a.peekStatus(g)===SC.Record.EMPTY){b.push(f[e])}if(c){c.push(g)}}if(b&&b.length>0){a.loadRecords(j,b)}return this},generateIdFor:function(e,b,a,c){return"@id%@".fmt(SC.Store.generateStoreKey())},fixtureForStoreKey:function(a,c){var f=a.idFor(c),e=a.recordTypeFor(c),b=this.fixturesFor(e);return b?b[f]:null},setFixtureForStoreKey:function(a,e,c){var g=a.idFor(e),f=a.recordTypeFor(e),b=this.fixturesFor(f);this._invalidateCachesFor(f,e,g);b[g]=c;return this},fixturesFor:function(k){if(!this._fixtures){this._fixtures={}}var g=this._fixtures[SC.guidFor(k)];if(g){return g}var f=k?k.FIXTURES:null,b=f?f.length:0,c=k?k.prototype.primaryKey:"guid",a,e,j;this._fixtures[SC.guidFor(k)]=g={};for(a=0;a<b;a++){e=f[a];j=e[c];if(!j){j=this.generateIdFor(k,e)}g[j]=e}return g},fixturesLoadedFor:function(c){if(!this._fixtures){return NO}var a=[],b=this._fixtures[SC.guidFor(c)];return b?YES:NO},reset:function(){this._fixtures=null;return this},hasFixturesFor:function(b){var a=NO;b.forEach(function(e){if(a!==SC.MIXED_STATE){var f=SC.Store.recordTypeFor(e),c=f?f.FIXTURES:null;if(c&&c.length&&c.length>0){if(a===NO){a=YES}}else{if(a===YES){a=SC.MIXED_STATE}}}},this);return a},_invalidateCachesFor:function(e,b,c){var a=this._storeKeyCache;if(a){delete a[SC.guidFor(e)]}return this}});SC.Record.fixtures=SC.FixturesDataSource.create();SC.RelationshipSupport={_srs_inverseDidRelinquishRelationships:function(e,c,a,b){c.forEach(function(f){this._srs_inverseDidRelinquishRelationship(e,f,a,b)},this)},_srs_inverseDidRelinquishRelationship:function(k,j,g,b){var f=k.storeKeyFor(j),c=this.readDataHash(f),a=g.inverse,e=k.prototype;if(!c||!a){return}if(SC.instanceOf(e[a],SC.SingleAttribute)){delete c[a]}else{if(SC.instanceOf(e[a],SC.ManyAttribute)&&SC.typeOf(c[a])===SC.T_ARRAY){c[a].removeObject(b)}}this.pushRetrieve(k,j,c,undefined,true)},_srs_inverseDidAddRelationships:function(e,c,a,b){c.forEach(function(f){this._srs_inverseDidAddRelationship(e,f,a,b)},this)},_srs_inverseDidAddRelationship:function(b,a,n,p){var o=b.storeKeyFor(a),j=this.readDataHash(o),e=this.peekStatus(o),g=b.prototype,k=n.inverse,q=g[k],c=g[g.primaryKey],f=false;q=(q&&q.get&&q.get("key")||q.key)||k;if((e===SC.Record.EMPTY)&&(SC.typeOf(n.lazilyInstantiate)===SC.T_FUNCTION&&n.lazilyInstantiate()||SC.typeOf(n.lazilyInstantiate)!==SC.T_FUNCTION&&n.lazilyInstantiate)){if(!SC.none(c)&&c.typeClass&&SC.typeOf(c.typeClass())===SC.T_CLASS){f=true}j={};j[g.primaryKey]=a}if(!j||!k){return}if(SC.instanceOf(g[k],SC.SingleAttribute)){j[q]=p}else{if(SC.instanceOf(g[k],SC.ManyAttribute)){j[q]=j[q]||[];if(j[k].indexOf(p)<0){j[q].push(p)}}}this.pushRetrieve(b,a,j,undefined,!f)},_srs_pushIterator:function(e,b,n,g){var f=e.prototype,j,c,k,a;if(typeof n==="undefined"){n=e.storeKeyFor(b)}c=this.readDataHash(n)||{};for(k in f){j=f[k];if(j&&j.typeClass&&j.inverse&&j.isMaster){a=j.typeClass();if(SC.typeOf(a)!==SC.T_CLASS){continue}g.apply(this,[a,c,j,j.get&&j.get("key")||k])}}},pushDestroy:function(a,f,e,c){var b;this._srs_pushIterator(f,e,c,function(g,j,n,k){b=[j[k]||null].flatten().compact().uniq();this._srs_inverseDidRelinquishRelationships(g,b,n,e)});return a(f,e,c)}.enhance(),pushRetrieve:function(b,k,j,c,f,g){if(!g){var e,a;this._srs_pushIterator(k,j,f,function(n,o,q,p){e=[o[p]||null].flatten().compact().uniq();a=[c[p]||null].flatten().compact().uniq();this._srs_inverseDidRelinquishRelationships(n,e.filter(function(t){return a.indexOf(t)===-1}),q,j);this._srs_inverseDidAddRelationships(n,a,q,j)})}f=f||k.storeKeyFor(j);return b(k,j,c,f)}.enhance()};sc_require("models/record");SC.RecordAttribute=SC.Object.extend({isRecordAttribute:YES,defaultValue:null,type:String,key:null,isRequired:NO,isEditable:YES,useIsoDate:YES,aggregate:NO,lazilyInstantiate:NO,typeClass:function(){var a=this.get("type");if(SC.typeOf(a)===SC.T_STRING){a=SC.requiredObjectForPropertyPath(a)}return a}.property("type").cacheable(),transform:function(){var a=this.get("typeClass")||String,c=SC.RecordAttribute.transforms,b;while(a&&!(b=c[SC.guidFor(a)])){if(a.superclass.hasOwnProperty("create")){a=a.superclass}else{a=SC.T_FUNCTION}}return b}.property("typeClass").cacheable(),toType:function(f,n,k){var c=this.get("transform"),j=this.get("typeClass"),b;if(c&&c.to){k=c.to(k,this,j,f,n);if(!SC.none(k)&&(b=c.observesChildren)){var e,g=b.length,a={record:f,key:n};for(e=0;e<g;e++){k.addObserver(b[e],this,this._SCRA_childObserver,a)}}}return k},_SCRA_childObserver:function(e,b,c,a){this.call(a.record,a.key,e);a.record.notifyPropertyChange(a.key)},fromType:function(a,c,f){var b=this.get("transform"),e=this.get("typeClass");if(b&&b.from){f=b.from(f,this,e,a,c)}return f},call:function(a,b,c){var e=this.get("key")||b,f;if((c!==undefined)&&this.get("isEditable")){f=this.fromType(a,b,c);a.writeAttribute(e,f)}f=c=a.readAttribute(e);if(SC.none(c)&&(c=this.get("defaultValue"))){if(typeof c===SC.T_FUNCTION){c=this.defaultValue(a,b,this);if((f!==c)&&a.get("store").readDataHash(a.get("storeKey"))){a.writeAttribute(e,c,true)}}}else{c=this.toType(a,b,c)}return c},isProperty:YES,isCacheable:YES,dependentKeys:[],init:function(){arguments.callee.base.apply(this,arguments);this.cacheKey="__cache__"+SC.guidFor(this);this.lastSetValueKey="__lastValue__"+SC.guidFor(this)}});SC.RecordAttribute.mixin({attr:function(a,b){if(!b){b={}}if(!b.type){b.type=a||String}return this.create(b)},transforms:{},registerTransform:function(a,b){SC.RecordAttribute.transforms[SC.guidFor(a)]=b}});SC.RecordAttribute.registerTransform(Boolean,{to:function(a){return SC.none(a)?null:!!a}});SC.RecordAttribute.registerTransform(Number,{to:function(a){return SC.none(a)?null:Number(a)}});SC.RecordAttribute.registerTransform(String,{to:function(a){if(!(typeof a===SC.T_STRING)&&!SC.none(a)&&a.toString){a=a.toString()}return a}});SC.RecordAttribute.registerTransform(Array,{to:function(a){if(!SC.isArray(a)&&!SC.none(a)){a=[]}return a},observesChildren:["[]"]});SC.RecordAttribute.registerTransform(Object,{to:function(a){if(!(typeof a==="object")&&!SC.none(a)){a={}}return a}});SC.RecordAttribute.registerTransform(SC.Record,{to:function(f,a,e,c){var b=c.get("store");if(SC.none(f)||(f==="")){return null}else{return b.find(e,f)}},from:function(a){return a?a.get("id"):null}});SC.RecordAttribute.registerTransform(SC.T_FUNCTION,{to:function(f,a,e,c){e=e.apply(c);var b=c.get("store");return b.find(e,f)},from:function(a){return a.get("id")}});SC.RecordAttribute.registerTransform(Date,{to:function(k,a){if(SC.none(k)){return k}var c;k=k.toString()||"";if(a.get("useIsoDate")){var e="([0-9]{4})(-([0-9]{2})(-([0-9]{2})(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(\\.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?",j=k.match(new RegExp(e)),g=0,b=new Date(j[1],0,1),f;if(j[3]){b.setMonth(j[3]-1)}if(j[5]){b.setDate(j[5])}if(j[7]){b.setHours(j[7])}if(j[8]){b.setMinutes(j[8])}if(j[10]){b.setSeconds(j[10])}if(j[12]){b.setMilliseconds(Number("0."+j[12])*1000)}if(j[14]){g=(Number(j[16])*60)+Number(j[17]);g*=((j[15]==="-")?1:-1)}g-=b.getTimezoneOffset();f=(Number(b)+(g*60*1000));c=new Date();c.setTime(Number(f))}else{c=new Date(Date.parse(k))}return c},_dates:{},_zeropad:function(a){return((a<0)?"-":"")+((a<10)?"0":"")+Math.abs(a)},from:function(b){if(SC.none(b)){return null}var a=this._dates[b.getTime()];if(a){return a}var e=this._zeropad,c=0-b.getTimezoneOffset()/60;c=(c===0)?"Z":"%@:00".fmt(e(c));this._dates[b.getTime()]=a="%@-%@-%@T%@:%@:%@%@".fmt(e(b.getFullYear()),e(b.getMonth()+1),e(b.getDate()),e(b.getHours()),e(b.getMinutes()),e(b.getSeconds()),c);return a}});if(SC.DateTime&&!SC.RecordAttribute.transforms[SC.guidFor(SC.DateTime)]){SC.RecordAttribute.registerTransform(SC.DateTime,{to:function(c,a){if(SC.none(c)||SC.instanceOf(c,SC.DateTime)){return c}if(SC.none(c)||SC.instanceOf(c,Date)){return SC.DateTime.create(c.getTime())}var b=a.get("format");return SC.DateTime.parse(c,b?b:SC.DateTime.recordFormat)},from:function(b,a){if(SC.none(b)){return b}var c=a.get("format");return b.toFormattedString(c?c:SC.DateTime.recordFormat)}})}SC.RecordAttribute.registerTransform(SC.Set,{to:function(f,a,e,b,c){return SC.Set.create(f)},from:function(f,a,e,b,c){return f.toArray()},observesChildren:["[]"]});sc_require("models/record");sc_require("models/record_attribute");SC.ChildAttribute=SC.RecordAttribute.extend({isNestedRecordTransform:YES,toType:function(b,e,f){var c=null,a,g=this.get("typeClass");if(!b){throw"SC.Child: Error during transform: Unable to retrieve parent record."}if(!SC.none(f)){c=b.registerNestedRecord(f,e)}return c},fromType:function(b,f,g){var a,c,e;if(b){if(SC.none(g)){b.writeAttribute(f,g);e=g}else{e=b.registerNestedRecord(g,f);if(e){a=e.get("storeKey");c=e.get("store");b.writeAttribute(f,c.readDataHash(a))}else{if(g){b.writeAttribute(f,g)}}}}return e},call:function(a,c,e){var f=this.get("key")||c,b,g=SC.keyFor("__kid__",SC.guidFor(this));if(e!==undefined){e=this.fromType(a,c,e)}else{e=a.readAttribute(f);if(SC.none(e)&&(e=this.get("defaultValue"))){if(typeof e===SC.T_FUNCTION){e=this.defaultValue(a,c,this);if(a.attributes()){a.writeAttribute(f,e,true)}}}else{e=this.toType(a,c,e)}}return e}});sc_require("models/record");SC.ChildRecord=SC.Record.extend({});SC.ChildRecord.extend=function(){return SC.Record.extend.apply(this,arguments)};SC.ChildArray=SC.Object.extend(SC.Enumerable,SC.Array,{defaultRecordType:null,record:null,propertyName:null,children:null,store:function(){return this.getPath("record.store")}.property("record").cacheable(),storeKey:function(){return this.getPath("record.storeKey")}.property("record").cacheable(),readOnlyChildren:function(){return this.get("record").readAttribute(this.get("propertyName"))}.property(),editableChildren:function(){var a=this.get("store"),e=this.get("storeKey"),c=this.get("propertyName"),b,f;b=a.readEditableProperty(e,c);if(!b){f=a.readEditableDataHash(e);b=f[c]=[]}return b}.property(),length:function(){var a=this.get("readOnlyChildren");return a?a.length:0}.property("readOnlyChildren"),objectAt:function(b){var j=this._records,f=this.get("readOnlyChildren"),k,c,e=this.get("propertyName"),g=this.get("record");var a=f?f.length:0;if(!f){return undefined}if(j&&(c=j[b])){return c}if(!j){this._records=j=[]}if(b>=a){return undefined}k=f.objectAt(b);if(!k){return undefined}j[b]=c=g.registerNestedRecord(k,e,e+"."+b);return c},replace:function(o,a,n){var b=this.get("editableChildren"),j=n?(n.get?n.get("length"):n.length):0,g=this.get("record"),e,f=this.get("propertyName"),k,c;e=this._processRecordsToHashes(n);b.replace(o,a,e);if(e!==this._prevChildren){this._performRecordPropertyChange(null,false);this.arrayContentWillChange(o,a,j);this._childrenContentDidChange(o,a,j)}g.recordDidChange(f);return this},_processRecordsToHashes:function(c){var b,a;c=c||[];c.forEach(function(f,e){if(f.isNestedRecord){b=f.get("store");a=f.storeKey;c[e]=b.readDataHash(a)}});return c},normalize:function(){this.forEach(function(b,a){if(b.normalize){b.normalize()}})},recordPropertyDidChange:function(a){this._performRecordPropertyChange(a,true);return this},_performRecordPropertyChange:function(g,k){if(g&&!g.contains(this.get("propertyName"))){return this}var b=this.get("readOnlyChildren"),a=0,c=0;var e=this._prevChildren,j=this._childrenContentDidChange;k=SC.none(k)?true:k;if(b===e){return this}if(e){e.removeArrayObservers({target:this,willChange:this.arrayContentWillChange,didChange:j});a=e.get("length")}if(b){b.addArrayObservers({target:this,willChange:this.arrayContentWillChange,didChange:j});c=b.get("length")}this._prevChildren=b;if(k){this.arrayContentWillChange(0,a,c);this._childrenContentDidChange(0,a,c)}return this},_childrenContentDidChange:function(c,a,b){this._records=null;this.arrayContentDidChange(c,a,b)},init:function(){arguments.callee.base.apply(this,arguments);this.recordPropertyDidChange()}});sc_require("models/record");sc_require("models/record_attribute");sc_require("models/child_attribute");sc_require("system/child_array");SC.ChildrenAttribute=SC.ChildAttribute.extend({toType:function(b,e,f){var j=this.get("key")||e,g=SC.keyFor("__kidsArray__",SC.guidFor(this)),c=b[g],k=this.get("typeClass"),a;if(!c){c=SC.ChildArray.create({record:b,propertyName:j,defaultRecordType:k});b[g]=c;a=b.get("relationships");if(!a){b.set("relationships",a=[])}a.push(c)}return c},fromType:function(b,f,g){var a,c,j=SC.keyFor("__kidsArray__",SC.guidFor(this)),e=b[j];if(b){b.writeAttribute(f,g);if(e){e=e.recordPropertyDidChange()}}return e}});sc_require("models/record");sc_require("models/record_attribute");SC.FetchedAttribute=SC.RecordAttribute.extend({paramValueKey:"link",paramOwnerKey:"owner",paramRelKey:"rel",queryKey:null,isEditable:NO,toType:function(e,n,j){var k=e.get("store");if(!k){return null}var b=this.get("paramValueKey"),a=this.get("paramOwnerKey"),g=this.get("paramRelKey"),f=this.get("queryKey")||this.get("typeClass"),c={};if(b){c[b]=j}if(a){c[a]=e}if(g){c[g]=this.get("key")||n}return k.findAll(f,c)},fromType:function(a,b,c){return c}});SC.ManyArray=SC.Object.extend(SC.Enumerable,SC.Array,{recordType:null,record:null,propertyName:null,manyAttribute:null,store:function(){return this.get("record").get("store")}.property("record").cacheable(),storeKey:function(){return this.get("record").get("storeKey")}.property("record").cacheable(),readOnlyStoreIds:function(){return this.get("record").readAttribute(this.get("propertyName"))}.property(),editableStoreIds:function(){var a=this.get("store"),e=this.get("storeKey"),c=this.get("propertyName"),b,f;b=a.readEditableProperty(e,c);if(!b){f=a.readEditableDataHash(e);b=f[c]=[]}if(b!==this._prevStoreIds){this.recordPropertyDidChange()}return b}.property(),isEditable:function(){var a=this.manyAttribute;return a?a.get("isEditable"):NO}.property("manyAttribute").cacheable(),inverse:function(){var a=this.manyAttribute;return a?a.get("inverse"):null}.property("manyAttribute").cacheable(),isMaster:function(){var a=this.manyAttribute;return a?a.get("isMaster"):null}.property("manyAttribute").cacheable(),orderBy:function(){var a=this.manyAttribute;return a?a.get("orderBy"):null}.property("manyAttribute").cacheable(),length:function(){var a=this.get("readOnlyStoreIds");return a?a.get("length"):0}.property("readOnlyStoreIds"),objectAt:function(a){var j=this._records,g=this.get("readOnlyStoreIds"),c=this.get("store"),k=this.get("recordType"),f,e,b;if(!g||!c){return undefined}if(j&&(e=j[a])){return e}if(!j){this._records=j=[]}b=g.objectAt(a);if(b){f=c.storeKeyFor(k,b);if(c.readStatus(f)===SC.Record.EMPTY){c.retrieveRecord(k,null,f)}j[a]=e=c.materializeRecord(f)}return e},replace:function(t,e,q){if(!this.get("isEditable")){throw"%@.%@[] is not editable".fmt(this.get("record"),this.get("propertyName"))}var c=this.get("editableStoreIds"),o=q?(q.get?q.get("length"):q.length):0,k=this.get("record"),f=this.get("propertyName"),j,u,a,b,g,p,n;a=[];for(j=0;j<o;j++){a[j]=q.objectAt(j).get("id")}g=this.get("inverse");if(g&&e>0){b=SC.ManyArray._toRemove;if(b){SC.ManyArray._toRemove=null}else{b=[]}for(j=0;j<e;j++){b[j]=this.objectAt(t+j)}}c.replace(t,e,a);if(g){for(j=0;j<e;j++){n=b[j];p=n?n[g]:null;if(p&&p.inverseDidRemoveRecord){p.inverseDidRemoveRecord(n,g,k,f)}}if(b){b.length=0;if(!SC.ManyArray._toRemove){SC.ManyArray._toRemove=b}}for(j=0;j<o;j++){n=q.objectAt(j);p=n?n[g]:null;if(p&&p.inverseDidAddRecord){p.inverseDidAddRecord(n,g,k,f)}}}if(k&&(!g||this.get("isMaster"))){k.recordDidChange(f)}this.enumerableContentDidChange(t,e,o-e);return this},removeInverseRecord:function(c){if(!c){return this}var f=c.get("id"),e=this.get("editableStoreIds"),a=(e&&f)?e.indexOf(f):-1,b;if(a>=0){e.removeAt(a);if(this.get("isMaster")&&(b=this.get("record"))){b.recordDidChange(this.get("propertyName"))}}return this},addInverseRecord:function(e){if(!e){return this}var j=e.get("id"),f=this.get("editableStoreIds"),g=this.get("orderBy"),b=f.get("length"),a,c;if(g){a=this._findInsertionLocation(e,0,b,g)}else{a=b}f.insertAt(a,e.get("id"));if(this.get("isMaster")&&(c=this.get("record"))){c.recordDidChange(this.get("propertyName"))}return this},_findInsertionLocation:function(j,e,c,g){var b=e+Math.floor((c-e)/2),f=this.objectAt(b),a=this._compare(j,f,g);if(a<0){if(b===0){return b}else{return this._findInsertionLocation(j,0,b,g)}}else{if(a>0){if(b>=c){return b}else{return this._findInsertionLocation(j,b,c,g)}}else{return b}}},_compare:function(g,f,n){var k=SC.typeOf(n),j,e,c;if(k===SC.T_FUNCTION){j=n(g,f)}else{if(k===SC.T_STRING){j=SC.compare(g,f)}else{c=n.get("length");j=0;for(e=0;(j===0)&&(e<c);e++){j=SC.compare(g,f)}}}return j},recordPropertyDidChange:function(e){if(e&&!e.contains(this.get("propertyName"))){return this}var j=this.get("readOnlyStoreIds"),a,b;var c=this._prevStoreIds,g=this._storeIdsContentDidChange;if(j===c){return this}if(c){c.removeArrayObservers({target:this,willChange:this.arrayContentWillChange,didChange:g});a=c.get("length")}else{a=0}if(j){j.addArrayObservers({target:this,willChange:this.arrayContentWillChange,didChange:g});b=j.get("length")}else{b=0}this.arrayContentWillChange(0,a,b);this._prevStoreIds=j;this._storeIdsContentDidChange(0,a,b)},_storeIdsContentDidChange:function(c,a,b){this._records=null;this.arrayContentDidChange(c,a,b)},unknownProperty:function(b,c){var a;if(SC.typeOf(b)===SC.T_STRING){a=this.reducedProperty(b,c)}return a===undefined?arguments.callee.base.apply(this,arguments):a},init:function(){arguments.callee.base.apply(this,arguments);this.recordPropertyDidChange()}});sc_require("models/record");sc_require("models/record_attribute");sc_require("system/many_array");SC.ManyAttribute=SC.RecordAttribute.extend({inverse:null,isMaster:YES,orderBy:null,toType:function(b,e,g){var f=this.get("typeClass"),k=this.get("key")||e,j=SC.keyFor("__manyArray__",SC.guidFor(this)),c=b[j],a;if(!c){c=SC.ManyArray.create({recordType:f,record:b,propertyName:k,manyAttribute:this});b[j]=c;a=b.get("relationships");if(!a){b.set("relationships",a=[])}a.push(c)}return c},fromType:function(b,f,g){var c=[];if(!SC.isArray(g)){throw"Expects toMany attribute to be an array"}var a=g.get("length");for(var e=0;e<a;e++){c[e]=g.objectAt(e).get("id")}return c},inverseDidRemoveRecord:function(a,b,c,e){var f=a.get(b);if(f){f.removeInverseRecord(c)}},inverseDidAddRecord:function(a,b,c,e){var f=a.get(b);if(f){f.addInverseRecord(c)}}});sc_require("models/record");sc_require("models/record_attribute");SC.SingleAttribute=SC.RecordAttribute.extend({inverse:null,isMaster:YES,call:function(c,n,b){var a=this.get("key")||n,k,j,o,g,f,e;if(b!==undefined&&this.get("isEditable")){if(b&&!SC.kindOf(b,SC.Record)){throw"%@ is not an instance of SC.Record".fmt(b)}k=this.get("inverse");if(k){o=this._scsa_call(c,n)}e=this.fromType(c,n,b);c.writeAttribute(a,e,!this.get("isMaster"));f=b;if(k&&(o!==b)){if(o&&(g=o[k])){g.inverseDidRemoveRecord(o,k,c,n)}if(b&&(g=b[k])){g.inverseDidAddRecord(b,k,c,n)}}}else{f=this._scsa_call(c,n,b)}return f},_scsa_call:SC.RecordAttribute.prototype.call,inverseDidRemoveRecord:function(c,g,j,k){var b=this.get("inverse"),f=this._scsa_call(c,g),e=this.get("isMaster"),a;c.writeAttribute(g,null,!e);c.notifyPropertyChange(g);if((f!==j)||(k!==b)){if(f&&(a=f[b])){a.inverseDidRemoveRecord(f,b,c,g)}}},inverseDidAddRecord:function(a,k,c,j){var f=this.get("inverse"),n=this._scsa_call(a,k),g=this.get("isMaster"),e,b;b=this.fromType(a,k,c);a.writeAttribute(k,b,!g);a.notifyPropertyChange(k);if((n!==c)||(j!==f)){if(n&&(e=n[f])){e.inverseDidRemoveRecord(n,f,a,k)}}}});sc_require("models/record");SC.Store=SC.Object.extend({name:null,nestedStores:null,dataSource:null,isNested:NO,commitRecordsAutomatically:NO,from:function(a){this.set("dataSource",a);return this},_getDataSource:function(){var a=this.get("dataSource");if(typeof a===SC.T_STRING){a=SC.requiredObjectForPropertyPath(a);if(a.isClass){a=a.create()}this.set("dataSource",a)}return a},cascade:function(a){var b=SC.A(arguments);a=SC.CascadeDataSource.create({dataSources:b});return this.from(a)},chain:function(b,c){if(!b){b={}}b.parentStore=this;if(c){if(SC.typeOf(c)!=="class"){throw new Error("%@ is not a valid class".fmt(c))}if(!SC.kindOf(c,SC.NestedStore)){throw new Error("%@ is not a type of SC.NestedStore".fmt(c))}}else{c=SC.NestedStore}b.childRecords=this.childRecords?SC.clone(this.childRecords):{};b.parentRecords=this.parentRecords?SC.clone(this.parentRecords):{};var a=c.create(b),e=this.nestedStores;if(!e){e=this.nestedStores=[]}e.push(a);return a},willDestroyNestedStore:function(a){if(this.nestedStores){this.nestedStores.removeObject(a)}return this},hasNestedStore:function(a){while(a&&(a!==this)){a=a.get("parentStore")}return a===this},dataHashes:null,statuses:null,revisions:null,editables:null,changelog:null,recordErrors:null,queryErrors:null,childRecords:null,parentRecords:null,storeKeyEditState:function(b){var c=this.editables,a=this.locks;return(c&&c[b])?SC.Store.EDITABLE:SC.Store.LOCKED},readDataHash:function(a){return this.dataHashes[a]},readEditableDataHash:function(b){var a=this.dataHashes[b];if(!a){return a}var c=this.editables;if(!c){c=this.editables=[]}if(!c[b]){c[b]=1;a=this.dataHashes[b]=SC.clone(a,YES)}return a},readEditableProperty:function(c,a){var f=this.readEditableDataHash(c),e=this.editables[c],b=f[a];if(e===1){e=this.editables[c]={}}if(!e[a]){b=f[a];if(b&&b.isCopyable){b=f[a]=b.copy(YES)}e[a]=YES}return b},writeDataHash:function(c,f,a){if(f){this.dataHashes[c]=f}if(a){this.statuses[c]=a}var e=this.editables;if(!e){e=this.editables=[]}e[c]=1;var b=this;this._propagateToChildren(c,function(g){b.writeDataHash(g,null,a)});return this},removeDataHash:function(b,a){this.dataHashes[b]=null;this.statuses[b]=a||SC.Record.EMPTY;var c=this.editables;if(c){c[b]=0}return this},readStatus:function(a){this.readDataHash(a);return this.statuses[a]||SC.Record.EMPTY},peekStatus:function(a){return this.statuses[a]||SC.Record.EMPTY},writeStatus:function(b,a){return this.writeDataHash(b,null,a)},dataHashDidChange:function(f,b,a,k){if(!b){b=SC.Store.generateStoreKey()}var c,g,j,n;c=SC.typeOf(f)===SC.T_ARRAY;if(c){g=f.length}else{g=1;n=f}var e=this;for(j=0;j<g;j++){if(c){n=f[j]}this.revisions[n]=b;this._notifyRecordPropertyChange(n,a,k);this._propagateToChildren(n,function(o){e.dataHashDidChange(o,null,a,k)})}return this},_notifyRecordPropertyChange:function(t,f,q){var a=this.records,j=this.get("nestedStores"),k=SC.Store,c,b,g,p,o,e,u;g=j?j.length:0;for(p=0;p<g;p++){o=j[p];e=o.peekStatus(t);b=o.storeKeyEditState(t);if(b===k.INHERITED){o._notifyRecordPropertyChange(t,f,q)}else{if(e&SC.Record.BUSY){if(o.get("hasChanges")){throw k.CHAIN_CONFLICT_ERROR}o.reset()}}}var n=this.recordPropertyChanges;if(!n){n=this.recordPropertyChanges={storeKeys:SC.CoreSet.create(),records:SC.CoreSet.create(),hasDataChanges:SC.CoreSet.create(),propertyForStoreKeys:{}}}n.storeKeys.add(t);if(a&&(c=a[t])){n.records.push(t);if(!f){n.hasDataChanges.push(t)}if(q){if(!(u=n.propertyForStoreKeys[t])){u=n.propertyForStoreKeys[t]=SC.CoreSet.create()}if(u!=="*"){u.add(q)}}else{n.propertyForStoreKeys[t]="*"}}this.invokeOnce(this.flush);return this},flush:function(){if(!this.recordPropertyChanges){return this}var n=this.recordPropertyChanges,k=n.storeKeys,q=n.hasDataChanges,a=n.records,g=n.propertyForStoreKeys,e=SC.CoreSet.create(),c,b,f,o,j,p,t;k.forEach(function(u){if(a.contains(u)){f=q.contains(u)?NO:YES;c=this.records[u];t=g?g[u]:null;if(t==="*"){t=null}a.remove(u);if(c){c.storeDidChangeProperties(f,t)}}b=SC.Store.recordTypeFor(u);e.add(b)},this);if(k.get("length")>0){this._notifyRecordArrays(k,e)}k.clear();q.clear();a.clear();this.recordPropertyChanges.propertyForStoreKeys={};return this},reset:function(){this.dataHashes={};this.revisions={};this.statuses={};this.chainedChanges=this.locks=this.editables=null;this.changelog=null;this.recordErrors=null;this.queryErrors=null;var c=this.get("dataSource");if(c&&c.reset){c.reset()}var a=this.records,b;if(a){for(b in a){if(!a.hasOwnProperty(b)){continue}this._notifyRecordPropertyChange(parseInt(b,10),NO)}}this.set("hasChanges",NO)},commitChangesFromNestedStore:function(n,B,e){if(!e){this._verifyLockRevisions(B,n.locks)}var v=B.length,u,g,c,p,f,b,k,a,w,z,j,q,o;b=this.revisions;c=this.dataHashes;p=this.statuses;f=this.editables;k=this.parentRecords?this.parentRecords:this.parentRecords={};a=this.childRecords?this.childRecords:this.childRecords={};if(!f){f=this.editables=[]}w=n.dataHashes;j=n.revisions;z=n.statuses;q=n.parentRecords||{};o=n.childRecords||{};for(u=0;u<v;u++){g=B[u];c[g]=w[g];p[g]=z[g];b[g]=j[g];k[g]=q[g];a[g]=o[g];f[g]=0;this._notifyRecordPropertyChange(g,NO)}var t=this.changelog,A=n.changelog;if(A){if(!t){t=this.changelog=SC.CoreSet.create()}t.addEach(A)}this.changelog=t;if(!this.get("parentStore")){this.flush()}return this},_verifyLockRevisions:function(g,k){var a=g.length,c=this.revisions,f,j,e,b;if(k&&c){for(f=0;f<a;f++){j=g[f];e=k[j]||1;b=c[j]||1;if(e<b){throw SC.Store.CHAIN_CONFLICT_ERROR}}}return this},find:function(b,a){if(SC.typeOf(b)===SC.T_STRING){b=SC.objectForPropertyPath(b)}if((arguments.length===1)&&!(b&&b.get&&b.get("isRecord"))){if(!b){throw new Error("SC.Store#find() must pass recordType or query")}if(!b.isQuery){b=SC.Query.local(b)}return this._findQuery(b,YES,YES)}else{return this._findRecord(b,a)}},findAll:function(c,a,b){SC.Logger.warn("SC.Store#findAll() will be removed in a future version of SproutCore.  Use SC.Store#find() instead");if(!c||!c.isQuery){c=SC.Query.local(c,a,b)}return this._findQuery(c,YES,YES)},_findQuery:function(g,a,f){var b=this._scst_recordArraysByQuery,e=SC.guidFor(g),c,j;if(!b){b=this._scst_recordArraysByQuery={}}c=b[e];if(!c&&a){b[e]=c=SC.RecordArray.create({store:this,query:g});j=this.get("recordArrays");if(!j){this.set("recordArrays",j=SC.Set.create())}j.add(c);if(f){this.refreshQuery(g)}}this.flush();return c},_findRecord:function(c,b){var a;if(c&&c.get&&c.get("isRecord")){a=c.get("storeKey")}else{a=b?c.storeKeyFor(b):null}if(a&&(this.readStatus(a)===SC.Record.EMPTY)){a=this.retrieveRecord(c,b)}return a?this.materializeRecord(a):null},recordArrayWillDestroy:function(b){var a=this._scst_recordArraysByQuery,c=this.get("recordArrays");if(a){delete a[SC.guidFor(b.get("query"))]}if(c){c.remove(b)}return this},refreshQuery:function(e){if(!e){throw new Error("refreshQuery() requires a query")}var a=this._scst_recordArraysByQuery,c=a?a[SC.guidFor(e)]:null,b=this._getDataSource();if(b&&b.fetch){if(c){c.storeWillFetchQuery(e)}b.fetch.call(b,this,e)}return this},_notifyRecordArrays:function(b,a){var c=this.get("recordArrays");if(!c){return this}c.forEach(function(e){if(e){e.storeDidChangeStoreKeys(b,a)}},this);return this},recordsFor:function(g){var e=[],a=g.storeKeysById(),f,c,b;for(f in a){c=a[f];if(this.readStatus(c)!==SC.RECORD_EMPTY){e.push(c)}}if(e.length>0){b=SC.RecordArray.create({store:this,storeKeys:e})}else{b=e}return b},_TMP_REC_ATTRS:{},materializeRecord:function(e){var a=this.records,c,f,b;if(!a){a=this.records={}}c=a[e];if(c){return c}f=SC.Store.recordTypeFor(e);if(!f){return null}b=this._TMP_REC_ATTRS;b.storeKey=e;b.store=this;c=a[e]=f.create(b);return c},createRecord:function(b,e,a){var n,o,c,k=SC.Record,f,j,g;if(!a&&(n=b.prototype.primaryKey)){a=e[n];j=b.prototype[n]?b.prototype[n].defaultValue:null;if(!a&&SC.typeOf(j)===SC.T_FUNCTION){a=e[n]=j()}}o=a?b.storeKeyFor(a):SC.Store.generateStoreKey();c=this.readStatus(o);if((c&k.BUSY)||(c&k.READY)||(c===k.DESTROYED_DIRTY)){throw a?k.RECORD_EXISTS_ERROR:k.BAD_STATE_ERROR}else{if(!a&&(c===SC.DESTROYED_CLEAN||c===SC.ERROR)){throw k.BAD_STATE_ERROR}}this.writeDataHash(o,(e?e:{}),k.READY_NEW);SC.Store.replaceRecordTypeFor(o,b);this.dataHashDidChange(o);f=this.changelog;if(!f){f=SC.Set.create()}f.add(o);this.changelog=f;if(this.get("commitRecordsAutomatically")){this.invokeLast(this.commitRecords)}g=this.materializeRecord(o);if(g){g.propagateToAggregates()}return g},createRecords:function(e,n,a){var j=[],c,b,f,g=n.length,k;f=SC.typeOf(e)===SC.T_ARRAY;if(!f){c=e}for(k=0;k<g;k++){if(f){c=e[k]||SC.Record}b=a?a[k]:undefined;j.push(this.createRecord(c,n[k],b))}return j},unloadRecord:function(j,g,f,c){if(f===undefined){f=j.storeKeyFor(g)}var b=this.readStatus(f),a=SC.Record;c=c||a.EMPTY;if((b===a.BUSY_DESTROYING)||(b&a.DESTROYED)){return this}else{if(b&a.BUSY){throw a.BUSY_ERROR}else{b=c}}this.removeDataHash(f,b);this.dataHashDidChange(f);var e=this;this._propagateToChildren(f,function(k){e.unloadRecord(null,null,k,c)});return this},unloadRecords:function(e,a,j,f){var k,g,n,b,c,o;if(j===undefined){g=SC.typeOf(e)===SC.T_ARRAY;if(!g){c=e}if(a===undefined){k=g?e.length:1;for(n=0;n<k;n++){if(g){c=e[n]}j=this.storeKeysFor(c);this.unloadRecords(undefined,undefined,j,f)}}else{k=a.length;for(n=0;n<k;n++){if(g){c=e[n]||SC.Record}b=a?a[n]:undefined;this.unloadRecord(c,b,undefined,f)}}}else{k=j.length;for(n=0;n<k;n++){o=j?j[n]:undefined;this.unloadRecord(undefined,undefined,o,f)}}return this},destroyRecord:function(j,g,f){if(f===undefined){f=j.storeKeyFor(g)}var b=this.readStatus(f),c,a=SC.Record;if((b===a.BUSY_DESTROYING)||(b&a.DESTROYED)){return this}else{if(b===a.EMPTY){throw a.NOT_FOUND_ERROR}else{if(b&a.BUSY){throw a.BUSY_ERROR}else{if(b===a.READY_NEW){b=a.DESTROYED_CLEAN}else{b=a.DESTROYED_DIRTY}}}}this.writeStatus(f,b);this.dataHashDidChange(f);c=this.changelog;if(!c){c=this.changelog=SC.Set.create()}((b&a.DIRTY)?c.add(f):c.remove(f));this.changelog=c;if(this.get("commitRecordsAutomatically")){this.invokeLast(this.commitRecords)}var e=this;this._propagateToChildren(f,function(k){e.destroyRecord(null,null,k)});return this},destroyRecords:function(e,a,g){var j,f,k,b,c,n;if(g===undefined){j=a.length;f=SC.typeOf(e)===SC.T_ARRAY;if(!f){c=e}for(k=0;k<j;k++){if(f){c=e[k]||SC.Record}b=a?a[k]:undefined;this.destroyRecord(c,b,undefined)}}else{j=g.length;for(k=0;k<j;k++){n=g?g[k]:undefined;this.destroyRecord(undefined,undefined,n)}}return this},registerChildToParent:function(c,j,g){var f,b,e,k,a;b=this.childRecords||{};f=this.parentRecords||{};e=b[j];if(e){k=f[e];delete k[j]}a=f[c]||{};a[j]=g||YES;f[c]=a;b[j]=c;this.writeStatus(j,this.statuses[c]);this.childRecords=b;this.parentRecords=f},materializeParentRecord:function(c){var b,a;if(SC.none(c)){return null}a=this.childRecords;b=a?this.childRecords[c]:null;if(SC.none(b)){return null}return this.materializeRecord(b)},parentStoreKeyExists:function(b){if(SC.none(b)){return}var a=this.childRecords||{};return a[b]},_propagateToChildren:function(e,c){if(SC.none(this.parentRecords)){return}var b=this.parentRecords[e]||{};if(SC.none(c)){return}for(var a in b){if(b.hasOwnProperty(a)){c(a)}}},recordDidChange:function(k,j,g,e,c){if(g===undefined){g=k.storeKeyFor(j)}var b=this.readStatus(g),f,a=SC.Record;if(b&a.BUSY){throw a.BUSY_ERROR}else{if(!(b&a.READY)){throw a.NOT_FOUND_ERROR}else{if(b!=a.READY_NEW){this.writeStatus(g,a.READY_DIRTY)}}}this.dataHashDidChange(g,null,c,e);f=this.changelog;if(!f){f=this.changelog=SC.Set.create()}f.add(g);this.changelog=f;if(this.get("commitRecordsAutomatically")){this.invokeLast(this.commitRecords)}return this},recordsDidChange:function(e,a,g){var j,f,k,b,c,n;if(g===undefined){j=a.length;f=SC.typeOf(e)===SC.T_ARRAY;if(!f){c=e}for(k=0;k<j;k++){if(f){c=e[k]||SC.Record}b=a?a[k]:undefined;n=g?g[k]:undefined;this.recordDidChange(c,b,n)}}else{j=g.length;for(k=0;k<j;k++){n=g?g[k]:undefined;this.recordDidChange(undefined,undefined,n)}}return this},retrieveRecords:function(g,t,b,c,z){var q=this._getDataSource(),k=SC.typeOf(g)===SC.T_ARRAY,p=SC.typeOf(z)===SC.T_ARRAY,v=(!b)?t.length:b.length,A=[],w=SC.Store.generateStoreKey(),j=SC.Record,a,o,f,u,n,e;if(!k){a=g}for(o=0;o<v;o++){if(b){f=b[o]}else{if(k){a=g[o]}f=a.storeKeyFor(t[o])}e=p?z[o]:z;u=this.readStatus(f);if((u==j.EMPTY)||(u==j.ERROR)||(u==j.DESTROYED_CLEAN)){this.writeStatus(f,j.BUSY_LOADING);this.dataHashDidChange(f,w,YES);A.push(f);this._setCallbackForStoreKey(f,e,p,b)}else{if(c){if(u&j.READY){this.writeStatus(f,j.BUSY_REFRESH|(u&3));this.dataHashDidChange(f,w,YES);A.push(f);this._setCallbackForStoreKey(f,e,p,b)}else{if((u==j.BUSY_DESTROYING)||(u==j.BUSY_CREATING)||(u==j.BUSY_COMMITTING)){throw j.BUSY_ERROR}else{if(u==j.DESTROYED_DIRTY){throw j.BAD_STATE_ERROR}}}}}}n=NO;if(q){n=q.retrieveRecords.call(q,this,A,t)}if(!n){v=A.length;w=SC.Store.generateStoreKey();for(o=0;o<v;o++){f=A[o];u=this.readStatus(f);if(u===j.BUSY_LOADING){this.writeStatus(f,j.ERROR);this.dataHashDidChange(f,w,YES)}else{if(u&j.BUSY_REFRESH){this.writeStatus(f,j.READY|(u&3));this.dataHashDidChange(f,w,YES)}}}A.length=0}return A},_TMP_RETRIEVE_ARRAY:[],_callback_queue:{},_setCallbackForStoreKey:function(e,f,b,c){var a=this._callback_queue;if(b){a[e]={callback:f,otherKeys:c}}else{a[e]=f}},_retreiveCallbackForStoreKey:function(c){var a=this._callback_queue,f=a[c],e,b;if(f){if(SC.typeOf(f)===SC.T_FUNCTION){f.call();delete a[c]}else{if(SC.typeOf(f)==SC.T_HASH){f.completed=YES;b=f.storeKeys;b.forEach(function(g){if(!a[g].completed){e=YES}});if(e){f.callback.call();b.forEach(function(g){delete a[g]})}}}}},_cancelCallback:function(b){var a=this._callback_queue;if(a[b]){delete a[b]}},retrieveRecord:function(j,g,b,c,f){var e=this._TMP_RETRIEVE_ARRAY,a;if(b){e[0]=b;b=e;g=null}else{e[0]=g;g=e}a=this.retrieveRecords(j,g,b,c,f);e.length=0;return a[0]},refreshRecord:function(e,c,a,b){return !!this.retrieveRecord(e,c,a,YES,b)},refreshRecords:function(b,c,e,f){var a=this.retrieveRecords(b,c,e,YES,f);return a&&a.length>0},commitRecords:function(g,u,b,z,C){var t=this._getDataSource(),k=SC.typeOf(g)===SC.T_ARRAY,p=SC.typeOf(C)===SC.T_ARRAY,c=[],o=[],q=[],A=SC.Store.generateStoreKey(),j=SC.Record,a,n,f,v,D,B,w,e;if(!g&&!u&&!b){b=this.changelog}w=b?b.get("length"):(u?u.get("length"):0);for(n=0;n<w;n++){if(b){f=b[n]}else{if(k){a=g[n]||SC.Record}else{a=g}f=a.storeKeyFor(u[n])}e=p?C[n]:C;v=this.readStatus(f);if((v==j.EMPTY)||(v==j.ERROR)){throw j.NOT_FOUND_ERROR}else{if(v==j.READY_NEW){this.writeStatus(f,j.BUSY_CREATING);this.dataHashDidChange(f,A,YES);c.push(f);this._setCallbackForStoreKey(f,e,p,b)}else{if(v==j.READY_DIRTY){this.writeStatus(f,j.BUSY_COMMITTING);this.dataHashDidChange(f,A,YES);o.push(f);this._setCallbackForStoreKey(f,e,p,b)}else{if(v==j.DESTROYED_DIRTY){this.writeStatus(f,j.BUSY_DESTROYING);this.dataHashDidChange(f,A,YES);q.push(f);this._setCallbackForStoreKey(f,e,p,b)}else{if(v==j.DESTROYED_CLEAN){this.dataHashDidChange(f,A,YES)}}}}}}if(t&&(w>0||z)){B=t.commitRecords.call(t,this,c,o,q,z)}if(B&&!g&&!u){if(b===this.changelog){this.changelog=null}else{this.changelog.removeEach(b)}}return B},commitRecord:function(j,g,b,c,f){var e=this._TMP_RETRIEVE_ARRAY,a;if(g===undefined&&b===undefined){return NO}if(b!==undefined){e[0]=b;b=e;g=null}else{e[0]=g;g=e}a=this.commitRecords(j,g,b,c,f);e.length=0;return a},cancelRecords:function(f,b,n){var a=this._getDataSource(),j=SC.typeOf(f)===SC.T_ARRAY,p=SC.Record,o=[],g,k,q,c,e,t;k=(n===undefined)?b.length:n.length;for(q=0;q<k;q++){if(j){e=f[q]||SC.Record}else{e=f||SC.Record}c=b?b[q]:undefined;if(n===undefined){t=e.storeKeyFor(c)}else{t=n?n[q]:undefined}if(t){g=this.readStatus(t);if((g==p.EMPTY)||(g==p.ERROR)){throw p.NOT_FOUND_ERROR}o.push(t);this._cancelCallback(t)}}if(a){a.cancel.call(a,this,o)}return this},cancelRecord:function(f,e,b){var c=this._TMP_RETRIEVE_ARRAY,a;if(b!==undefined){c[0]=b;b=c;e=null}else{c[0]=e;e=c}a=this.cancelRecords(f,e,b);c.length=0;return this},loadRecord:function(j,e,g){var a=SC.Record,c,b,f;j=j||SC.Record;b=j.prototype.primaryKey;g=g||e[b];c=f=j.storeKeyFor(g);if(this.readStatus(f)&a.BUSY){this.dataSourceDidComplete(f,e,g)}else{this.pushRetrieve(j,g,e,f)}return c},loadRecords:function(e,t,a){var g=SC.typeOf(e)===SC.T_ARRAY,j=t.get("length"),k=[],n=SC.Record,c,b,p,o,f,q;if(!g){c=e||SC.Record;p=c.prototype.primaryKey}for(o=0;o<j;o++){f=t.objectAt(o);if(g){c=e.objectAt(o)||SC.Record;p=c.prototype.primaryKey}b=(a)?a.objectAt(o):f[p];k[o]=this.loadRecord(c,f,b)}return k},readError:function(a){var b=this.recordErrors;return b?b[a]:undefined},readQueryError:function(a){var b=this.queryErrors;return b?b[SC.guidFor(a)]:undefined},dataSourceDidCancel:function(c){var b=this.readStatus(c),a=SC.Record;if(!(b&a.BUSY)){throw a.BAD_STATE_ERROR}switch(b){case a.BUSY_LOADING:b=a.EMPTY;break;case a.BUSY_CREATING:b=a.READY_NEW;break;case a.BUSY_COMMITTING:b=a.READY_DIRTY;break;case a.BUSY_REFRESH_CLEAN:b=a.READY_CLEAN;break;case a.BUSY_REFRESH_DIRTY:b=a.READY_DIRTY;break;case a.BUSY_DESTROYING:b=a.DESTROYED_DIRTY;break;default:throw a.BAD_STATE_ERROR}this.writeStatus(c,b);this.dataHashDidChange(c,null,YES);this._cancelCallback(c);return this},dataSourceDidComplete:function(j,g,f){var c=this.readStatus(j),b=SC.Record,e;if(!(c&b.BUSY)){throw b.BAD_STATE_ERROR}if(c===b.BUSY_DESTROYING){throw b.BAD_STATE_ERROR}else{c=b.READY_CLEAN}this.writeStatus(j,c);if(g){this.writeDataHash(j,g,c)}if(f){SC.Store.replaceIdFor(j,f)}e=g||f?NO:YES;this.dataHashDidChange(j,null,e);var a=this.materializeRecord(j);if(a!=null){a.notifyPropertyChange("status")}this._retreiveCallbackForStoreKey(j);return this},dataSourceDidDestroy:function(e){var c=this.readStatus(e),b=SC.Record;if(!(c&b.BUSY)){throw b.BAD_STATE_ERROR}else{c=b.DESTROYED_CLEAN}this.removeDataHash(e,c);this.dataHashDidChange(e);var a=this.materializeRecord(e);if(a!=null){a.notifyPropertyChange("status")}this._retreiveCallbackForStoreKey(e);return this},dataSourceDidError:function(f,e){var c=this.readStatus(f),g=this.recordErrors,b=SC.Record;if(!(c&b.BUSY)){throw b.BAD_STATE_ERROR}else{c=b.ERROR}if(e&&e.isError){if(!g){g=this.recordErrors=[]}g[f]=e}this.writeStatus(f,c);this.dataHashDidChange(f,null,YES);var a=this.materializeRecord(f);if(a!=null){a.notifyPropertyChange("status")}this._retreiveCallbackForStoreKey(f);return this},pushRetrieve:function(g,f,c,e){var b=SC.Record,a;if(e===undefined){e=g.storeKeyFor(f)}a=this.readStatus(e);if(a==b.EMPTY||a==b.ERROR||a==b.READY_CLEAN||a==b.DESTROYED_CLEAN){a=b.READY_CLEAN;if(c===undefined){this.writeStatus(e,a)}else{this.writeDataHash(e,c,a)}this.dataHashDidChange(e);return e}return NO},pushDestroy:function(f,e,c){var b=SC.Record,a;if(c===undefined){c=f.storeKeyFor(e)}a=this.readStatus(c);if(a==b.EMPTY||a==b.ERROR||a==b.READY_CLEAN||a==b.DESTROYED_CLEAN){a=b.DESTROYED_CLEAN;this.removeDataHash(c,a);this.dataHashDidChange(c);return c}return NO},pushError:function(j,g,c,e){var b=SC.Record,a,f=this.recordErrors;if(e===undefined){e=j.storeKeyFor(g)}a=this.readStatus(e);if(a==b.EMPTY||a==b.ERROR||a==b.READY_CLEAN||a==b.DESTROYED_CLEAN){a=b.ERROR;if(c&&c.isError){if(!f){f=this.recordErrors=[]}f[e]=c}this.writeStatus(e,a);this.dataHashDidChange(e,null,YES);return e}return NO},loadQueryResults:function(c,a){if(c.get("location")===SC.Query.LOCAL){throw new Error("Cannot load query results for a local query")}var b=this._findQuery(c,YES,NO);if(b){b.set("storeKeys",a)}this.dataSourceDidFetchQuery(c);return this},dataSourceDidFetchQuery:function(a){return this._scstore_dataSourceDidFetchQuery(a,YES)},_scstore_dataSourceDidFetchQuery:function(e,a){var c=this._findQuery(e,a,NO),b=this.get("nestedStores"),f=b?b.get("length"):0;if(c){c.storeDidFetchQuery(e)}while(--f>=0){b[f]._scstore_dataSourceDidFetchQuery(e,NO)}return this},dataSourceDidCancelQuery:function(a){return this._scstore_dataSourceDidCancelQuery(a,YES)},_scstore_dataSourceDidCancelQuery:function(e,a){var c=this._findQuery(e,a,NO),b=this.get("nestedStores"),f=b?b.get("length"):0;if(c){c.storeDidCancelQuery(e)}while(--f>=0){b[f]._scstore_dataSourceDidCancelQuery(e,NO)}return this},dataSourceDidErrorQuery:function(b,a){var c=this.queryErrors;if(a&&a.isError){if(!c){c=this.queryErrors={}}c[SC.guidFor(b)]=a}return this._scstore_dataSourceDidErrorQuery(b,YES)},_scstore_dataSourceDidErrorQuery:function(e,a){var c=this._findQuery(e,a,NO),b=this.get("nestedStores"),f=b?b.get("length"):0;if(c){c.storeDidErrorQuery(e)}while(--f>=0){b[f]._scstore_dataSourceDidErrorQuery(e,NO)}return this},init:function(){arguments.callee.base.apply(this,arguments);this.reset()},toString:function(){var b=this.get("name");if(!b){return arguments.callee.base.apply(this,arguments)}else{var a=arguments.callee.base.apply(this,arguments);return"%@ (%@)".fmt(b,a)}},idFor:function(a){return SC.Store.idFor(a)},recordTypeFor:function(a){return SC.Store.recordTypeFor(a)},storeKeyFor:function(b,a){return b.storeKeyFor(a)},storeKeyExists:function(b,a){return b.storeKeyExists(a)},storeKeysFor:function(g){var a=[],f=g&&g.isEnumerable,c,e,b;if(!this.statuses){return a}for(e in SC.Store.recordTypesByStoreKey){c=SC.Store.recordTypesByStoreKey[e];if(f){b=g.contains(c)}else{b=c===g}if(b&&this.statuses[e]){a.push(parseInt(e,10))}}return a},storeKeys:function(){var a=[],b;if(!this.statuses){return a}for(b in this.statuses){if(this.statuses[b]!=SC.Record.EMPTY){a.push(parseInt(b,10))}}return a},statusString:function(a){var b=this.materializeRecord(a);return b.statusString()}});SC.Store.mixin({CHAIN_CONFLICT_ERROR:new Error("Nested Store Conflict"),NO_PARENT_STORE_ERROR:new Error("Parent Store Required"),NESTED_STORE_UNSUPPORTED_ERROR:new Error("Unsupported In Nested Store"),NESTED_STORE_RETRIEVE_DIRTY_ERROR:new Error("Cannot Retrieve Dirty Record in Nested Store"),EDITABLE:"editable",LOCKED:"locked",INHERITED:"inherited",idsByStoreKey:[],recordTypesByStoreKey:{},queriesByStoreKey:[],nextStoreKey:1,generateStoreKey:function(){return this.nextStoreKey++},idFor:function(a){return this.idsByStoreKey[a]},queryFor:function(a){return this.queriesByStoreKey[a]},recordTypeFor:function(a){return this.recordTypesByStoreKey[a]},replaceIdFor:function(c,a){var e=this.idsByStoreKey[c],f,b;if(e!==a){f=this.recordTypeFor(c);if(!f){throw new Error("replaceIdFor: storeKey %@ does not exist".fmt(c))}this.idsByStoreKey[c]=a;b=f.storeKeysById();delete b[e];b[a]=c}return this},replaceRecordTypeFor:function(a,b){this.recordTypesByStoreKey[a]=b;return this}});SC.Store.prototype.nextStoreIndex=1;SC.Store._getDefaultStore=function(){var a=this._store;if(!a){this._store=a=SC.Store.create()}return a};SC.Store.updateRecords=function(g,j,k,c){SC.Logger.warn("SC.Store.updateRecords() is deprecated.  Use loadRecords() instead");var e=this._getDefaultStore(),b=g.length,a,f;if(!k){k=[];for(a=0;a<b;a++){k[a]=g[a].recordType}}f=e.loadRecords(k,g);b=f.length;for(a=0;a<b;a++){f[a]=e.materializeRecord(f[a])}return f};SC.Store.find=function(a,b){return this._getDefaultStore().find(b,a)};SC.Store.findAll=function(a,b){return this._getDefaultStore().findAll(a,b)};sc_require("system/store");SC.NestedStore=SC.Store.extend({hasChanges:NO,parentStore:null,isNested:YES,lockOnRead:YES,locks:null,chainedChanges:null,find:function(a){if(a&&a.isQuery&&a.get("location")!==SC.Query.LOCAL){throw"SC.Store#find() can only accept LOCAL queries in nested stores"}return arguments.callee.base.apply(this,arguments)},commitChanges:function(b){if(this.get("hasChanges")){var a=this.get("parentStore");a.commitChangesFromNestedStore(this,this.chainedChanges,b)}this.reset();return this},discardChanges:function(){var c,g;if((c=this.records)&&(g=this.locks)){var b=this.get("parentStore"),k=b.revisions;var j=this.revisions,f,e,a;for(f in c){if(!c.hasOwnProperty(f)){continue}if(!(e=g[f])){continue}a=k[f];if((a!==e)||(j[f]>a)){this._notifyRecordPropertyChange(parseInt(f,10))}}}this.reset();this.flush();return this},destroy:function(){this.discardChanges();var a=this.get("parentStore");if(a){a.willDestroyNestedStore(this)}arguments.callee.base.apply(this,arguments);return this},reset:function(){var c,e,a;var b=this.get("parentStore");if(!b){throw SC.Store.NO_PARENT_STORE_ERROR}this.dataHashes=SC.beget(b.dataHashes);this.revisions=SC.beget(b.revisions);this.statuses=SC.beget(b.statuses);this.childRecords=b.childRecords?SC.beget(b.childRecords):{};this.parentRecords=b.parentRecords?SC.beget(b.parentRecords):{};this.chainedChanges=this.locks=this.editables=null;this.changelog=null;this.set("hasChanges",NO)},refreshQuery:function(b){var a=this.get("parentStore");if(a){a.refreshQuery(b)}return this},readError:function(b){var a=this.get("parentStore");return a?a.readError(b):null},readQueryError:function(b){var a=this.get("parentStore");return a?a.readQueryError(b):null},storeKeyEditState:function(b){var c=this.editables,a=this.locks;return(c&&c[b])?SC.Store.EDITABLE:(a&&a[b])?SC.Store.LOCKED:SC.Store.INHERITED},_lock:function(o){var p=this.locks,g,k,e,a,q,j,f,n;if(p&&p[o]){return this}if(!p){p=this.locks=[]}k=this.editables;if(k){k[o]=0}var b=this.get("parentStore"),c;while(b&&(c=b.storeKeyEditState(o))===SC.Store.INHERITED){b=b.get("parentStore")}if(b&&c===SC.Store.EDITABLE){e=this.childRecords[o];if(e){this._lock(e);a=this.parentRecords[e];if(a){q=a[o];j=q?SC.tupleForPropertyPath(q,this.dataHashes[e]):null;if(j){f=j[0];n=j[1]}this.dataHashes[o]=f&&n?f[n]:null}}else{this.dataHashes[o]=SC.clone(b.dataHashes[o],YES)}if(!k){k=this.editables=[]}k[o]=1}else{this.dataHashes[o]=b.dataHashes[o]}this.statuses[o]=this.statuses[o];g=this.revisions[o]=this.revisions[o];p[o]=g||1;return this},readDataHash:function(a){if(this.get("lockOnRead")){this._lock(a)}return this.dataHashes[a]},readEditableDataHash:function(a){this._lock(a);return arguments.callee.base.apply(this,arguments)},writeDataHash:function(e,g,b){var c=this.locks,j=NO,a;if(g){this.dataHashes[e]=g}else{this._lock(e);j=YES}if(b){this.statuses[e]=b}else{if(!j){this.statuses[e]=(this.statuses[e]||SC.Record.READY_NEW)}}if(!j){a=this.revisions[e]=this.revisions[e];if(!c){c=this.locks=[]}if(!c[e]){c[e]=a||1}}var f=this.editables;if(!f){f=this.editables=[]}f[e]=1;return this},removeDataHash:function(c,a){var b=this.locks;if(!b){b=this.locks=[]}if(!b[c]){b[c]=this.revisions[c]||1}return arguments.callee.base.apply(this,arguments)},dataHashDidChange:function(e,b,a,k){if(!b){b=SC.Store.generateStoreKey()}var c,f,j,n;c=SC.typeOf(e)===SC.T_ARRAY;if(c){f=e.length}else{f=1;n=e}var g=this.chainedChanges;if(!g){g=this.chainedChanges=SC.Set.create()}for(j=0;j<f;j++){if(c){n=e[j]}this._lock(n);this.revisions[n]=b;g.add(n);this._notifyRecordPropertyChange(n,a,k)}this.setIfChanged("hasChanges",YES);return this},commitChangesFromNestedStore:function(f,g,a){arguments.callee.base.apply(this,arguments);var b=this.get("parentStore"),k=b.revisions,c;var o=this.locks,j=this.chainedChanges,e,n;if(!o){o=this.locks=[]}if(!j){j=this.chainedChanges=SC.Set.create()}e=g.length;for(c=0;c<e;c++){n=g[c];if(!o[n]){o[n]=k[n]||1}j.add(n)}this.setIfChanged("hasChanges",j.get("length")>0);this.flush();return this},queryFor:function(c,a,b){return this.get("parentStore").queryFor(c,a,b)},findAll:function(f,b,e,c,a){if(!a){a=this}return this.get("parentStore").findAll(f,b,e,c,a)},retrieveRecords:function(g,t,b,c){var a=this.get("parentStore"),p,e,w,v=(!b)?t.length:b.length,n=SC.Record,u;if(c){for(p=0;p<v;p++){e=!b?a.storeKeyFor(g,t[p]):b[p];u=this.peekStatus(e);if(u&n.DIRTY){throw SC.Store.NESTED_STORE_RETRIEVE_DIRTY_ERROR}else{var j=this.dataHashes,o=this.revisions,k=this.statuses,q=this.editables,A=this.locks;var f=NO;var z=NO;if(j&&j.hasOwnProperty(e)){delete j[e];f=YES}if(o&&o.hasOwnProperty(e)){delete o[e];f=YES}if(q){delete q[e]}if(A){delete A[e]}if(k&&k.hasOwnProperty(e)){delete k[e];if(!f){z=YES}f=YES}if(f){this._notifyRecordPropertyChange(e,z)}}}}return a.retrieveRecords(g,t,b,c)},commitRecords:function(a,b,c){throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR},commitRecord:function(c,b,a){throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR},cancelRecords:function(a,b,c){throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR},cancelRecord:function(c,b,a){throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR},dataSourceDidCancel:function(a){throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR},dataSourceDidComplete:function(c,b,a){throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR},dataSourceDidDestroy:function(a){throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR},dataSourceDidError:function(b,a){throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR},pushRetrieve:function(e,c,a,b){throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR},pushDestroy:function(c,b,a){throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR},pushError:function(e,c,a,b){throw SC.Store.NESTED_STORE_UNSUPPORTED_ERROR}});sc_require("models/record");SC.RecordArray=SC.Object.extend(SC.Enumerable,SC.Array,{store:null,query:null,storeKeys:null,status:SC.Record.EMPTY,isEditable:function(){var a=this.get("query");return a?a.get("isEditable"):YES}.property("query").cacheable(),length:function(){this.flush();var a=this.get("storeKeys");return a?a.get("length"):0}.property("storeKeys").cacheable(),_scra_records:null,objectAt:function(a){this.flush();var g=this._scra_records,f=this.get("storeKeys"),b=this.get("store"),e,c;if(!f||!b){return undefined}if(g&&(c=g[a])){return c}if(!g){this._scra_records=g=[]}e=f.objectAt(a);if(e){if(b.peekStatus(e)===SC.Record.EMPTY){b.retrieveRecord(null,null,e)}g[a]=c=b.materializeRecord(e)}return c},forEach:function(k,e){this.flush();var f=this._scra_records,b=this.get("storeKeys"),g=this.get("store"),c=b?b.get("length"):0,j,n,a;if(!b||!g){return this}if(!f){f=this._scra_records=[]}if(!e){e=this}for(j=0;j<c;j++){a=f[j];if(!a){a=f[j]=g.materializeRecord(b.objectAt(j))}k.call(e,a,j,this)}return this},replace:function(b,j,g){this.flush();var f=this.get("storeKeys"),a=g?(g.get?g.get("length"):g.length):0,c,e;if(!f){throw"Unable to edit an SC.RecordArray that does not have its storeKeys property set."}if(!this.get("isEditable")){throw SC.RecordArray.NOT_EDITABLE}e=[];for(c=0;c<a;c++){e[c]=g.objectAt(c).get("storeKey")}f.replace(b,j,e);return this},contains:function(a){return this.indexOf(a)>=0},indexOf:function(b,a){if(!SC.kindOf(b,SC.Record)){SC.Logger.warn("Using indexOf on %@ with an object that is not an SC.Record".fmt(b));return -1}this.flush();var e=b.get("storeKey"),c=this.get("storeKeys");return c?c.indexOf(e,a):-1},lastIndexOf:function(b,a){if(!SC.kindOf(b,SC.Record)){SC.Logger.warn("Using lastIndexOf on %@ with an object that is not an SC.Record".fmt(b));return -1}this.flush();var e=b.get("storeKey"),c=this.get("storeKeys");return c?c.lastIndexOf(e,a):-1},add:function(a){if(!SC.kindOf(a,SC.Record)){return this}if(this.indexOf(a)<0){this.pushObject(a)}return this},remove:function(a){if(!SC.kindOf(a,SC.Record)){return this}this.removeObject(a);return this},find:function(a,b,c){if(b&&b.isQuery){return this.get("store").find(b.queryWithScope(this))}else{return a.apply(this,SC.$A(arguments).slice(1))}}.enhance(),refresh:function(){this.get("store").refreshQuery(this.get("query"));return this},reload:function(){this.flush(YES);return this},destroy:function(){if(!this.get("isDestroyed")){this.get("store").recordArrayWillDestroy(this)}arguments.callee.base.apply(this,arguments)},storeWillFetchQuery:function(c){var b=this.get("status"),a=SC.Record;if((b===a.EMPTY)||(b===a.ERROR)){b=a.BUSY_LOADING}if(b&a.READY){b=a.BUSY_REFRESH}this.setIfChanged("status",b);return this},storeDidFetchQuery:function(a){this.setIfChanged("status",SC.Record.READY_CLEAN);return this},storeDidCancelQuery:function(c){var b=this.get("status"),a=SC.Record;if(b===a.BUSY_LOADING){b=a.EMPTY}else{if(b===a.BUSY_REFRESH){b=a.READY_CLEAN}}this.setIfChanged("status",b);return this},storeDidErrorQuery:function(a){this.setIfChanged("status",SC.Record.ERROR);return this},storeDidChangeStoreKeys:function(b,a){var c=this.get("query");if(c.get("location")!==SC.Query.LOCAL){return this}if(!c.containsRecordTypes(a)){return this}var e=this._scq_changedStoreKeys;if(!e){e=this._scq_changedStoreKeys=SC.IndexSet.create()}e.addEach(b);this.set("needsFlush",YES);if(this.get("storeKeys")){this.flush()}return this},flush:function(a){if(this._insideFlush){this.set("needsFlush",YES);return this}if(!this.get("needsFlush")&&!a){return this}this.set("needsFlush",NO);var o=this.get("query"),t=this.get("store");if(!t||!o||o.get("location")!==SC.Query.LOCAL){return this}this._insideFlush=YES;var k=this.get("storeKeys"),g=this._scq_changedStoreKeys,j=NO,p=SC.Record,w=[],b=new Date(),e,f,c,z,v,n;var q=k;if(k&&!a){if(g){g.forEach(function(A){if(w.length>0||new Date()-b>SC.RecordArray.QUERY_MATCHING_THRESHOLD){w.push(A);return}f=t.peekStatus(A);if(!(f&p.EMPTY)&&!((f&p.DESTROYED)||(f===p.BUSY_DESTROYING))){e=t.materializeRecord(A);n=!!(e&&o.contains(e))}else{n=NO}if(n){if(k.indexOf(A)<0){if(!j){k=k.copy()}k.pushObject(A)}}else{if(k.indexOf(A)>=0){if(!j){k=k.copy()}k.removeObject(A)}}},this);j=YES}}else{if(v=o.get("scope")){z=v.flush().get("storeKeys")}else{if(c=o.get("expandedRecordTypes")){z=SC.IndexSet.create();c.forEach(function(A){z.addEach(t.storeKeysFor(c))})}}k=[];z.forEach(function(A){if(w.length>0||new Date()-b>SC.RecordArray.QUERY_MATCHING_THRESHOLD){w.push(A);return}f=t.peekStatus(A);if(!(f&p.EMPTY)&&!((f&p.DESTROYED)||(f===p.BUSY_DESTROYING))){e=t.materializeRecord(A);if(e&&o.contains(e)){k.push(A)}}});j=YES}if(w.length>0){var u=this;window.setTimeout(function(){SC.run(function(){if(!u||u.get("isDestroyed")){return}u.set("needsFlush",YES);u._scq_changedStoreKeys=SC.IndexSet.create().addEach(w);u.flush()})},1)}if(g){g.clear()}if(j){if(k&&(k===q)){k=k.copy()}k=SC.Query.orderStoreKeys(k,o,t);if(SC.compare(q,k)!==0){this.set("storeKeys",SC.clone(k))}}this._insideFlush=NO;return this},needsFlush:YES,isError:function(){return this.get("status")&SC.Record.ERROR}.property("status").cacheable(),errorValue:function(){return this.get("isError")?SC.val(this.get("errorObject")):null}.property("isError").cacheable(),errorObject:function(){if(this.get("isError")){var a=this.get("store");return a.readQueryError(this.get("query"))||SC.Record.GENERIC_ERROR}else{return null}}.property("isError").cacheable(),propertyWillChange:function(b){if(b==="storeKeys"){var c=this.get("storeKeys");var a=c?c.get("length"):0;this.arrayContentWillChange(0,a,0)}return arguments.callee.base.apply(this,arguments)},_storeKeysDidChange:function(){var g=this.get("storeKeys");var e=this._prevStoreKeys,b,c,j=this._storeKeysContentDidChange,a=this._storeKeysStateDidChange;if(g===e){return}if(e){e.removeArrayObservers({target:this,willChange:this.arrayContentWillChange,didChange:this._storeKeysContentDidChange});b=e.get("length")}else{b=0}this._prevStoreKeys=g;if(g){g.addArrayObservers({target:this,willChange:this.arrayContentWillChange,didChange:this._storeKeysContentDidChange});c=g.get("length")}else{c=0}this._storeKeysContentDidChange(0,b,c)}.observes("storeKeys"),addArrayObservers:function(){this.flush();return SC.Array.addArrayObservers.apply(this,arguments)},_storeKeysContentDidChange:function(c,a,b){if(this._scra_records){this._scra_records.length=0}this.arrayContentDidChange(c,a,b)},init:function(){arguments.callee.base.apply(this,arguments);this._storeKeysDidChange()}});SC.RecordArray.mixin({NOT_EDITABLE:SC.Error.desc("SC.RecordArray is not editable"),QUERY_MATCHING_THRESHOLD:100});SC.Animatable={isAnimatable:YES,transitions:{},concatenatedProperties:["transitions"],style:{},_cssTransitionFor:{left:"left",top:"top",right:"right",bottom:"bottom",width:"width",height:"height",opacity:"opacity",transform:(SC.platform.supportsCSSTransforms?"-"+SC.platform.cssPrefix+"-transform":"transform")},_styleProperties:["display","transform"],_layoutStyles:SC.String.w("width height top bottom marginLeft marginTop left right zIndex minWidth maxWidth minHeight maxHeight centerX centerY opacity border borderTop borderRight borderBottom borderLeft"),_animationsToStart:{},_animationOrder:["top","left","bottom","right","width","height","centerX","centerY","opacity","display","transform"],initMixin:function(){this._animatable_original_didCreateLayer=this.didCreateLayer||function(){};this.didCreateLayer=this._animatable_didCreateLayer;this._animatable_original_willDestroyLayer=this.willDestroyLayer||function(){};this.willDestroyLayer=this._animatable_willDestroyLayer;this._animatable_original_willRemoveFromParent=this.willRemoveFromParent||function(){};this.willRemoveFromParent=this._animatable_will_remove_from_parent;this._animatable_original_hasAcceleratedLayer=this.hasAcceleratedLayer||function(){};this.hasAcceleratedLayer=this._animatable_hasAcceleratedLayer;this._animatable_original_animate=this.animate||function(){};this.animate=this._animatable_animate;this.addObserver("style",this,"styleDidChange");this._animateTickPixel.displayName="animate-tick";var b;if(SC.isArray(this.transitions)){var a={};for(b=0;b<this.transitions.length;b++){SC.mixin(a,this.transitions[b])}this.transitions=a}for(b in this.transitions){if(typeof this.transitions[b]=="number"){this.transitions[b]={duration:this.transitions[b]}}}this._animatableCurrentStyle=null;this._animators={};this._animatableSetCSS="";this._last_transition_css="";if(this._disableAnimation===undefined){this._disableAnimation=0}this._transitionCallbacks={};if(!SC.none(this.get("layer"))){var c=this._animatable_original_didCreateLayer;this._animatable_original_didCreateLayer=function(){};this.didCreateLayer();this._animatable_original_didCreateLayer=c}},_animatable_didCreateLayer:function(){this.resetAnimation();SC.Event.add(this.get("layer"),SC.platform.cssPrefix+"TransitionEnd",this,this.transitionEnd);SC.Event.add(this.get("layer"),"transitionend",this,this.transitionEnd);return this._animatable_original_didCreateLayer()},_animatable_willDestroyLayer:function(){SC.Event.remove(this.get("layer"),SC.platform.cssPrefix+"TransitionEnd",this,this.transitionEnd);SC.Event.remove(this.get("layer"),"transitionend",this,this.transitionEnd);return this._animatable_original_willDestroyLayer()},_animatable_will_remove_from_parent:function(){this.resetAnimation()},disableAnimation:function(){if(this._disableAnimation<1){this.updateStyle();this._disableAnimation=1;this.updateStyle()}else{this._disableAnimation++}},enableAnimation:function(){if(this._disableAnimation<=1){this.updateStyle();this._disableAnimation=0;this.updateStyle()}else{this._disableAnimation--}},adjust:function(o,p){if(!SC.none(p)){var q=o;o={};o[q]=p}else{o=SC.clone(o)}var a=SC.clone(this.get("style")),c=NO,j=SC.clone(this.get("layout")),b=NO;var t=this._styleProperties;for(var f in o){var k=NO;var n=(t.indexOf(f)>=0)?a:j;var e=n[f],g=o[f];if(g!==undefined&&e!==g){if(g===null){if(e!==undefined){k=YES}delete n[f]}else{n[f]=g;k=YES}}if(k){if(n===a){c=YES}else{b=YES}}}if(c){this.set("style",a)}if(b){this.set("layout",j)}return this},_animatable_animate:function(){this.disableAnimation();var a=this._animatable_original_animate.apply(this,arguments);this.enableAnimation();return a},transitionEnd:function(a){SC.run(function(){var b=a.originalEvent.propertyName,c=this._transitionCallbacks[b];if(c&&this._disableAnimation<=0){SC.Animatable.runCallback(c)}},this)},getCurrentJavaScriptStyles:function(){return this._animatableCurrentStyle},resetAnimation:function(){this._animatableCurrentStyle=null;this._stopJavaScriptAnimations();this.disableAnimation();this.updateStyle();this.enableAnimation();this.updateStyle()},_stopJavaScriptAnimations:function(){for(var a in this._animators){if(this._animators[a]&&this._animators[a].isQueued){SC.Animatable.removeTimer(this._animators[a])}}},_getStartStyleHash:function(k,j){var g=this.layout;this.layout=k;var e=this.computeParentDimensions();var c=this.computeFrameWithParentFrame(e);this.layout=g;var a={};for(var b in j){if(c){if(b=="left"){a[b]=c.x;continue}else{if(b=="top"){a[b]=c.y;continue}else{if(b=="right"){a[b]=e.width-c.x-c.width;continue}else{if(b=="bottom"){a[b]=e.height-c.y-c.height;continue}else{if(b=="width"){a[b]=c.width;continue}else{if(b=="height"){a[b]=c.height;continue}else{if(b=="centerX"){a[b]=c.x+(c.width/2)-(e.width/2);continue}else{if(b=="centerY"){a[b]=c.y+(c.height/2)-(e.height/2);continue}}}}}}}}}if(SC.none(a[b])){if(!SC.none(k[b])){a[b]=k[b]}else{a[b]=j[b]}}}return a},_TMP_CSS_TRANSITIONS:[],cssTimingStringFor:function(c){var b="linear";if(c.timing||SC.Animatable.defaultTimingFunction){var a=c.timing||SC.Animatable.defaultTimingFunction;if(SC.typeOf(a)!=SC.T_STRING){b="cubic-bezier("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"}else{b=a}}return b},styleDidChange:function(){this.invokeLast("updateStyle")},_animatable_hasAcceleratedLayer:function(){var b=this.transitions.left&&this.transitions.left.duration,a=this.transitions.top&&this.transitions.top.duration;if(b!==a){return NO}else{if((a||b)&&!SC.platform.supportsCSSTransitions){return NO}else{return this._animatable_original_hasAcceleratedLayer()}}}.property("wantsAcceleratedLayer","transitions"),updateStyle:function(){var L=this.get("layer");var v=this.get("style");var q=NO,g="";if(this.get("hasAcceleratedLayer")){var A=v.top,b=v.bottom,H=v.height,G=v.left,C=v.right,u=v.width;if((SC.empty(A)||(!SC.isPercentage(A)&&!SC.empty(H)))&&(SC.empty(G)||(!SC.isPercentage(G)&&!SC.empty(u)))&&(this.transitions&&(this.transitions.top||this.transitions.left))){q=YES;this._useSpecialCaseTransform=YES}else{this._useSpecialCaseTransform=NO}}var F;if(!this._animatableCurrentStyle||this._disableAnimation>0||!L){this._animatableSetCSS="";this._animatableCurrentStyle={};for(F in v){if(F[0]!="_"){this._animatableCurrentStyle[F]=v[F]}}if(L){this._animatableApplyStyles(L,v)}return this}if(!L){return}var f=this._getStartStyleHash(this._animatableCurrentStyle,v);var j={};var w;var k=this._TMP_CSS_TRANSITIONS;if(SC.platform.supportsCSSTransitions){var p;if(q){var K=this.transitions.left||this.transitions.top;p=this.cssTimingStringFor(K);k.push("-"+SC.platform.cssPrefix+"-transform "+K.duration+"s "+p)}for(F in this.transitions){if(!this._cssTransitionFor[F]){continue}if(q&&(F=="left"||F=="top")){if(this.transitions.left.action){this._transitionCallbacks["-"+SC.platform.cssPrefix+"-transform"]={source:this,target:(this.transitions.left.target||this),action:this.transitions.left.action}}if(this.transitions.top.action){this._transitionCallbacks["-"+SC.platform.cssPrefix+"-transform"]={source:this,target:(this.transitions.top.target||this),action:this.transitions.top.action}}continue}p=this.cssTimingStringFor(this.transitions[F]);k.push(this._cssTransitionFor[F]+" "+this.transitions[F].duration+"s "+p)}}for(F in v){if(F[0]=="_"){continue}var e=!this.transitions[F]||v[F]==f[F];if(F=="display"&&v[F]!="none"){e=true}if(e){f[F]=v[F];var J=this._animators[F];if(J){J.endValue=v[F];J.end=0}continue}if(SC.platform.supportsCSSTransitions&&this._cssTransitionFor[F]){j[F]=v[F];if(this.transitions[F].action){this._transitionCallbacks[this._cssTransitionFor[F]]={source:this,target:(this.transitions[F].target||this),action:this.transitions[F].action}}continue}var E=this._animateTickPixel,c=F,t=f[F],o=v[F];if(c=="centerX"||c=="centerY"){E=this._animateTickCenter}else{if(c=="opacity"){E=this._animateTickNumber}else{if(c=="display"){E=this._animateTickDisplay}}}if(!this._animators[F]){this._animators[F]={}}var I=this._animators[F];I.start=null;I.duration=Math.floor(this.transitions[F].duration*1000);I.startValue=t;I.endValue=o;I.layer=L;I.property=c;I.action=E;I.style=L.style;I.holder=this;if(this.transitions[F].action){I.callback={source:this,target:(this.transitions[F].target||this),action:this.transitions[F].action}}w=this.transitions[F].timing||SC.Animatable.defaultTimingFunction;if(w&&SC.typeOf(w)!=SC.T_STRING){I.timingFunction=w}if(!I.going){this._animationsToStart[F]=I}}var z=this._animationOrder,B=this._animationOrder.length;for(F=0;F<B;F++){var D=z[F];if(this._animationsToStart[D]){SC.Animatable.addTimer(this._animationsToStart[D]);delete this._animationsToStart[D]}}var n=k.join(",");k.length="";this._animatableSetCSS=n;this._animatableApplyStyles(L,f,j);return this},_animatableApplyStyles:function(b,c,a){if(!b){return}var f=NO;if(c.display&&b.style.display!==c.display){b.style.display=c.display;f=YES}if(this._animatableSetCSS!=this._last_transition_css){b.style[SC.platform.domCSSPrefix+"Transition"]=this._animatableSetCSS;this._last_transition_css=this._animatableSetCSS;f=YES}if(!this._animators["display-styles"]){this._animators["display-styles"]={}}var e=this._animators["display-styles"];e.holder=this;e.action=this._animatableApplyNonDisplayStylesFromTimer;e.inLoopAction=this._animatableApplyNonDisplayStyles;e.layer=b;e.styles=c;e.delayed=a;this._animatableCurrentStyle=c;if(this._disableAnimation>0||!f){e.inLoopAction()}else{SC.Animatable.addTimer(e)}},_animatableApplyNonDisplayStylesFromTimer:function(){SC.run(function(){this.inLoopAction()},this)},_animatableApplyNonDisplayStyles:function(){var j=this.layer,o=this.holder._animatableCurrentStyle;var e={};var k={},p=NO,a=j.style;var b="";for(var g in o){if(g=="display"){continue}if(this.holder._layoutStyles.indexOf(g)>=0){k[g]=o[g];p=YES;continue}else{if(g=="transform"){b+=" "+o[g]}else{if(e[g]){e[g](a,g,o)}else{a[g]=o[g]}}}}if(!SC.empty(b)){a[SC.platform.cssPrefix+"Transform"]=b}if(p){var c=this.holder.layout;this.holder.layout=k;this.holder.notifyPropertyChange("layoutStyle");var f=this.holder.get("layoutStyle");for(var n in f){if(SC.none(f[n])){a[n]=""}else{if(a[n]!=f[n]){a[n]=f[n]}}}this.holder.layout=c}if(this.delayed){SC.mixin(this.holder._animatableCurrentStyle,this.delayed);this.styles=this.delayed;this.delayed=undefined;if(this._disableAnimation>0){this.inLoopAction()}else{SC.Animatable.addTimer(this)}}},updateLayout:function(c,a){var b=SC.clone(this.get("style"));var j=this.get("layout");var e=0,f=this._layoutStyles,k=f.length,g=NO;for(e=0;e<k;e++){var n=f[e];if(b[n]!==j[n]){if(SC.none(j[n])){b[n]=undefined}else{b[n]=j[n]}g=YES}}if(g){this.style=b;this.updateStyle()}return this},_solveBezierForT:function(b,v,q,p,g,e,t,f){var u=1/(200*f);var o,n,k,c,a,j;for(k=t,j=0;j<8;j++){c=((b*k+q)*k+g)*k-t;if(Math.abs(c)<u){return k}a=(3*b*k+2*q)*k+g;if(Math.abs(a)<Math.pow(10,-6)){break}k=k-c/a}o=0;n=1;k=t;if(k<o){return o}if(k>n){return n}while(o<n){c=((b*k+q)*k+g)*k;if(Math.abs(c-t)<u){return k}if(t>c){o=k}else{n=k}k=(n-o)*0.5+o}return k},_solveBezier:function(c,b,o,n,p,f){var g=3*c;var k=3*(o-c)-g;var a=1-g-k;var e=3*b;var j=3*(n-b)-e;var u=1-e-j;var q=this._solveBezierForT(a,u,k,j,g,e,p,f);return((u*q+j)*q+e)*q},_animateTickPixel:function(q){if(SC.none(this.start)){this.start=q;this.end=this.start+this.duration}var u=this.start,g=this.end;var p=this.startValue,n=this.endValue;var j=g-u;var b=n-p;var k=q-u;var f=Math.min(k/j,1);if(this.timingFunction){var a=this.timingFunction;f=this.holder._solveBezier(a[0],a[1],a[2],a[3],f,j)}var o=Math.floor(p+(b*f));this.holder._animatableCurrentStyle[this.property]=o;this.style[this.property]=o+"px";if(q<g){SC.Animatable.addTimer(this)}else{this.going=false;if(this.callback){SC.Animatable.runCallback(this.callback)}this.styles=null;this.layer=null}},_animateTickDisplay:function(a){if(SC.none(this.start)){this.start=a;this.end=this.start+this.duration}var b=this.end;if(a<b){SC.Animatable.addTimer(this);return}this.holder._animatableCurrentStyle[this.property]=this.endValue;this.style[this.property]=this.endValue;this.going=false;if(this.callback){SC.Animatable.runCallback(this.callback)}this.styles=null;this.layer=null},_animateTickNumber:function(q){if(SC.none(this.start)){this.start=q;this.end=this.start+this.duration}var u=this.start,g=this.end;var p=this.startValue,n=this.endValue;var j=g-u;var b=n-p;var k=q-u;var f=Math.min(k/j,1);if(this.timingFunction){var a=this.timingFunction;f=this.holder._solveBezier(a[0],a[1],a[2],a[3],f,j)}var o=Math.round((p+(b*f))*100)/100;this.holder._animatableCurrentStyle[this.property]=o;this.style[this.property]=o;if(this.property=="opacity"){this.style.zoom=1}if(q<g){SC.Animatable.addTimer(this)}else{this.going=false;if(this.callback){SC.Animatable.runCallback(this.callback)}this.styles=null;this.layer=null}},_animateTickCenter:function(v){if(SC.none(this.start)){this.start=v;this.end=this.start+this.duration}var w=this.start,j=this.end;var u=this.startValue,o=this.endValue;var k=j-w;var f=o-u;var n=v-w;var g=Math.min(n/k,1);if(this.timingFunction){var b=this.timingFunction;g=this.holder._solveBezier(b[0],b[1],b[2],b[3],g,k)}var q=u+(f*g);this.holder._animatableCurrentStyle[this.property]=q;var p,a;if(this.property=="centerX"){p="width";a="marginLeft"}else{p="height";a="marginTop"}this.style[a]=Math.round(q-(this.holder._animatableCurrentStyle[p]/2))+"px";if(v<j){SC.Animatable.addTimer(this)}else{this.going=false;if(this.callback){SC.Animatable.runCallback(this.callback)}this.styles=null;this.layer=null}}};SC.mixin(SC.Animatable,{NAMESPACE:"SC.Animatable",VERSION:"0.1.0",TRANSITION_NONE:"linear",TRANSITION_CSS_EASE:"ease",TRANSITION_CSS_EASE_IN:"ease-in",TRANSITION_CSS_EASE_OUT:"ease-out",TRANSITION_CSS_EASE_IN_OUT:"ease-in-out",TRANSITION_EASE:[0.25,0.1,0.25,1],TRANSITION_LINEAR:[0,0,1,1],TRANSITION_EASE_IN:[0.42,0,1,1],TRANSITION_EASE_OUT:[0,0,0.58,1],TRANSITION_EASE_IN_OUT:[0.42,0,0.58,1],defaultTimingFunction:null,baseTimer:{next:null},going:false,_ticks:0,_timer_start_time:null,interval:10,currentTime:new Date().getTime(),stats:SC.Object.create({lastFPS:0}),addTimer:function(a){if(a.isQueued){return}a.prev=SC.Animatable.baseTimer;a.next=SC.Animatable.baseTimer.next;if(SC.Animatable.baseTimer.next){SC.Animatable.baseTimer.next.prev=a}SC.Animatable.baseTimer.next=a;a.isQueued=true;if(!SC.Animatable.going){SC.Animatable.start()}},removeTimer:function(a){if(!a.isQueued){return}if(a.next){a.next.prev=a.prev}a.prev.next=a.next;a.isQueued=false},start:function(){SC.Animatable._ticks=0;SC.Animatable._timer_start_time=new Date().getTime();SC.Animatable.going=true;setTimeout(function(){SC.Animatable.timeout()},SC.Animatable.interval)},timeout:function(){SC.Animatable.currentTime=new Date().getTime();var j=SC.Animatable.currentTime;var f=SC.Animatable.baseTimer.next;SC.Animatable.baseTimer.next=null;var e=0;while(f){var c=f.next;f.isQueued=false;f.next=null;f.prev=null;f.action.call(f,j);f=c;e++}if(SC.Animatable._ticks<1000000){SC.Animatable._ticks++}var b=new Date().getTime();var a=b-j;if(SC.Animatable.baseTimer.next){setTimeout(function(){SC.Animatable.timeout()},Math.max(0,SC.Animatable.interval-a))}else{SC.Animatable.going=false;var g=b-SC.Animatable._timer_start_time;SC.run(function(){SC.Animatable.stats.set("lastFPS",SC.Animatable._ticks/(g/1000))})}},runCallback:function(g){var a=SC.typeOf(g.action);if(a==SC.T_FUNCTION){g.action.call(g.target,g.source)}else{if(a===SC.T_STRING){if(g.action.indexOf(".")>=0){var f=g.action.split(".");var c=f.pop();var e=SC.objectForPropertyPath(f,window);var b=e.get?e.get(c):e[c];if(b&&SC.typeOf(b)==SC.T_FUNCTION){b.call(e,g.source)}else{throw"SC.Animator could not find a function at %@".fmt(g.action)}}else{SC.RootResponder.responder.sendAction(g.action,g.target,g.source,g.source.get("pane"),null,g.source)}}}}});SC.FormsEditMode={hasEditMode:YES,isEditing:NO,editModeDidChange:function(){this._propagateEditMode()}.observes("isEditing"),_scfem_childViewsDidChange:function(){this._propagateEditMode()}.observes("childViews"),_propagateEditMode:function(){var f=this.get("isEditing");var e=this.get("childViews");if(!e){return}var b,a=e.length,c;for(b=0;b<a;b++){c=e[b];if(SC.typeOf(c)===SC.T_STRING||c.isClass){return}if(c.get("hasEditMode")){c.set("isEditing",f)}}}};SC.CalculatesEmptiness={hasCalculatesEmptiness:YES,isValueEmpty:YES,_scce_childrenAreEmpty:YES,isEditingAffectsIsEmpty:YES,_scce_isEditingDidChange:function(){if(this.get("isEditingAffectsIsEmpty")){this.notifyPropertyChange("isEmpty")}}.observes("isEditing"),isEmpty:function(){if(!this.get("isVisible")){return YES}if(this.get("isEditingAffectsIsEmpty")&&this.get("isEditing")){return NO}return this.get("isValueEmpty")&&this.get("_scce_childrenAreEmpty")}.property("isValueEmpty","isVisible","_scce_childrenAreEmpty","isEditingAffectsIsEmpty").cacheable(),_scce_isEmptyDidChange:function(){var a=this.get("parentView");if(a&&a._scce_emptinessDidChangeFor){a._scce_emptinessDidChangeFor(this)}}.observes("isEmpty"),initMixin:function(){this._scce_emptinessDidChangeFor()},_scce_emptinessDidChangeFor:function(a){this.invokeOnce("_scce_recalculateChildrensEmptiness")},_scce_recalculateChildrensEmptiness:function(){var b=this.get("childViews");var e=YES,a=b.length,f;for(var c=0;c<a;c++){f=b[c];if(!f.get("isEmpty")&&f.hasCalculatesEmptiness){e=NO;break}}this.setIfChanged("_scce_childrenAreEmpty",e)}};SC.BaseTheme.formRenderDelegate=SC.RenderDelegate.create({className:"form",flowSpacing:{left:5,top:5,bottom:5,right:5},render:function(){},update:function(){}});SC.BaseTheme.FORM_FLOW_SPACING={left:5,top:5,bottom:5,right:5};SC.BaseTheme.formRowRenderDelegate=SC.RenderDelegate.create({className:"form-row",flowSpacing:{right:15,left:0,top:0,bottom:0},flowPadding:0});sc_require("mixins/emptiness");sc_require("mixins/edit_mode");SC.FormRowView=SC.View.extend(SC.FlowedLayout,SC.CalculatesEmptiness,SC.FormsEditMode,{classNames:["sc-form-row-view"],renderDelegateName:"formRowRenderDelegate",flowPadding:SC.propertyFromRenderDelegate("flowPadding"),defaultFlowSpacing:SC.propertyFromRenderDelegate("flowSpacing"),fillWidth:YES,layoutDirection:SC.LAYOUT_HORIZONTAL,layout:{left:0,width:0,height:0},isFormRow:YES,hasRowLabel:YES,label:undefined,rowLabelSize:0,rowLabelMeasuredSize:0,shouldMeasureLabel:YES,labelView:null,createChildViews:function(){var e=SC.clone(this.get("childViews"));if(this.labelView.isClass){this.labelView=this.createChildView(this.labelView,{value:this.get("label")});this.labelView.addObserver("measuredSize",this,"labelSizeDidChange");this.labelView.bind("shouldMeasureSize",this,"shouldMeasureLabel");this.get("childViews").unshift(this.labelView)}var g=this.get("content");arguments.callee.base.apply(this,arguments);var b,a=e.length,f,c;for(b=0;b<a;b++){f=e[b];if(SC.typeOf(f)===SC.T_STRING){c=this.get(f);if(c&&!c.isClass){if(!c.get("contentValueKey")){if(f==="_singleField"){c.set("contentValueKey",this.get("formKey"))}else{c.set("contentValueKey",f)}}if(!c.get("content")){c.bind("content",this,"content")}}}}this.rowLabelSizeDidChange()},labelDidChange:function(){this.get("labelView").set("value",this.get("label"))}.observes("label"),labelSizeDidChange:function(){var a=this.get("labelView").get("measuredSize");this.set("rowLabelMeasuredSize",a.width);var b=this.get("parentView");if(b&&b.get("isRowDelegate")){b.rowLabelMeasuredSizeDidChange(this,a)}},rowLabelSizeDidChange:function(){this.get("labelView").adjust({width:this.get("rowLabelSize")})}.observes("rowLabelSize")});SC.FormRowView.mixin({row:function(b,a,c){if(b.isClass){c=a;a=b;b=null}if(!c){c={}}else{c=SC.clone(c)}c.label=b;c.childViews=["_singleField"];c._singleField=a;return c},LabelView:SC.LabelView.extend(SC.AutoResize,SC.CalculatesEmptiness,{shouldAutoResize:NO,layout:{left:0,top:0,width:0,height:18},fillHeight:YES,classNames:["sc-form-label"],isValue:NO})});SC.FormRowView.prototype.labelView=SC.FormRowView.LabelView.design();sc_require("mixins/emptiness");sc_require("mixins/edit_mode");sc_require("views/form_row");SC.FormView=SC.View.extend(SC.FlowedLayout,SC.CalculatesEmptiness,SC.FormsEditMode,{layoutDirection:SC.LAYOUT_VERTICAL,canWrap:NO,renderDelegateName:"formRenderDelegate",defaultFlowSpacing:SC.propertyFromRenderDelegate("flowSpacing",{}),classNames:["sc-form-view"],editsByDefault:YES,content:null,exampleRow:SC.FormRowView.extend({labelView:SC.FormRowView.LabelView.extend({textAlign:SC.ALIGN_RIGHT})}),init:function(){if(this.get("editsByDefault")){this.set("isEditing",YES)}arguments.callee.base.apply(this,arguments)},createChildViews:function(){var e=SC.clone(this.get("childViews"));var b,a=e.length,f,c,j=this.get("exampleRow");for(b=0;b<a;b++){f=e[b];if(SC.typeOf(f)===SC.T_STRING){c=this.get(f);if(c&&!c.isClass&&SC.typeOf(c)===SC.T_HASH){this[f]=j.extend(c)}}}var g=this.get("content");arguments.callee.base.apply(this,arguments);for(b=0;b<a;b++){f=e[b];if(SC.typeOf(f)===SC.T_STRING){c=this.get(f);if(c&&!c.isClass){c.set("formKey",f);if(!c.get("content")){c.bind("content",this,"content")}if(c.isFormRow){if(SC.none(c.get("label"))){c.set("label",f.humanize().titleize())}if(this.get("labelWidth")!==null){c.set("shouldMeasureLabel",NO)}}}}}this._hasCreatedRows=YES;this.recalculateLabelWidth()},isRowDelegate:YES,labelWidth:null,labelWidthDidChange:function(){var e=this.get("childViews"),b,a=e.length,c=SC.none(this.get("labelWidth"));for(b=0;b<a;b++){e[b].set("shouldMeasureLabel",c)}this.recalculateLabelWidth()}.observes("labelWidth"),recalculateLabelWidth:function(){if(!this._hasCreatedRows){return}var c=this.get("labelWidth"),e=this.get("childViews"),b,a=e.length,f;if(c===null){c=0;for(b=0;b<a;b++){f=e[b];if(f.get("rowLabelMeasuredSize")){c=Math.max(f.get("rowLabelMeasuredSize"),c)}}}if(this._rowLabelSize!==c){this._rowLabelSize=c;for(b=0;b<a;b++){f=e[b];if(f.get("hasRowLabel")){f.set("rowLabelSize",c)}}}},rowLabelMeasuredSizeDidChange:function(b,a){this.invokeOnce("recalculateLabelWidth")}});SC.mixin(SC.FormView,{row:function(c,b,a){return SC.FormRowView.row(c,b,a)}});SC.EmptyTheme=SC.BaseTheme.create({name:"sc-empty"});SC.Theme.addTheme(SC.EmptyTheme);if(typeof CHANCE_SLICES==="undefined"){var CHANCE_SLICES=[]}CHANCE_SLICES=CHANCE_SLICES.concat(["__s38_0","__s38_1","__s38_2","__s38_3","__s38_4","__s38_5","__s38_6","__s38_7","__s38_8","__s38_9","__s38_10","__s38_11","__s39_12","__s39_13","__s39_14","__s39_15","__s39_16","__s39_17","__s39_18","__s39_19","__s39_20","__s39_21","__s39_22","__s39_23","__s39_24","__s39_25","__s39_26","__s39_27","__s39_28","__s39_29","__s39_30","__s39_31","__s39_32","__s39_33","__s39_34","__s39_35","__s39_36","__s39_37","__s39_38","__s39_39","__s40_40","__s40_41","__s40_42","__s40_43","__s40_44","__s40_45","__s40_46","__s40_47","__s40_48","__s40_49","__s40_50","__s40_51","__s40_52","__s40_53","__s40_54","__s40_55","__s40_56","__s40_57","__s40_58","__s40_59","__s41_60","__s41_61","__s41_62","__s41_63","__s41_64","__s41_65","__s41_66","__s41_67","__s41_68","__s41_69","__s41_70","__s41_71","__s43_72","__s43_73","__s43_74","__s43_75","__s43_76","__s43_77","__s43_78","__s43_79","__s43_80","__s43_81","__s43_82","__s43_83","__s43_84","__s43_85","__s43_86","__s43_87","__s43_88","__s43_89","__s43_90","__s43_91","__s43_92","__s43_93","__s43_94","__s43_95","__s43_96","__s43_97","__s43_98","__s43_99","__s44_100","__s44_101","__s44_102","__s44_103","__s44_104","__s44_105","__s44_106","__s44_107","__s44_108","__s44_109","__s44_110","__s44_111","__s44_112","__s44_113","__s44_114","__s44_115","__s44_116","__s44_117","__s44_118","__s44_119","__s46_120","__s46_121","__s46_122","__s46_123","__s46_124","__s46_125","__s47_126","__s47_127","__s47_128","__s47_129","__s47_130","__s47_131","__s48_132","__s48_133","__s48_134","__s48_135","__s48_136","__s48_137","__s52_138","__s53_139","__s53_140","__s53_141","__s53_142","__s58_143","__s58_144","__s58_145","__s58_146","__s58_147","__s58_148","__s58_149","__s58_150","__s58_151","__s58_152","__s58_153","__s58_154","__s58_155","__s58_156","__s60_157","__s60_158","__s60_159","__s60_160","__s60_161","__s60_162","__s60_163","__s60_164","__s60_165","__s61_166","__s61_167","__s61_168","__s61_169","__s61_170","__s61_171","__s61_172","__s61_173","__s61_174","__s61_175","__s61_176","__s61_177","__s61_178","__s62_179","__s62_180","__s62_181","__s62_182","__s62_183","__s62_184","__s62_185","__s62_186","__s62_187","__s62_188","__s62_189","__s62_190","__s62_191","__s62_192","__s62_193","__s62_194","__s62_195","__s62_196","__s62_197","__s62_198","__s62_199","__s62_200","__s62_201","__s62_202","__s62_203","__s62_204","__s63_205","__s63_206","__s63_207","__s63_208","__s63_209","__s63_210","__s64_211","__s64_212","__s64_213","__s64_214","__s64_215","__s64_216","__s65_217","__s65_218","__s65_219","__s65_220","__s65_221","__s65_222","__s65_223","__s65_224","__s65_225","__s67_226","__s67_227","__s67_228","__s67_229","__s67_230","__s67_231","__s67_232","__s67_233","__s67_234","__s69_235","__s69_236","__s69_237","__s69_238","__s69_239","__s69_240","__s69_241","__s69_242","__s69_243","__s69_244","__s69_245","__s69_246","__s69_247","__s69_248","__s69_249","__s69_250","__s69_251","__s69_252","__s69_253","__s69_254","__s70_255","__s70_256","__s70_257","__s70_258","__s70_259","__s70_260","__s70_261","__s70_262","__s70_263","__s70_264","__s70_265","__s70_266","__s70_267","__s70_268","__s70_269","__s70_270","__s70_271","__s70_272","__s70_273","__s70_274","__s71_275","__s71_276","__s71_277","__s71_278","__s71_279","__s71_280","__s71_281","__s71_282","__s71_283","__s71_284","__s71_285","__s71_286","__s71_287","__s71_288","__s71_289","__s71_290","__s71_291","__s71_292","__s71_293","__s71_294","__s72_295","__s72_296","__s72_297","__s72_298","__s72_299","__s72_300","__s72_301","__s72_302","__s72_303","__s72_304","__s72_305","__s72_306","__s72_307","__s72_308","__s72_309","__s72_310","__s72_311","__s72_312","__s72_313","__s72_314","__s74_315","__s74_316","__s74_317","__s74_318","__s74_319","__s75_320","__s75_321","__s76_322","__s76_323","__s76_324","__s76_325","__s76_326","__s80_327"]);SC.AceTheme=SC.BaseTheme.create({name:"ace",description:"A SproutCore built-in theme by Alex Iskander and contributors. Only supports browsers that implement CSS3."});SC.Theme.addTheme(SC.AceTheme);SC.AceTheme.PointLeft=SC.AceTheme.subtheme("point-left","point-left");SC.AceTheme.PointRight=SC.AceTheme.subtheme("point-right","point-right");SC.AceTheme.Capsule=SC.AceTheme.subtheme("capsule","capsule");SC.AceTheme.Dark=SC.AceTheme.subtheme("dark");SC.defaultTheme="ace";sc_require("theme");SC.AceTheme.Dark.PointLeft=SC.AceTheme.Dark.subtheme("point-left","point-left");SC.AceTheme.Dark.PointRight=SC.AceTheme.Dark.subtheme("point-right","point-right");SC.AceTheme.Dark.PointRight=SC.AceTheme.Dark.subtheme("capsule","capsule");SC.AceTheme.SourceList=SC.AceTheme.subtheme("source-list");sc_require("theme");SC.AceTheme.Popover=SC.AceTheme.Dark.subtheme("popover");SC.AceTheme.addTheme(SC.AceTheme.Popover);SC.AceTheme.SolidPopover=SC.AceTheme.Popover.subtheme("solid");SC.AceTheme.addTheme(SC.AceTheme.SolidPopover.create({name:"solid-popover"}));sc_require("resources/picker/popover/popover");SC.AceTheme.Popover.pickerRenderDelegate=SC.RenderDelegate.create({className:"picker",render:function(f,b){var a=f.get("preferType");var e=f.get("pointerPos");var c=f.get("pointerPosY");if(a==SC.PICKER_POINTER||a==SC.PICKER_MENU_POINTER){b.addClass(e)}},update:function(f,e){var a=f.get("preferType");var c=f.get("pointerPos");var b=f.get("pointerPosY");if(a==SC.PICKER_POINTER||a==SC.PICKER_MENU_POINTER){e.addClass(c)}}});SC.AceTheme.Popover.workspaceRenderDelegate=SC.RenderDelegate.create({className:"workspace",render:function(b,a){a.setClass({"top-toolbar":b.get("hasTopToolbar"),"bottom-toolbar":b.get("hasBottomToolbar")});a=a.begin("div").addClass("popover-background");this.includeSlices(b,a,SC.NINE_SLICE);a.push("<div class = 'sc-pointer'></div>");a=a.end()},update:function(b,a){a.setClass({"top-toolbar":b.get("hasTopToolbar"),"bottom-toolbar":b.get("hasBottomToolbar")})}});Function.prototype.handleEvents=function(){this.isEventHandler=YES;this.events=arguments;return this};Function.prototype.stateObserves=function(){this.isStateObserveHandler=YES;this.args=SC.A(arguments);return this};SC.Async=SC.Object.extend({func:null,arg1:null,arg2:null,tryToPerform:function(e){var c=this.get("func"),b=this.get("arg1"),a=this.get("arg2"),f=SC.typeOf(c);if(f===SC.T_STRING){e.tryToPerform(c,b,a)}else{if(f===SC.T_FUNCTION){c.apply(e,[b,a])}}}});SC.Async.mixin({perform:function(c,b,a){return SC.Async.create({func:c,arg1:b,arg2:a})}});SC.State=SC.Object.extend({name:null,parentState:null,historyState:null,initialSubstate:null,substatesAreConcurrent:NO,substates:null,statechart:null,stateIsInitialized:NO,currentSubstates:null,enteredSubstates:null,trace:function(){var a=this.getPath("statechart.statechartTraceKey");return this.getPath("statechart.%@".fmt(a))}.property().cacheable(),owner:function(){var c=this.get("statechart"),b=c?c.get("statechartOwnerKey"):null,a=c?c.get(b):null;return a?a:c}.property().cacheable(),init:function(){arguments.callee.base.apply(this,arguments);this._registeredEventHandlers={};this._registeredStringEventHandlers={};this._registeredRegExpEventHandlers=[];this._registeredStateObserveHandlers={};var b=this.get("statechart"),c=b?b.get("statechartOwnerKey"):null,a=b?b.get("statechartTraceKey"):null;if(b){b.addObserver(c,this,"_statechartOwnerDidChange");b.addObserver(a,this,"_statechartTraceDidChange")}},destroy:function(){var c=this.get("statechart"),e=c?c.get("statechartOwnerKey"):null,a=c?c.get("statechartTraceKey"):null;if(c){c.removeObserver(e,this,"_statechartOwnerDidChange");c.removeObserver(a,this,"_statechartTraceDidChange")}var b=this.get("substates");if(b){b.forEach(function(f){f.destroy()})}this._teardownAllStateObserveHandlers();this.set("substates",null);this.set("currentSubstates",null);this.set("enteredSubstates",null);this.set("parentState",null);this.set("historyState",null);this.set("initialSubstate",null);this.set("statechart",null);this.notifyPropertyChange("trace");this.notifyPropertyChange("owner");this._registeredEventHandlers=null;this._registeredStringEventHandlers=null;this._registeredRegExpEventHandlers=null;this._registeredStateObserveHandlers=null;arguments.callee.base.apply(this,arguments)},initState:function(){if(this.get("stateIsInitialized")){return}this._registerWithParentStates();var p=null,o=null,b=null,q=[],n=NO,k=this.get("initialSubstate"),g=this.get("substatesAreConcurrent"),e=this.get("statechart"),c=0,j=0,f=NO,a=null;if(SC.kindOf(k,SC.HistoryState)&&k.isClass){a=this.createHistoryState(k,{parentState:this,statechart:e});this.set("initialSubstate",a);if(SC.none(a.get("defaultState"))){this.stateLogError("Initial substate is invalid. History state requires the name of a default state to be set");this.set("initialSubstate",null);a=null}}for(p in this){o=this[p];f=SC.typeOf(o)===SC.T_FUNCTION;if(f&&o.isEventHandler){this._registerEventHandler(p,o);continue}if(f&&o.isStateObserveHandler){this._registerStateObserveHandler(p,o);continue}if(f&&o.statePlugin){o=o.apply(this)}if(SC.kindOf(o,SC.State)&&o.isClass&&this[p]!==this.constructor){b=this.createSubstate(o,{name:p,parentState:this,statechart:e});q.push(b);this[p]=b;b.initState();if(p===k){this.set("initialSubstate",b);n=YES}else{if(a&&a.get("defaultState")===p){a.set("defaultState",b);n=YES}}}}if(!SC.none(k)&&!n){this.stateLogError("Unable to set initial substate %@ since it did not match any of state's %@ substates".fmt(k,this))}if(q.length===0){if(!SC.none(k)){this.stateLogWarning("Unable to make %@ an initial substate since state %@ has no substates".fmt(k,this))}}else{if(q.length>0){if(SC.none(k)&&!g){b=this.createEmptyState({parentState:this,statechart:e});this.set("initialSubstate",b);q.push(b);this[b.get("name")]=b;b.initState();this.stateLogWarning("state %@ has no initial substate defined. Will default to using an empty state as initial substate".fmt(this))}else{if(!SC.none(k)&&g){this.set("initialSubstate",null);this.stateLogWarning("Can not use %@ as initial substate since substates are all concurrent for state %@".fmt(k,this))}}}}this.set("substates",q);this.set("currentSubstates",[]);this.set("enteredSubstates",[]);this.set("stateIsInitialized",YES)},createSubstate:function(b,a){return b.create(a)},createHistoryState:function(b,a){return b.create(a)},createEmptyState:function(a){return SC.EmptyState.create(a)},_registerEventHandler:function(b,f){var e=f.events,g=null,a=e.length,c=0;this._registeredEventHandlers[b]=f;for(;c<a;c+=1){g=e[c];if(SC.typeOf(g)===SC.T_STRING){this._registeredStringEventHandlers[g]={name:b,handler:f};continue}if(g instanceof RegExp){this._registeredRegExpEventHandlers.push({name:b,handler:f,regexp:g});continue}this.stateLogError("Invalid event %@ for event handler %@ in state %@".fmt(g,b,this))}},_registerStateObserveHandler:function(e,g){var f=0,c=g.args,b=c.length,a,j=YES;for(;f<b;f+=1){a=c[f];if(SC.typeOf(a)!==SC.T_STRING||SC.empty(a)){this.stateLogError("Invalid argument %@ for state observe handler %@ in state %@".fmt(a,e,this));j=NO}}if(!j){return}this._registeredStateObserveHandlers[e]=g.args},_registerWithParentStates:function(){this._registerSubstate(this);var a=this.get("parentState");while(!SC.none(a)){a._registerSubstate(this);a=a.get("parentState")}},_registerSubstate:function(b){var c=b.pathRelativeTo(this);if(SC.none(c)){return}if(SC.none(this._registeredSubstatePaths)){this._registeredSubstatePaths={};this._registeredSubstates=[]}this._registeredSubstates.push(b);var a=this._registeredSubstatePaths;if(a[b.get("name")]===undefined){a[b.get("name")]={__ki_paths__:[]}}var e=a[b.get("name")];e[c]=b;e.__ki_paths__.push(c)},pathRelativeTo:function(b){var c=this.get("name"),a=this.get("parentState");while(!SC.none(a)&&a!==b){c="%@.%@".fmt(a.get("name"),c);a=a.get("parentState")}if(a!==b&&b!==this){this.stateLogError("Can not generate relative path from %@ since it not a parent state of %@".fmt(b,this));return null}return c},getSubstate:function(c){var g=SC.typeOf(c);if(g===SC.T_OBJECT){return this._registeredSubstates.indexOf(c)>-1?c:null}if(g!==SC.T_STRING){this.stateLogError("Can not find matching subtype. value must be an object or string: %@".fmt(c));return null}var b=c.match(/(^|\.)(\w+)$/);if(!b){return null}var f=this._registeredSubstatePaths[b[2]];if(SC.none(f)){return null}var a=f[c];if(!SC.none(a)){return a}if(b[1]===""){if(f.__ki_paths__.length===1){return f[f.__ki_paths__[0]]}if(f.__ki_paths__.length>1){var e="Can not find substate matching %@ in state %@. Ambiguous with the following: %@";this.stateLogError(e.fmt(c,this,f.__ki_paths__))}}return null},gotoState:function(b,a){var c=null;if(this.get("isCurrentState")){c=this}else{if(this.get("hasCurrentSubstates")){c=this.get("currentSubstates")[0]}}this.get("statechart").gotoState(b,c,a)},gotoHistoryState:function(c,a,b){var e=null;if(this.get("isCurrentState")){e=this}else{if(this.get("hasCurrentSubstates")){e=this.get("currentSubstates")[0]}}this.get("statechart").gotoHistoryState(c,e,a,b)},resumeGotoState:function(){this.get("statechart").resumeGotoState()},stateIsCurrentSubstate:function(a){if(SC.typeOf(a)===SC.T_STRING){a=this.get("statechart").getState(a)}var b=this.get("currentSubstates");return !!b&&b.indexOf(a)>=0},stateIsEnteredSubstate:function(b){if(SC.typeOf(b)===SC.T_STRING){b=this.get("statechart").getState(b)}var a=this.get("enteredSubstates");return !!a&&a.indexOf(b)>=0},isRootState:function(){return this.getPath("statechart.rootState")===this}.property(),isCurrentState:function(){return this.stateIsCurrentSubstate(this)}.property("currentSubstates").cacheable(),isConcurrentState:function(){return this.getPath("parentState.substatesAreConcurrent")}.property(),isEnteredState:function(){return this.stateIsEnteredSubstate(this)}.property("enteredSubstates").cacheable(),hasSubstates:function(){return this.getPath("substates.length")>0}.property("substates"),hasCurrentSubstates:function(){var a=this.get("currentSubstates");return !!a&&a.get("length")>0}.property("currentSubstates").cacheable(),hasEnteredSubstates:function(){var a=this.get("enteredSubstates");return !!a&&a.get("length")>0}.property("enteredSubstates").cacheable(),reenter:function(){var a=this.get("statechart");if(this.get("isCurrentState")){a.gotoState(this)}else{SC.Logger.error("Can not re-enter state %@ since it is not a current state in the statechart".fmt(this))}},tryToHandleEvent:function(g,c,b){var j=this.get("trace");if(this._registeredEventHandlers[g]){this.stateLogWarning("state %@ can not handle event %@ since it is a registered event handler".fmt(this,g));return NO}if(this._registeredStateObserveHandlers[g]){this.stateLogWarning("state %@ can not handle event %@ since it is a registered state observe handler".fmt(this,g));return NO}if(SC.typeOf(this[g])===SC.T_FUNCTION){if(j){this.stateLogTrace("will handle event %@".fmt(g))}return(this[g](c,b)!==NO)}var f=this._registeredStringEventHandlers[g];if(f){if(j){this.stateLogTrace("%@ will handle event %@".fmt(f.name,g))}return(f.handler.call(this,g,c,b)!==NO)}var a=this._registeredRegExpEventHandlers.length,e=0;for(;e<a;e+=1){f=this._registeredRegExpEventHandlers[e];if(g.match(f.regexp)){if(j){this.stateLogTrace("%@ will handle event %@".fmt(f.name,g))}return(f.handler.call(this,g,c,b)!==NO)}}if(SC.typeOf(this["unknownEvent"])===SC.T_FUNCTION){if(j){this.stateLogTrace("unknownEvent will handle event %@".fmt(g))}return(this.unknownEvent(g,c,b)!==NO)}return NO},enterState:function(a){},stateWillBecomeEntered:function(){},stateDidBecomeEntered:function(){this._setupAllStateObserveHandlers()},exitState:function(a){},stateWillBecomeExited:function(){this._teardownAllStateObserveHandlers()},stateDidBecomeExited:function(){},_setupAllStateObserveHandlers:function(){this._configureAllStateObserveHandlers("addObserver")},_teardownAllStateObserveHandlers:function(){this._configureAllStateObserveHandlers("removeObserver")},_configureAllStateObserveHandlers:function(b){var j,k,g,a,n,e,c,f;for(j in this._registeredStateObserveHandlers){k=this._registeredStateObserveHandlers[j];for(c=0;c<k.length;c+=1){n=k[c];e=j;a=n.indexOf(".");if(a<0){this[b](n,this,e)}else{if(n.indexOf("*")===0){this[b](n.slice(1),this,e)}else{f=null;if(a===0){f=this;n=n.slice(1)}else{if(a===4&&n.slice(0,5)==="this."){f=this;n=n.slice(5)}else{if(a<0&&n.length===4&&n==="this"){f=this;n=""}}}SC.Observers[b](n,this,e,f)}}}}},performAsync:function(c,b,a){return SC.Async.perform(c,b,a)},respondsToEvent:function(e){if(this._registeredEventHandlers[e]){return false}if(SC.typeOf(this[e])===SC.T_FUNCTION){return true}if(this._registeredStringEventHandlers[e]){return true}if(this._registeredStateObserveHandlers[e]){return false}var a=this._registeredRegExpEventHandlers.length,b=0,c;for(;b<a;b+=1){c=this._registeredRegExpEventHandlers[b];if(e.match(c.regexp)){return true}}return SC.typeOf(this["unknownEvent"])===SC.T_FUNCTION},fullPath:function(){var a=this.getPath("statechart.rootState");if(!a){return this.get("name")}return this.pathRelativeTo(a)}.property("name","parentState").cacheable(),toString:function(){var a=SC._object_className(this.constructor);return"%@<%@, %@>".fmt(a,this.get("fullPath"),SC.guidFor(this))},_statechartTraceDidChange:function(){this.notifyPropertyChange("trace")},_statechartOwnerDidChange:function(){this.notifyPropertyChange("owner")},stateLogTrace:function(b){var a=this.get("statechart");a.statechartLogTrace("%@: %@".fmt(this,b))},stateLogWarning:function(b){var a=this.get("statechart");a.statechartLogWarning(b)},stateLogError:function(b){var a=this.get("statechart");a.statechartLogError(b)}});SC.State.plugin=function(c){var a=SC.A(arguments);a.shift();var b=function(){var e=SC.objectForPropertyPath(c);if(!e){console.error("SC.State.plugin: Unable to determine path %@".fmt(c));return undefined}if(!e.isClass||!e.kindOf(SC.State)){console.error("SC.State.plugin: Unable to extend. %@ must be a class extending from SC.State".fmt(c));return undefined}return e.extend.apply(e,a)};b.statePlugin=YES;return b};SC.State.design=SC.State.extend;sc_require("system/state");SC.EMPTY_STATE_NAME="__EMPTY_STATE__";SC.EmptyState=SC.State.extend({name:SC.EMPTY_STATE_NAME,enterState:function(){var a="No initial substate was defined for state %@. Entering default empty state";this.stateLogWarning(a.fmt(this.get("parentState")))}});sc_require("system/state");SC.HistoryState=SC.Object.extend({isRecursive:NO,defaultState:null,statechart:null,parentState:null,state:function(){var b=this.get("defaultState"),a=this.getPath("parentState.historyState");return !!a?a:b}.property().cacheable(),parentHistoryStateDidChange:function(){this.notifyPropertyChange("state")}.observes("*parentState.historyState")});sc_require("system/state");SC.StatechartManager={isResponderContext:YES,isStatechart:YES,statechartIsInitialized:NO,rootState:null,rootStateExample:SC.State,initialState:null,statesAreConcurrent:NO,monitorIsActive:NO,monitor:null,statechartTraceKey:"trace",trace:NO,statechartOwnerKey:"owner",owner:null,autoInitStatechart:YES,suppressStatechartWarnings:NO,initMixin:function(){if(this.get("autoInitStatechart")){this.initStatechart()}},destroyMixin:function(){var b=this.get("rootState"),a=this.get("statechartTraceKey");this.removeObserver(a,this,"_statechartTraceDidChange");b.destroy();this.set("rootState",null)},initStatechart:function(){if(this.get("statechartIsInitialized")){return}this._gotoStateLocked=NO;this._sendEventLocked=NO;this._pendingStateTransitions=[];this._pendingSentEvents=[];this.sendAction=this.sendEvent;if(this.get("monitorIsActive")){this.set("monitor",SC.StatechartMonitor.create({statechart:this}))}var a=this.get("statechartTraceKey");this.addObserver(a,this,"_statechartTraceDidChange");this._statechartTraceDidChange();var e=this.get("allowStatechartTracing"),c=this.get("rootState"),f;if(e){this.statechartLogTrace("BEGIN initialize statechart")}if(!c){c=this._constructRootStateClass()}else{if(SC.typeOf(c)===SC.T_FUNCTION&&c.statePlugin){c=c.apply(this)}}if(!(SC.kindOf(c,SC.State)&&c.isClass)){f="Unable to initialize statechart. Root state must be a state class";this.statechartLogError(f);throw f}c=this.createRootState(c,{statechart:this,name:SC.ROOT_STATE_NAME});this.set("rootState",c);c.initState();if(SC.kindOf(c.get("initialSubstate"),SC.EmptyState)){f="Unable to initialize statechart. Root state must have an initial substate explicilty defined";this.statechartLogError(f);throw f}if(!SC.empty(this.get("initialState"))){var b="initialState";this.set(b,c.get(this.get(b)))}this.set("statechartIsInitialized",YES);this.gotoState(c);if(e){this.statechartLogTrace("END initialize statechart")}},createRootState:function(b,a){if(!a){a={}}b=b.create(a);return b},currentStates:function(){return this.getPath("rootState.currentSubstates")}.property().cacheable(),firstCurrentState:function(){var a=this.get("currentStates");return a?a.objectAt(0):null}.property("currentStates").cacheable(),currentStateCount:function(){return this.getPath("currentStates.length")}.property("currentStates").cacheable(),stateIsCurrentState:function(a){return this.get("rootState").stateIsCurrentSubstate(a)},enteredStates:function(){return this.getPath("rootState.enteredSubstates")}.property().cacheable(),stateIsEntered:function(a){return this.get("rootState").stateIsEnteredSubstate(a)},doesContainState:function(a){return !SC.none(this.getState(a))},getState:function(a){return this.get("rootState").getSubstate(a)},gotoState:function(b,p,q,c){if(!this.get("statechartIsInitialized")){this.statechartLogError("can not go to state %@. statechart has not yet been initialized".fmt(b));return}if(this.get("isDestroyed")){this.statechartLogError("can not go to state %@. statechart is destroyed".fmt(this));return}var n=this._processGotoStateArgs(arguments);b=n.state;p=n.fromCurrentState;q=n.useHistory;c=n.context;var u=null,o=[],t=[],g=this.get("allowStatechartTracing"),a=this.get("rootState"),k=b,f=p,e;b=a.getSubstate(b);if(SC.none(b)){this.statechartLogError("Can not to goto state %@. Not a recognized state in statechart".fmt(k));return}if(this._gotoStateLocked){this._pendingStateTransitions.push({state:b,fromCurrentState:p,useHistory:q,context:c});return}this._gotoStateLocked=YES;if(!SC.none(p)){p=a.getSubstate(p);if(SC.none(p)||!p.get("isCurrentState")){e="Can not to goto state %@. %@ is not a recognized current state in statechart";this.statechartLogError(e.fmt(k,f));this._gotoStateLocked=NO;return}}else{if(this.getPath("currentStates.length")>0){p=this.get("currentStates")[0];e="gotoState: fromCurrentState not explicitly provided. Using a default current state to transition from: %@";this.statechartLogWarning(e.fmt(p))}}if(g){this.statechartLogTrace("BEGIN gotoState: %@".fmt(b));e="starting from current state: %@";e=e.fmt(p?p:"---");this.statechartLogTrace(e);e="current states before: %@";e=e.fmt(this.getPath("currentStates.length")>0?this.get("currentStates"):"---");this.statechartLogTrace(e)}if(!SC.none(p)){o=this._createStateChain(p)}t=this._createStateChain(b);u=this._findPivotState(o,t);if(u){if(g){this.statechartLogTrace("pivot state = %@".fmt(u))}if(u.get("substatesAreConcurrent")){this.statechartLogError("Can not go to state %@ from %@. Pivot state %@ has concurrent substates.".fmt(b,p,u));this._gotoStateLocked=NO;return}}var j=[];this._traverseStatesToExit(o.shift(),o,u,j);if(u!==b){this._traverseStatesToEnter(t.pop(),t,u,q,j)}else{this._traverseStatesToExit(u,[],null,j);this._traverseStatesToEnter(u,null,null,q,j)}this._executeGotoStateActions(b,j,null,c)},gotoStateActive:function(){return this._gotoStateLocked}.property(),gotoStateSuspended:function(){return this._gotoStateLocked&&!!this._gotoStateSuspendedPoint}.property(),resumeGotoState:function(){if(!this.get("gotoStateSuspended")){this.statechartLogError("Can not resume goto state since it has not been suspended");return}var a=this._gotoStateSuspendedPoint;this._executeGotoStateActions(a.gotoState,a.actions,a.marker,a.context)},_executeGotoStateActions:function(j,g,b,c){var f=null,a=g.length,e=null;b=SC.none(b)?0:b;for(;b<a;b+=1){f=g[b];switch(f.action){case SC.EXIT_STATE:e=this._exitState(f.state,c);break;case SC.ENTER_STATE:e=this._enterState(f.state,f.currentState,c);break}if(SC.kindOf(e,SC.Async)){this._gotoStateSuspendedPoint={gotoState:j,actions:g,marker:b+1,context:c};e.tryToPerform(f.state);return}}this.beginPropertyChanges();this.notifyPropertyChange("currentStates");this.notifyPropertyChange("enteredStates");this.endPropertyChanges();if(this.get("allowStatechartTracing")){this.statechartLogTrace("current states after: %@".fmt(this.get("currentStates")));this.statechartLogTrace("END gotoState: %@".fmt(j))}this._gotoStateSuspendedPoint=null;this._gotoStateLocked=NO;this._flushPendingStateTransition()},_exitState:function(e,b){var c;if(e.get("currentSubstates").indexOf(e)>=0){c=e.get("parentState");while(c){c.get("currentSubstates").removeObject(e);c=c.get("parentState")}}c=e;while(c){c.get("enteredSubstates").removeObject(e);c=c.get("parentState")}if(this.get("allowStatechartTracing")){this.statechartLogTrace("<-- exiting state: %@".fmt(e))}e.set("currentSubstates",[]);e.notifyPropertyChange("isCurrentState");e.stateWillBecomeExited();var a=this.exitState(e,b);e.stateDidBecomeExited();if(this.get("monitorIsActive")){this.get("monitor").pushExitedState(e)}e._traverseStatesToExit_skipState=NO;return a},exitState:function(b,a){return b.exitState(a)},_enterState:function(e,f,b){var c=e.get("parentState");if(c&&!e.get("isConcurrentState")){c.set("historyState",e)}if(f){c=e;while(c){c.get("currentSubstates").pushObject(e);c=c.get("parentState")}}c=e;while(c){c.get("enteredSubstates").pushObject(e);c=c.get("parentState")}if(this.get("allowStatechartTracing")){this.statechartLogTrace("--> entering state: %@".fmt(e))}e.notifyPropertyChange("isCurrentState");e.stateWillBecomeEntered();var a=this.enterState(e,b);e.stateDidBecomeEntered();if(this.get("monitorIsActive")){this.get("monitor").pushEnteredState(e)}return a},enterState:function(b,a){return b.enterState(a)},gotoHistoryState:function(g,f,c,e){if(!this.get("statechartIsInitialized")){this.statechartLogError("can not go to state %@'s history state. Statechart has not yet been initialized".fmt(g));return}var b=this._processGotoStateArgs(arguments);g=b.state;f=b.fromCurrentState;c=b.useHistory;e=b.context;g=this.getState(g);if(!g){this.statechartLogError("Can not to goto state %@'s history state. Not a recognized state in statechart".fmt(g));return}var a=g.get("historyState");if(!c){if(a){this.gotoState(a,f,e)}else{this.gotoState(g,f,e)}}else{this.gotoState(g,f,YES,e)}},sendEvent:function(b,j,g){if(this.get("isDestroyed")){this.statechartLogError("can send event %@. statechart is destroyed".fmt(b));return}var c=NO,o=NO,k=this.get("currentStates").slice(),n=0,f=0,a=null,e=this.get("allowStatechartTracing");if(this._sendEventLocked||this._goStateLocked){this._pendingSentEvents.push({event:b,arg1:j,arg2:g});return}this._sendEventLocked=YES;if(e){this.statechartLogTrace("BEGIN sendEvent: event<%@>".fmt(b))}n=k.get("length");for(;f<n;f+=1){o=NO;a=k[f];if(!a.get("isCurrentState")){continue}while(!o&&a){o=a.tryToHandleEvent(b,j,g);if(!o){a=a.get("parentState")}else{c=YES}}}this._sendEventLocked=NO;if(e){if(!c){this.statechartLogTrace("No state was able handle event %@".fmt(b))}this.statechartLogTrace("END sendEvent: event<%@>".fmt(b))}var p=this._flushPendingSentEvents();return c?this:(p?this:null)},_createStateChain:function(b){var a=[];while(b){a.push(b);b=b.get("parentState")}return a},_findPivotState:function(c,b){if(c.length===0||b.length===0){return null}var a=c.find(function(f,e){if(b.indexOf(f)>=0){return YES}});return a},_traverseStatesToExit:function(b,o,e,k){if(!b||b===e){return}var f=this.get("allowStatechartTracing");if(b.get("substatesAreConcurrent")){var g=0,j=b.get("currentSubstates"),n=j.length,c=null;for(;g<n;g+=1){c=j[g];if(c._traverseStatesToExit_skipState===YES){continue}var a=this._createStateChain(c);this._traverseStatesToExit(a.shift(),a,b,k)}}k.push({action:SC.EXIT_STATE,state:b});if(b.get("isCurrentState")){b._traverseStatesToExit_skipState=YES}this._traverseStatesToExit(o.shift(),o,e,k)},_traverseStatesToEnter:function(b,f,n,j,e){if(!b){return}var c=this.get("allowStatechartTracing");if(n){if(b!==n){this._traverseStatesToEnter(f.pop(),f,n,j,e)}else{this._traverseStatesToEnter(f.pop(),f,null,j,e)}}else{if(!f||f.length===0){var k={action:SC.ENTER_STATE,state:b,currentState:NO};e.push(k);var g=b.get("initialSubstate"),a=b.get("historyState");if(b.get("substatesAreConcurrent")){this._traverseConcurrentStatesToEnter(b.get("substates"),null,j,e)}else{if(b.get("hasSubstates")&&a&&j){this._traverseStatesToEnter(a,null,null,j,e)}else{if(g){if(SC.kindOf(g,SC.HistoryState)){if(!j){j=g.get("isRecursive")}g=g.get("state")}this._traverseStatesToEnter(g,null,null,j,e)}else{k.currentState=YES}}}}else{if(f.length>0){e.push({action:SC.ENTER_STATE,state:b});var o=f.pop();this._traverseStatesToEnter(o,f,null,j,e);if(b.get("substatesAreConcurrent")){this._traverseConcurrentStatesToEnter(b.get("substates"),o,j,e)}}}}},respondsTo:function(e){var b=this.get("currentStates"),a=b.get("length"),c=0,f=null;for(;c<a;c+=1){f=b.objectAt(c);while(f){if(f.respondsToEvent(e)){return true}f=f.get("parentState")}}return SC.typeOf(this[e])===SC.T_FUNCTION},tryToPerform:function(c,b,a){if(this.respondsTo(c)){if(SC.typeOf(this[c])===SC.T_FUNCTION){return(this[c](b,a)!==NO)}else{return !!this.sendEvent(c,b,a)}}return NO},invokeStateMethod:function(o,n,c){if(o==="unknownEvent"){this.statechartLogError("can not invoke method unkownEvent");return}n=SC.A(arguments);n.shift();var g=n.length,q=g>0?n[g-1]:null,p=SC.typeOf(q)===SC.T_FUNCTION?n.pop():null,f=this.get("currentStates"),e=0,b=null,k={},a,t=undefined,j=0;g=f.get("length");for(;e<g;e+=1){b=f.objectAt(e);while(b){if(k[b.get("fullPath")]){break}k[b.get("fullPath")]=YES;a=b[o];if(SC.typeOf(a)===SC.T_FUNCTION&&!a.isEventHandler){t=a.apply(b,n);if(p){p.call(this,b,t)}j+=1;break}b=b.get("parentState")}}return j===1?t:undefined},_traverseConcurrentStatesToEnter:function(e,c,g,b){var f=0,a=e.length,j=null;for(;f<a;f+=1){j=e[f];if(j!==c){this._traverseStatesToEnter(j,null,null,g,b)}}},_flushPendingStateTransition:function(){if(!this._pendingStateTransitions){this.statechartLogError("Unable to flush pending state transition. _pendingStateTransitions is invalid");return}var a=this._pendingStateTransitions.shift();if(!a){return}this.gotoState(a.state,a.fromCurrentState,a.useHistory,a.context)},_flushPendingSentEvents:function(){var a=this._pendingSentEvents.shift();if(!a){return null}return this.sendEvent(a.event,a.arg1,a.arg2)},_monitorIsActiveDidChange:function(){if(this.get("monitorIsActive")&&SC.none(this.get("monitor"))){this.set("monitor",SC.StatechartMonitor.create())}}.observes("monitorIsActive"),_processGotoStateArgs:function(b){var e={state:null,fromCurrentState:null,useHistory:false,context:null},a=null,c=null;b=SC.$A(b);b=b.filter(function(f){return !(f===undefined)});a=b.length;if(a<1){return e}e.state=b[0];if(a===2){c=b[1];switch(SC.typeOf(c)){case SC.T_BOOL:e.useHistory=c;break;case SC.T_HASH:e.context=c;break;default:e.fromCurrentState=c}}else{if(a===3){c=b[1];if(SC.typeOf(c)===SC.T_BOOL){e.useHistory=c;e.context=b[2]}else{e.fromCurrentState=c;c=b[2];if(SC.typeOf(c)===SC.T_BOOL){e.useHistory=c}else{e.context=c}}}else{e.fromCurrentState=b[1];e.useHistory=b[2];e.context=b[3]}}return e},_constructRootStateClass:function(){var e="rootStateExample",f=this.get(e),b=this.get("initialState"),c=this.get("statesAreConcurrent"),a=0,n,j,g,k={};if(SC.typeOf(f)===SC.T_FUNCTION&&f.statePlugin){f=f.apply(this)}if(!(SC.kindOf(f,SC.State)&&f.isClass)){this._logStatechartCreationError("Invalid root state example");return null}if(c&&!SC.empty(b)){this._logStatechartCreationError("Can not assign an initial state when states are concurrent")}else{if(c){k.substatesAreConcurrent=YES}else{if(SC.typeOf(b)===SC.T_STRING){k.initialSubstate=b}else{this._logStatechartCreationError("Must either define initial state or assign states as concurrent");return null}}}for(n in this){if(n===e){continue}j=this[n];g=SC.typeOf(j)===SC.T_FUNCTION;if(g&&j.statePlugin){j=j.apply(this)}if(SC.kindOf(j,SC.State)&&j.isClass&&this[n]!==this.constructor){k[n]=j;a+=1}}if(a===0){this._logStatechartCreationError("Must define one or more states");return null}return f.extend(k)},_logStatechartCreationError:function(a){SC.Logger.error("Unable to create statechart for %@: %@.".fmt(this,a))},statechartLogTrace:function(a){SC.Logger.info("%@: %@".fmt(this.get("statechartLogPrefix"),a))},statechartLogError:function(a){SC.Logger.error("ERROR %@: %@".fmt(this.get("statechartLogPrefix"),a))},statechartLogWarning:function(a){if(this.get("suppressStatechartWarnings")){return}SC.Logger.warn("WARN %@: %@".fmt(this.get("statechartLogPrefix"),a))},statechartLogPrefix:function(){var b=SC._object_className(this.constructor),a=this.get("name"),c;if(SC.empty(a)){c="%@<%@>".fmt(b,SC.guidFor(this))}else{c="%@<%@, %@>".fmt(b,a,SC.guidFor(this))}return c}.property().cacheable(),allowStatechartTracing:function(){var a=this.get("statechartTraceKey");return this.get(a)}.property().cacheable(),_statechartTraceDidChange:function(){this.notifyPropertyChange("allowStatechartTracing")}};SC.ROOT_STATE_NAME="__ROOT_STATE__";SC.EXIT_STATE=0;SC.ENTER_STATE=1;SC.Statechart=SC.Object.extend(SC.StatechartManager,{autoInitStatechart:NO});SC.Statechart.design=SC.Statechart.extend;window.Scui=window.Scui||SC.Object.create();window.SCUI=window.SCUI||window.Scui;SCUI.READY="READY";SCUI.BUSY="BUSY";SCUI.DONE="DONE";SCUI.ERROR="ERROR";SCUI.DISCLOSED_STAND_ALONE="standAlone";SCUI.DISCLOSED_LIST_DEPENDENT="listDependent";SCUI.DISCLOSED_OPEN="open";SCUI.DISCLOSED_CLOSED="closed";SCUI.DEFAULT_TREE="default";if(typeof CHANCE_SLICES==="undefined"){var CHANCE_SLICES=[]}CHANCE_SLICES=CHANCE_SLICES.concat([]);SCUI.Searchable={isSearchable:YES,search:null,searchResults:[],searchKey:"name",minSearchLen:null,searchPause:null,_lastTime:null,initMixin:function(){this.minSearchLen=this.minSearchLen||1;this.searchPause=this.searchPause||100;this.set("searchResults",[]);this._runSearch()},_searchDidChange:function(){var b=this.searchPause,f,a=this.get("search")||"",e=this.minSearchLen;if(a.length<e){f=this.get("content")||[];this.set("searchResults",f);return}if(b>0){this._setSearchInterval(b)}else{this._runSearch()}}.observes("search","content"),_setSearchInterval:function(b){var a=this;if(this._searchTimer){this._searchTimer.invalidate();delete this._searchTimer}this._searchTimer=SC.Timer.schedule({interval:b,action:function(){a._runSearch()}})},_sanitizeSearchString:function(b){var a=["/",".","*","+","?","|","(",")","[","]","{","}","\\"];this._cachedRegex=this._cachedRegex||new RegExp("(\\"+a.join("|\\")+")","g");return b.replace(this._cachedRegex,"\\$1")},_runSearch:function(){var e=this.get("searchResults"),a,b=this.get("search"),f=this.get("content");if(f&&!SC.none(b)){if(e){delete e}b=this._sanitizeSearchString(b).toLowerCase();this._lastSearch=b;a=this.get("searchKey");e=this.runSearch(b,f,a)}else{if(!f){e=[]}}this.set("searchResults",e)},runSearch:function(a,b,c){return b}};sc_require("controllers/searchable");SCUI.SearchableArrayController=SC.ArrayController.extend(SCUI.Searchable,{runSearch:function(q,k,c){var n,p,b,a=[],e,f,o=new RegExp(q,"i");for(var g=0,j=k.get("length");g<j;g++){n=k.objectAt(g);p=n.get(c);if(!p){continue}if(p.toLowerCase().match(o)){a.push(n)}}return a}});sc_require("controllers/searchable");SCUI.SearchableTreeController=SC.TreeController.extend(SCUI.Searchable,{store:null,orderBy:"name ASC",baseSearchQuery:null,baseSearchArray:null,_baseArray:null,runSearch:function(b,f,g){var c,e=new RegExp(b,"i");this._baseArray=this.get("baseSearchArray")||this._createRecordArray();c=this._searchInternalArray(e,this._baseArray,g);var a=SC.Object.create({treeItemIsExpanded:YES,treeItemChildren:c});return a},_createRecordArray:function(){var c,e={},a=this.get("store"),f=this.get("baseSearchQuery"),b=[];if(a&&f){b=a.find(f)}return b},_searchInternalArray:function(a,c,f){var e,b=[];c.forEach(function(g){e=g.get(f);if(e&&e.match(a)){b.push(g)}});return b}});SCUI.CustomActions={actions:{},hoverClass:"hover",activeClass:"active",_isContinuedMouseDown:NO,_mouseDownClass:null,_mouseOverClass:null,_getClassNames:function(){var c=this._classNames,b,a;if(c){return c}c=this._classNames=[];b=this.actions;for(a in b){if(b.hasOwnProperty(a)){c.push(a)}}return c},_isInsideNamedClass:function(b){var f=this.get("layer");if(!f){return NO}var j=this._getClassNames(),g=SC.$(b.target),e,a=j.length,c=NO;while(!c&&g.length>0&&(g[0]!==f)){e=a;while(!c&&((e--)>=0)){if(g.is(j[e])){c=j[e]}}g=g.parent()}g=f=null;return c},_setDetails:function(a){if(a.set){a.set("layer",this)}else{a.layer=this}},mouseDown:function(b){var c=this._isInsideNamedClass(b),a=this.actions[c];if(a){this._mouseDown(c,b,a);return YES}},mouseUp:function(b){var c=this._isInsideNamedClass(b),a=this.actions[c];if(a){this._mouseUp(c,b,a);return YES}},mouseExited:function(b){var a=this._mouseDownClass;if(a){this._mouseExited(a,b)}this._mouseDownClass=null},_mouseDown:function(c,b,a){if(!a){a=this.actions[c]}this._setDetails(a);this._isContinuedMouseDown=YES;this._mouseDownClass=c;this.$(c).addClass(this.activeClass);if(a.mouseDown){a.mouseDown(b)}},_mouseUp:function(c,b,a){var f,e;if(!a){a=this.actions[c]}if(this._mouseDownClass==c){if(a.get){f=a.get("target")||null;e=a.get("action")}else{f=a.target||null;e=a.action}console.log("Calling Action ",e,"on target",f);if(f===undefined&&SC.typeOf(e)===SC.T_FUNCTION){e.call(this,b)}else{if(f!==undefined&&SC.typeOf(e)===SC.T_FUNCTION){e.apply(f,[b])}else{this.getPath("pane.rootResponder").sendAction(e,f,this,this.get("pane"))}}}this.$(c).removeClass(this.activeClass);this._isContinuedMouseDown=NO;this._mouseDownClass=null},_mouseEntered:function(c,b,a){if(!a){a=this.actions[c]}this.$(c).addClass(this.hoverClass);if(this._isContinuedMouseDown&&this._mouseDownClass==c){this.$(c).addClass(this.activeClass)}if(a.mouseEntered){a.mouseEntered(b)}this._mouseOverClass=c},_mouseExited:function(c,b,a){if(!a){a=this.actions[c]}this.$(c).removeClass(this.hoverClass).removeClass(this.activeClass);if(a.mouseExited){a.mouseExited(b)}this._mouseOverClass=null},_mouseMoved:function(c,b,a){if(!a){a=this.actions[c]}if(a.mouseMoved){a.mouseMoved(b)}},mouseMoved:function(c){var e=this._isInsideNamedClass(c),b=this.actions[e],a=this._mouseOverClass;if(b){if(e!==a){if(a){this._mouseExited(a,c,b)}this._mouseEntered(e,c,b)}this._mouseMoved(e,c,b)}else{if(a){this._mouseExited(a,c,b)}}},touchStart:function(a){return this.mouseDown(a)},touchEnd:function(a){return this.mouseUp(a)},touchEntered:function(a){return this.mouseEntered(a)},touchExited:function(a){return this.mouseExited(a)}};SCUI.DropDown={isShowingDropDown:NO,target:null,action:null,closeTarget:null,closeAction:null,_dropDownPane:null,dropDown:SC.MenuPane.design({layout:{width:100,height:0},contentView:SC.View.design({}),items:["_item".loc("1"),"_item".loc("2")]}),dropDownType:SC.PICKER_MENU,initMixin:function(){var e,c,a,f,b;b=this.get("dropDown");if(b&&SC.typeOf(b)===SC.T_CLASS){this._dropDownPane=b.create();this.set("dropDown",this._dropDownPane);if(this._dropDownPane){this.bind("isShowingDropDown","._dropDownPane.isPaneAttached")}}e=this.target||this;c=this.action||"toggle";this.set("target",e);this.set("action",c);if(!SC.none(this.closeAction)){this.addObserver("isShowingDropDown",this,this._isShowingDropDownChanged)}},hideDropDown:function(){if(this._dropDownPane&&SC.typeOf(this._dropDownPane.remove)===SC.T_FUNCTION){this._dropDownPane.remove();this.set("isShowingDropDown",NO)}},showDropDown:function(){this.hideDropDown();if(this._dropDownPane&&SC.typeOf(this._dropDownPane.popup)===SC.T_FUNCTION){var c=this.get("dropDownType"),a=this.get("layer")||this,b=this.get("anchor")||this;if(SC.typeOf(b)===SC.T_STRING){b=a.$(b).firstObject();this.set("anchor",b)}this._dropDownPane.popup(b,c);this.set("isShowingDropDown",YES)}},toggle:function(){if(this.get("isShowingDropDown")){this.hideDropDown()}else{this.showDropDown()}},_isShowingDropDownChanged:function(){var e,b,c=this.get("isShowingDropDown");if(c===NO){e=this.get("closeTarget")||this.get("target")||this;b=this.get("closeAction");this.getPath("pane.rootResponder").sendAction(b,e,this,this.get("pane"))}}};SCUI.CollectionViewDynamicDelegate={isCollectionViewDynamicDelegate:YES,collectionViewContentExampleViewFor:function(a,b,c){return null},controllerForContent:function(a){return null},customRowViewMetadata:null,contentViewMetadataForContentIndex:function(a,e){var c=null;if(a&&a.get("isDynamicCollection")){var b=a.get("customRowViewMetadata");if(!SC.none(b)){c=b.objectAt(e)}}return c},contentViewDidChangeForContentIndex:function(a,c,b,e){if(a&&a.isDynamicCollection&&c&&c.isDynamicListItem){this.collectionViewSetMetadataForContentIndex(a,c.get("viewMetadata"),e)}},collectionViewInsertMetadataForContentIndex:function(b,e,f){var c=b.get("customRowViewMetadata");if(SC.none(c)){return}var a=c.get("length");console.log("Before Insert Length: %@".fmt(a));if(a<1){c=[e]}else{c.replace(f,0,[e])}console.log("After Insert Length: %@".fmt(c.length));b.set("customRowViewMetadata",c);b.rowHeightDidChangeForIndexes(f)},collectionViewSetMetadataForContentIndex:function(a,e,f){console.log("\nCollectionViewDynamicDelegate(%@): collectionViewSetMetadataForContentIndex for (%@)".fmt(this,f));if(a&&a.get("isDynamicCollection")){var b=a.get("customRowHeightIndexes");if(SC.none(b)){b=SC.IndexSet.create()}b.add(f,1);a.set("customRowHeightIndexes",b);var c=a.get("customRowViewMetadata");if(SC.none(c)){c=SC.SparseArray.create()}c.replace(f,1,[e]);a.set("customRowViewMetadata",c);a.rowHeightDidChangeForIndexes(f)}return e}};SCUI.DynamicCollection={isDynamicCollection:YES,customRowViewMetadata:null,initMixin:function(){this.set("customRowViewMetadata",SC.SparseArray.create());this.set("rowDelegate",this)},rowMargin:0,itemViewForContentIndex:function(q,p){var n=this.get("content"),e=this._sc_itemViews,w=n.objectAt(q),a=this.get("contentDelegate"),v=this.get("delegate"),o=a.contentGroupIndexes(this,n),c=NO,u,k,z,j,b,f;if(!e){e=this._sc_itemViews=[]}if(!p&&(k=e[q])){return k}c=o&&o.contains(q);if(c){c=a.contentIndexIsGroup(this,w,q)}if(c){u=this.get("contentGroupExampleViewKey");if(u&&w){z=w.get(u)}if(!z){z=this.get("groupExampleView")||this.get("exampleView")}}else{z=this.invokeDelegateMethod(v,"collectionViewContentExampleViewFor",this,w,q);if(!z){u=this.get("contentExampleViewKey");if(u&&w){z=w.get(u)}}if(!z){z=this.get("exampleView")}}var t=this._TMP_ATTRS;t.contentIndex=q;t.content=w;t.owner=t.displayDelegate=this;t.parentView=this.get("containerView")||this;t.page=this.page;t.layerId=this.layerIdFor(q,w);t.isEnabled=a.contentIndexIsEnabled(this,w,q);t.isSelected=a.contentIndexIsSelected(this,w,q);t.outlineLevel=a.contentIndexOutlineLevel(this,w,q);t.disclosureState=a.contentIndexDisclosureState(this,w,q);t.isGroupView=c;t.isVisibleInWindow=this.isVisibleInWindow;if(c){t.classNames=this._GROUP_COLLECTION_CLASS_NAMES}else{t.classNames=this._COLLECTION_CLASS_NAMES}j=this.layoutForContentIndex(q);if(j){t.layout=j}else{delete t.layout}f=v.controllerForContent(w);if(f){t.rootController=f}else{delete t.rootController}t.dynamicDelegate=v;var g=this.invokeDelegateMethod(v,"contentViewMetadataForContentIndex",this,q);if(g){t.viewMetadata=g}else{delete t.viewMetadata}k=this.createItemView(z,q,t);if(!g){g=this.invokeDelegateMethod(v,"collectionViewSetMetadataForContentIndex",this,k.get("viewMetadata"),q)}e[q]=k;return k},layoutForContentIndex:function(b){var a=this.get("rowMargin");return{top:this.rowOffsetForContentIndex(b),height:this.rowHeightForContentIndex(b),left:a,right:a}},contentIndexRowHeight:function(c,f,g){var a=this.get("rowHeight");if(c&&c.get("isDynamicCollection")){var e=c.get("customRowViewMetadata");if(!SC.none(e)){var b=e.objectAt(g);if(b&&b.height){a=b.height}}}return a}};SCUI.DynamicListItem={isDynamicListItem:YES,dynamicDelegate:null,rootController:null,viewMetadata:null,viewMetadataHasChanged:function(){var a=this.get("dynamicDelegate");this.invokeDelegateMethod(a,"contentViewDidChangeForContentIndex",this.owner,this,this.get("content"),this.contentIndex)}};SCUI.Mobility={viewThatMoves:null,mouseDown:function(a){var b,c;b=this.get("viewThatMoves")||this;if(!b){return YES}c=SC.clone(b.get("layout"));c.pageX=a.pageX;c.pageY=a.pageY;this._mouseDownInfo=c;return YES},_adjustViewLayoutOnDrag:function(o,k,j,q,f,p,c,b,e){var n=f[p],g=f[c],a=f[b],t=f[e];if(!SC.none(t)){if(!SC.none(n)){o.adjust(p,n+q)}else{if(!SC.none(g)){o.adjust(c,g-q)}else{if(!SC.none(a)){o.adjust(b,a+q)}}}}},mouseDragged:function(e){var f=this._mouseDownInfo;if(f){var c=e.pageX-f.pageX,a=e.pageY-f.pageY;var b=this.get("viewThatMoves")||this;this._adjustViewLayoutOnDrag(b,f.zoneX,f.zoneY,c,f,"left","right","centerX","width");this._adjustViewLayoutOnDrag(b,f.zoneY,f.zoneX,a,f,"top","bottom","centerY","height");return YES}return NO}};SCUI.Permissible={isPermitted:null,isPermittedBindingDefault:SC.Binding.oneWay().bool(),displayProperties:["isPermitted","tooltipSuffix"],tooltipSuffix:"(unauthorized)".loc(),_isPermittedDidChange:function(){if(this.get("isPermitted")){if(!SC.none(this._tooltip)){this.setIfChanged("toolTip",this._tooltip)}}else{this._tooltip=this.get("toolTip");this.set("toolTip",(!(SC.none(this._tooltip))?(this._toolTip+" "):"")+this.get("tooltipSuffix"))}}.observes("isPermitted"),renderMixin:function(a,b){a.setClass("unauthorized",!this.get("isPermitted"))}};SCUI.RECUR_ONCE="once";SCUI.RECUR_REPEAT="repeat";SCUI.RECUR_SCHEDULE="schedule";SCUI.RECUR_ALWAYS="always";SCUI.Recurrent={isRecurrent:YES,_timer_pool:{},_guid_for_timer:1,fireOnce:function(n,e,o){if(e===undefined){e=1}var j=n,a=o,k,g;if(!o){a=function(){return YES}}if(SC.typeOf(o)===SC.T_STRING){a=this[o]}var b=this._name_builder(SCUI.RECUR_ONCE,n);if(arguments.length>3){k=SC.$A(arguments).slice(3);if(SC.typeOf(j)===SC.T_STRING){j=this[n]}g=j;j=function(){delete this._timer_pool[b];if(a.call(this)){return g.apply(this,k)}}}var c=SC.Timer.schedule({target:this,action:j,interval:e});this._timer_pool[b]=c;return b},_name_builder:function(b,c){var a="%@_%@_%@".fmt(b,c,this._guid_for_timer);this._guid_for_timer+=1;return a}};SCUI.Resizable={viewToResize:null,verticalMove:YES,horizontalMove:YES,maxHeight:null,minHeight:null,maxWidth:null,minWidth:null,mouseDown:function(a){var b,c={};b=this.get("viewToResize")||this.get("parentView");if(!b){return YES}c.resizeView=b;var e=b.get("frame");c.width=e.width;c.height=e.height;c.top=e.y;c.left=e.x;c.pageX=a.pageX;c.pageY=a.pageY;this._mouseDownInfo=c;return YES},mouseDragged:function(q){var g=this._mouseDownInfo;if(!g){return YES}var f=q.pageX-g.pageX,e=q.pageY-g.pageY;if(f===0&&e===0){return YES}var n=g.resizeView;var j=SC.clone(n.get("layout"));var k=this.get("horizontalMove");if(k){var b=g.width+f;var p=this.get("maxWidth");var a=this.get("minWidth");if(!SC.none(p)&&b>p){b=p}else{if(!SC.none(a)&&b<a){b=a}}j.width=b}var c=this.get("verticalMove");if(c){var u=g.height+e;var o=this.get("maxHeight");var t=this.get("minHeight");if(!SC.none(o)&&u>o){u=o}else{if(!SC.none(t)&&u<t){u=t}}j.height=u}j.top=g.top;j.left=g.left;n.set("layout",j);n.updateLayout();return YES}};SCUI.ACTION_BEHAVIOR=SC.PUSH_BEHAVIOR;SCUI.TOGGLE_BEHAVIOR=SC.TOGGLE_BEHAVIOR;SCUI.RADIO_BEHAVIOR="radio";SCUI.SimpleButton={target:null,action:null,hasHover:NO,inState:NO,buttonBehavior:SCUI.ACTION_BEHAVIOR,_hover:NO,stateClass:"state",hoverClass:"hover",activeClass:"active",alwaysEnableToolTip:NO,_isMouseDown:NO,_isContinuedMouseDown:NO,_canFireAction:NO,displayProperties:["inState","isEnabled"],mouseDown:function(a){if(!this.get("isEnabledInPane")){return YES}this._isMouseDown=this._isContinuedMouseDown=this._canFireAction=YES;this.displayDidChange();return YES},mouseExited:function(a){if(this.get("hasHover")){this._hover=NO}if(this._isMouseDown){this._isMouseDown=NO;this._canFireAction=NO}this.displayDidChange();return YES},mouseEntered:function(a){if(this.get("hasHover")){this._hover=YES}if(this._isContinuedMouseDown){this._isMouseDown=YES;this._canFireAction=YES}this.displayDidChange();return YES},mouseUp:function(a){var e;this._isMouseDown=this._isContinuedMouseDown=false;if(!this.get("isEnabledInPane")){return YES}e=this.get("buttonBehavior");if(e===SCUI.RADIO_BEHAVIOR){if(this.get("inState")){this._canFireAction=false;this.displayDidChange();return YES}else{this.set("inState",YES)}}else{if(e===SCUI.TOGGLE_BEHAVIOR){this.set("inState",!this.get("inState"))}}var c=this.get("target")||null;var b=this.get("action");if(this._canFireAction){if(this._hasLegacyActionHandler()){this._triggerLegacyActionHandler(a)}else{this.getPath("pane.rootResponder").sendAction(b,c,this,this.get("pane"))}}this._canFireAction=false;this.displayDidChange();return YES},touchStart:function(a){return this.mouseDown(a)},touchEnd:function(a){return this.mouseUp(a)},touchEntered:function(a){return this.mouseEntered(a)},touchExited:function(a){return this.mouseExited(a)},renderMixin:function(c,g){if(this.get("hasHover")){var e=this.get("hoverClass");c.setClass(e,this._hover&&!this._isMouseDown)}if(this.get("buttonBehavior")!==SCUI.ACTION_BEHAVIOR){var f=this.get("stateClass");c.setClass(f,this.inState)}var b=this.get("activeClass");c.setClass(b,this._isMouseDown);var a=this.get("toolTip");if(this.get("alwaysEnableToolTip")&&!a){a=this.get("title")}if(SC.typeOf(a)===SC.T_STRING){if(this.get("localize")){a=a.loc()}c.attr("title",a);c.attr("alt",a)}},_hasLegacyActionHandler:function(){var a=this.get("action");if(a&&(SC.typeOf(a)===SC.T_FUNCTION)){return true}if(a&&(SC.typeOf(a)===SC.T_STRING)&&(a.indexOf(".")!==-1)){return true}return false},_triggerLegacyActionHandler:function(evt){var target=this.get("target");var action=this.get("action");if(target===undefined&&SC.typeOf(action)===SC.T_FUNCTION){this.action(evt)}else{if(target!==undefined&&SC.typeOf(action)===SC.T_FUNCTION){action.apply(target,[evt])}}if(SC.typeOf(action)===SC.T_STRING){eval("this.action = function(e) { return "+action+"(this, e); };");this.action(evt)}},_hasStateProperty:function(a,b){SC.Logger.warn("Deprecation: hasState replaced by buttonBehavior.");if(b!==undefined){this.set("buttonBehavior",b?SCUI.TOGGLE_BEHAVIOR:SCUI.ACTION_BEHAVIOR)}else{b=this.get("buttonBehavior")!==SCUI.ACTION_BEHAVIOR}return b},initMixin:function(){var a=this.hasState;this.hasState=this._hasStateProperty.property("buttonBehavior").cacheable();if(a!==undefined){this.set("hasState",a)}}};SCUI.StatusChanged={notifyOnContentStatusChange:YES,contentStatusDidChange:function(a){},contentKey:"content",_sc_content_status_changed:function(){var a,e,c=this._last_status||0,b=this;if(this.get("contentKey")&&this.get){e=this.get(this.get("contentKey"))}if(e&&e.get){a=e.get("status")}if(c===a){return}this._last_status=a;if(this.get("notifyOnContentStatusChange")&&a&&c!==a&&this.contentStatusDidChange){this.invokeLast(function(){b.contentStatusDidChange(a)})}},initMixin:function(){if(this.get("notifyOnContentStatusChange")&&this.addObserver){var a;if(this.get("contentKey")){a="%@.status".fmt(this.get("contentKey"))}if(a&&this.addObserver){this.addObserver(a,this,this._sc_content_status_changed)}}}};SCUI.ToolTip={toolTip:"",isImage:NO,displayProperties:["toolTip"],renderMixin:function(c,f){var b=this.get("toolTip");var e=this.get("isImage"),a;if(this.get("alwaysEnableToolTip")&&!b){b=this.get("title")}b=(SC.typeOf(b)===SC.T_STRING)?SC.RenderContext.escapeHTML(b).replace(/\"/g,"'"):"";if(e){a={title:b,alt:b}}else{a={title:b}}c=c.attr(a)}};SCUI.Undoable={undoableProperties:[],initMixin:function(){var e,b=this.get("undoableProperties");var a=b.length;e=this._undoableProperty_didChange_valueCache={};while(--a>=0){var c=b[a];this.addObserver(c,this,this.undoablePropertyDidChange);e[c]=this.get(c)}},destroyMixin:function(){var b=this.get("undoableProperties");var a=b.length;while(--a>=0){var c=b[a];this.removeObserver(c,this,this.undoablePropertyDidChange)}this._undoableProperty_didChange_valueCache=null},undoablePropertyDidChange:function(g,b){var f=this.get(b);var e=this._undoableProperty_didChange_valueCache;var a=e[b];if(this.undoablePropertyShouldRegisterUndo(b,a,f)){var c=this.get("undoManager");if(c){c.registerUndo(function(){this.set(b,a)},this)}e[b]=f}},undoablePropertyShouldRegisterUndo:function(b,a,c){return(c!==a)}};SCUI.ContextMenuPane=SC.MenuPane.extend({usingStaticLayout:NO,popup:function(j,b){var e=this.get("items");if(!e||e.get("length")<=0){return NO}if((!j||!j.isView)&&!this.get("usingStaticLayout")){return NO}if(b&&b.button&&(b.which===3||(b.ctrlKey&&b.which===1))){document.oncontextmenu=function(n){if(b.preventDefault){b.preventDefault()}else{b.stop()}b.returnValue=false;b.stopPropagation();return false};var f=j.isView?j.get("layer"):j;var c=SC.viewportOffset(f);var a=b.pageX-c.x;var k=b.pageY-c.y;this.beginPropertyChanges();var g=this.get("displayItems");this.set("anchorElement",f);this.set("anchor",j);this.set("preferType",SC.PICKER_MENU);this.endPropertyChanges();return arguments.callee.base.apply(this,[j,[a+2,k+2,1]])}else{}return NO},remove:function(){return arguments.callee.base.apply(this,arguments)},keyUp:function(b,a){if(a&&a.commandCodes){return arguments.callee.base.apply(this,[a])}else{if(b&&b.commandCodes){return arguments.callee.base.apply(this,[b])}else{return NO}}},keyDown:function(b,a){if(a&&a.commandCodes){return arguments.callee.base.apply(this,[a])}else{if(b&&b.commandCodes){return arguments.callee.base.apply(this,[b])}else{return NO}}},exampleView:SC.MenuItemView.extend({keyUp:function(b,a){if(a&&a.commandCodes){return arguments.callee.base.apply(this,[a])}else{if(b&&b.commandCodes){return arguments.callee.base.apply(this,[b])}else{return NO}}},keyDown:function(b,a){if(a&&a.commandCodes){return arguments.callee.base.apply(this,[a])}else{if(b&&b.commandCodes){return arguments.callee.base.apply(this,[b])}else{return NO}}}})});SCUI.ModalPane=SC.PalettePane.extend({maxHeight:null,minHeight:null,maxWidth:null,minWidth:null,title:"",titleIcon:null,titleBarHeight:24,footerHeight:40,footerView:null,isResizable:YES,margin:20,isModal:YES,nowShowing:null,modalPane:SC.ModalPane.extend({classNames:"for-sc-panel"}),_containerView:null,_isFullscreened:NO,mouseDown:function(a){if(this._titleBarClicked===YES){arguments.callee.base.apply(this,arguments)}return YES},mouseDragged:function(a){if(this._titleBarClicked===YES){arguments.callee.base.apply(this,arguments)}return YES},mouseUp:function(a){this._titleBarClicked=NO;return arguments.callee.base.apply(this,arguments)},replaceContent:function(a){this._containerView.replaceContent(a)},_fullscreen:function(){if(this._isFullscreened===NO){this._prevLayout=this.get("layout");var e=this.get("margin");var c={top:e,bottom:e,left:e,right:e};c=SC.View.convertLayoutToAnchoredLayout(c,this.computeParentDimensions());var b=this.get("maxWidth");if(b&&b<c.width){c.width=b;delete c.left;delete c.right;c.centerX=0}var a=this.get("maxHeight");if(a&&a<c.height){c.height=a;delete c.top;delete c.bottom;c.centerY=0}this.set("layout",c)}else{this.set("layout",this._prevLayout)}this.updateLayout();this._isFullscreened=!this._isFullscreened},createChildViews:function(){var g=[];var a=null;var c=this.get("titleBarHeight");var e=this;a=this.createChildView(SC.View.design({classNames:["header"],layout:{top:0,left:0,right:0,height:c},mouseDown:function(j){e._titleBarClicked=YES;return NO},childViews:"closeButton fullScreenButton title".w(),closeButton:SC.View.design(SCUI.SimpleButton,{layout:{left:5,centerY:0,width:16,height:16},classNames:["modal-close-icon"],target:this,action:"remove"}),fullScreenButton:SC.View.design(SCUI.SimpleButton,{layout:{left:25,centerY:0,width:16,height:16},classNames:["modal-fullscreen-icon"],target:this,action:"_fullscreen",isVisibleBinding:SC.binding(".isResizable",this)}),title:SC.LabelView.design({layout:{left:45,right:45,top:0,bottom:0},valueBinding:SC.Binding.from("title",this).oneWay(),textAlign:SC.ALIGN_CENTER,fontWeight:SC.BOLD_WEIGHT,classNames:["modal-title"],icon:this.get("titleIcon")})}));g.push(a);var f=this.get("footerView");var b=this.get("footerHeight");a=this.createChildView(SC.ContainerView.design({layout:{top:c,bottom:f?b:0,left:0,right:0},classNames:"body",nowShowingBinding:SC.Binding.from("nowShowing",this),contentView:this.get("contentView")}));this._containerView=a;this.contentView=this._containerView.contentView;g.push(a);if(SC.kindOf(f,SC.View)&&f.isClass){a=this.createChildView(f,{classNames:"footer",layout:{left:0,right:0,bottom:0,height:b}});this.set("footerView",a);g.push(a)}else{this.set("footerView",null)}a=this.createChildView(SC.View.design(SCUI.Resizable,{classNames:["picker-resizable-handle"],layout:{bottom:0,right:0,height:16,width:16},viewToResizeBinding:SC.Binding.oneWay(".parentView"),maxHeight:this.get("maxHeight"),maxWidth:this.get("maxWidth"),minHeight:this.get("minHeight"),minWidth:this.get("minWidth"),isVisibleBinding:SC.binding(".isResizable",this)}));g.push(a);this.set("childViews",g)}});SCUI.Dictionary=SC.Object.extend(SC.Enumerable,{length:0,keys:null,init:function(){arguments.callee.base.apply(this,arguments);this._index={};this.set("keys",SC.Set.create())},nextObject:function(a,f,b){var e,c;if(this.get("length")>0){if(a===0){c=this._root}else{c=b.previousNode?b.previousNode.nextNode:null}e=c?c.value:undefined;b.previousNode=c}return e},add:function(b,e){var c,a=NO;if(!this._index[b]){c={key:b,value:e};this._index[b]=c;this.get("keys").add(b);if(!this._tail){this._root=c}else{c.previousNode=this._tail;this._tail.nextNode=c}this._tail=c;this.set("length",(this.get("length")||0)+1);this.enumerableContentDidChange();a=YES}return a},remove:function(b){var f=this._index[b];var e,c;var a=NO;if(f){e=f.previousNode;c=f.nextNode;if(e){e.nextNode=c}if(c){c.previousNode=e}if(f===this._root){this._root=c}if(f===this._tail){this._tail=e}delete this._index[b];this.get("keys").remove(b);this.set("length",this.get("length")-1);this.enumerableContentDidChange();a=YES}return a},clear:function(){this._index={};this.get("keys").clear();this._root=null;this._tail=null;this.set("length",0);this.enumerableContentDidChange()},contains:function(a){return this._index[a]?YES:NO},unknownProperty:function(a,b){if(b!==undefined){if(this.contains(a)){this._index[a].value=b;this.enumerableContentDidChange()}else{this.add(a,b)}}else{b=this._index[a]?this._index[a].value:undefined}return b},isEqual:function(g){var f=this._root;var e=g._root;var a=NO,c=0,b=this.get("length");if(b===g.get("length")){while(f&&e&&(f.value===e.value)&&(f.key===e.key)){f=f.nextNode;e=e.nextNode;c=c+1}a=(c===b)?YES:NO}return a},diff:function(e,a,b){var c;a=(SC.typeOf(a)===SC.T_ARRAY)?a:[];b=(SC.typeOf(b)===SC.T_ARRAY)?b:[];if(e){c=e._root;while(c){if(!this.contains(c.key)){a.push(c.value)}c=c.nextNode}}c=this._root;while(c){if(!e.contains(c.key)){b.push(c.value)}c=c.nextNode}},_index:null,_root:null,_tail:null});SCUI.Dictionary.mixin({createFromEnumerable:function(a,b){var c=SCUI.Dictionary.create();if(a&&a.isEnumerable&&(SC.typeOf(b)===SC.T_FUNCTION)){a.forEach(function(e){c.add(b(e),e)})}return c}});SCUI.State=SC.Object.extend({initState:function(){},enterState:function(a){},exitState:function(a){},parallelStatechart:SCUI.DEFAULT_TREE,parentState:null,history:null,initialSubState:null,name:null,state:function(){var a=this.get("stateManager");if(!a){throw"Cannot access the current state because state does not have a state manager"}return a.currentState(this.get("parallelStatechart"))},goState:function(a){var b=this.get("stateManager");if(b){b.goState(a,this.get("parallelStatechart"))}else{throw"Cannot goState cause state does not have a stateManager!"}},goHistoryState:function(a,b){var c=this.get("stateManager");if(c){c.goHistoryState(a,this.get("parallelStatechart"),b)}else{throw"Cannot goState cause state does not have a stateManager!"}},enterInitialSubState:function(a){var b=this.get("initialSubState");if(b){if(!a[b]){throw"Cannot find initial sub state: %@ defined on state: %@".fmt(b,this.get("name"))}this.set("history",b);var c=a[b];return this.goState(b,a)}return this},toString:function(){return this.get("name")},parentStateObject:function(){var a=this.get("stateManager");if(a){return a.parentStateObject(this.get("parentState"),this.get("parallelStatechart"))}else{throw"Cannot access parentState cause state does not have a stateManager!"}}.property("parentState").cacheable(),trace:function(){var a=this.get("stateManager");if(a){return a._parentStates(this)}else{throw"Cannot trace cause state does not have a stateManager!"}}.property()});require("system/state");SCUI.Statechart={isStatechart:true,LOG_NONE:0,LOG_STATE_CHANGES:1,LOG_SENT_EVENTS:2,LOG_HANDLED_EVENTS:4,LOG_UNHANDLED_EVENTS:8,LOG_ALL_EVENTS:14,LOG_ALL:15,logLevel:0,initMixin:function(){this._all_states={};this._all_states[SCUI.DEFAULT_TREE]={};this._current_state={};this._current_state[SCUI.DEFAULT_TREE]=null;this._goStateLocked=NO;this._sendEventLocked=NO;this._pendingStateTransitions=[];this._pendingActions=[];this.sendAction=this.sendEvent;if(this.get("startOnInit")){this.startupStatechart()}},startOnInit:YES,statechartIsStarted:NO,startupStatechart:function(){if(!this.get("statechartIsStarted")){var f,a,j,c,e,b,g;for(f in this){if(this.hasOwnProperty(f)&&SC.kindOf(this[f],SCUI.State)&&this[f].get&&!this[f].get("beenAddedToStatechart")){j=this[f];this._addState(f,j)}}c=this._all_states;for(f in c){if(c.hasOwnProperty(f)){a=c[f];for(j in a){if(a.hasOwnProperty(j)){a[j].initState()}}}}e=this.get("startStates");if(!e){throw"Please add startStates to your statechart!"}for(f in c){if(c.hasOwnProperty(f)){b=e[f];g=c[f];if(!b){console.error("The parallel statechart %@ must have a start state!".fmt(f))}if(!g){throw"The parallel statechart %@ does not exist!".fmt(f)}if(!g[b]){throw"The parallel statechart %@ doesn't have a start state [%@]!".fmt(f,b)}this.goState(b,f)}}}this.setIfChanged("statechartIsStarted",YES)},registerState:function(f,e,c){var b,a;b=SCUI.State.create(f);if(e&&c){if(e.isStatechart){e._addState(c,b);b.initState()}else{throw"Cannot add state: %@ because state manager does not mixin SCUI.Statechart".fmt(b.get("name"))}}else{b.set("beenAddedToStatechart",NO)}return b},goHistoryState:function(c,a,g){var e=this._all_states[a],b,f;if(!a||!e){throw"State requesting go history does not have a valid parallel tree"}b=e[c];if(b){f=b.get("history")||b.get("initialSubState")}if(!f){if(!g){console.warn("Requesting History State for [%@] and it is not a parent state".fmt(c))}f=c;this.goState(f,a)}else{if(g){this.goHistoryState(f,a,g)}else{this.goState(f,a)}}},goState:function(q,u){var b=this._current_state[u],p=[],n=[],t,e,a,o,f,g,k,c=this.get("logLevel"),j;if(!u){throw"#goState: State requesting go does not have a valid parallel tree"}a=this._all_states[u][q];if(!a){throw"#goState: Could not find the requested state: %@".fmt(q)}if(this._goStateLocked){this._pendingStateTransitions.push({requestedState:a,tree:u});if(c&SCUI.Statechart.LOG_STATE_CHANGES){console.info("%@: added [%@] to pending state transitions queue for [%@]".fmt(this,a,u))}return}if(b===a){return}this._goStateLocked=YES;p=this._parentStates_with_root(a);n=b?this._parentStates_with_root(b):[];o=n.find(function(w,v){e=v;t=p.indexOf(w);if(t>=0){return YES}});if(!t){t=p.length-1}j="";for(k=0;k<e;k+=1){if(c&SCUI.Statechart.LOG_STATE_CHANGES){j+="Exiting State: [%@] in [%@]\n".fmt(n[k],u)}n[k].exitState()}if(c&SCUI.Statechart.LOG_STATE_CHANGES){console.info(j)}j="";for(k=t-1;k>=0;k-=1){g=p[k];if(c&SCUI.Statechart.LOG_STATE_CHANGES){j+="Entering State: [%@] in [%@]\n".fmt(g,u)}f=p[k+1];if(f&&SC.typeOf(f)===SC.T_OBJECT){f.set("history",g.name)}g.enterState();if(g===a){g.enterInitialSubState(this._all_states[u||SCUI.DEFAULT_TREE])}}if(c&SCUI.Statechart.LOG_STATE_CHANGES){console.info(j)}this._current_state[u]=a;this._goStateLocked=NO;this._flushPendingStateTransition();this._flushPendingActions()},_flushPendingStateTransition:function(){var a=this.get("logLevel");var c=this._pendingStateTransitions.shift();var b;if(!c){return}if(a&SCUI.Statechart.LOG_STATE_CHANGES){b="%@: performing pending state transition for requested state [%@] in [%@]";console.info(b.fmt(this,c.requestedState,c.tree))}this.goState(c.requestedState,c.tree)},currentState:function(a){a=a||SCUI.DEFAULT_TREE;return this._current_state[a]},isInState:function(g,b){b=b||SCUI.DEFAULT_TREE;var a=this._all_states[b],c=this.currentState(b),e=NO;var f=this._parentStates(c)||[];if(SC.typeOf(g)===SC.T_STRING){g=a[g]}f.forEach(function(j){if(!e&&j===g){e=YES}});return e},isResponderContext:YES,sendEvent:function(e,g,a){var b=this.get("logLevel"),k=NO,j=this._current_state,f;if(this._sendEventLocked||this._goStateLocked){this._pendingActions.push({action:e,sender:g,context:a});if(b&SCUI.Statechart.LOG_SENT_EVENTS){console.info("%@: added %@ to pending actions queue".fmt(this,e))}return}this._sendEventLocked=YES;if(b&SCUI.Statechart.LOG_SENT_EVENTS){console.info("%@: begin action '%@' (%@, %@)".fmt(this,e,g,a))}for(var n in j){if(j.hasOwnProperty(n)){k=NO;f=j[n];if(!f.get){continue}while(!k&&f){if(f.tryToPerform){try{k=f.tryToPerform(e,g,a)}catch(c){console.error("Exception occurred while trying perform action: %@ \n %@".fmt(e,c));if(SC.ExceptionHandler){SC.ExceptionHandler.handleException(c)}}}if(!k){f=f.get("parentState")?this._all_states[n][f.get("parentState")]:null}}if(!k&&(b&SCUI.Statechart.LOG_UNHANDLED_EVENTS)){console.info("%@:  action '%@' NOT HANDLED in tree %@".fmt(this,e,n))}else{if(k&&(b&SCUI.Statechart.LOG_HANDLED_EVENTS)){console.info("%@: action '%@' handled by %@ in tree %@".fmt(this,e,f.get("name"),n))}}}}this._sendEventLocked=NO;this._flushPendingActions();return f},_flushPendingActions:function(){var a=this._pendingActions.shift();if(!a){return}if(this.get("logLevel")&SCUI.Statechart.LOG_SENT_EVENTS){console.info("%@: firing pending action %@".fmt(this,a.action))}else{this.toString()}this.sendEvent(a.action,a.sender,a.context)},_addState:function(b,c){c.set("stateManager",this);c.set("name",b);var a=c.get("parallelStatechart")||SCUI.DEFAULT_TREE;c.setIfChanged("parallelStatechart",a);if(!this._all_states[a]){this._all_states[a]={}}if(this._all_states[a][b]){throw"Trying to add state %@ to state tree %@ and it already exists".fmt(b,a)}this._all_states[a][b]=c;c.set("beenAddedToStatechart",YES)},_parentStates:function(b){var a=[],c=b;a.push(c);c=c.get("parentStateObject");while(c){a.push(c);c=c.get("parentStateObject")}return a},_parentStates_with_root:function(b){var a=this._parentStates(b);a.push("root");return a},parentStateObject:function(b,a){if(b&&a&&this._all_states[a]&&this._all_states[a][b]){return this._all_states[a][b]}return null}};SCUI.CascadingComboView=SC.View.extend({content:null,propertiesHash:null,masterLabel:null,detailLabel:null,createChildViews:function(){var f=[],b;var j=["contentPath","masterValueKey","detailValueKey","rootItemKey","childItemKey","relationKey"];var a=null;var c=this.get("propertiesHash");var e=this.get("content");if(c){j.forEach(function(k){if(!SC.none(c[k])&&c[k]!==""){a=YES}else{a=null}})}if(a){b=this.createChildView(SC.LabelView.design({layout:{left:20,top:10,right:20,height:22},isEditable:NO,value:this.get("masterLabel").loc()}));f.push(b);var g="*content.%@".fmt(c.rootItemKey);this.masterCombo=b=this.createChildView(SCUI.ComboBoxView.design({layout:{left:20,right:20,top:32,height:22},objectsBinding:c.contentPath,nameKey:c.masterValueKey,valueBinding:SC.Binding.from("*content.%@".fmt(c.rootItemKey),this)}));f.push(b);b=this.createChildView(SC.LabelView.design({layout:{left:50,top:64,right:20,height:22},isEditable:NO,value:this.get("detailLabel").loc(),isEnabled:NO,isEnabledBinding:SC.Binding.from("*masterCombo.selectedObject",this).oneWay()}));f.push(b);b=this.createChildView(SCUI.ComboBoxView.design({layout:{left:50,right:20,top:86,height:22},objectsBinding:SC.Binding.from("*content.%@".fmt(c.relationKey),this).oneWay(),nameKey:c.detailValueKey,isEnabled:NO,isEnabledBinding:SC.Binding.from("*masterCombo.selectedObject",this).oneWay(),valueBinding:SC.Binding.from("*content.%@".fmt(c.childItemKey),this)}));f.push(b);this.set("childViews",f)}else{b=this.createChildView(SC.View.design({layout:{top:0,left:0,bottom:0,right:0},childViews:[SC.LabelView.design({layout:{centerX:0,centerY:0,width:300,height:18},value:a?"No Content.":"Setup did not meet requirements."})]}));f.push(b);this.set("childViews",f)}}});SCUI.CollapsibleView=SC.ContainerView.extend({classNames:["scui-collapsible-view"],expandedView:null,collapsedView:null,_isCollapsed:NO,_expandedView:null,_collapsedView:null,displayProperties:["expandedView","collapsedView"],createChildViews:function(){var b=this.get("expandedView");this._expandedView=this._createChildViewIfNeeded(b);var c=this.get("collapsedView");this._collapsedView=this._createChildViewIfNeeded(c);this.set("nowShowing",this._expandedView);var a=this.get("contentView");this._adjustView(a)},expand:function(){if(this._expandedView){this.set("nowShowing",this._expandedView);var a=this.get("contentView");this._isCollapsed=NO;this.displayDidChange();this._adjustView(a)}},collapse:function(){if(this._collapsedView){this.set("nowShowing",this._collapsedView);var a=this.get("contentView");this._isCollapsed=YES;this.displayDidChange();this._adjustView(a)}},toggle:function(){if(this._isCollapsed){this.expand()}else{this.collapse()}},_expandedViewDidChange:function(){var a=this.get("expandedView");console.log("%@._expandableViewDidChange(%@)".fmt(this,a));this._expandedView=this._createChildViewIfNeeded(a);if(!this._isCollapsed){this.expand()}}.observes("expandedView"),_collapsedViewDidChange:function(){var a=this.get("collapsedView");console.log("%@._collapsedViewDidChange(%@)".fmt(this,a));this._collapsedView=this._createChildViewIfNeeded(a);if(this._isCollapsed){this.collapse()}}.observes("collapsedView"),_adjustView:function(a){if(a){var c=a.get("frame");var b=this.get("layout");console.log("CollapsibleView: Frame for (%@): width: %@, height: %@".fmt(a,c.height,c.width));b=SC.merge(b,{height:c.height,width:c.width});this.adjust(b)}},_createChildViewIfNeeded:function(a){if(SC.typeOf(a)===SC.T_CLASS){return this.createChildView(a)}else{return a}}});sc_require("mixins/simple_button");SCUI.ComboBoxView=SC.View.extend(SC.Control,SC.Editable,{classNames:"scui-combobox-view",isEditable:function(){return this.get("isEnabled")}.property("isEnabled").cacheable(),value:null,valueKey:null,objects:null,objectsBindingDefault:SC.Binding.oneWay(),nameKey:null,maxNameLength:null,iconKey:null,sortKey:null,disableSort:NO,localize:NO,hint:null,filter:null,useExternalFilter:NO,highlightFilterOnListItem:NO,status:null,isBusy:function(){return(this.get("status")&SC.Record.BUSY)?YES:NO}.property("status").cacheable(),rowHeight:18,minListHeight:18,maxListHeight:194,customPickerClassName:null,dropDownMenuWidth:null,statusIndicatorHeight:20,canDeleteValue:NO,filteredObjects:function(){var b,g,e,a,f,j;var c=this.get("filter");if(this.get("useExternalFilter")||!c){b=this.get("objects")}else{g=this.get("objects")||[];e=this.get("nameKey");c=this._sanitizeFilter(c)||"";c=c.toLowerCase();j=this.get("localize");b=[];f=this;g.forEach(function(k){a=f._getObjectName(k,e,j);if((SC.typeOf(a)===SC.T_STRING)&&(a.toLowerCase().search(c)>=0)){b.push(k)}})}return this.sortObjects(b)}.property("objects","filter").cacheable(),selectedObject:function(b,f){var e,a,c;if(f!==undefined){this.setIfChanged("value",this._getObjectValue(f,this.get("valueKey")))}else{if(this.get("valueKey")){a=this.get("value");c=this.get("valueKey");if(this._getObjectValue(this._lastSelectedObject,c)!==a){e=this.get("objects");if(e&&e.isEnumerable){f=e.findProperty(c,a)}}else{f=this._lastSelectedObject}}else{f=this.get("value")}}this._lastSelectedObject=f;return f}.property("value").cacheable(),selectedObjectName:function(){return this._getObjectName(this.get("selectedObject"),this.get("nameKey"),this.get("localize"))}.property("selectedObject").cacheable(),selectedObjectIcon:function(){return this._getObjectIcon(this.get("selectedObject"),this.get("iconKey"))}.property("selectedObject").cacheable(),textFieldView:SC.TextFieldView.extend({classNames:"scui-combobox-text-field-view",layout:{top:0,left:0,height:22,right:28},spellCheckEnabled:NO}),dropDownButtonView:SC.ButtonView.extend({layout:{top:0,right:0,height:24,width:28},icon:"caret"}),iconView:SC.ImageView.extend({layout:{left:7,top:4,width:16,height:16}}),leftAccessoryView:function(){var a=this.get("iconView");if(SC.kindOf(a,SC.View)){a=a.create()}else{a=null}this.set("iconView",a);return a}.property().cacheable(),displayProperties:["isEditing"],init:function(){arguments.callee.base.apply(this,arguments);this._createListPane();this.bind("status",SC.Binding.from("*objects.status",this).oneWay())},willDestroyLayer:function(){if(this._listPane){this._listPane.destroy()}arguments.callee.base.apply(this,arguments)},createChildViews:function(){var c=[],a;var b=this.get("isEnabled");a=this.get("textFieldView");if(SC.kindOf(a,SC.View)&&a.isClass){a=this.createChildView(a,{isEnabled:b,hintBinding:SC.Binding.from("hint",this),editableDelegate:this,keyDelegate:this,keyDown:function(f){var e=this.get("keyDelegate");return(e&&e.keyDown&&e.keyDown(f))||arguments.callee.base.apply(this,arguments)},keyUp:function(f){var e=this.get("keyDelegate");return(e&&e.keyUp&&e.keyUp(f))||arguments.callee.base.apply(this,arguments)},beginEditing:function(){var e=this.get("editableDelegate");var f=arguments.callee.base.apply(this,arguments);if(f&&e&&e.beginEditing){e.beginEditing()}return f},commitEditing:function(){var e=this.get("editableDelegate");var f=arguments.callee.base.apply(this,arguments);if(f&&e&&e.commitEditing){e.commitEditing()}return f}});c.push(a);this.set("textFieldView",a)}else{this.set("textFieldView",null)}a=this.get("dropDownButtonView");if(SC.kindOf(a,SC.View)&&a.isClass){a=this.createChildView(a,{isEnabled:b,target:this,action:"toggleList"});c.push(a);this.set("dropDownButtonView",a)}else{this.set("dropDownButtonView",null)}this.set("childViews",c)},renderMixin:function(a,b){a.setClass("focus",this.get("isEditing"))},sortObjects:function(b){var a;if(!this.get("disableSort")&&b){if(!b.sort&&b.toArray){b=b.toArray()}if(b.sort){a=this.get("sortKey")||this.get("nameKey");b=b.sort(function(e,c){if(a){e=e.get?e.get(a):e[a];c=c.get?c.get(a):c[a]}e=(SC.typeOf(e)===SC.T_STRING)?e.toLowerCase():e;c=(SC.typeOf(c)===SC.T_STRING)?c.toLowerCase():c;return(e<c)?-1:((e>c)?1:0)})}}return b},beginEditing:function(){var a=this.get("textFieldView");if(!this.get("isEditable")){return NO}if(this.get("isEditing")){return YES}this.set("isEditing",YES);this.set("filter",null);if(a&&!a.get("isEditing")){a.beginEditing()}return YES},commitEditing:function(){var a=this.get("textFieldView");if(this.get("isEditing")){this._selectedObjectNameDidChange();this.set("isEditing",NO);if(!SC.browser.msie){this.hideList()}}if(a&&a.get("isEditing")){a.commitEditing()}return YES},toggleList:function(){if(this._listPane&&this._listPane.get("isPaneAttached")){this.hideList()}else{this.showList()}},showList:function(){if(this._listPane&&!this._listPane.get("isPaneAttached")){this.beginEditing();this._updateListPaneLayout();this._listPane.popup(this,SC.PICKER_MENU)}},hideList:function(){if(this._listPane&&this._listPane.get("isPaneAttached")){this._listPane.remove()}},keyDown:function(a){this._keyDown=YES;this._shouldUpdateFilter=NO;return this.interpretKeyEvents(a)?YES:NO},keyUp:function(a){var b=NO;if(!this._keyDown){this._shouldUpdateFilter=NO;b=this.interpretKeyEvents(a)?YES:NO}this._keyDown=NO;return b},insertText:function(a){this._shouldUpdateFilter=YES;this.showList();return NO},_checkDeletedAll:function(b){if(!this.get("canDeleteValue")){return}var e=this.get("textFieldView").get("value"),c=this.get("textFieldView").get("selection"),a=NO;if(!e||!e.length){a=YES}else{if(e.length===c.length()){a=YES}else{if(e.length===1&&c.start===(b?1:0)){a=YES}}}if(a){this.set("selectedObject",null);this.set("value",null)}},deleteBackward:function(a){this._checkDeletedAll(YES);this._shouldUpdateFilter=YES;this.showList();return NO},deleteForward:function(a){this._checkDeletedAll(NO);this._shouldUpdateFilter=YES;this.showList();return NO},moveDown:function(a){if(this._listPane&&this._listView){if(this._listPane.get("isPaneAttached")){this._listView.moveDown(a)}else{this.showList()}}return YES},moveUp:function(a){if(this._listPane&&this._listView){if(this._listPane.get("isPaneAttached")){this._listView.moveUp(a)}else{this.showList()}}return YES},insertNewline:function(a){if(this._listPane&&this._listPane.get("isPaneAttached")){return this._listView.insertNewline(a)}return NO},insertTab:function(a){var b=NO;if(this._listPane&&this._listPane.get("isPaneAttached")){this.invokeOnce("_selectListItem");b=YES}return b},cancel:function(a){if(this._listPane&&this._listPane.get("isPaneAttached")){this.hideList()}return NO},_isEnabledDidChange:function(){var a;var b=this.get("isEnabled");if(!b){this.commitEditing()}a=this.get("textFieldView");if(a&&a.set){a.set("isEnabled",b)}a=this.get("dropDownButtonView");if(a&&a.set){a.set("isEnabled",b)}}.observes("isEnabled"),_objectsDidChange:function(){this.notifyPropertyChange("filteredObjects");this.notifyPropertyChange("selectedObject")}.observes("*objects.[]"),_filteredObjectsLengthDidChange:function(){this.invokeOnce("_updateListPaneLayout")}.observes("*filteredObjects.length"),_isBusyDidChange:function(){this.invokeOnce("_updateListPaneLayout")}.observes("isBusy"),_listSelectionDidChange:function(){var b=this.getPath("_listSelection.firstObject");var a;if(b&&this._listPane&&this._listPane.get("isPaneAttached")){a=this._getObjectName(b,this.get("nameKey"),this.get("localize"));this.setPathIfChanged("textFieldView.value",a);this._setIcon(this._getObjectIcon(b,this.get("iconKey")))}}.observes("_listSelection"),_textFieldValueDidChange:function(){if(this._shouldUpdateFilter){this._shouldUpdateFilter=NO;this.setIfChanged("filter",this.getPath("textFieldView.value"))}}.observes("*textFieldView.value"),_selectedObjectDidChange:function(){var a=this.get("selectedObject");if(this.getPath("_listSelection.firstObject")!==a){this.setPath("_listSelection",a?SC.SelectionSet.create().addObject(a):SC.SelectionSet.EMPTY)}}.observes("selectedObject"),_selectedObjectNameDidChange:function(){this.setPathIfChanged("textFieldView.value",this.get("selectedObjectName"))}.observes("selectedObjectName"),_selectedObjectIconDidChange:function(){this._setIcon(this.get("selectedObjectIcon"))}.observes("selectedObjectIcon"),_createListPane:function(){var e=this.get("isBusy");var b=this.get("statusIndicatorHeight");var c=this.get("customScrollView")||SC.ScrollView;var f=["scui-combobox-list-pane","sc-menu"],a=this.get("customPickerClassName");if(a){f.push(a)}this._listPane=SC.PickerPane.create({classNames:f,acceptsKeyPane:NO,acceptsFirstResponder:NO,contentView:SC.View.extend({layout:{left:0,right:0,top:4,bottom:4},childViews:"listView spinnerView".w(),listView:c.extend({classNames:"scui-combobox-list-scroll-view",layout:{left:0,right:0,top:0,bottom:e?b:0},hasHorizontalScroller:NO,contentView:SC.ListView.design({classNames:"scui-combobox-list-view",layout:{left:0,right:0,top:0,bottom:0},allowsMultipleSelection:NO,target:this,rowHeight:this.get("rowHeight"),action:"_selectListItem",contentBinding:SC.Binding.from("filteredObjects",this).oneWay(),contentValueKey:this.get("nameKey"),hasContentIcon:this.get("iconKey")?YES:NO,contentIconKey:this.get("iconKey"),selectionBinding:SC.Binding.from("_listSelection",this),localizeBinding:SC.Binding.from("localize",this).oneWay(),actOnSelect:SC.platform.touch,exampleView:SC.ListItemView.extend({maxNameLength:this.get("maxNameLength"),localize:this.get("localize"),displayProperties:["highlightSpan"],highlightFilteredSpan:this.get("highlightFilterOnListItem"),comboBoxView:this,renderLabel:function(n,k){var g=this.get("maxNameLength");if(!SC.none(g)){k=this.truncateMaxLength(k,g)}if(this.get("highlightFilteredSpan")){var j=this.get("comboBoxView");if(j){var o=j.get("filter"),p;if(o.length>1){p=new RegExp("("+j._sanitizeFilter(o)+")","gi");k=k.replace(p,'<span class="highlight-filtered-text">$1</span>')}}}n.push("<label>",k||"","</label>")},truncateMaxLength:function(o,j){var n,p,g,k=o;if((SC.typeOf(o)===SC.T_STRING)&&(o.length>j)){p=Math.max(Math.ceil((j-3)/2),0);g=Math.max(j-3-p,0);k=o.substring(0,p);for(n=0;(n<3)&&((n+p)<j);n++){k=k+"."}k=k+o.substring(o.length-g)}return k}}),mouseUp:function(){var g=arguments.callee.base.apply(this,arguments);var k=this.get("target");var j=this.get("action");if(k&&j&&k.invokeLater){k.invokeLater(j)}return g}})}),spinnerView:SC.View.extend({classNames:"scui-combobox-spinner-view",layout:{centerX:0,bottom:0,width:100,height:b},isVisibleBinding:SC.Binding.from("isBusy",this).oneWay(),childViews:"imageView messageView".w(),imageView:SCUI.LoadingSpinnerView.extend({layout:{left:0,top:0,bottom:0,width:18},theme:"darkTrans",callCountBinding:SC.Binding.from("isBusy",this).oneWay().transform(function(g){g=g?1:0;return g})}),messageView:SC.LabelView.extend({layout:{left:25,top:0,bottom:0,right:0},valueBinding:SC.Binding.from("status",this).oneWay().transform(function(g){g=(g===SC.Record.BUSY_LOADING)?"Loading...".loc():"Refreshing...".loc();return g})})})})});this._listView=this._listPane.getPath("contentView.listView.contentView");this._listScrollView=this._listPane.getPath("contentView.listView")},_updateListPaneLayout:function(){var a,g,c,n,f,k,j,b,e;if(this._listView&&this._listPane&&this._listScrollView){f=this.get("frame");c=this.get("dropDownMenuWidth")?this.get("dropDownMenuWidth"):f?f.width:200;e=this.get("isBusy");b=this.get("statusIndicatorHeight");a=this._listView.get("rowHeight")||this.get("rowHeight");g=this.getPath("filteredObjects.length")||(e?0:1);n=(a*g)+(e?b:0)+14;n=Math.min(n,this.get("maxListHeight"));n=Math.max(n,this.get("minListHeight"));this._listScrollView.adjust({bottom:e?b:0});this._listPane.adjust({width:c,height:n});this._listPane.updateLayout();this._listPane.positionPane()}},_selectListItem:function(){var a=this.getPath("filteredObjects.length"),g=this._listView,c=g?g.getPath("selection.firstObject"):null;if(g&&a===1){var b=this.get("filter"),f=g.getPath("content").objectAt(0),e=f.get?f.get(this.get("nameKey")):f[this.get("nameKey")];if(b&&e&&(e.toLowerCase()===b.toLowerCase())){c=f}}if(c){this.setIfChanged("selectedObject",c)}this.hideList()},_sanitizeFilter:function(a){return a?a.replace(this._sanitizeRegEx,"\\$1"):a},_setIcon:function(a){if(a){this.setPathIfChanged("leftAccessoryView.value",a);this.setPathIfChanged("textFieldView.leftAccessoryView",this.get("leftAccessoryView"))}else{this.setPathIfChanged("textFieldView.leftAccessoryView",null)}},_getObjectName:function(e,b,c){var a=e?(b?(e.get?e.get(b):e[b]):e):null;if(c&&a&&a.loc){a=a.loc()}return a},_getObjectIcon:function(c,b){var a=null;if(c&&b){a=(c.get?c.get(b):c[b])||"/static/sproutcore/foundation/en/eurekajview/source/resources/blank.gif"}return a},_getObjectValue:function(b,a){return b?(a?(b.get?b.get(a):b[a]):b):null},_lastSelectedObject:null,_listPane:null,_listScrollView:null,_listView:null,_listSelection:null,_keyDown:NO,_shouldUpdateFilter:NO,_sanitizeRegEx:new RegExp("(\\"+["/",".","*","+","?","|","(",")","[","]","{","}","\\"].join("|\\")+")","g")});sc_require("panes/context_menu_pane");SCUI.ContentEditableView=SC.WebView.extend(SC.Editable,{value:"",valueBindingDefault:SC.Binding.single(),allowScrolling:YES,isOpaque:YES,selection:"",selectedImage:null,selectedHyperlink:null,selectedText:null,attachedView:null,offsetWidth:null,offsetHeight:null,hasFixedDimensions:YES,inlineStyle:{},autoCommit:NO,cleanInsertedText:YES,encodeNewLine:NO,styleSheetCSS:"",styleSheetsLinks:[],rightClickMenuOptionsWithoutSelection:[],rightClickMenuOptionsWithSelection:[],docType:'<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">',rightClickMenuOptions:function(){var b=[];var c=this.get("rightClickMenuOptionsWithoutSelection"),a=this.get("rightClickMenuOptionsWithSelection");if(this.get("selectedText")&&this.get("selectedText").length>0){a.forEach(function(e){b.pushObject(e)})}c.forEach(function(e){b.pushObject(e)});return b}.property("rightClickMenuOptionsWithoutSelection","rightClickMenuOptionsWithSelection","selection").cacheable(),encodeContent:YES,indentOnTab:YES,tabSize:2,insertTarget:null,allowsDefaultRightClickMenu:YES,isFocused:NO,selectionSaved:NO,displayProperties:["value"],render:function(e,k){var j=this.get("value");var c=!this.get("isOpaque");var f=this.get("allowScrolling")?"yes":"no";var g=c?"0":"1";var a="position: absolute; width: 100%; height: 100%; border: 0px; margin: 0px; padding: 0p;";if(k){e.push('<iframe frameBorder="',g,'" name="',this.get("frameName"));e.push('" scrolling="',f);e.push('" src="" allowTransparency="',c,'" style="',a,'"></iframe>')}else{if(this._document){var b=this._document.body.innerHTML;if(this.get("encodeContent")){b=this._encodeValues(b)}if(this.get("encodeNewLine")){b=b.replace(/\r/g,"&#13;");b=b.replace(/\n/g,"&#10;")}if(j!==b){this._document.body.innerHTML=j}}}},didCreateLayer:function(){arguments.callee.base.apply(this,arguments);var a=this.$("iframe");SC.Event.add(a,"load",this,this.editorSetup)},displayDidChange:function(){var a=this._document;if(a){a.body.contentEditable=this.get("isEnabled")}arguments.callee.base.apply(this,arguments)},_attachEventHandlers:function(b,a){SC.Event.add(a,"focus",this,this.bodyDidFocus);SC.Event.add(a,"blur",this,this.bodyDidBlur);SC.Event.add(a,"mouseup",this,this.mouseUp);SC.Event.add(a,"keyup",this,this.keyUp);SC.Event.add(a,"paste",this,this.paste);SC.Event.add(a,"dblclick",this,this.doubleClick);SC.Event.add(a,"mouseout",this,this.mouseOut);if(this.get("indentOnTab")){SC.Event.add(a,"keydown",this,this.keyDown)}SC.Event.add(b,"click",this,this.focus);SC.Event.add(b,"mouseup",this,this.docMouseUp);SC.Event.add(b,"contextmenu",this,this.contextmenu)},_removeEventHandlers:function(b,a){if(this.get("indentOnTab")){SC.Event.remove(a,"keydown",this,this.keyDown)}SC.Event.remove(a,"focus",this,this.bodyDidFocus);SC.Event.remove(a,"blur",this,this.bodyDidBlur);SC.Event.remove(a,"mouseup",this,this.mouseUp);SC.Event.remove(a,"keyup",this,this.keyUp);SC.Event.remove(a,"paste",this,this.paste);SC.Event.remove(a,"dblclick",this,this.doubleClick);SC.Event.remove(a,"mouseout",this,this.mouseOut);SC.Event.remove(b,"click",this,this.focus);SC.Event.remove(b,"mouseup",this,this.docMouseUp);SC.Event.remove(b,"contextmenu",this,this.contextmenu);SC.Event.remove(this.$("iframe"),"load",this,this.editorSetup)},willDestroyLayer:function(){var b=this._document;var a=b.body;this._removeEventHandlers(b,a);arguments.callee.base.apply(this,arguments)},editorSetup:function(){this._iframe=this._getFrame();this._document=this._getDocument();if(SC.none(this._document)){console.error("Curse your sudden but inevitable betrayal! Can't find a reference to the document object!");return}var t=this._document;t.open();t.write(this.get("docType"));t.write("<html><head>");var e=this.get("styleSheetsLinks"),o;if(e.length&&e.length>0){for(var k=0,f=e.length;k<f;k++){o=e[k];if(o.match(/\<link.*?>/)){t.write(e[k])}}}t.write("</head><body></body></html>");t.close();var g=this.get("styleSheetCSS");if(!(SC.none(g)||g==="")){var p=t.getElementsByTagName("head")[0];if(p){var c=t.createElement("style");c.type="text/css";p.appendChild(c);if(SC.browser.msie){c.styleSheet.cssText=g}else{c.innerHTML=g}c=p=null}}var q=this.get("value");var n=t.body;n.contentEditable=true;if(!SC.browser.msie){t.execCommand("styleWithCSS",false,false)}if(!this.get("isOpaque")){n.style.background="transparent";this.$().setClass("sc-web-view",NO)}var b=this.get("inlineStyle");var w=this._document.body.style;for(var u in b){if(b.hasOwnProperty(u)){w[u.toString().camelize()]=b[u]}}n.innerHTML=q;if(!this.get("hasFixedDimensions")){var v=this.get("layout").height;if(v){this._minHeight=v}var a=this.get("layout").width;if(a){this._minWidth=a}}this._attachEventHandlers(t,n);this.iframeDidLoad();this.focus();t.execCommand("inserthtml",false," ");t.execCommand("undo",false,null)},bodyDidFocus:function(a){this.set("isFocused",YES)},bodyDidBlur:function(a){this.set("isFocused",NO)},contextmenu:function(a){var c=this.get("rightClickMenuOptions");var b=c.get("length");if(c.length>0){var e=this.contextMenuView.create({defaultResponder:this.get("rightClickMenuDefaultResponder"),layout:{width:200},itemTitleKey:"title",itemTargetKey:"target",itemActionKey:"action",itemSeparatorKey:"isSeparator",itemIsEnabledKey:"isEnabled",items:c});e.popup(this,a)}if((c.length>0)||(!this.get("allowsDefaultRightClickMenu"))){if(a.preventDefault){a.preventDefault()}else{a.stop()}a.returnValue=false;a.stopPropagation();return NO}},docMouseUp:function(a){var b=this;this.invokeLast(function(){var c=b.get("selectedImage");if(c){c.style.width=c.width+"px";c.style.height=c.height+"px";b.set("isEditing",YES)}})},doubleClick:function(a){SC.RunLoop.begin();SC.RunLoop.end()},contextMenuView:SCUI.ContextMenuPane.extend({popup:function(e,a){if((!e||!e.isView)&&!this.get("usingStaticLayout")){return NO}var b=e.isView?e.get("layer"):e;document.oncontextmenu=function(j){var g=e.get("rightClickMenuOptions");var f=g.get("length");if(g.length>0){if(a.preventDefault){a.preventDefault()}else{a.stop()}a.returnValue=false;a.stopPropagation();return false}};this.beginPropertyChanges();var c=this.get("displayItems");this.set("anchorElement",b);this.set("anchor",e);this.set("preferType",SC.PICKER_MENU);this.endPropertyChanges();return arguments.callee.base.base.apply(this,[e,[a.pageX+5,a.pageY+5,1]])},exampleView:SC.MenuItemView.extend({renderLabel:function(b,a){if(this.get("escapeHTML")){a=SC.RenderContext.escapeHTML(a)}b.push("<span class='value ellipsis' unselectable='on'>"+a+"</span>")}})}),keyUp:function(a){SC.RunLoop.begin();switch(SC.FUNCTION_KEYS[a.keyCode]){case"left":case"right":case"up":case"down":case"home":case"end":case"return":this.querySelection();break}if(a.keyCode===65&&((SC.browser.mac&&a.metaKey&&!a.ctrlKey)||(!SC.browser.mac&&a.ctrlKey))){this.querySelection()}if(!this.get("hasFixedDimensions")){this.invokeLast(this._updateLayout)}this.set("isEditing",YES);SC.RunLoop.end()},_tabKeyDown:function(c){var e=this.get("tabSize"),a=[];if(SC.typeOf(e)!==SC.T_NUMBER){return}for(var b=0;b<e;b++){a.push("\u00a0")}c.preventDefault();this.insertHTML(a.join(""),NO)},keyDown:function(c){SC.RunLoop.begin();if((SC.FUNCTION_KEYS[c.keyCode]==="tab")&&this.get("indentOnTab")){this._tabKeyDown(c)}if(SC.browser.msie){var b=this._getSelectedElement();if(SC.FUNCTION_KEYS[c.keyCode]==="return"&&b.nodeName!=="LI"){var a=this._iframe.document.selection.createRange();a.pasteHTML("<br>");a.collapse(false);a.select();c.preventDefault()}}SC.RunLoop.end()},mouseOut:function(a){this.querySelection()},mouseUp:function(a){this._mouseUp=true;SC.RunLoop.begin();if(this.get("insertInProgress")){this.set("insertInProgress",NO);this.get("insertTarget").sendAction("insert")}this.querySelection();if(a.target&&a.target.nodeName==="IMG"){var c=this._iframe.contentWindow.getSelection(),b=this._iframe.contentWindow.document.createRange();b.selectNode(a.target);c.removeAllRanges();c.addRange(b)}if(!this.get("hasFixedDimensions")){this.invokeLast(this._updateLayout)}this.set("isEditing",YES);SC.RunLoop.end()},paste:function(){SC.RunLoop.begin();this.querySelection();if(!this.get("hasFixedDimensions")){this.invokeLast(this._updateLayout)}this.set("isEditing",YES);SC.RunLoop.end();return YES},frameName:function(){return this.get("layerId")+"_frame"}.property("layerId").cacheable(),editorHTML:function(a,b){var c=this._document;if(!c){return NO}if(b!==undefined){c.body.innerHTML=b;return YES}else{if(this.get("cleanInsertedText")){return this.cleanWordHTML(c.body.innerHTML)}else{return c.body.innerHTML}}}.property(),selectionRange:function(){var b=this.get("selection"),a=null;if(SC.none(b)){return null}if(SC.browser.msie){a=b.createRange()}else{a=b.rangeCount>0?b.getRangeAt(0):null}return a}.property("selection"),selectionPlainText:function(){var a=this.get("selection");return SC.none(a)?"":a.toString()}.property("selection").cacheable(),_queryCommandState:function(b,c){var a=null;try{return b.queryCommandState(c)}catch(a){SC.Logger.warn("queryCommandState got exception for property "+c);return NO}},_queryCommandValue:function(b,c){var a=null;try{return b.queryCommandValue(c)}catch(a){SC.Logger.warn("queryCommandState got exception for property "+c);return null}},_selectionIsSomething:function(b,e,a){var c=this._document;if(!c){return NO}if(e!==undefined){if(c.execCommand(a,false,e)){this.set("isEditing",YES)}}return this._queryCommandState(c,a)},selectionIsBold:function(a,b){return this._selectionIsSomething(a,b,"bold")}.property("selection").cacheable(),selectionIsItalicized:function(a,b){return this._selectionIsSomething(a,b,"italic")}.property("selection").cacheable(),selectionIsUnderlined:function(a,b){return this._selectionIsSomething(a,b,"underline")}.property("selection").cacheable(),selectionIsStrikedThrough:function(a,b){return this._selectionIsSomething(a,b,"strikeThrough")}.property("selection").cacheable(),_selectionIsJustified:function(b,g,a){var f=this._document,c=null;if(!f){return NO}if(g!==undefined){if(SC.browser.msie){this._alignContentForIE(a)}else{f.execCommand(a,false,g)}this.querySelection();this.set("isEditing",YES)}return this._queryCommandState(f,a)},selectionIsCenterJustified:function(a,b){this._selectionIsJustified(a,b,"justifycenter")}.property("selection").cacheable(),selectionIsRightJustified:function(a,b){this._selectionIsJustified(a,b,"justifyright")}.property("selection").cacheable(),selectionIsLeftJustified:function(a,b){this._selectionIsJustified(a,b,"justifyleft")}.property("selection").cacheable(),selectionIsFullJustified:function(a,b){this._selectionIsJustified(a,b,"justifyfull")}.property("selection").cacheable(),_alignContentForIE:function(b){var f=this._document;var e=this._getSelectedElement();var a=f.selection.createRange();var c,j;var g;switch(b){case"justifycenter":g="center";break;case"justifyleft":g="left";break;case"justifyright":g="right";break;case"justifyfull":g="justify";break}if(e.nodeName==="IMG"){f.execCommand(b,false,null)}else{if(e.nodeName!=="DIV"||e.innerText!==a.text){c=a.htmlText;j='<div align="%@" style="text-align: %@">%@</div>'.fmt(g,g,c);a.pasteHTML(j)}else{e.style.textAlign=g;e.align=g}}},selectionIsOrderedList:function(a,c){var b=this._document;if(!b){return NO}if(c!==undefined){if(SC.browser.msie&&c===YES){this._createListForIE("ol")}else{if(b.execCommand("insertorderedlist",false,c)){this.querySelection()}}this.set("isEditing",YES)}return this._queryCommandState(b,"insertorderedlist")}.property("selection").cacheable(),selectionIsUnorderedList:function(a,c){var b=this._document;if(!b){return NO}if(c!==undefined){if(SC.browser.msie&&c===YES){this._createListForIE("ul")}else{if(b.execCommand("insertunorderedlist",false,c)){this.querySelection()}}this.set("isEditing",YES)}return this._queryCommandState(b,"insertunorderedlist")}.property("selection").cacheable(),_createListForIE:function(n){var f="";var j=this._document;var g=this._iframe.document.selection.createRange();var k=g.text;var a=k.split("\n");var c=this._getSelectedElement();if(c.nodeName==="LI"){c=c.parentNode}if(c.nodeName==="OL"||c.nodeName==="UL"){var b=j.createElement(n);b.innerHTML=c.innerHTML;c.parentNode.replaceChild(b,c);this.querySelection();return}if(a.length>1){for(var e=0;e<a.length;e++){f+="<li>%@</li>".fmt(a[e])}}else{f="<li>%@<li>".fmt(k)}g.pasteHTML("<%@>%@<%@>".fmt(n,f,n))},selectionIsIndented:function(a,c){var b=this._document;if(!b){return NO}if(c!==undefined){if(b.execCommand("indent",false,c)){this.set("isEditing",YES)}}if(SC.browser.msie){return b.queryCommandState("indent")}else{return NO}}.property("selection").cacheable(),selectionIsOutdented:function(a,c){var b=this._document;if(!b){return NO}if(c!==undefined){if(b.execCommand("outdent",false,c)){this.set("isEditing",YES)}}if(SC.browser.msie){return b.queryCommandState("outdent")}else{return NO}}.property("selection").cacheable(),selectionIsSubscript:function(a,b){return this._selectionIsSomething(a,b,"subscript")}.property("selection").cacheable(),selectionIsSuperscript:function(a,b){return this._selectionIsSomething(a,b,"superscript")}.property("selection").cacheable(),selectionFontName:function(o,a){var n=this._document;if(!n){return""}var f;if(a!==undefined){var g="%@%@".fmt(this.get("layerId"),"-ce-font-temp");if(n.execCommand("fontname",false,g)){var p=n.getElementsByTagName("font");for(var c=0,b=p.length;c<b;c++){var e=p[c];if(e.face===g){e.face="";e.style.fontFamily=a}}this.set("isEditing",YES)}}else{var k=this._findFontTag(this._getSelectedElement(),"fontFamily");if(k&&k.nodeName.toLowerCase()==="font"){f=k.style.fontFamily}else{f=null}return f}}.property("selection").cacheable(),selectionFontSize:function(p,o){var a=this._iframe;var n=this._document;if(!n){return""}var f;if(o!==undefined){var g="%@%@".fmt(this.get("layerId"),"-ce-size-temp");if(n.execCommand("fontname",false,g)){var q=n.getElementsByTagName("font");for(var c=0,b=q.length;c<b;c++){var e=q[c];if(e.face===g){e.face="";e.style.fontSize=o}}this.set("isEditing",YES);return o}}else{var k=this._findFontTag(this._getSelectedElement(),"fontSize");if(k&&k.nodeName.toLowerCase()==="font"){f=k.style.fontSize}else{f=null}return f}}.property("selection").cacheable(),_findFontTag:function(a,b){while(a&&a.nodeName!=="BODY"){if(a.nodeName==="FONT"&&a.style&&a.style[b]){return a}else{a=a.parentNode}}return null},selectionFontColor:function(c,e){var b="";if(!this.get("isVisibleInWindow")){return b}var f=this._document;if(!f){return b}if(!SC.browser.msie){f.execCommand("styleWithCSS",false,true)}if(e!==undefined){if(this.get("selectionSaved")===YES){this.restoreSelection()}if(f.execCommand("forecolor",false,e)){this.saveSelection();this.set("isEditing",YES);this._last_font_color_cache=e}}if(this._last_font_color_cache){b=this._last_font_color_cache}else{var a=this._queryCommandValue(f,"forecolor");if(a){this._last_font_color_cache=SC.browser.msie?this.convertBgrToHex(a):SC.parseColor(a);b=this._last_font_color_cache}}if(!SC.browser.msie){f.execCommand("styleWithCSS",false,false)}return b}.property("selection").cacheable(),selectionBackgroundColor:function(c,e){var b="";if(!this.get("isVisibleInWindow")){return b}var f=this._document;if(!f){return b}var g=SC.browser.msie?"backcolor":"hilitecolor";if(!SC.browser.msie){f.execCommand("styleWithCSS",false,true)}if(e!==undefined){if(this.get("selectionSaved")===YES){this.restoreSelection()}if(f.execCommand(g,false,e)){this.saveSelection();this.set("isEditing",YES);this._last_background_color_cache=e}}if(this._last_background_color_cache){b=this._last_background_color_cache}else{var a=this._queryCommandValue(f,g);if(a!=="transparent"){a=SC.browser.msie?this.convertBgrToHex(a):SC.parseColor(a);if(a){this._last_background_color_cache=a;b=this._last_background_color_cache}}}if(!SC.browser.msie){f.execCommand("styleWithCSS",false,false)}return b}.property("selection").cacheable(),hyperlinkValue:function(a,b){var c=this.get("selectedHyperlink");if(!c){return""}if(!SC.none(b)){c.href=b;this.set("isEditing",YES);return b}else{return c.href}}.property("selectedHyperlink").cacheable(),hyperlinkHoverValue:function(a,b){var c=this.get("selectedHyperlink");if(!c){return""}if(b!==undefined){c.title=b;this.set("isEditing",YES);return b}else{return c.title}}.property("selectedHyperlink").cacheable(),imageAlignment:function(a,b){var c=this.get("selectedImage");if(!c){return""}if(b!==undefined){c.align=b;this.set("isEditing",YES);return b}else{return c.align}}.property("selectedImage").cacheable(),imageWidth:function(a,b){var c=this.get("selectedImage");if(!c){return""}if(b!==undefined){this.set("isEditing",YES);c.width=b*1;c.style.width=b+"px";return b}else{return c.clientWidth}}.property("selectedImage").cacheable(),imageHeight:function(a,b){var c=this.get("selectedImage");if(!c){return""}if(b!==undefined){this.set("isEditing",YES);c.height=b*1;c.style.height=b+"px";return b}else{return c.clientHeight}}.property("selectedImage").cacheable(),imageDescription:function(a,b){var c=this.get("selectedImage");if(!c){return""}if(b!==undefined){this.set("isEditing",YES);c.title=b;c.alt=b;return b}else{return c.alt}}.property("selectedImage").cacheable(),imageBorderWidth:function(a,b){var c=this.get("selectedImage");if(!c){return""}if(b!==undefined){this.set("isEditing",YES);c.style.borderWidth=b;return b}else{return c.style.borderWidth}}.property("selectedImage").cacheable(),imageBorderColor:function(b,c){var e=this.get("selectedImage");if(!e){return""}if(c!==undefined){this.set("isEditing",YES);e.style.borderColor=c;return c}else{var a=e.style.borderColor;if(a!==""){return SC.parseColor(a)}else{return""}}}.property("selectedImage").cacheable(),imageBorderStyle:function(a,b){var c=this.get("selectedImage");if(!c){return""}if(b!==undefined){this.set("isEditing",YES);c.style.borderStyle=b;if(b==="none"){c.style.border=0}else{delete c.style.border}return b}else{return c.style.borderStyle}}.property("selectedImage").cacheable(),imageSource:function(a,b){var c=this.get("selectedImage");if(!c){return""}if(b!==undefined){c.src=b;this.set("isEditing",YES);return b}else{return c.src}}.property("selectedImage").cacheable(),resetImageDimensions:function(){var a=this.get("selectedImage");if(!a){return NO}a.style.width="";a.style.height="";a.removeAttribute("width");a.removeAttribute("height");this.set("isEditing",YES);this.notifyPropertyChange("selectedImage");return a},focus:function(){if(!SC.none(this._document)){this._document.body.focus();this.querySelection()}},querySelection:function(){var a=this._getSelection();this._resetColorCache();this.propertyWillChange("selection");this.set("selection",a);this.propertyDidChange("selection")},canCreateLink:function(){var b=this.get("selectedText");var a=(b&&b.length>0)||!SC.none(this.get("selectedImage"));return a}.property("selectedText","selectedImage"),createLink:function(a){var b=this._document;var c=this._iframe;if(!(b&&c)){return NO}if(SC.none(a)||a===""){return NO}if(!this.get("selectedText").length&&!this.get("selectedImage")){return NO}if(b.execCommand("createlink",false,a)){this.querySelection();this.set("isEditing",YES);return YES}else{return NO}},_removeLinkCompletely:function(n){var p=this.get("selection");var e=p.getRangeAt(0);var f=e.startContainer;var c=e.startOffset;var o=e.endContainer;var j=e.endOffset;var b=YES;var g=n.createRange();var k=this.get("selectedHyperlink");if(k){g.selectNode(k);p.removeAllRanges();p.addRange(g);b=n.execCommand("unlink",false,null);if(b){p.removeAllRanges()}}this.querySelection();this.set("isEditing",YES);return b},removeLink:function(){var a=this._document;if(!a){return NO}if(SC.browser.mozilla||SC.browser.chrome){return this._removeLinkCompletely(a)}if(a.execCommand("unlink",false,null)){this.set("selectedHyperlink",null);this.set("isEditing",YES);return YES}return NO},insertImage:function(a){var b=this._document;if(!b){return NO}if(SC.none(a)||a===""){return NO}if(b.execCommand("insertimage",false,a)){this.set("isEditing",YES);this.querySelection();return YES}return NO},insertHTML:function(a){var b=this._document;if(!b){return NO}if(SC.none(a)||a===""){return NO}if(SC.browser.msie){if(!this.get("isFocused")){this.focus()}b.selection.createRange().pasteHTML(a);this.set("isEditing",YES);return YES}else{a+="\u00a0";if(b.execCommand("inserthtml",false,a)){b.execCommand("delete",false,null);this.set("isEditing",YES);return YES}return NO}},insertView:function(a){if(SC.typeOf(a)===SC.T_STRING){if(a===SC.CONTENT_SET_DIRECTLY){return}if(a&&a.length>0){if(a.indexOf(".")>0){a=SC.objectForPropertyPath(a,null)}else{a=SC.objectForPropertyPath(a,this.get("page"))}}}else{if(SC.typeOf(a)===SC.T_CLASS){a=a.create()}}var c=SC.RenderContext(a);c=c.begin("span");a.prepareContext(c,YES);c=c.end();c=c.join();var b;if(SC.browser.msie){b='<span contenteditable=false unselectable="on">'+c+"</span>"}else{b='<span contenteditable=false style="-moz-user-select: all; -webkit-user-select: all;">'+c+"</span>"}this.insertHTML(b)},cleanWordHTML:function(a){a=a.replace(/\<o:p>\s*<\/o:p>/g,"");a=a.replace(/\<o:p>[\s\S]*?<\/o:p>/g,"&nbsp;");a=a.replace(/\s*<w:[^>]*>[\s\S]*?<\/w:[^>]*>/gi,"");a=a.replace(/\s*<w:[^>]*\/?>/gi,"");a=a.replace(/\s*<\/w:[^>]+>/gi,"");a=a.replace(/\s*<m:[^>]*>[\s\S]*?<\/m:[^>]*>/gi,"");a=a.replace(/\s*<m:[^>]*\/?>/gi,"");a=a.replace(/\s*<\/m:[^>]+>/gi,"");a=a.replace(/\s*mso-[^:]+:[^;"]+;?/gi,"");a=a.replace(/\s*mso-[^:]+:[^;]+"?/gi,"");a=a.replace(/\s*MARGIN: 0cm 0cm 0pt\s*;/gi,"");a=a.replace(/\s*MARGIN: 0cm 0cm 0pt\s*"/gi,'"');a=a.replace(/\s*TEXT-INDENT: 0cm\s*;/gi,"");a=a.replace(/\s*TEXT-INDENT: 0cm\s*"/gi,'"');a=a.replace(/\s*PAGE-BREAK-BEFORE: [^\s;]+;?"/gi,'"');a=a.replace(/\s*FONT-VARIANT: [^\s;]+;?"/gi,'"');a=a.replace(/\s*tab-stops:[^;"]*;?/gi,"");a=a.replace(/\s*tab-stops:[^"]*/gi,"");a=a.replace(/\<\\?\?xml[^>]*>/gi,"");a=a.replace(/\<(\w[^>]*) lang=([^ |>]*)([^>]*)/gi,"<$1$3");a=a.replace(/\<(\w[^>]*) language=([^ |>]*)([^>]*)/gi,"<$1$3");a=a.replace(/\<(\w[^>]*) onmouseover="([^\"]*)"([^>]*)/gi,"<$1$3");a=a.replace(/\<(\w[^>]*) onmouseout="([^\"]*)"([^>]*)/gi,"<$1$3");a=a.replace(/\<(\w[^>]*) xstr([^>]*)/gi,"<$1$2");a=a.replace(/\<(meta|link)[^>]+>\s*/gi,"");return a},commitEditing:function(){var b=this._document;if(!b){return NO}var a=b.body.innerHTML;if(this.get("cleanInsertedText")){a=this.cleanWordHTML(a)}if(this.get("encodeNewLine")){a=a.replace(/\r/g,"&#13;");a=a.replace(/\n/g,"&#10;")}if(this.get("encodeContent")){a=this._encodeValues(a)}this.set("value",a);this.set("isEditing",NO);return YES},selectContent:function(){var a=this._document,b;if(!a){return NO}b=a.execCommand("selectall",false,null);if(b){this.querySelection()}return b},_findAncestor:function(b,a){for(a=a.toLowerCase();b=b.parentNode;){if(b.tagName&&b.tagName.toLowerCase()===a){return b}}return null},selectionDidChange:function(){var f,a,c=null,k=null,g="",b=this.get("selection");if(SC.none(b)){this.set("selectedImage",c);this.set("selectedHyperlink",k);this.set("selectedText",g);return}a=this.get("selectionRange");if(a){if(SC.browser.msie){if(a.length===1){f=a.item()}if(a.parentElement){f=a.parentElement()}k=this._findAncestor(f,"A")}else{f=a.startContainer.childNodes[a.startOffset];if(!f&&(a.startContainer===a.endContainer)){f=a.startContainer}if(!f&&(a.startContainer.nextSibling===this._findAncestor(a.endContainer,"A"))){f=a.startContainer.nextSibling}if(!f&&(a.endContainer.childNodes[a.endOffset]&&a.endContainer.childNodes[a.endOffset].previousSibling&&a.endContainer.childNodes[a.endOffset].previousSibling.tagName==="A")){f=a.endContainer.childNodes[a.endOffset].previousSibling}}if(f){c=f.nodeName==="IMG"?f:null;k=f.nodeName==="A"?f:this._findAncestor(f,"A");if(k&&k.childNodes.length===1){c=k.firstChild.nodeName==="IMG"?k.firstChild:null}}else{k=a.commonAncestorContainer.nodeName==="A"?a.commonAncestorContainer:this._findAncestor(a.commonAncestorContainer,"A")}try{g=b.toString()}catch(j){SC.Logger.dir(j)}}this.set("selectedImage",c);this.set("selectedHyperlink",k);this.set("selectedText",g)}.observes("selection"),isEditingDidChange:function(){if(this.get("autoCommit")){this.commitEditing()}}.observes("isEditing"),_updateAttachedViewLayout:function(){var c=this.get("offsetWidth");var a=this.get("offsetHeight");var b=this.get("attachedView");var e=b.get("layout");e=SC.merge(e,{width:c,height:a});b.adjust(e)},_updateLayout:function(){var e=this._document;if(!e){return}var b,a;if(SC.browser.msie){b=e.body.scrollWidth;a=e.body.scrollHeight}else{b=e.body.offsetWidth;a=e.body.offsetHeight}if(a<this._minHeight){a=this._minHeight}if(b<this._minWidth){b=this._minWidth}this.set("offsetWidth",b);this.set("offsetHeight",a);if(this.get("attachedView")){this._updateAttachedViewLayout()}if(!this.get("hasFixedDimensions")){var c=this.get("layout");c=SC.merge(c,{width:b,height:a});this.propertyWillChange("layout");this.adjust(c);this.propertyDidChange("layout")}},_getFrame:function(){var a;if(SC.browser.msie){a=document.frames(this.get("frameName"))}else{a=this.$("iframe").firstObject()}if(!SC.none(a)){return a}return null},_getDocument:function(){var b=this._getFrame();if(SC.none(b)){return null}var a;if(SC.browser.msie){a=b.document}else{a=b.contentDocument}if(SC.none(a)){return null}return a},_getSelection:function(){var b=this._getFrame();if(SC.none(b)){return null}var a;if(SC.browser.msie){a=this._getDocument().selection}else{if(b.contentWindow){a=b.contentWindow.getSelection()}}return a},_encodeValues:function(e){var g=e.match(/href=".*?"/gi);if(g){var a,f;for(var c=0,b=g.length;c<b;c++){a=f=g[c];e=e.replace(/\%3C/gi,"<");e=e.replace(/\%3E/gi,">");e=e.replace(/\%20/g," ");e=e.replace(/\&amp;/gi,"&");e=e.replace(/\%27/g,"'");e=e.replace(a,f)}}return e},_getSelectedElement:function(){var b=this.get("selection"),a=this.get("selectionRange"),e;var c=this._document;if(a){if(SC.browser.msie){e=a.item?a.item(0):a.parentElement()}else{if(b.anchorNode&&(b.anchorNode.nodeType===3)){if(b.anchorNode.parentNode){e=b.anchorNode.parentNode}if(b.anchorNode.nextSibling!==b.focusNode.nextSibling){e=b.anchorNode.nextSibling}}if(!e){e=a.commonAncestorContainer;if(!a.collapsed){if(a.startContainer===a.endContainer){if(a.startOffset-a.endOffset<2){if(a.startContainer.hasChildNodes()){e=a.startContainer.childNodes[a.startOffset]}}}}}}}return e},_resetColorCache:function(){this._last_font_color_cache=null;this._last_background_color_cache=null;this.set("selectionSaved",NO)},saveSelection:function(){this.set("selectionSaved",YES);if(SC.browser.msie){var e=this._getFrame().window;var c=e.document;var b=e.getSelection?e.getSelection():c.selection;var a;if(b){if(b.createRange){a=b.createRange()}else{if(b.getRangeAt){a=b.getRangeAt(0)}else{if(b.anchorNode&&b.focusNode&&c.createRange){a=c.createRange();a.setStart(b.anchorNode,b.anchorOffset);a.setEnd(b.focusNode,b.focusOffset);if(a.collapsed!==b.isCollapsed){a.setStart(b.focusNode,b.focusOffset);a.setEnd(b.anchorNode,b.anchorOffset)}}}}}this._range=a}},restoreSelection:function(){this.set("selectionSaved",NO);if(SC.browser.msie){var e=this._getFrame().window;var c=e.document;var b=e.getSelection?e.getSelection():c.selection;var a=this._range;if(b&&a){if(a.select){a.select()}else{if(b.removeAllRanges&&b.addRange){b.removeAllRanges();b.addRange(a)}}}}},convertBgrToHex:function(a){a=((a&255)<<16)|(a&65280)|((a&16711680)>>>16);a=a.toString(16);return"#000000".slice(0,7-a.length)+a}});require("core");SCUI.DisclosedView=SC.View.extend({classNames:["scui-disclosed-view"],displayProperties:["isOpen","statusIconName"],contentView:null,title:"",description:"",iconCSSName:"",statusIconName:"",_contentView:null,_collapsedView:SC.View,isOpen:YES,titleBar:SC.DisclosureView,containerView:SC.ContainerView,collapsedHeight:44,expandedHeight:300,mode:SCUI.DISCLOSED_STAND_ALONE,init:function(){arguments.callee.base.apply(this,arguments)},createChildViews:function(){var b=[],a;var f=this.get("contentView");var c;var e=this;a=this._titleBar=this.createChildView(this.titleBar.extend({layout:{top:0,left:5,right:5,height:e.get("collapsedHeight")},titleBinding:SC.binding(".title",this),descriptionBinding:SC.binding(".description",this),iconCSSNameBinding:SC.binding(".iconCSSName",this),statusIconNameBinding:SC.binding(".statusIconName",this),value:this.get("isOpen"),displayProperties:"statusIconName".w(),render:function(g,j){g=g.begin("div").addClass("disclosure-inner");g=g.begin("div").addClass("disclosure-label");g=g.begin("img").attr({src:SC.BLANK_IMAGE_URL,alt:""}).addClass("button").end();g=g.begin("img").attr({src:SC.BLANK_IMAGE_URL,alt:""}).addClass("icon").addClass(this.iconCSSName).end();g=g.begin("img").attr({src:SC.BLANK_IMAGE_URL,alt:""}).addClass("status").addClass(this.statusIconName).end();g=g.begin("span").addClass("title").push(this.get("displayTitle")).end();g.attr("title",this.description);g.attr("alt",this.description);g=g.end();g=g.end()},mouseDown:function(g){if(g.target.className!=="button"){return NO}else{return YES}},_valueObserver:function(){if(this.owner&&this.owner.toggle){this.owner.toggle(this.get("value"))}}.observes("value")}),{rootElementPath:[0]});b.push(a);f=this.createChildView(f,{classNames:"processing-step-settings".w(),layout:{top:e.get("collapsedHeight")-5,left:5,right:5},render:function(g,j){arguments.callee.base.apply(this,arguments);if(j){g=g.begin("div").addClass("bottom-left-edge").push("").end();g=g.begin("div").addClass("bottom-right-edge").push("").end()}}});b.push(f);this.set("childViews",b);return this},render:function(a,b){this._setupView();arguments.callee.base.apply(this,arguments)},toggle:function(a){if(!a){this.set("isOpen",NO);if(this.get("mode")===SCUI.DISCLOSED_STAND_ALONE){this._updateHeight(YES)}else{if(this.owner&&this.owner.collapse){this.owner.collapse()}}}else{this.set("isOpen",YES);if(this.get("mode")===SCUI.DISCLOSED_STAND_ALONE){this._updateHeight()}else{if(this.owner&&this.owner.expand){this.owner.expand()}}}},updateHeight:function(a,b){if(a){this._updateHeight(b)}else{this.invokeLast(this._updateHeight)}return this},_updateHeight:function(b){var a;if(!b){a=this.get("expandedHeight")}else{a=this.get("collapsedHeight")}this.adjust("height",a)},_createChildViewIfNeeded:function(a){if(SC.typeOf(a)===SC.T_CLASS){return this.createChildView(a)}else{return a}},_setupView:function(){var a=this.get("isOpen");var b=this.get("mode");if(a){if(this.get("mode")===SCUI.DISCLOSED_STAND_ALONE){this.updateHeight()}}else{if(this.get("mode")===SCUI.DISCLOSED_STAND_ALONE){this._updateHeight(YES)}}}});SCUI.LoadingSpinnerView=SC.View.extend({theme:"lightTrans",totalFrames:28,callCount:0,isPlaying:false,stopIfTakingTooLong:false,stopIfSlowTarget:null,stopIfSlowAction:null,render:function(a,e){var b=this.get("theme")||"lightTrans";if(e){var c=["loadingSpinner",b];a.begin("div").addClass(c).addStyle({width:18,height:18,position:"absolute"}).end()}},animate:function(){var b=this._currentFrame||0;var e=0-18*b;this.$("div.loadingSpinner").css("background-position","0px %@px".fmt(e));if(this.get("isPlaying")){this.invokeLater(this.animate,150);if(this.get("stopIfTakingTooLong")&&this._startTime&&(Date.now()-this._startTime)>=30000){var c=this.get("stopIfSlowTarget"),a=this.get("stopIfSlowAction");if(c&&c.sendEvent&&a){c.sendEvent(a)}this._startTime=Date.now()}}b+=1;if(b===this.get("totalFrames")){b=0}this._currentFrame=b},callCountDidChange:function(){var a=this,b=this.get("isPlaying");if(!b&&this.get("callCount")>0){this.invokeOnce(function(){a.set("isVisible",true);a.set("isPlaying",true);a.animate();if(this.get("stopIfTakingTooLong")){a._startTime=Date.now()}})}else{if(b&&this.get("callCount")<=0){this.invokeOnce(function(){if(a.get("stopIfTakingTooLong")){a._startTime=null}a.set("isPlaying",false);a.set("isVisible",false)})}}}.observes("callCount")});sc_require("views/combo_box");SCUI.MultiSelectView=SC.View.extend({classNames:"scui-multi-select-view",objects:null,nameKey:null,selection:null,comboBoxView:null,comboBoxSelectedObject:null,listContent:function(){var b=this.get("selection");var a=(b&&b.isEnumerable)?b.toArray():[];a.set("allowsMultipleSelection",YES);return a}.property("selection").cacheable(),listSelection:null,clearSelection:function(a){this.set("selection",SC.SelectionSet.EMPTY);this.set("listSelection",SC.SelectionSet.EMPTY)},createChildViews:function(){var c=[],a,b=this.get("nameKey");a=this.createChildView(SCUI.ComboBoxView,{layout:{left:0,right:85,top:0,height:24},objectsBinding:SC.Binding.from("objects",this).oneWay(),selectedObjectBinding:SC.Binding.from("comboBoxSelectedObject",this),nameKey:b});c.push(a);this.set("comboBoxView",a);a=this.createChildView(SC.ButtonView,{layout:{right:0,top:0,width:80,height:24},title:"Add".loc(),target:this,action:"_addSelectedObject",isEnabledBinding:SC.Binding.from("comboBoxSelectedObject",this).bool().oneWay()});c.push(a);a=this.createChildView(SC.ScrollView,{layout:{left:0,right:0,top:29,bottom:29},contentView:SC.ListView.extend({contentBinding:SC.Binding.from("listContent",this),selectionBinding:SC.Binding.from("listSelection",this),contentValueKey:b,allowDeselectAll:YES,allowsMultipleSelection:YES})});c.push(a);a=this.createChildView(SC.ButtonView,{layout:{left:0,bottom:0,width:80,height:24},title:"Remove".loc(),target:this,action:"_removeSelectedObjects",isEnabled:NO,isEnabledBinding:SC.Binding.from("*listSelection.length",this).bool().oneWay()});c.push(a);a=this.createChildView(SC.ButtonView,{layout:{right:0,bottom:0,width:80,height:24},title:"Clear".loc(),target:this,action:"clearSelection",isEnabled:NO,isEnabledBinding:SC.Binding.from("*listContent.length",this).bool().oneWay()});c.push(a);this.set("childViews",c)},_addSelectedObject:function(){var b,a;var c=this.get("comboBoxSelectedObject");if(c){b=this.get("selection");if(!b){b=SC.SelectionSet.create();b.addObject(c);this.set("selection",b)}else{if(b.get("isFrozen")){a=b;b=SC.SelectionSet.create();b.beginPropertyChanges();b.addObjects(a);b.addObject(c);b.endPropertyChanges();this.set("selection",b)}else{b.addObject(c);this.notifyPropertyChange("listContent")}}}},_removeSelectedObjects:function(){var a=this.get("listSelection");var b=this.get("selection");if(a&&b){b.removeObjects(a);this.notifyPropertyChange("listContent");this.set("listSelection",SC.SelectionSet.EMPTY)}}});SCUI.SelectFieldView=SC.SelectFieldView.extend({multiple:NO,render:function(c,a){if(this.get("cpDidChange")){this.set("cpDidChange",NO);var g=this.get("nameKey");var p=this.get("valueKey");var n=this.get("objects");var b=this.get("value");var e,j;var o=this.get("multiple");var k=this.get("localize");if(o){c.attr("multiple",NO)}if(!p&&b){b=(b.get&&b.get("primaryKey")&&b.get(b.get("primaryKey")))?b.get(b.get("primaryKey")):SC.guidFor(b)}if((b===null)||(b==="")){b="***"}if(n){n=this.sortObjects(n);if(!a){j=this.$input()[0];j.innerHTML=""}var f=this.get("emptyName");if(f){if(k){f=f.loc()}if(a){c.push('<option value="***">'+f+'</option><option disabled="disabled"></option>')}else{e=document.createElement("option");e.value="***";e.innerHTML=f;j.appendChild(e);e=document.createElement("option");e.disabled="disabled";j.appendChild(e)}}n.forEach(function(u){if(u){var t=g?(u.get?u.get(g):u[g]):u.toString();if(k){t=t.loc()}var v=(p)?(u.get?u.get(p):u[p]):u;if(v){v=SC.guidFor(v)?SC.guidFor(v):v.toString()}var q=(this.validateMenuItem&&this.validateMenuItem(v,t))?"":'disabled="disabled" ';if(a){c.push("<option "+q+'value="'+v+'">'+t+"</option>")}else{e=document.createElement("option");e.value=v;e.innerHTML=t;if(q.length>0){e.disable="disabled"}j.appendChild(e)}}else{if(a){c.push('<option disabled="disabled"></option>')}else{e=document.createElement("option");e.disabled="disabled";j.appendChild(e)}}},this);this.setFieldValue(b)}else{this.set("value",null)}}},getFieldValue:function(){var g=this.$input().val();var o=this.get("valueKey");var k=this.get("objects");var n,b;var p=this.get("multiple");if(p){n=[]}if(g==="***"){g=null}else{if(g&&k){var f=(SC.typeOf(k.length)===SC.T_FUNCTION)?k.length():k.length;if(!p){n=null}while(--f>=0){b=k.objectAt?k.objectAt(f):k[f];if(o){b=(b.get)?b.get(o):b[o]}var a;if(b&&b.get&&b.get("primaryKey")&&b.get(b.get("primaryKey"))){a=SC.guidFor(b.get(b.get("primaryKey")))}else{if(b&&SC.guidFor(b)){a=SC.guidFor(b)}else{if(b){a=b.toString()}else{a=null}}}if(p){for(var e=0,c=g.length;e<c;e++){if(g[e]===a){n.push(b)}}}else{if(g===a){n=b}}}}}return(o||n)?n:g},setFieldValue:function(f){if(this.get("multiple")){if(SC.none(f)){f=""}else{if(SC.typeOf(f)==="string"){f=f.split("::")}var a;var e=[];for(var c=0,b=f.length;c<b;c++){a=f[c];if(a&&a.get&&a.get("primaryKey")&&a.get(a.get("primaryKey"))){a=SC.guidFor(a.get(a.get("primaryKey")));e.push(a)}else{if(a&&SC.guidFor(a)&&a!=="***"){a=SC.guidFor(a);e.push(a)}else{if(a){a=a.toString();e.push(a)}else{a=null}}}}this.$input().val(e);return this}}else{if(SC.none(f)){f=""}else{if(f&&f.get&&f.get("primaryKey")&&f.get(f.get("primaryKey"))){f=SC.guidFor(f.get(f.get("primaryKey")))}else{if(f&&SC.guidFor(f)&&f!=="***"){f=SC.guidFor(f)}else{if(f){f=f.toString()}else{f=null}}}}this.$input().val(f);return this}}});SCUI.SelectFieldTab=SC.View.extend({classNames:["scui-select-field-tab-view"],displayProperties:["nowShowing"],nowShowing:null,items:[],isEnabled:YES,itemTitleKey:null,itemValueKey:null,itemIsEnabledKey:null,itemIconKey:null,itemWidthKey:null,itemToolTipKey:null,_tab_nowShowingDidChange:function(){var a=this.get("nowShowing");this.get("containerView").set("nowShowing",a);this.get("selectFieldView").set("value",a);return this}.observes("nowShowing"),_tab_itemsDidChange:function(){this.get("selectFieldView").set("items",this.get("items"));return this}.observes("items"),_isEnabledDidChange:function(){var a=this.get("isEnabled");if(this.containerView&&this.containerView.set){this.containerView.set("isEnabled",a)}if(this.selectFieldView&&this.selectFieldView.set){this.selectFieldView.set("isEnabled",a)}}.observes("isEnabled"),init:function(){arguments.callee.base.apply(this,arguments);this._tab_nowShowingDidChange()._tab_itemsDidChange();var b=this.get("classNames"),a=this.selectFieldView.get("classNames");b=b.without("sc-view").without("scui-select-field-tab-view");a=a.uniq();a.pushObjects(b);this.selectFieldView.set("classNames",a)},createChildViews:function(){var e=[],b,a;var c=this.get("isEnabled");a=this.containerView.extend({layout:{top:24,left:0,right:0,bottom:0}});b=this.containerView=this.createChildView(a,{isEnabled:c});e.push(b);b=this.selectFieldView=this.createChildView(this.selectFieldView,{isEnabled:c});e.push(b);this.set("childViews",e);return this},containerView:SC.ContainerView,selectFieldView:SC.SelectButtonView.extend({layout:{left:4,right:0,height:24},items:function(a,b){if(b===undefined){return this.get("objects")}else{return this.set("objects",b)}}.property("objects").cacheable(),itemTitleKey:function(a,b){if(b===undefined){return this.get("nameKey")}else{return this.set("nameKey",b)}}.property("nameKey").cacheable(),itemValueKey:function(a,b){if(b===undefined){return this.get("valueKey")}else{return this.set("valueKey",b)}}.property("valueKey").cacheable(),_scui_select_field_valueDidChange:function(){var a=this.get("parentView");if(a){a.set("nowShowing",this.get("value"))}this.set("layerNeedsUpdate",YES);this.invokeOnce(this.updateLayerIfNeeded)}.observes("value"),init:function(){var a=this.get("parentView");if(a){SC._TAB_ITEM_KEYS.forEach(function(b){this[SCUI._SELECT_TAB_TRANSLATOR[b]]=a.get(b)},this)}return arguments.callee.base.apply(this,arguments)}})});SCUI._SELECT_TAB_TRANSLATOR={itemTitleKey:"nameKey",itemValueKey:"valueKey",items:"objects"};SCUI.StepperView=SC.View.extend({layout:{top:0,left:0,width:19,height:27},value:0,increment:1,max:null,min:null,valueWraps:NO,createChildViews:function(){var f=[];var e=this.get("value");var a=this.get("increment");var c=this;var b=this.createChildView(SC.ButtonView.design({classNames:["scui-stepper-view-top"],layout:{top:0,left:0,width:19,height:13},mouseUp:function(){arguments.callee.base.apply(this,arguments);var n=c.get("value");n=n-0;var g=c.get("max");n=n+a;var k=c.get("valueWraps");if(g===null||n<=g){c.set("value",n)}else{if(k){var j=c.get("min");if(j!==null){n=n-g-a;n=n+j;c.set("value",n)}}}}}));f.push(b);b=this.createChildView(SC.ButtonView.design({classNames:["scui-stepper-view-bottom"],layout:{top:14,left:0,width:19,height:13},mouseUp:function(){arguments.callee.base.apply(this,arguments);var n=c.get("value");n=n-0;var k=c.get("min");n=n-a;var j=c.get("valueWraps");if(k===null||n>=k){c.set("value",n)}else{if(j){var g=c.get("max");if(g!==null){n=k-n-a;n=g-n;c.set("value",n)}}}}}));f.push(b);this.set("childViews",f)}});SCUI.TimeSelectorFieldView=SC.View.extend({classNames:["scui-timeselector"],layout:{minHeight:24,minWidth:100},value:null,hour:function(c,f){var g=this.get("value");var j,a,e,b;if(f!==undefined){if(!g){g=SC.DateTime.create();g=g.adjust({hour:12,minute:0})}a=g.toFormattedString("%i")*1;e=g.get("minute")*1;b=g.toFormattedString("%p");j=(isNaN(f*1)||f==="")?a:Math.abs(f*1);if(j>12){j=j%10}if(b==="PM"){if(j<12){j=j+12}}else{if(j===12){j=0}}this.propertyWillChange("value");this.set("value",g.adjust({hour:j,minute:e}));this.propertyDidChange("value")}else{f=g?g.toFormattedString("%i"):null}return f}.property("value").cacheable(),minute:function(a,c){var e=this.get("value");var b,f;if(c!==undefined){if(!e){e=SC.DateTime.create();e=e.adjust({hour:12,minute:0})}b=e.get("minute")*1;f=(isNaN(c*1)||c==="")?b:Math.abs(c*1);if(f>59){f=f%10}this.propertyWillChange("value");this.set("value",e.adjust({minute:f}));this.propertyDidChange("value")}else{c=e?e.toFormattedString("%M"):null}return c}.property("value").cacheable(),meridian:function(b,c){var e=this.get("value");var a,f,g;if(c!==undefined){if(!e){e=SC.DateTime.create();e=e.adjust({hour:12,minute:0})}a=e.toFormattedString("%H")*1;f=e.get("minute")*1;g=(SC.typeOf(c)===SC.T_STRING)&&(c.search(/a/i)>=0)?"AM":"PM";if(a<12&&g==="PM"){e=e.adjust({hour:a+12,minute:f})}else{if(a>=12&&g==="AM"){e=e.adjust({hour:a-12,minute:f})}}this.propertyWillChange("value");this.set("value",e);this.propertyDidChange("value")}else{c=e?e.toFormattedString("%p"):null}return c}.property("value").cacheable(),hourView:SC.TextFieldView.design({classNames:["scui-timeselector-hour"],layout:{width:24,top:0,bottom:0,left:0},textAlign:SC.ALIGN_right}),colonView:SC.LabelView.design({classNames:["scui-timeselector-colon"],layout:{width:5,top:0,bottom:0,left:26},textAlign:SC.ALIGN_CENTER,value:":"}),minuteView:SC.TextFieldView.design({classNames:["scui-timeselector-minute"],layout:{width:24,top:0,bottom:0,left:28},textAlign:SC.ALIGN_RIGHT}),meridianView:SC.TextFieldView.design({classNames:["scui-timeselector-meridian"],layout:{width:30,top:0,bottom:0,left:58},textAlign:SC.ALIGN_CENTER,hint:"PM"}),createChildViews:function(){var c=[],a;var b=this;a=this.get("hourView");if(SC.kindOf(a,SC.View)){a=this.createChildView(a,{valueBinding:SC.Binding.from("hour",this),isEnabledBinding:SC.Binding.from("isEnabled",this)});c.push(a)}else{a=null}this.set("hourView",a);a=this.get("colonView");if(SC.kindOf(a,SC.View)){a=this.createChildView(a,{isEnabledBinding:SC.Binding.from("isEnabled",this)});c.push(a)}else{a=null}this.set("colonView",a);a=this.get("minuteView");if(SC.kindOf(a,SC.View)){a=this.createChildView(a,{valueBinding:SC.Binding.from("minute",this),isEnabledBinding:SC.Binding.from("isEnabled",this)});c.push(a)}else{a=null}this.set("minuteView",a);a=this.get("meridianView");if(SC.kindOf(a,SC.View)){a=this.createChildView(a,{valueBinding:SC.Binding.from("meridian",this),isEnabledBinding:SC.Binding.from("isEnabled",this),mouseDown:function(){b._toggleMeridian()}});c.push(a)}else{a=null}this.set("meridianView",a);this.set("childViews",c)},_toggleMeridian:function(){if(this.get("meridian")==="AM"){this.set("meridian","PM")}else{this.set("meridian","AM")}}});SCUI.UploadView=SC.View.extend({value:null,uploadTarget:null,status:"",inputName:"Filedata",requestPrototype:SC.Request,degradeList:["xhr","iframe"],serverResponse:null,displayProperties:"uploadTarget".w(),cssImageClass:null,render:function(e,n){var g=this.get("layerId")+"Frame";var k=this.get("uploadTarget");var b=this.get("label");var a=this.get("inputName");var c=this.get("cssImageClass");if(n){this._firstTime=YES;if(c){e.begin("form").attr("method","post").attr("enctype","multipart/form-data").attr("action",k).attr("target",g).begin("label").setClass(c,YES).styles({display:"block",cursor:"pointer",overflow:"hidden"}).begin("input").attr("type","file").attr("name",a).setClass("hidden-upload-input",YES).end().end().end().begin("iframe").attr("frameBorder",0).attr("src","#").attr("id",g).attr("name",g).styles({width:0,height:0}).end()}else{e.begin("form").attr("method","post").attr("enctype","multipart/form-data").attr("action",k).attr("target",g).begin("input").attr("type","file").attr("name",a).end().end().begin("iframe").attr("frameBorder",0).attr("src","#").attr("id",g).attr("name",g).styles({width:0,height:0}).end()}}else{var j=this._getForm();if(j){j.action=k}}arguments.callee.base.apply(this,arguments)},mouseDown:function(a){if(a.target.nodeName==="LABEL"){this.$("input")[0].click()}},didCreateLayer:function(){arguments.callee.base.apply(this,arguments);var b=this.$("iframe");var a=this.$("input");SC.Event.add(b,"load",this,this._uploadFetchIFrameContent);SC.Event.add(a,"change",this,this._checkInputValue);this.set("status",SCUI.READY)},willDestroyLayer:function(){var b=this.$("iframe");var a=this.$("input");SC.Event.remove(b,"load",this,this._uploadFetchIFrameContent);SC.Event.remove(a,"change",this,this._checkInputValue);arguments.callee.base.apply(this,arguments)},_startUploadXHR:function(g){SC.Logger.log("using XHR");var e,a,c,b,j;e=this.get("requestPrototype");a=g[this.get("inputName")];c=a.files[0];b=new FormData();b.append(this.get("inputName"),c);j=e.copy();j.set("isJSON",false);j.set("isXML",false);j.set("address",this.get("uploadTarget"));j.notify(this,this._uploadCheck,null).send(b)},_startUploadIframe:function(a){SC.Logger.log("Using iframe target");a.submit()},startUpload:function(){var b,a,c,e;this.set("serverResponse",null);e=this._getForm();if(!e){return}for(b=0,a=this.degradeList.length;b<a;b++){switch(this.degradeList[b]){case"xhr":if((SC.browser.safari||SC.browser.chrome)&&(this.get("requestPrototype"))){c=this._startUploadXHR.bind(this)}break;case"iframe":c=this._startUploadIframe.bind(this);break}if(c){break}}if(!c){SC.Logger.warn("No upload handler found!");return}c(e);this.set("status",SCUI.BUSY)},clearFileUpload:function(){var b=this._getForm();this.set("value",null);if(b){var a=this.$("input");SC.Event.remove(a,"change",this,this._checkInputValue);b.innerHTML=b.innerHTML;this.set("status",SCUI.READY);this.set("value",null);a=this.$("input");SC.Event.add(a,"change",this,this._checkInputValue)}},validateFileSelection:function(){var a=this.get("value");if(a){return YES}return NO},_uploadCheck:function(a){this.set("fullServerResponse",a);this.set("serverResponse",a.get("body"));this._uploadDone()},_uploadFetchIFrameContent:function(){var f,a,e,c;if(SC.browser.msie){var b="%@%@".fmt(this.get("layerId"),"Frame");f=document.frames(b);c=f.document;if(c){if(c.body.childNodes.length>0){a=f.document.body.childNodes[0].innerHTML}}}else{f=this.$("iframe").get(0);e=f.contentWindow;if(e){a=e.document.body.childNodes[0].innerHTML}}this.set("serverResponse",a);this._uploadDone()},_uploadDone:function(){if(SC.browser.msie){if(!this._firstTime){SC.RunLoop.begin();this.set("status",SCUI.DONE);SC.RunLoop.end()}this._firstTime=NO}else{SC.RunLoop.begin();this.set("status",SCUI.DONE);SC.RunLoop.end()}},_checkInputValue:function(){SC.RunLoop.begin();var a=this._getInput();this.set("value",a.value);SC.RunLoop.end()},_getForm:function(){var a=this.$("form");if(a&&a.length>0){return a.get(0)}return null},_getInput:function(){var a=this.$("input");if(a&&a.length>0){return a.get(0)}return null}});SCUI.PAST="past";SCUI.PRESENT="present";SCUI.TODAY="today";SCUI.FUTURE="future";SCUI.CalendarView=SC.View.extend({weekdayStrings:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthStartOn:SC.DateTime.create({day:1}),selectedDate:null,displayProperties:["monthStartOn"],resetToSelectedDate:function(){var a=this.get("selectedDate");if(a){this.set("monthStartOn",a.adjust({day:1}))}},mouseDown:function(a){var b=this._parseSelectedDate(a.target.id);if(b){this.set("selectedDate",b)}var e=a.target;var c=e.className;if(c.match("button")){this.$(e).addClass("active")}return YES},mouseUp:function(a){var e=this.get("monthStartOn");var b=a.target.className,f;var c=b.match("previous")?-1:1;if(b.match("year")){f={year:c}}else{f={month:c}}this.set("monthStartOn",e.advance(f));this.$(".button.active").removeClass("active");return YES},render:function(c,b){var j=this.get("monthStartOn");var k=j.get("dayOfWeek");var f=j.advance({day:-k});var g=this.get("selectedDate");var q=SC.DateTime.create();var o=this.get("weekdayStrings");var a,n;c=c.begin("div").addClass("header").begin("div").addClass("month").text(j.toFormattedString("%B %Y")).end().begin("div").addClass("button previous").end().begin("div").addClass("button next").end().begin("div").addClass("button previous year").end().begin("div").addClass("button next year").end().end().begin("div").addClass("body");for(var e=0;e<7;e++){c=c.begin("div").addClass("day name").text(o[e]).end()}c=c.begin("div").addClass("grid");for(var p=0;p<42;p++){n=this._createUniqueDayIdentifier(f);if(f.get("month")<j.get("month")||f.get("month")>j.get("month")){c=c.begin("div").attr("id",n).addClass("day past").text(f.get("day")).end()}else{a=["present"];if(f.get("day")===q.get("day")&&f.get("month")===q.get("month")&&f.get("year")===q.get("year")){a.push("today")}if(g&&f.get("day")===g.get("day")&&f.get("month")===g.get("month")&&f.get("year")===g.get("year")){a.push("sel")}c=c.begin("div").attr("id",n).addClass("day").addClass(a.join(" ")).text(f.get("day")).end()}f=f.advance({day:1})}c=c.end().end()},_createUniqueDayIdentifier:function(e){var a=e.get("day");var c=e.get("month");var b=e.get("year");return"scuidate-%@-%@-%@-%@".fmt(this.get("layerId"),a,c,b)},_parseSelectedDate:function(f){if(!SC.empty(f)){var a=f.split("-");if(a.length===5&&a[0]==="scuidate"&&a[1]===this.get("layerId")){var b=a[2];var e=a[3];var c=a[4];return SC.DateTime.create({day:b,month:e,year:c})}}return null}});SCUI.DatePickerView=SC.View.extend({classNames:["scui-datepicker-view"],date:null,dateString:"",isShowingCalendar:NO,hint:"Click to choose...",dateFormat:null,calendarLayout:null,hasHelperButtons:YES,isEditing:NO,isTextFieldEnabled:YES,_textfield:null,_date_button:null,_calendar_popup:null,_calendar:null,_layout:{width:195,height:25},displayProperties:["date","isEditing"],init:function(){arguments.callee.base.apply(this,arguments);var b=this.get("layout"),a=this;b=SC.merge(this._layout,b);this.set("layout",b)},createChildViews:function(){var a,e=[];var c=this;this.set("dateString",this._genDateString(this.get("date")));var b={layout:{left:0,top:0,right:0,bottom:0},classNames:["scui-datechooser-text"],isEnabled:YES,valueBinding:SC.Binding.from(".dateString",c),hintBinding:SC.Binding.from("hint",c),mouseDown:function(f){c.toggle();arguments.callee.base.apply(this,arguments)}};if(this.get("isTextFieldEnabled")){b.isEnabledBinding=SC.binding("isEnabled",c)}else{b.isEnabled=NO}a=this._textfield=this.createChildView(SC.TextFieldView.design(b));e.push(a);this.bind("isEditing",SC.Binding.from("isEditing",a).oneWay());a=this._date_button=this.createChildView(SC.View.design(SCUI.SimpleButton,{classNames:["scui-datechooser-button","calendar-icon"],layout:{right:5,top:4,width:16,height:16},target:this,action:"toggle",isEnabledBinding:SC.binding("isEnabled",c)}));e.push(a);this.set("childViews",e);this._createCalendarPopup();arguments.callee.base.apply(this,arguments)},_createCalendarPopup:function(){var b=this,a=this.get("calendarLayout"),c=this.get("hasHelperButtons");c=SC.none(c)?YES:c;this._calendar_popup=SC.PickerPane.create({classNames:["scui-calendar"],layout:a||{width:205,height:244},contentView:SC.View.design({childViews:"calendar todayButton noneButton".w(),calendar:SCUI.CalendarView.design({layout:{left:0,top:0,bottom:0,right:0},selectedDateBinding:SC.Binding.from("date",b)}),todayButton:SC.View.extend(SCUI.SimpleButton,{classNames:["date-today"],layout:{left:11,bottom:7,width:50,height:16},target:this,action:"selectToday",isVisible:c,render:function(e,f){if(f){e.push("Today")}}}),noneButton:SC.View.design(SCUI.SimpleButton,{classNames:["date-none"],layout:{right:11,bottom:7,width:50,height:16},target:this,action:"clearSelection",isVisible:c,render:function(e,f){if(f){e.push("None")}}})})});if(this._calendar_popup){this.bind("isShowingCalendar","._calendar_popup.isPaneAttached");this._calendar=this._calendar_popup.getPath("contentView.calendar")}},render:function(a,b){arguments.callee.base.apply(this,arguments);a.setClass("focus",this.get("isEditing"))},hideCalendar:function(){if(this._calendar_popup&&this.get("isShowingCalendar")){this._calendar_popup.remove();this.set("isShowingCalendar",NO)}},showCalendar:function(){if(this._calendar_popup){this._calendar_popup.popup(this._textfield);this._calendar.resetToSelectedDate();this.set("isShowingCalendar",YES)}},toggle:function(){if(this.isShowingCalendar){this.hideCalendar()}else{this.showCalendar()}},selectToday:function(){this._calendar.set("selectedDate",SC.DateTime.create());this.hideCalendar()},clearSelection:function(){this._calendar.set("selectedDate",null);this.hideCalendar()},_genDateString:function(b){var a=this.get("dateFormat")||"%a %m/%d/%Y";var c=b?b.toFormattedString(a):"";return c},_dateDidChange:function(){this.set("dateString",this._genDateString(this.get("date")));this.hideCalendar()}.observes("date")});SCUI.WIDGET_TYPE="widget";SCUI.WIDGET_EDIT="editing";if(typeof CHANCE_SLICES==="undefined"){var CHANCE_SLICES=[]}CHANCE_SLICES=CHANCE_SLICES.concat([]);SCUI.DashboardDelegate={isDashboardDelegate:YES,dashboardWidgetViewFor:function(a,c,e,b){return null},dashboardWidgetEditViewFor:function(a,c,e,b){return null},dashboardWidgetDidMove:function(a,b){return null},dashboardDeleteWidget:function(a,b){return NO},dashboardWidgetDidCommitEditing:function(a,b){return null},dashboardViewDidInitialize:function(a){return null},dashboardFrameDidChange:function(a,b){return null}};SCUI.Widget={isWidget:YES,widgetViewClassKey:"widgetViewClass",widgetEditViewClassKey:"widgetEditViewClass",positionKey:"position",sizeKey:"size",nameKey:"name",isLocked:NO,canEdit:YES,isEditing:NO,showDoneButton:YES,widgetDidMove:function(){},widgetDidCommitEditing:function(){}};sc_require("mixins/widget");SCUI.ClockWidget=SC.Object.extend(SCUI.Widget,{widgetViewClass:"SCUI.ClockWidgetView",widgetEditViewClass:"SCUI.ClockWidgetEditView",position:{x:40,y:40},size:{width:320,height:150},showGreeting:NO,greeting:"Hello World".loc(),now:"--",value:function(){return this.get(this.get("showGreeting")?"greeting":"now")}.property("showGreeting","greeting","now").cacheable(),init:function(){arguments.callee.base.apply(this,arguments);this.tick()},tick:function(){this.set("now",new Date().format("hh:mm:ss"));this.invokeLater(this.tick,1000)}});sc_require("models/clock_widget");SCUI.ClockWidgetView=SC.View.extend({layout:{left:0,right:0,top:0,bottom:0},content:null,childViews:["clockView"],clockView:SC.View.design({classNames:["scui-clock-widget-view"],layout:{left:0,right:0,top:0,bottom:0},childViews:["labelView"],labelView:SC.LabelView.design({layout:{left:10,right:10,centerY:0,height:48},tagName:"h1",valueBinding:".parentView.parentView*content.value"})})});SCUI.ClockWidgetEditView=SC.View.extend({layout:{left:0,right:0,top:0,bottom:0},content:null,childViews:["optionView"],optionView:SC.View.design({classNames:["scui-clock-widget-view"],layout:{left:0,right:0,top:0,bottom:0},childViews:["checkboxView"],checkboxView:SC.CheckboxView.design({layout:{centerX:0,centerY:0,width:130,height:18},title:"Show Greeting".loc(),valueBinding:".parentView.parentView*content.showGreeting"})})});SCUI.MissingWidgetView=SC.View.extend(SC.Border,{layout:{left:0,right:0,top:0,bottom:0},message:"Widget is missing or broken. Please remove and replace this widget using the plus button in the bottom left.".loc(),classNames:"missing-widget".w(),createChildViews:function(){var a=[];a.push(this.createChildView(SC.LabelView.design({layout:{left:10,right:10,centerY:0,height:40},textAlign:SC.ALIGN_CENTER,value:this.get("message")})));this.set("childViews",a)}});sc_require("views/missing_widget");SCUI.WidgetContainerView=SC.View.extend(SC.Control,{classNames:["scui-widget-container-view"],canDeleteWidget:NO,layout:{left:0,top:0,width:400,height:200},widgetViewClass:null,widgetEditViewClass:null,deleteHandleViewClass:SC.View.extend(SCUI.SimpleButton,{classNames:["remove-button"],layout:{left:0,top:0,width:28,height:28}}),editHandleViewClass:SC.View.extend(SCUI.SimpleButton,{classNames:["settings-button"],layout:{right:0,top:0,width:28,height:28}}),doneButtonViewClass:SC.ButtonView.extend({classNames:["done-button"],layout:{right:10,bottom:10,width:80,height:24},title:"Done".loc()}),displayProperties:["canDeleteWidget","isEditing"],createChildViews:function(){var f=[];var e;var c=this.get("content");var b=c?c.get("isEditing"):NO;var g=c?c.get("showDoneButton"):NO;var a=c?c.get("canEdit"):NO;e=this._getViewClass("widgetEditViewClass");if(!e){e=SCUI.MissingWidgetView.extend({message:"Widget's edit view is missing.".loc()})}this._editView=this.createChildView(e,{content:c,isVisible:(a&&b)});f.push(this._editView);e=this._getViewClass("doneButtonViewClass");if(e){this._doneButtonView=this.createChildView(e,{target:this,action:"commitEditing",isVisible:(a&&b&&g)});f.push(this._doneButtonView)}e=this._getViewClass("widgetViewClass");if(!e){e=SCUI.MissingWidgetView}this._widgetView=this.createChildView(e,{content:c,isVisible:(!b||!a)});f.push(this._widgetView);e=this._getViewClass("editHandleViewClass");if(e){this._editHandleView=this.createChildView(e,{target:this,action:"beginEditing",isVisible:(a&&!b)});f.push(this._editHandleView)}e=this._getViewClass("deleteHandleViewClass");if(e){this._deleteHandleView=this.createChildView(e,{target:this,action:"deleteWidget",isVisible:this.get("canDeleteWidget")});f.push(this._deleteHandleView)}this.set("childViews",f)},beginEditing:function(){if(this.getPath("content.canEdit")){this.setPathIfChanged("content.isEditing",YES)}},commitEditing:function(){var b=this.get("content");var a=this.get("dashboardDelegate");this.setPathIfChanged("content.isEditing",NO);if(a&&a.dashboardWidgetDidCommitEditing){a.dashboardWidgetDidCommitEditing(this.get("owner"),b)}if(b&&b.widgetDidCommitEditing){b.widgetDidCommitEditing()}},deleteWidget:function(){var a=this.get("owner");if(a&&a.deleteWidget){a.deleteWidget(this.get("content"))}},contentPropertyDidChange:function(b,a){if(a===this.getPath("content.sizeKey")){this._sizeDidChange()}else{if(a===this.getPath("content.positionKey")){this._positionDidChange()}else{if(a==="isEditing"){this._isEditingDidChange()}}}},_sizeDidChange:function(){var a=this.getPath("content.sizeKey");var b=a?this.getPath("content.%@".fmt(a)):null;if(b){this.adjust({width:(parseFloat(b.width)||0),height:(parseFloat(b.height)||0)})}},_positionDidChange:function(){var a=this.getPath("content.positionKey");var b=a?this.getPath("content.%@".fmt(a)):null;if(b){this.adjust({left:(parseFloat(b.x)||0),top:(parseFloat(b.y)||0)})}},_isEditingDidChange:function(){var c=this.get("content");var b=c?c.get("isEditing"):NO;var a=c?c.get("canEdit"):NO;var e=c?c.get("showDoneButton"):NO;if(this._editView){this._editView.set("isVisible",(a&&b))}if(this._doneButtonView){this._doneButtonView.set("isVisible",(a&&b&&e))}if(this._widgetView){this._widgetView.set("isVisible",(!b||!a))}if(this._editHandleView){this._editHandleView.set("isVisible",(a&&!b))}},_canDeleteWidgetDidChange:function(){if(this._deleteHandleView){this._deleteHandleView.set("isVisible",this.get("canDeleteWidget"))}}.observes("canDeleteWidget"),_contentDidChange:function(){var a=this.get("content");if(this._widgetView){this._widgetView.set("content",a)}if(this._editView){this._editView.set("content",a)}}.observes("content"),_getViewClass:function(f){var g=this.get(f);var e,a,b;if(SC.typeOf(g)===SC.T_STRING){e=SC.tupleForPropertyPath(g);if(e){a=e[0];b=e[1];g=a.get?a.get(b):a[b]}}return(g&&g.kindOf(SC.View))?g:null},_widgetView:null,_editView:null,_activeView:null,_deleteHandleView:null,_editHandleView:null,_doneButtonView:null});sc_require("views/widget_container");sc_require("mixins/dashboard_delegate");SCUI.DashboardView=SC.View.extend(SCUI.DashboardDelegate,{classNames:"scui-dashboard-view",content:null,acceptsFirstResponder:YES,canDeleteContent:NO,widgetContainerView:SCUI.WidgetContainerView,delegate:null,dashboardDelegate:function(){var a=this.get("delegate");var b=this.get("content");return this.delegateFor("isDashboardDelegate",a,b)}.property("delegate","content").cacheable(),didCreateLayer:function(){arguments.callee.base.apply(this,arguments);this._contentDidChange();var a=this.get("dashboardDelegate");if(a&&a.dashboardViewDidInitialize){a.dashboardViewDidInitialize(this)}},beginManaging:function(){this.setIfChanged("canDeleteContent",YES)},endManaging:function(){this.setIfChanged("canDeleteContent",NO)},deleteWidget:function(c){var b=this.get("content");var a=this.get("dashboardDelegate");if((a&&!a.dashboardDeleteWidget(this,c))||!a){if(b&&b.removeObject){b.removeObject(c)}}},mouseDown:function(b){var c,f,e,a;this._dragData=null;if(b&&b.which===1){c=this._itemViewForEvent(b);if(c&&!c.getPath("content.isLocked")){a=SC.clone(c.get("layout"));a.startPageX=b.pageX;a.startPageY=b.pageY;a.view=c;a.didMove=NO;this._dragData=a}}return YES},mouseDragged:function(e){var c,b,a=this._dragData;if(a){a.didMove=YES;c=e.pageX-a.startPageX;b=e.pageY-a.startPageY;a.view.adjust({left:a.left+c,top:a.top+b})}return YES},mouseUp:function(b){var f,k,j,a,g,e,c;if(this._dragData&&this._dragData.didMove){f=this._dragData.view.get("content");c=this._dragData.view.get("layout");if(f&&c){g=c.left||0;e=c.top||0;j={x:g,y:e};this._setItemPosition(f,j);if(f.widgetDidMove){f.widgetDidMove();a=this.get("dashboardDelegate");if(a&&a.dashboardWidgetDidMove){a.dashboardWidgetDidMove(this,f)}}}}this._dragData=null;return YES},viewDidResize:function(){arguments.callee.base.apply(this,arguments);var b=this.get("clippingFrame"),a=this.get("dashboardDelegate");if(this._isClippingFrameSizeDifferent(b)&&a&&a.dashboardFrameDidChange){a.dashboardFrameDidChange(this,b)}},_contentDidChange:function(){this.invokeOnce("_updateItemViews")}.observes("*content.[]"),_canDeleteContentDidChange:function(){var b=this.get("canDeleteContent");var a=this._itemViews||[];a.forEach(function(c){c.setIfChanged("canDeleteWidget",b)})}.observes("canDeleteContent"),_isClippingFrameSizeDifferent:function(a){if(!this._previousCFHeight){this._previousCFHeight=a.height;this._previousCFWidth=a.width;return YES}else{if(this._previousCFHeight===a.height&&this._previousCFWidth===a.width){return NO}else{this._previousCFHeight=a.height;this._previousCFWidth=a.width;return YES}}},_updateItemViews:function(){var t=this.get("content");var n=this._itemViewCache||{};var z=this._itemViews||[];var o=[];var k={};var j=this.get("dashboardDelegate");var b=this.get("canDeleteContent");var g=this.get("widgetContainerView");var w=[],v=[];var e=this;var q,c,A,a,f,p,u;if(t&&t.isEnumerable){t.forEach(function(C,B){A=SC.guidFor(C);f=n[A];if(!f){p={widgetViewClass:j.dashboardWidgetViewFor(e,t,B,C)||C.get(C.get("widgetViewClassKey")),widgetEditViewClass:j.dashboardWidgetEditViewFor(e,t,B,C)||C.get(C.get("widgetEditViewClassKey")),canDeleteWidget:b,content:C,owner:e,displayDelegate:e,dashboardDelegate:j,layout:e._layoutForItemView(C),layerId:"%@-%@".fmt(SC.guidFor(e),A)};f=e.createChildView(g,p)}o.push(f);k[A]=f})}if(!o.isEqual(z)){this.beginPropertyChanges();this.removeAllChildren();o.forEach(function(B){e.appendChild(B)});z.forEach(function(B){if(o.indexOf(B)<0){B.set("content",null)}});this.endPropertyChanges()}this._itemViews=o;this._itemViewCache=k},_layoutForItemView:function(c){var b=null,e,a;if(c){e=this._getItemPosition(c)||{x:20,y:20};a=this._getItemSize(c)||{width:300,height:100};b={left:e.x,top:e.y,width:a.width,height:a.height}}return b},_itemViewForEvent:function(n){var e=this.getPath("pane.rootResponder");if(!e||!this._itemViewCache){return null}var c=SC.guidFor(this)+"-",a=c.length,f=n.target,g=this.get("layer"),b,k,j=null;while(f&&f!==document&&f!==g){b=f?SC.$(f).attr("id"):null;if((b.length>c.length)&&(b.indexOf(c)===0)){k=b.slice(b.lastIndexOf("-")+1);if(j=this._itemViewCache[k]){break}}f=f.parentNode}return j},_getItemPosition:function(c){var b,f;if(c){b=c.get("positionKey")||"position";f=c.get(b);if(f){var a=parseFloat(f.x)>0?parseFloat(f.x):0;var e=parseFloat(f.y)>0?parseFloat(f.y):0;return{x:a,y:e}}}return null},_setItemPosition:function(b,c){var a;if(b){a=b.get("positionKey")||"position";b.set(a,c)}},_getItemSize:function(c){var a,b;if(c){a=c.get("sizeKey");b=a?c.get(a):null;if(b){return{width:(parseFloat(b.width)||10),height:(parseFloat(b.height)||10)}}}return null},_setItemSize:function(c,b){var a;if(c){a=c.get("sizeKey");if(a){c.set(a,b)}}},_itemViewCache:null,_itemViews:null});SCUI.LINE="line";SCUI.RECT="rect";SCUI.CIRCLE="circle";SCUI.POLY="poly";SCUI.FILL="fill";SCUI.STROKE="stroke";SCUI.DrawingView=SC.View.extend({classNames:"scui-drawing-view",shapes:[],_drawingManager:{},shapesDidChange:function(){this.set("layerNeedsUpdate",YES);this.updateLayerIfNeeded()}.observes("*shapes.[]"),init:function(){arguments.callee.base.apply(this,arguments);this.registerShapeDrawing(SCUI.LINE,function(a,b){if(b.style){if(b.style.width){a.lineWidth=b.style.width}if(b.style.color){a.strokeStyle=b.style.color}if(b.style.transparency){a.globalAlpha=b.style.transparency}}a.beginPath();a.moveTo(b.start.x,b.start.y);a.lineTo(b.end.x,b.end.y);a.stroke()});this.registerShapeDrawing(SCUI.RECT,function(a,b){if(b.style){if(b.style.width){a.lineWidth=b.style.width}if(b.style.color){a.fillStyle=a.strokeStyle=b.style.color}if(b.style.transparency){a.globalAlpha=b.style.transparency}}switch(b.type){case SCUI.FILL:a.fillRect(b.start.x,b.start.y,b.size.width,b.size.height);break;case SCUI.STROKE:a.strokeRect(b.start.x,b.start.y,b.size.width,b.size.height);break;default:a.clearRect(b.start.x,b.start.y,b.size.width,b.size.height);break}});this.registerShapeDrawing(SCUI.CIRCLE,function(a,b){if(b.style){if(b.style.width){a.lineWidth=b.style.width}if(b.style.color){a.fillStyle=a.strokeStyle=b.style.color}if(b.style.transparency){a.globalAlpha=b.style.transparency}}a.beginPath();a.arc(b.center.x,b.center.y,b.radius,0,Math.PI*2,true);if(b.type===SCUI.FILL){a.fill()}else{a.stroke()}});this.registerShapeDrawing(SCUI.POLY,function(b,g){if(g.style){if(g.style.width){b.lineWidth=g.style.width}if(g.style.color){b.fillStyle=b.strokeStyle=g.style.color}if(g.style.transparency){b.globalAlpha=g.style.transparency}}b.beginPath();var a=g.path?g.path.length:0;if(a<2){return}var f=g.path,e;b.moveTo(f[0].x,f[0].y);for(var c=1;c<a;c++){e=f[c];b.lineTo(e.x,e.y)}b.lineTo(f[0].x,f[0].y);if(g.type===SCUI.FILL){b.fill()}else{b.stroke()}})},render:function(c,f){var e=this.get("frame");if(f){if(!SC.browser.msie){c.push('<canvas class="base-layer" width="%@" height="%@"></canvas>'.fmt(e.width,e.height))}}else{var b=this.$("canvas.base-layer");if(b){b.attr("width",e.width);b.attr("height",e.height);if(b.length>0){var a=b[0].getContext("2d");if(a){a.clearRect(0,0,e.width,e.height);this._drawShapes(a)}else{console.error("SCUI.DrawingView.render(): Canvas object context is not accessible.")}}else{console.error("SCUI.DrawingView.render(): Canvas element array length is zero.")}}else{console.error("SCUI.DrawingView.render(): Canvas element is not accessible.")}}return arguments.callee.base.apply(this,arguments)},registerShapeDrawing:function(b,a){if(!b){console.error("Can't register this drawing paradigm because name is null");return NO}this._drawingManager[b]=a;this.set("layerNeedsUpdate",YES);this.updateLayerIfNeeded();return YES},_drawShapes:function(c){var g;var b=this.get("shapes")||[];var e;for(var f=0,a=b.length;f<a;f++){g=b[f];e=this._drawingManager[g.shape];if(e){e(c,g)}}},didCreateLayer:function(){if(SC.browser.msie){var b=this.get("frame");var a=document.createElement("CANVAS");a.className="base-layer";a.width=b.width;a.height=b.height;this.$().append(a);a=G_vmlCanvasManager.initElement(a);this._canvasie=a}}});sc_require("views/drawing");SCUI.SNAP_ZONE=2;SCUI.SNAP_LINE={shape:SCUI.LINE,start:{x:0,y:0},end:{x:0,y:0},style:{width:0.5,color:"#00c6ff"}};SCUI.SnapLines={hasSnapLines:YES,setupData:function(v){if(!v){v=[]}this.removeLines();this._xPositions={};this._yPositions={};var u=this._xPositions,j=this._yPositions,e=this.get("childViews"),k=this,w,c,g,p,b,f,o,a,n=(SCUI.SNAP_ZONE*2);var t=function(D,C,z,G,A){var F=D,E=C,B=z;D=Math.floor(D/n);C=Math.floor(C/n);z=Math.floor(z/n);if(A[D]){A[D].push({value:F,child:G})}else{A[D]=[{value:F,child:G}]}if(A[C]){A[C].push({value:E,child:G})}else{A[C]=[{value:E,child:G}]}if(A[z]){A[z].push({value:B,child:G})}else{A[z]=[{value:B,child:G}]}};var q=this;e.forEach(function(z){if(v.indexOf(z)<0){c=q?q.convertFrameToView(z.get("frame"),null):z.get("frame");g=c.x;p=SC.midX(c);b=c.x+c.width;t(g,p,b,z,u);f=c.y;o=SC.midY(c);a=c.y+c.height;t(f,o,a,z,j)}});q=this.get("parentView");c=q?q.convertFrameToView(this.get("frame"),null):this.get("frame");this._globalFrame=c;g=c.x;p=SC.midX(c);b=c.x+c.width;t(g,p,b,this,u);f=c.y;o=SC.midY(c);a=c.y+c.height;t(f,o,a,this,j)},drawLines:function(B,H,G,J,I,o){if(!this._xPositions||!this._yPositions){return}if(!this._drawingView){this._drawingView=this.createChildView(SCUI.DrawingView.design({shapes:[],mouseDown:function(Q){this.removeFromParent();return YES}}));this.appendChild(this._drawingView)}if(!o){o={x:0,y:0}}var E=(SCUI.SNAP_ZONE*2),F=[],C,g,D,u,z,e,w,v,b,t,c,M,n,k,a,q,O,f,K=this._dragDirection(H,G,J,I),L,j,p=this,P,A,N;u=B.get("parentView");D=u?u.convertFrameToView(B.get("frame"),null):B.get("frame");D.x=D.x-o.x;D.y=D.y-o.y;z=SC.minX(D);e=SC.midX(D);w=SC.maxX(D);v=SC.minY(D);b=SC.midY(D);t=SC.maxY(D);c=Math.floor(z/E);M=Math.floor(e/E);n=Math.floor(w/E);k=Math.floor(v/E);a=Math.floor(b/E);q=Math.floor(t/E);L=K.UP?[{mod:c,val:0},{mod:M,val:D.width/2},{mod:n,val:D.width}]:[{mod:n,val:D.width},{mod:M,val:D.width/2},{mod:c,val:0}];L.forEach(function(Q){if(p._xPositions[Q.mod]){P=Q;O=p._xPositions[Q.mod][0].value-p._globalFrame.x;return}});if(!SC.none(O)){C=SC.copy(SCUI.SNAP_LINE);C.start={x:O,y:0};C.end={x:O,y:this._globalFrame.height};F.push(C)}j=K.LEFT?[{mod:k,val:0},{mod:a,val:D.height/2},{mod:q,val:D.height}]:[{mod:q,val:D.height},{mod:a,val:D.height/2},{mod:k,val:0}];j.forEach(function(Q){if(p._yPositions[Q.mod]){A=Q;f=p._yPositions[Q.mod][0].value-p._globalFrame.y;return}});if(!SC.none(f)){g=SC.copy(SCUI.SNAP_LINE);g.start={y:f,x:0};g.end={y:f,x:this._globalFrame.width};F.push(g)}this._drawingView.set("shapes",F);N={pageX:O+this._globalFrame.x,pageY:f+this._globalFrame.y,frameX:O,frameY:f};if(P){N.pageX-=P.val;N.frameX-=P.val}if(A){N.pageY-=A.val;N.frameY-=A.val}return N},removeLines:function(){this._xPositions=null;this._yPositions=null;this._globalFrame=null;if(this._drawingView){this._drawingView.destroy();this._drawingView=null}},_dragDirection:function(j,g,e,c){var b=j-e,a=g-c,f={};f.UP=b>0?NO:YES;f.DOWN=b>0?YES:NO;f.LEFT=a>0?NO:YES;f.RIGHT=a>0?YES:NO;return f}};SCUI.DrawingPane=SC.Pane.extend({classNames:"scui-drawing-pane",layout:{top:0,left:0,bottom:0,right:0}});sc_require("views/drawing");SCUI.DragLinkView=SCUI.DrawingView.extend({classNames:["scui-draglink"],startPoint:null,endPoint:null,linkParams:{shape:SCUI.LINE,style:{color:"black",width:2}},_pointsDidChange:function(){var e=this.get("startPoint"),a=this.get("endPoint"),f,c,b;f=Math.abs(e.x-a.x);c=Math.abs(e.y-a.y);if(f>5||c>5){b=this.createLinkShape();this.setIfChanged("shapes",[b])}}.observes("startPoint","endPoint","linkParams"),createLinkShape:function(b,a){var c=this.get("linkParams");c.shape=c.shape||SCUI.LINE;c.start={x:b.x,y:b.y};c.end={x:a.x,y:a.y};c.style=c.style||{color:"black",width:2};return c}});window.LinkIt=SC.Object.create({ROUND:"round",FORWARD:"forward",REVERSE:"reverse",OUTPUT_TERMINAL:"LinkIt.TerminalOutput",INPUT_TERMINAL:"LinkIt.TerminalInput",NEVER:"never",DIRECTIONAL:"dir",INVERSE_DIRECTIONAL:"idir",ALWAYS:"always",INVITE:"invite",ACCEPT:"accept",HORIZONTAL_CURVED:"hcurved",VERTICAL_CURVED:"vcurved",STRAIGHT:"straight",PIPES:"pipes",logToConsole:YES,getLayer:function(a){if(a.kindOf(LinkIt.CanvasView)){return a}else{var b=a.get("parentView");if(b){return this.getLayer(b)}else{LinkIt.log("Error: No layer to be found!")}}return null},getContainer:function(a){if(a.kindOf(LinkIt.NodeContainerView)){return a}else{var b=a.get("parentView");if(b){return this.getContainer(b)}else{LinkIt.log("Error: No Container To Be Found!")}}return null},genLinkID:function(e){if(e){var c=e.get("startNode");var b=e.get("startTerminal");var a=e.get("endNode");var g=e.get("endTerminal");var j=[SC.guidFor(c),b].join("_");var f=[SC.guidFor(a),g].join("_");return(j<f)?[j,f].join("_"):[f,j].join("_")}return""},log:function(a){if(this.logToConsole){console.log(a)}}});if(!document.createElement("canvas").getContext){(function(){var C=Math;var D=C.round;var z=C.sin;var L=C.cos;var q=C.abs;var K=C.sqrt;var a=10;var t=a/2;function n(){return this.context_||(this.context_=new v(this))}var B=Array.prototype.slice;function M(N,O,P){var j=B.call(arguments,2);return function(){return N.apply(O,j.concat(B.call(arguments)))}}var o={init:function(j){if(/MSIE/.test(navigator.userAgent)&&!window.opera){var N=j||document;N.createElement("canvas");N.attachEvent("onreadystatechange",M(this.init_,this,N))}},init_:function(P){if(!P.namespaces.g_vml_){P.namespaces.add("g_vml_","urn:schemas-microsoft-com:vml","#default#VML")}if(!P.namespaces.g_o_){P.namespaces.add("g_o_","urn:schemas-microsoft-com:office:office","#default#VML")}if(!P.styleSheets.ex_canvas_){var O=P.createStyleSheet();O.owningElement.id="ex_canvas_";O.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}g_vml_\\:*{behavior:url(#default#VML)}g_o_\\:*{behavior:url(#default#VML)}"}var N=P.getElementsByTagName("canvas");for(var j=0;j<N.length;j++){this.initElement(N[j])}},initElement:function(N){if(!N.getContext){N.getContext=n;N.innerHTML="";N.attachEvent("onpropertychange",J);N.attachEvent("onresize",b);var j=N.attributes;if(j.width&&j.width.specified){N.style.width=j.width.nodeValue+"px"}else{N.width=N.clientWidth}if(j.height&&j.height.specified){N.style.height=j.height.nodeValue+"px"}else{N.height=N.clientHeight}}return N}};function J(N){var j=N.srcElement;switch(N.propertyName){case"width":j.style.width=j.attributes.width.nodeValue+"px";j.getContext().clearRect();break;case"height":j.style.height=j.attributes.height.nodeValue+"px";j.getContext().clearRect();break}}function b(N){var j=N.srcElement;if(j.firstChild){j.firstChild.style.width=j.clientWidth+"px";j.firstChild.style.height=j.clientHeight+"px"}}o.init();var f=[];for(var G=0;G<16;G++){for(var F=0;F<16;F++){f[G*16+F]=G.toString(16)+F.toString(16)}}function w(){return[[1,0,0],[0,1,0],[0,0,1]]}function e(P,O){var N=w();for(var j=0;j<3;j++){for(var S=0;S<3;S++){var Q=0;for(var R=0;R<3;R++){Q+=P[j][R]*O[R][S]}N[j][S]=Q}}return N}function E(N,j){j.fillStyle=N.fillStyle;j.lineCap=N.lineCap;j.lineJoin=N.lineJoin;j.lineWidth=N.lineWidth;j.miterLimit=N.miterLimit;j.shadowBlur=N.shadowBlur;j.shadowColor=N.shadowColor;j.shadowOffsetX=N.shadowOffsetX;j.shadowOffsetY=N.shadowOffsetY;j.strokeStyle=N.strokeStyle;j.globalAlpha=N.globalAlpha;j.arcScaleX_=N.arcScaleX_;j.arcScaleY_=N.arcScaleY_;j.lineScale_=N.lineScale_}function c(N){var Q,P=1;N=String(N);if(N.substring(0,3)=="rgb"){var S=N.indexOf("(",3);var j=N.indexOf(")",S+1);var R=N.substring(S+1,j).split(",");Q="#";for(var O=0;O<3;O++){Q+=f[Number(R[O])]}if(R.length==4&&N.substr(3,1)=="a"){P=R[3]}}else{Q=N}return{color:Q,alpha:P}}function A(j){switch(j){case"butt":return"flat";case"round":return"round";case"square":default:return"square"}}function v(N){this.m_=w();this.mStack_=[];this.aStack_=[];this.currentPath_=[];this.strokeStyle="#000";this.fillStyle="#000";this.lineWidth=1;this.lineJoin="miter";this.lineCap="butt";this.miterLimit=a*1;this.globalAlpha=1;this.canvas=N;var j=N.ownerDocument.createElement("div");j.style.width=N.clientWidth+"px";j.style.height=N.clientHeight+"px";j.style.overflow="hidden";j.style.position="absolute";N.appendChild(j);this.element_=j;this.arcScaleX_=1;this.arcScaleY_=1;this.lineScale_=1}var p=v.prototype;p.clearRect=function(){this.element_.innerHTML=""};p.beginPath=function(){this.currentPath_=[]};p.moveTo=function(N,j){var O=this.getCoords_(N,j);this.currentPath_.push({type:"moveTo",x:O.x,y:O.y});this.currentX_=O.x;this.currentY_=O.y};p.lineTo=function(N,j){var O=this.getCoords_(N,j);this.currentPath_.push({type:"lineTo",x:O.x,y:O.y});this.currentX_=O.x;this.currentY_=O.y};p.bezierCurveTo=function(O,N,U,T,S,Q){var j=this.getCoords_(S,Q);var R=this.getCoords_(O,N);var P=this.getCoords_(U,T);u(this,R,P,j)};function u(j,P,O,N){j.currentPath_.push({type:"bezierCurveTo",cp1x:P.x,cp1y:P.y,cp2x:O.x,cp2y:O.y,x:N.x,y:N.y});j.currentX_=N.x;j.currentY_=N.y}p.quadraticCurveTo=function(S,O,N,j){var R=this.getCoords_(S,O);var Q=this.getCoords_(N,j);var T={x:this.currentX_+2/3*(R.x-this.currentX_),y:this.currentY_+2/3*(R.y-this.currentY_)};var P={x:T.x+(Q.x-this.currentX_)/3,y:T.y+(Q.y-this.currentY_)/3};u(this,T,P,Q)};p.arc=function(V,T,U,Q,N,O){U*=a;var Z=O?"at":"wa";var W=V+L(Q)*U-t;var Y=T+z(Q)*U-t;var j=V+L(N)*U-t;var X=T+z(N)*U-t;if(W==j&&!O){W+=0.125}var P=this.getCoords_(V,T);var S=this.getCoords_(W,Y);var R=this.getCoords_(j,X);this.currentPath_.push({type:Z,x:P.x,y:P.y,radius:U,xStart:S.x,yStart:S.y,xEnd:R.x,yEnd:R.y})};p.rect=function(O,N,j,P){this.moveTo(O,N);this.lineTo(O+j,N);this.lineTo(O+j,N+P);this.lineTo(O,N+P);this.closePath()};p.strokeRect=function(O,N,j,P){var Q=this.currentPath_;this.beginPath();this.moveTo(O,N);this.lineTo(O+j,N);this.lineTo(O+j,N+P);this.lineTo(O,N+P);this.closePath();this.stroke();this.currentPath_=Q};p.fillRect=function(O,N,j,P){var Q=this.currentPath_;this.beginPath();this.moveTo(O,N);this.lineTo(O+j,N);this.lineTo(O+j,N+P);this.lineTo(O,N+P);this.closePath();this.fill();this.currentPath_=Q};p.createLinearGradient=function(N,P,j,O){var Q=new H("gradient");Q.x0_=N;Q.y0_=P;Q.x1_=j;Q.y1_=O;return Q};p.createRadialGradient=function(P,R,O,N,Q,j){var S=new H("gradientradial");S.x0_=P;S.y0_=R;S.r0_=O;S.x1_=N;S.y1_=Q;S.r1_=j;return S};p.drawImage=function(ac,O){var U,S,X,aj,aa,Y,ae,al;var V=ac.runtimeStyle.width;var ab=ac.runtimeStyle.height;ac.runtimeStyle.width="auto";ac.runtimeStyle.height="auto";var T=ac.width;var ah=ac.height;ac.runtimeStyle.width=V;ac.runtimeStyle.height=ab;if(arguments.length==3){U=arguments[1];S=arguments[2];aa=Y=0;ae=X=T;al=aj=ah}else{if(arguments.length==5){U=arguments[1];S=arguments[2];X=arguments[3];aj=arguments[4];aa=Y=0;ae=T;al=ah}else{if(arguments.length==9){aa=arguments[1];Y=arguments[2];ae=arguments[3];al=arguments[4];U=arguments[5];S=arguments[6];X=arguments[7];aj=arguments[8]}else{throw Error("Invalid number of arguments")}}}var ak=this.getCoords_(U,S);var P=ae/2;var N=al/2;var ai=[];var j=10;var R=10;ai.push(" <g_vml_:group",' coordsize="',a*j,",",a*R,'"',' coordorigin="0,0"',' style="width:',j,"px;height:",R,"px;position:absolute;");if(this.m_[0][0]!=1||this.m_[0][1]){var Q=[];Q.push("M11=",this.m_[0][0],",","M12=",this.m_[1][0],",","M21=",this.m_[0][1],",","M22=",this.m_[1][1],",","Dx=",D(ak.x/a),",","Dy=",D(ak.y/a),"");var ag=ak;var af=this.getCoords_(U+X,S);var ad=this.getCoords_(U,S+aj);var Z=this.getCoords_(U+X,S+aj);ag.x=C.max(ag.x,af.x,ad.x,Z.x);ag.y=C.max(ag.y,af.y,ad.y,Z.y);ai.push("padding:0 ",D(ag.x/a),"px ",D(ag.y/a),"px 0;filter:progid:DXImageTransform.Microsoft.Matrix(",Q.join(""),", sizingmethod='clip');")}else{ai.push("top:",D(ak.y/a),"px;left:",D(ak.x/a),"px;")}ai.push(' ">','<g_vml_:image src="',ac.src,'"',' style="width:',a*X,"px;"," height:",a*aj,'px;"',' cropleft="',aa/T,'"',' croptop="',Y/ah,'"',' cropright="',(T-aa-ae)/T,'"',' cropbottom="',(ah-Y-al)/ah,'"'," />","</g_vml_:group>");this.element_.insertAdjacentHTML("BeforeEnd",ai.join(""))};p.stroke=function(an){var S=[];var T=false;var az=c(an?this.fillStyle:this.strokeStyle);var aj=az.color;var au=az.alpha*this.globalAlpha;var P=10;var V=10;S.push("<g_vml_:shape",' filled="',!!an,'"',' style="position:absolute;width:',P,"px;height:",V,'px;"',' coordorigin="0 0" coordsize="',a*P," ",a*V,'"',' stroked="',!an,'"',' path="');var U=false;var ay={x:null,y:null};var af={x:null,y:null};for(var at=0;at<this.currentPath_.length;at++){var ar=this.currentPath_[at];var ax;switch(ar.type){case"moveTo":ax=ar;S.push(" m ",D(ar.x),",",D(ar.y));break;case"lineTo":S.push(" l ",D(ar.x),",",D(ar.y));break;case"close":S.push(" x ");ar=null;break;case"bezierCurveTo":S.push(" c ",D(ar.cp1x),",",D(ar.cp1y),",",D(ar.cp2x),",",D(ar.cp2y),",",D(ar.x),",",D(ar.y));break;case"at":case"wa":S.push(" ",ar.type," ",D(ar.x-this.arcScaleX_*ar.radius),",",D(ar.y-this.arcScaleY_*ar.radius)," ",D(ar.x+this.arcScaleX_*ar.radius),",",D(ar.y+this.arcScaleY_*ar.radius)," ",D(ar.xStart),",",D(ar.yStart)," ",D(ar.xEnd),",",D(ar.yEnd));break}if(ar){if(ay.x==null||ar.x<ay.x){ay.x=ar.x}if(af.x==null||ar.x>af.x){af.x=ar.x}if(ay.y==null||ar.y<ay.y){ay.y=ar.y}if(af.y==null||ar.y>af.y){af.y=ar.y}}}S.push(' ">');if(!an){var ae=this.lineScale_*this.lineWidth;if(ae<1){au*=ae}S.push("<g_vml_:stroke",' opacity="',au,'"',' joinstyle="',this.lineJoin,'"',' miterlimit="',this.miterLimit,'"',' endcap="',A(this.lineCap),'"',' weight="',ae,'px"',' color="',aj,'" />')}else{if(typeof this.fillStyle=="object"){var X=this.fillStyle;var ac=0;var aq={x:0,y:0};var ak=0;var aa=1;if(X.type_=="gradient"){var Z=X.x0_/this.arcScaleX_;var N=X.y0_/this.arcScaleY_;var Y=X.x1_/this.arcScaleX_;var aA=X.y1_/this.arcScaleY_;var aw=this.getCoords_(Z,N);var av=this.getCoords_(Y,aA);var R=av.x-aw.x;var Q=av.y-aw.y;ac=Math.atan2(R,Q)*180/Math.PI;if(ac<0){ac+=360}if(ac<0.000001){ac=0}}else{var aw=this.getCoords_(X.x0_,X.y0_);var j=af.x-ay.x;var O=af.y-ay.y;aq={x:(aw.x-ay.x)/j,y:(aw.y-ay.y)/O};j/=this.arcScaleX_*a;O/=this.arcScaleY_*a;var ap=C.max(j,O);ak=2*X.r0_/ap;aa=2*X.r1_/ap-ak}var ai=X.colors_;ai.sort(function(aB,W){return aB.offset-W.offset});var ad=ai.length;var ah=ai[0].color;var ag=ai[ad-1].color;var am=ai[0].alpha*this.globalAlpha;var al=ai[ad-1].alpha*this.globalAlpha;var ao=[];for(var at=0;at<ad;at++){var ab=ai[at];ao.push(ab.offset*aa+ak+" "+ab.color)}S.push('<g_vml_:fill type="',X.type_,'"',' method="none" focus="100%"',' color="',ah,'"',' color2="',ag,'"',' colors="',ao.join(","),'"',' opacity="',al,'"',' g_o_:opacity2="',am,'"',' angle="',ac,'"',' focusposition="',aq.x,",",aq.y,'" />')}else{S.push('<g_vml_:fill color="',aj,'" opacity="',au,'" />')}}S.push("</g_vml_:shape>");this.element_.insertAdjacentHTML("beforeEnd",S.join(""))};p.fill=function(){this.stroke(true)};p.closePath=function(){this.currentPath_.push({type:"close"})};p.getCoords_=function(O,N){var j=this.m_;return{x:a*(O*j[0][0]+N*j[1][0]+j[2][0])-t,y:a*(O*j[0][1]+N*j[1][1]+j[2][1])-t}};p.save=function(){var j={};E(this,j);this.aStack_.push(j);this.mStack_.push(this.m_);this.m_=e(w(),this.m_)};p.restore=function(){E(this.aStack_.pop(),this);this.m_=this.mStack_.pop()};function k(N){for(var P=0;P<3;P++){for(var O=0;O<2;O++){if(!isFinite(N[P][O])||isNaN(N[P][O])){return false}}}return true}function I(N,j,O){if(!k(j)){return}N.m_=j;if(O){var P=j[0][0]*j[1][1]-j[0][1]*j[1][0];N.lineScale_=K(q(P))}}p.translate=function(O,N){var j=[[1,0,0],[0,1,0],[O,N,1]];I(this,e(j,this.m_),false)};p.rotate=function(N){var P=L(N);var O=z(N);var j=[[P,O,0],[-O,P,0],[0,0,1]];I(this,e(j,this.m_),false)};p.scale=function(O,N){this.arcScaleX_*=O;this.arcScaleY_*=N;var j=[[O,0,0],[0,N,0],[0,0,1]];I(this,e(j,this.m_),true)};p.transform=function(Q,P,S,R,N,j){var O=[[Q,P,0],[S,R,0],[N,j,1]];I(this,e(O,this.m_),true)};p.setTransform=function(Q,P,S,R,O,N){var j=[[Q,P,0],[S,R,0],[O,N,1]];I(this,j,true)};p.clip=function(){};p.arcTo=function(){};p.createPattern=function(){return new g};function H(j){this.type_=j;this.x0_=0;this.y0_=0;this.r0_=0;this.x1_=0;this.y1_=0;this.r1_=0;this.colors_=[]}H.prototype.addColorStop=function(N,j){j=c(j);this.colors_.push({offset:N,color:j.color,alpha:j.alpha})};function g(){}G_vmlCanvasManager=o;CanvasRenderingContext2D=v;CanvasGradient=H;CanvasPattern=g})()}LinkIt.Link={isSelected:NO,linkStyle:{cap:LinkIt.ROUND,width:3,color:"#ADD8E6",lineStyle:LinkIt.VERTICAL_CURVED,directionIndicator:NO},directionIndicator:NO,selectionColor:"#FFFF64",selectionWidth:7,startNode:null,startTerminal:null,endNode:null,endTerminal:null,startPt:null,endPt:null,canDelete:function(){var b=this.get("startNode");var a=this.get("endNode");return !!(b&&a&&b.canDeleteLink(this)&&a.canDeleteLink(this))},drawLink:function(c){var e=this.get("linkStyle")||{};var a=(e?e.lineStyle:LinkIt.STRAIGHT)||LinkIt.STRAIGHT;var f=e.color;var g=e.width;var b=this.get("isSelected");switch(a){case LinkIt.HORIZONTAL_CURVED:if(b){e.color=this.get("selectionColor");e.width=this.get("selectionWidth");this.drawHorizontalCurvedLine(c,e);e.color=f;e.width=g}this.drawHorizontalCurvedLine(c,e);break;case LinkIt.VERTICAL_CURVED:if(b){e.color=this.get("selectionColor");e.width=this.get("selectionWidth");this.drawVerticalCurvedLine(c,e);e.color=f;e.width=g}this.drawVerticalCurvedLine(c,e);break;default:if(b){e.color=this.get("selectionColor");e.width=this.get("selectionWidth");this.drawStraightLine(c,e);e.color=f;e.width=g}this.drawStraightLine(c,e);break}},drawStraightLine:function(a,b){var e=this.get("startPt");var c=this.get("endPt");if(e&&c){a=this._initLineProperties(a,b);a.beginPath();a.moveTo(e.x,e.y);a.lineTo(c.x,c.y);a.closePath();a.stroke()}},drawHorizontalCurvedLine:function(e,H){var C=this.get("startPt");var F=this.get("endPt");if(C&&F){e=this._initLineProperties(e,H);var A=(C.x+F.x)/2;var z=(C.y+F.y)/2;this._midPt={x:A,y:z};var g=(C.x-F.x);var f=(C.y-F.y);var I=Math.pow(g,2);var c=Math.pow(f,2);var q=Math.sqrt(I+c);var G=Math.abs(C.x-F.x);var w=Math.abs(C.y-F.y);var p=0,B;if(q>0){B=(G<w)?G:w;p=(B<50)?B/q:50/q}var o=(C.x+A)/2;var k=(C.y+z)/2;var E=(F.x+A)/2;var D=(F.y+z)/2;var j,n;if(C.y<F.y){j=g*p;n=-(f*p)}else{j=-(g*p);n=f*p}var b=o+n;var a=k+j;this._startControlPt={x:b,y:a};var v=E-n;var u=D-j;this._endControlPt={x:v,y:u};e.beginPath();e.moveTo(C.x,C.y);e.quadraticCurveTo(b,a,A,z);e.quadraticCurveTo(v,u,F.x,F.y);e.stroke();var t=this.get("directionIndicator");if(t===LinkIt.FORWARD){this.drawDirectionIndicator(e,A,z,b-A,a-z)}else{if(t===LinkIt.REVERSE){this.drawDirectionIndicator(e,A,z,A-b,z-a)}}}},drawVerticalCurvedLine:function(e,H){var C=this.get("startPt");var F=this.get("endPt");if(C&&F){e=this._initLineProperties(e,H);var A=(C.x+F.x)/2;var z=(C.y+F.y)/2;this._midPt={x:A,y:z};var g=(C.x-F.x);var f=(C.y-F.y);var I=Math.pow(g,2);var c=Math.pow(f,2);var q=Math.sqrt(I+c);var G=Math.abs(C.x-F.x);var w=Math.abs(C.y-F.y);var p=0,B;if(q>0){B=(G<w)?G:w;p=(B<50)?B/q:50/q}var o=(C.x+A)/2;var k=(C.y+z)/2;var E=(F.x+A)/2;var D=(F.y+z)/2;var j,n;if(C.x<F.x){j=-(g*p);n=f*p}else{j=g*p;n=-(f*p)}var b=o+n;var a=k+j;this._startControlPt={x:b,y:a};var v=E-n;var u=D-j;this._endControlPt={x:v,y:u};e.beginPath();e.moveTo(C.x,C.y);e.quadraticCurveTo(b,a,A,z);e.quadraticCurveTo(v,u,F.x,F.y);e.stroke();var t=this.get("directionIndicator");if(t===LinkIt.FORWARD){this.drawDirectionIndicator(e,A,z,b-A,a-z)}else{if(t===LinkIt.REVERSE){this.drawDirectionIndicator(e,A,z,A-b,z-a)}}}},drawDirectionIndicator:function(c,f,e,b,a){c.save();c.translate(f,e);c.rotate(Math.atan2(a,b)-Math.atan2(1,0));c.scale(2.5,2.5);c.beginPath();c.moveTo(0,-3);c.lineTo(2,3);c.lineTo(-2,3);c.lineTo(0,-3);c.fill();c.restore()},distanceSquaredFromLine:function(g){var k=this.get("startPt");var f=this.get("endPt");var b=this.get("linkStyle");var a=b?(b.lineStyle||LinkIt.STRAIGHT):LinkIt.STRAIGHT;if(a===LinkIt.STRAIGHT){return this._distanceSquaredFromLineSegment(k,f,g)}else{var e=this._distanceSquaredFromCurve(k,this._midPt,this._startControlPt,g);var c=this._distanceSquaredFromCurve(this._midPt,f,this._endControlPt,g);var j=Math.min(e,c);return j}},_distanceSquaredFromLineSegment:function(o,n,g){var e;if(o.x!==n.x||o.y!==n.y){var w={x:(n.x-o.x),y:(n.y-o.y)};var c=(w.x*(g.x-o.x))+((g.y-o.y)*w.y);var v=c/((w.x*w.x)+(w.y*w.y));if(v<=0){e={x:o.x,y:o.y}}else{if(v>=1){e={x:n.x,y:n.y}}else{var t=o.x+(v*w.x);var k=o.y+(v*w.y);e={x:t,y:k}}}}else{e={x:o.x,y:o.y}}var f={x:(e.x-g.x),y:(e.y-g.y)};var j=(f.x*f.x)+(f.y*f.y);return j},_distanceSquaredFromCurve:function(v,u,q,e){var A,B,w;var o={x:v.x,y:v.y};var k={x:u.x,y:u.y};var z=0.5,g=0.5;do{B={x:(o.x+k.x)/2,y:(o.y+k.y)/2};A=this._pointOnBezierCurve(v,q,u,z);w=this._distanceSquared(B,A);if(w>16){var j=this._distanceSquared(o,e);var f=this._distanceSquared(k,e);g=0.5*g;if(j<f){k=A;z=z-g}else{o=A;z=z+g}}else{break}}while(true);return this._distanceSquaredFromLineSegment(o,k,e)},_pointOnBezierCurve:function(g,e,c,b){var a=((1-b)*(1-b)*g.x)+(2*(1-b)*b*e.x)+(b*b*c.x);var f=((1-b)*(1-b)*g.y)+(2*(1-b)*b*e.y)+(b*b*c.y);return{x:a,y:f}},_distanceSquared:function(e,c){return((c.x-e.x)*(c.x-e.x))+((c.y-e.y)*(c.y-e.y))},_initLineProperties:function(c,f){this.set("directionIndicator",f?f.directionIndicator:this.get("directionIndicator"));if(c){var b=f?(f.cap||LinkIt.ROUND):LinkIt.ROUND;var a=f?(f.color||"#ADD8E6"):"#ADD8E6";var e=f?(f.width||3):3;c.lineCap=b;c.strokeStyle=a;c.fillStyle=a;c.lineWidth=e}return c},_midPt:null,_startControlPt:null,_endControlPt:null};LinkIt.Node={isNode:YES,terminals:null,linksKey:"links",positionKey:"position",_invalidationDelegate:null,_invalidationAction:null,initMixin:function(){var b,a;b=this.get("terminals");if(SC.typeOf(b)===SC.T_ARRAY){this.set("terminals",SC.clone(b))}a=this.get("linksKey");if(a){this.addObserver(a,this,"_linksDidChange")}},canLink:function(a){return YES},canDeleteLink:function(a){return YES},registerInvalidationDelegate:function(a,b){this._invalidationDelegate=a;this._invalidationAction=b},didCreateLink:function(a){},willDeleteLink:function(a){},createLink:function(a){if(this.didCreateLink){this.didCreateLink(a)}},deleteLink:function(a){if(this.willDeleteLink){this.willDeleteLink(a)}},_linksDidChange:function(){var c,b,a=this._invalidationDelegate;if(this._invalidationDelegate){b=this._invalidationAction;c=a[b];if(c){a.invokeLast(b)}}}};LinkIt.NodeView={isNodeView:YES,isDropTarget:YES,displayProperties:["dropState"],proxiedTerminalView:null,terminalViewFor:function(a){return null},shouldProxyTerminalFor:function(a){return NO},willDestroyLayerMixin:function(){SC.Drag.removeDropTarget(this)},renderMixin:function(a,c){var b=this.get("dropState");a.setClass("invite",b===LinkIt.INVITE);a.setClass("accept",b===LinkIt.ACCEPT)},dragStarted:function(c,a){var b=this.shouldProxyTerminalFor(c);b=b?this.terminalViewFor(b):null;this.set("proxiedTerminalView",b);if(b&&b._nodeAllowsLink(c.source)){this.set("dropState",LinkIt.INVITE)}},dragEntered:function(b,a){this.set("dropState",LinkIt.ACCEPT)},dragExited:function(b,a){this.set("dropState",LinkIt.INVITE)},dragEnded:function(b,a){this.set("dropState",null)},computeDragOperations:function(b,a){return SC.DRAG_LINK},acceptDragOperation:function(b,c){var a=this.get("proxiedTerminalView");return(a&&c===SC.DRAG_LINK)?a._nodeAllowsLink(b.source):NO},performDragOperation:function(b,c){var a=this.get("proxiedTerminalView");return a?a.performDragOperation(b,c):c}};LinkIt.Terminal={isTerminal:YES,isLinked:NO,direction:null,terminal:null,linkStyle:null,dropState:null,displayProperties:["dropState","isLinked","linkStyle","direction"],node:null,_linkCache:null,isDropTarget:YES,terminalKey:function(){var b=this.get("node");var a=this.get("terminal");return"%@:%@".fmt(SC.guidFor(b),a)}.property("node","terminal").cacheable(),initMixin:function(){this.isLinked=NO},willDestroyLayerMixin:function(){SC.Drag.removeDropTarget(this)},renderMixin:function(b,e){var a=this.get("links");b.setClass("connected",this.get("isLinked"));var c=this.get("dropState");b.setClass("invite",c===LinkIt.INVITE);b.setClass("accept",c===LinkIt.ACCEPT)},canDragLink:function(){return YES},canDropLink:function(){return YES},linkDragStarted:function(){},linkDragEnded:function(){},linkDragEntered:function(){},linkDragExited:function(){},mouseDown:function(a){this._mouseDownEvent=a;this._mouseDownAt=Date.now();return YES},mouseDragged:function(o){if(this.canDragLink()&&this._mouseDownEvent){var g=LinkIt.getLayer(this);if(g&&g.get("isEditable")){var n=this.get("parentView");var j=n.convertFrameFromView(n.get("frame"),this);var a=this.get("frame");var f=j.x+(a.width/2);var c=j.y+(a.height/2);var b=this.get("linkDragColor");var k=LinkIt.DragLink.create({layout:{left:0,top:0,right:0,bottom:0},startPt:{x:f,y:c},endPt:{x:f,y:c},linkStyle:this.get("linkStyle")});g.appendChild(k);var e=SC.Drag.start({event:this._mouseDownEvent,dragLink:k,source:this,dragView:SC.View.create({layout:{left:0,top:0,width:0,height:0}}),ghost:NO,slideBack:YES,dataSource:this,anchorView:g})}this._cleanupMouseDown()}return YES},mouseUp:function(a){this._cleanupMouseDown();return YES},dragSourceOperationMaskFor:function(b,c){var a=c.get("isNodeView")?c.get("proxiedTerminalView"):c;return this._nodeAllowsLink(a)?SC.DRAG_LINK:SC.DRAG_NONE},dragDidBegin:function(a,b){},dragDidMove:function(b,k){var g=b.dragLink;var f,a;if(g){var e=g.get("parentView");var j=g.get("frame");var c=e?e.convertFrameToView(j,null):j;if(c){f=k.x-c.x;a=k.y-c.y;g.set("endPt",{x:f,y:a})}}},dragDidEnd:function(a,c,e){var b=a.dragLink;if(b){b.destroy()}},dragStarted:function(b,a){if(this._nodeAllowsLink(b.source)){this.set("dropState",LinkIt.INVITE);this.linkDragStarted()}},dragEntered:function(b,a){this.set("dropState",LinkIt.ACCEPT);this.linkDragEntered()},dragExited:function(b,a){this.set("dropState",LinkIt.INVITE);this.linkDragExited()},dragEnded:function(b,a){this.set("dropState",null);this.linkDragEnded()},computeDragOperations:function(b,a){return SC.DRAG_LINK},acceptDragOperation:function(b,c){var a=(c===SC.DRAG_LINK)?this._nodeAllowsLink(b.source):NO;return a},performDragOperation:function(b,j){var e=this.get("node");var g=b.source;if(e&&g){var a=g.get("node");if(a){var f=this._createLinkObject(this,e,g,a);e.createLink(SC.Object.create(f));var c=this._createLinkObject(g,a,this,e);a.createLink(SC.Object.create(c))}}return j},_getLinkObjects:function(f,c,g,a){var e,b;this._linkCache=this._linkCache||{};e="%@ %@".fmt(f.get("terminalKey"),g.get("terminalKey"));b=this._linkCache[e]||this._createLinkObject(f,c,g,a);this._linkCache[e]=b;return b},_nodeAllowsLink:function(k){var f,c,j,a;if(k&&k.get("isTerminal")){var g=this.get("node");var e=k.get("node");var b=this._getLinkObjects(k,e,this,g);c=(g&&b[0])?g.canLink(b[0]):NO;a=(e&&c&&b[1])?e.canLink(b[1]):NO}if(k&&k.get("isCanvas")){return k.get("acceptCanvasDrop")}return(c&&a)},_createLinkObject:function(g,a,b,j){var f={};var e,k;if(a&&j){var c=g.get("direction");var n=b.get("direction");if(!SC.none(c)&&c===n){return[null,null]}if((c===LinkIt.OUTPUT_TERMINAL&&(n===LinkIt.INPUT_TERMINAL||SC.none(n)))||(n===LinkIt.INPUT_TERMINAL&&SC.none(c))){f.direction=c;f.startNode=a;f.startTerminal=g.get("terminal");f.startTerminalView=g;f.endNode=j;f.endTerminal=b.get("terminal");f.endTerminalView=b;e=SC.Object.create(LinkIt.Link,f);return[e,e]}else{if((c===LinkIt.INPUT_TERMINAL&&(n===LinkIt.OUTPUT_TERMINAL||SC.none(n)))||(n===LinkIt.OUTPUT_TERMINAL&&SC.none(c))){f.direction=n;f.startNode=j;f.startTerminal=b.get("terminal");f.startTerminalView=b;f.endNode=a;f.endTerminal=g.get("terminal");f.endTerminalView=g;e=SC.Object.create(LinkIt.Link,f);return[e,e]}else{f.direction=c;f.startNode=a;f.startTerminal=g.get("terminal");f.startTerminalView=g;f.endNode=j;f.endTerminal=b.get("terminal");f.endTerminalView=b;e=SC.Object.create(LinkIt.Link,f);f.direction=n;f.startNode=j;f.startTerminal=b.get("terminal");f.startTerminalView=b;f.endNode=a;f.endTerminal=g.get("terminal");f.endTerminalView=g;k=SC.Object.create(LinkIt.Link,f);return[e,k]}}}},_cleanupMouseDown:function(){this._mouseDownEvent=this._mouseDownAt=null}};sc_require("libs/excanvas");LinkIt.CanvasView=SC.CollectionView.extend({classNames:["linkit-canvas"],isEmpty:YES,acceptsFirstResponder:YES,canDeleteContent:YES,allowDeselectAll:YES,contextMenuTarget:null,contextMenuAction:null,LINK_SELECTION_FREEDOM:6,linkSelection:null,displayProperties:["frame"],isCanvas:YES,isDropTarget:YES,acceptCanvasDrop:YES,computeDragOperations:function(b,a){return this.acceptCanvasDrop?SC.DRAG_LINK:SC.DRAG_NONE},performDragOperation:function(a,b){return SC.DRAG_NONE},linksDidChange:function(){this.invokeOnce(this._updateLinks)},render:function(b,f){var a,c,e=this.get("frame");if(f&&!SC.browser.msie){b.push('<canvas class="base-layer" width="%@" height="%@"></canvas>'.fmt(e.width,e.height))}this.invokeOnce("updateCanvas");arguments.callee.base.apply(this,arguments)},updateCanvas:function(){var b,a=this._canvasContext,c=this.get("clippingFrame");if(!a){b=this.$("canvas.base-layer");a=(b&&b.length>0)?b[0].getContext("2d"):null}if(a){a.clearRect(c.x,c.y,c.width+4,c.height+4);this._drawLinks(a)}else{this.set("layerNeedsUpdate",YES)}},didCreateLayer:function(){if(SC.browser.msie){var b=this.get("frame");var a=document.createElement("CANVAS");a.className="base-layer";a.width=b.width;a.height=b.height;this.$().append(a);a=G_vmlCanvasManager.initElement(a);this._canvasie=a}},didReload:function(j){var c={};var g=this.get("content")||[];var a=g.get("length");var f,k,b;for(var e=0;e<a;e++){f=g.objectAt(e);k=SC.guidFor(f);b=this.itemViewForContentIndex(e);c[k]=b}this._nodeViewIndex=c},createItemView:function(j,b,e){var c,k;var g,a;var f=e.content;if(j){c=j.create(e)}else{c=SC.LabelView.create(e,{layout:{left:0,top:0,width:150,height:50},value:"Missing NodeView"})}k=c.get("frame");a=this._getItemPosition(f);if(!a){a=this._genRandomPosition();this._setItemPosition(f,a)}g={top:a.y,left:a.x,width:k.width,height:k.height};c.set("layout",g);return c},deleteSelection:function(){if(this.get("isEditable")){arguments.callee.base.apply(this,arguments);this.deleteLinkSelection()}return YES},deleteLinkSelection:function(){var c=this.get("linkSelection");if(c&&c.canDelete()&&this.get("isEditable")){var b=c.get("startNode");var a=c.get("endNode");if(b){b.deleteLink(c)}if(a){a.deleteLink(c)}this.set("linkSelection",null);this.displayDidChange()}},mouseDown:function(q){var t,c,n,j,g,o,f,e;var p,b,k,a;arguments.callee.base.apply(this,arguments);this._dragData=null;if(q&&(q.which===3)||(q.ctrlKey&&q.which===1)){if(this.get("isEditable")){p=this.get("linkSelection");if(p&&p.canDelete()&&!this.getPath("selection.length")){e=[{title:"Delete Selected Link".loc(),target:this,action:"deleteLinkSelection",isEnabled:YES}];f=SCUI.ContextMenuPane.create({contentView:SC.View.design({}),layout:{width:194,height:0},itemTitleKey:"title",itemTargetKey:"target",itemActionKey:"action",itemSeparatorKey:"isSeparator",itemIsEnabledKey:"isEnabled",items:e});f.popup(this,q)}}}else{t=this.get("parentView");c=this.get("frame");n=t?t.convertFrameToView(c,null):c;j=q.pageX-n.x;g=q.pageY-n.y;this._selectLink({x:j,y:g});if(this.get("isEditable")){o=this.itemViewForEvent(q);if(o){this._dragData=SC.clone(o.get("layout"));this._dragData.startPageX=q.pageX;this._dragData.startPageY=q.pageY;this._dragData.view=o;this._dragData.itemFrame=o.get("frame");this._dragData.ownerFrame=this.get("frame");this._dragData.didMove=NO}}}return YES},mouseDragged:function(c){var b,f,a,e;if(this._dragData){this._dragData.didMove=YES;a=this._dragData.itemFrame;e=this._dragData.ownerFrame;b=this._dragData.left+c.pageX-this._dragData.startPageX;f=this._dragData.top+c.pageY-this._dragData.startPageY;if(b<0){b=0}else{if((b+a.width)>e.width){b=e.width-a.width}}if(f<0){f=0}else{if((f+a.height)>e.height){f=e.height-a.height}}this._dragData.view.adjust({left:b,top:f});this.invokeOnce("updateCanvas")}return YES},mouseUp:function(a){var b=arguments.callee.base.apply(this,arguments);var f,e,c,g;if(this._dragData&&this._dragData.didMove){f=this._dragData.view.get("layout");e=this._dragData.view.get("content");if(e&&e.get("isNode")){c={x:f.left,y:f.top};this._setItemPosition(e,c)}}this._dragData=null;if(a&&(a.which===3)||(a.ctrlKey&&a.which===1)){g=this.get("contextMenuAction");if(g){this.getPath("pane.rootResponder").sendAction(g,this.get("contextMenuTarget"),this,this.get("pane"),a)}}return b},_layoutForNodeView:function(e,c){var b=null,a,f;if(e&&c){f=e.get("frame");a=this._getItemPosition(c);if(!a){a=this._genRandomPosition();this._setItemPosition(c,a)}b={top:a.x,left:a.y,width:f.width,height:f.height}}return b},_updateLinks:function(){var v,A,z=[],e=this._nodeIndex||{},a=this.get("content");if(a){var b=a.get("length");var f,k,g,p,w,o,u;var c,n;for(v in e){f=e[v];if(f&&(w=f.get("linksKey"))){p=f.get(w);z=z.concat(p)}}var t=this.get("linkSelection");this.set("linkSelection",null);if(t){var q=LinkIt.genLinkID(t);o=z.get("length");for(k=0;k<o;k++){u=z.objectAt(k);if(LinkIt.genLinkID(u)===q){this.set("linkSelection",u);u.set("isSelected",YES);break}}}}this._links=z;this.updateCanvas()},_drawLinks:function(e){var a=this._links;var c=a.get("length");var g,f,b,j;for(b=0;b<c;b++){g=a.objectAt(b);if(!SC.none(g)){f=this._endpointsFor(g);if(f){g.drawLink(e)}}}},_endpointsFor:function(c){var j=this._terminalViewFor(c.get("startNode"),c.get("startTerminal"));var k=this._terminalViewFor(c.get("endNode"),c.get("endTerminal"));var g=null,e=null,b,f;if(j&&k){b=j.get("parentView");if(b){f=b.convertFrameToView(j.get("frame"),this);g={};g.x=SC.midX(f);g.y=SC.midY(f);c.set("startPt",g)}b=k.get("parentView");if(b){f=b.convertFrameToView(k.get("frame"),this);e={};e.x=SC.midX(f);e.y=SC.midY(f);c.set("endPt",e)}var a=j.get("linkStyle");if(a){c.set("linkStyle",a)}}return g&&e?{startPt:g,endPt:e}:null},_selectLink:function(g){var b=this._links||[];var a=b.get("length");var f,j,e;var c=(this.LINE_SELECTION_FREEDOM*this.LINE_SELECTION_FREEDOM)||25;this.set("linkSelection",null);for(e=0;e<a;e++){f=b.objectAt(e);j=f.distanceSquaredFromLine(g);if((SC.typeOf(j)===SC.T_NUMBER)&&(j<=c)){f.set("isSelected",YES);this.set("linkSelection",f);break}else{f.set("isSelected",NO)}}for(e=e+1;e<a;e++){f=b.objectAt(e);f.set("isSelected",NO)}this.invokeOnce("updateCanvas")},_terminalViewFor:function(b,a){var c=this._nodeViewIndex[SC.guidFor(b)];if(c&&c.terminalViewFor){return c.terminalViewFor(a)}return null},_handleContentDidChange:function(){this._nodeSetup();this.linksDidChange()},_contentDidChange:function(){this.invokeOnce("_handleContentDidChange")}.observes("*content.[]"),_nodeSetup:function(){var a=this.get("content");var c=0;var e,f;this._nodeIndex=this._nodeIndex||{};if(a){c=a.get("length");for(var b=0;b<c;b++){e=a.objectAt(b);f=SC.guidFor(e);if(SC.none(this._nodeIndex[f])){e.registerInvalidationDelegate(this,"linksDidChange");this._nodeIndex[f]=e}}}this.set("isEmpty",c<=0)},_getItemPosition:function(b){var a=b?b.get("positionKey"):null;var c=a?b.get(a):null;if(a&&c){c={x:(parseFloat(c.x)||0),y:(parseFloat(c.y)||0)}}return c},_setItemPosition:function(b,c){var a=b?b.get("positionKey"):null;if(a){b.set(a,c)}},_genRandomPosition:function(){return{x:Math.floor(10+Math.random()*590),y:Math.floor(10+Math.random()*390)}},links:[],_nodeIndex:{},_nodeViewIndex:{},_dragData:null,_canvasContext:null});sc_require("mixins/link");LinkIt.DragLink=SC.View.extend(LinkIt.Link,{classNames:["linkIt-draglink"],displayProperties:["startPt","endPt"],render:function(c,a){if(a){if(!SC.browser.msie){c.push("<canvas>test</canvas>")}}else{var f=this.$("canvas");var e=this.get("frame");if(f&&e){var b=e.width;var p=e.height;f.attr("width",b);f.attr("height",p);if(f.length>0){var k=this._canvasie?this._canvasie.getContext("2d"):f[0].getContext("2d");if(k){k.clearRect(0,0,b,p);var g=this.get("startPt");var j=this.get("endPt");var o=Math.abs(g.x-j.x);var n=Math.abs(g.y-j.y);if(o>5||n>5){if(this.drawLink){this.drawLink(k)}}}else{LinkIt.log("LinkIt.DragLink.render(): Canvas object context is not accessible.")}}else{LinkIt.log("LinkIt.DragLink.render(): Canvas element has length zero.")}}else{LinkIt.log("LinkIt.DragLink.render(): Canvas element or frame unaccessible.")}}arguments.callee.base.apply(this,arguments)},didCreateLayer:function(){if(SC.browser.msie){var b=this.get("frame");var a=document.createElement("CANVAS");a.width=b.width;a.height=b.height;this.$().append(a);a=G_vmlCanvasManager.initElement(a);this._canvasie=a}this.set("layoutNeedsUpdate",YES)}});
/*!
 * Raphael 1.5.2 - JavaScript Vector Library
 *
 * Copyright (c) 2010 Dmitry Baranovskiy (http://raphaeljs.com)
 * Licensed under the MIT (http://raphaeljs.com/license.html) license.
 */
(function(){function aP(){if(aP.is(arguments[0],be)){var b=arguments[0],e=M[bI](aP,b.splice(0,3+aP.is(b[0],aM))),S=e.set();for(var R=0,bO=b[z];R<bO;R++){var E=b[R]||{};bw[an](E.type)&&S[n](e[E.type]().attr(E))}return S}return M[bI](aP,arguments)}aP.version="1.5.2";var a=/[, ]+/,bw={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},bu=/\{(\d+)\}/g,bL="prototype",an="hasOwnProperty",ah=document,aX=window,w={was:Object[bL][an].call(aX,"Raphael"),is:aX.Raphael},bG=function(){this.customAttributes={}},a6,br="appendChild",bI="apply",bD="concat",ad="createTouch" in ah,aW="",aO=" ",bJ=String,P="split",Z="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend orientationchange touchcancel gesturestart gesturechange gestureend"[P](aO),bx={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},a3="join",z="length",bN=bJ[bL].toLowerCase,aw=Math,p=aw.max,bp=aw.min,ay=aw.abs,bs=aw.pow,aT=aw.PI,aM="number",am="string",be="array",a7="toString",bb="fill",a0=Object[bL][a7],bA={},n="push",j=/^url\(['"]?([^\)]+?)['"]?\)$/i,N=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,ax={"NaN":1,"Infinity":1,"-Infinity":1},c=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,ak=aw.round,L="setAttribute",aq=parseFloat,aa=parseInt,bc=" progid:DXImageTransform.Microsoft",bv=bJ[bL].toUpperCase,v={blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/",opacity:1,path:"M0,0",r:0,rotation:0,rx:0,ry:0,scale:"1 1",src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",translation:"0 0",width:0,x:0,y:0},au={along:"along",blur:aM,"clip-rect":"csv",cx:aM,cy:aM,fill:"colour","fill-opacity":aM,"font-size":aM,height:aM,opacity:aM,path:"path",r:aM,rotation:"csv",rx:aM,ry:aM,scale:"csv",stroke:"colour","stroke-opacity":aM,"stroke-width":aM,translation:"csv",width:aM,x:aM,y:aM},bz="replace",bm=/^(from|to|\d+%?)$/,bk=/\s*,\s*/,q={hs:1,rg:1},bh=/,?([achlmqrstvxz]),?/gi,aY=/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/ig,aN=/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/ig,aV=/^r(?:\(([^,]+?)\s*,\s*([^\)]+?)\))?/,bt=function(E,e){return E.key-e.key};aP.type=(aX.SVGAngle||ah.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML");if(aP.type=="VML"){var aE=ah.createElement("div"),aI;aE.innerHTML='<v:shape adj="1"/>';aI=aE.firstChild;aI.style.behavior="url(#default#VML)";if(!(aI&&typeof aI.adj=="object")){return aP.type=null}aE=null}aP.svg=!(aP.vml=aP.type=="VML");bG[bL]=aP[bL];a6=bG[bL];aP._id=0;aP._oid=0;aP.fn={};aP.is=function(e,b){b=bN.call(b);if(b=="finite"){return !ax[an](+e)}return(b=="null"&&e===null)||(b==typeof e)||(b=="object"&&e===Object(e))||(b=="array"&&Array.isArray&&Array.isArray(e))||a0.call(e).slice(8,-1).toLowerCase()==b};aP.angle=function(S,bP,E,bO,e,R){if(e==null){var b=S-E,bQ=bP-bO;if(!b&&!bQ){return 0}return((b<0)*180+aw.atan(-bQ/-b)*180/aT+360)%360}else{return aP.angle(S,bP,e,R)-aP.angle(E,bO,e,R)}};aP.rad=function(b){return b%360*aT/180};aP.deg=function(b){return b*180/aT%360};aP.snapTo=function(e,R,b){b=aP.is(b,"finite")?b:10;if(aP.is(e,be)){var E=e.length;while(E--){if(ay(e[E]-R)<=b){return e[E]}}}else{e=+e;var S=R%e;if(S<b){return R-S}if(S>e-b){return R-S+e}}return R};function k(){var e=[],b=0;for(;b<32;b++){e[b]=(~~(aw.random()*16))[a7](16)}e[12]=4;e[16]=((e[16]&3)|8)[a7](16);return"r-"+e[a3]("")}aP.setWindow=function(b){aX=b;ah=aX.document};var bg=function(R){if(aP.vml){var b=/^\s+|\s+$/g;var bO;try{var bP=new ActiveXObject("htmlfile");bP.write("<body>");bP.close();bO=bP.body}catch(bQ){bO=createPopup().document.body}var E=bO.createTextRange();bg=aH(function(bR){try{bO.style.color=bJ(bR)[bz](b,aW);var bS=E.queryCommandValue("ForeColor");bS=((bS&255)<<16)|(bS&65280)|((bS&16711680)>>>16);return"#"+("000000"+bS[a7](16)).slice(-6)}catch(bT){return"none"}})}else{var S=ah.createElement("i");S.title="Rapha\xebl Colour Picker";S.style.display="none";ah.body[br](S);bg=aH(function(e){S.style.color=e;return ah.defaultView.getComputedStyle(S,aW).getPropertyValue("color")})}return bg(R)},aJ=function(){return"hsb("+[this.h,this.s,this.b]+")"},V=function(){return"hsl("+[this.h,this.s,this.l]+")"},J=function(){return this.hex};aP.hsb2rgb=function(R,E,e,S){if(aP.is(R,"object")&&"h" in R&&"s" in R&&"b" in R){e=R.b;E=R.s;R=R.h;S=R.o}return aP.hsl2rgb(R,E,e/2,S)};aP.hsl2rgb=function(bP,bW,R,E){if(aP.is(bP,"object")&&"h" in bP&&"s" in bP&&"l" in bP){R=bP.l;bW=bP.s;bP=bP.h}if(bP>1||bW>1||R>1){bP/=360;bW/=100;R/=100}var bU={},bR=["r","g","b"],bQ,bT,bO,e,bS,bV;if(!bW){bU={r:R,g:R,b:R}}else{if(R<0.5){bQ=R*(1+bW)}else{bQ=R+bW-R*bW}bT=2*R-bQ;for(var S=0;S<3;S++){bO=bP+1/3*-(S-1);bO<0&&bO++;bO>1&&bO--;if(bO*6<1){bU[bR[S]]=bT+(bQ-bT)*6*bO}else{if(bO*2<1){bU[bR[S]]=bQ}else{if(bO*3<2){bU[bR[S]]=bT+(bQ-bT)*(2/3-bO)*6}else{bU[bR[S]]=bT}}}}}bU.r*=255;bU.g*=255;bU.b*=255;bU.hex="#"+(16777216|bU.b|(bU.g<<8)|(bU.r<<16)).toString(16).slice(1);aP.is(E,"finite")&&(bU.opacity=E);bU.toString=J;return bU};aP.rgb2hsb=function(b,e,bQ){if(e==null&&aP.is(b,"object")&&"r" in b&&"g" in b&&"b" in b){bQ=b.b;e=b.g;b=b.r}if(e==null&&aP.is(b,am)){var bS=aP.getRGB(b);b=bS.r;e=bS.g;bQ=bS.b}if(b>1||e>1||bQ>1){b/=255;e/=255;bQ/=255}var bP=p(b,e,bQ),E=bp(b,e,bQ),S,R,bO=bP;if(E==bP){return{h:0,s:0,b:bP,toString:aJ}}else{var bR=(bP-E);R=bR/bP;if(b==bP){S=(e-bQ)/bR}else{if(e==bP){S=2+((bQ-b)/bR)}else{S=4+((b-e)/bR)}}S/=6;S<0&&S++;S>1&&S--}return{h:S,s:R,b:bO,toString:aJ}};aP.rgb2hsl=function(e,E,bP){if(E==null&&aP.is(e,"object")&&"r" in e&&"g" in e&&"b" in e){bP=e.b;E=e.g;e=e.r}if(E==null&&aP.is(e,am)){var bT=aP.getRGB(e);e=bT.r;E=bT.g;bP=bT.b}if(e>1||E>1||bP>1){e/=255;E/=255;bP/=255}var bO=p(e,E,bP),R=bp(e,E,bP),S,bS,b=(bO+R)/2,bR;if(R==bO){bR={h:0,s:0,l:b}}else{var bQ=bO-R;bS=b<0.5?bQ/(bO+R):bQ/(2-bO-R);if(e==bO){S=(E-bP)/bQ}else{if(E==bO){S=2+(bP-e)/bQ}else{S=4+(e-E)/bQ}}S/=6;S<0&&S++;S>1&&S--;bR={h:S,s:bS,l:b}}bR.toString=V;return bR};aP._path2string=function(){return this.join(",")[bz](bh,"$1")};function aH(R,e,b){function E(){var S=Array[bL].slice.call(arguments,0),bP=S[a3]("\u25ba"),bO=E.cache=E.cache||{},bQ=E.count=E.count||[];if(bO[an](bP)){return b?b(bO[bP]):bO[bP]}bQ[z]>=1000&&delete bO[bQ.shift()];bQ[n](bP);bO[bP]=R[bI](e,S);return b?b(bO[bP]):bO[bP]}return E}aP.getRGB=aH(function(b){if(!b||!!((b=bJ(b)).indexOf("-")+1)){return{r:-1,g:-1,b:-1,hex:"none",error:1}}if(b=="none"){return{r:-1,g:-1,b:-1,hex:"none"}}!(q[an](b.toLowerCase().substring(0,2))||b.charAt()=="#")&&(b=bg(b));var S,e,E,bP,R,bR,bQ,bO=b.match(N);if(bO){if(bO[2]){bP=aa(bO[2].substring(5),16);E=aa(bO[2].substring(3,5),16);e=aa(bO[2].substring(1,3),16)}if(bO[3]){bP=aa((bR=bO[3].charAt(3))+bR,16);E=aa((bR=bO[3].charAt(2))+bR,16);e=aa((bR=bO[3].charAt(1))+bR,16)}if(bO[4]){bQ=bO[4][P](bk);e=aq(bQ[0]);bQ[0].slice(-1)=="%"&&(e*=2.55);E=aq(bQ[1]);bQ[1].slice(-1)=="%"&&(E*=2.55);bP=aq(bQ[2]);bQ[2].slice(-1)=="%"&&(bP*=2.55);bO[1].toLowerCase().slice(0,4)=="rgba"&&(R=aq(bQ[3]));bQ[3]&&bQ[3].slice(-1)=="%"&&(R/=100)}if(bO[5]){bQ=bO[5][P](bk);e=aq(bQ[0]);bQ[0].slice(-1)=="%"&&(e*=2.55);E=aq(bQ[1]);bQ[1].slice(-1)=="%"&&(E*=2.55);bP=aq(bQ[2]);bQ[2].slice(-1)=="%"&&(bP*=2.55);(bQ[0].slice(-3)=="deg"||bQ[0].slice(-1)=="\xb0")&&(e/=360);bO[1].toLowerCase().slice(0,4)=="hsba"&&(R=aq(bQ[3]));bQ[3]&&bQ[3].slice(-1)=="%"&&(R/=100);return aP.hsb2rgb(e,E,bP,R)}if(bO[6]){bQ=bO[6][P](bk);e=aq(bQ[0]);bQ[0].slice(-1)=="%"&&(e*=2.55);E=aq(bQ[1]);bQ[1].slice(-1)=="%"&&(E*=2.55);bP=aq(bQ[2]);bQ[2].slice(-1)=="%"&&(bP*=2.55);(bQ[0].slice(-3)=="deg"||bQ[0].slice(-1)=="\xb0")&&(e/=360);bO[1].toLowerCase().slice(0,4)=="hsla"&&(R=aq(bQ[3]));bQ[3]&&bQ[3].slice(-1)=="%"&&(R/=100);return aP.hsl2rgb(e,E,bP,R)}bO={r:e,g:E,b:bP};bO.hex="#"+(16777216|bP|(E<<8)|(e<<16)).toString(16).slice(1);aP.is(R,"finite")&&(bO.opacity=R);return bO}return{r:-1,g:-1,b:-1,hex:"none",error:1}},aP);aP.getColor=function(e){var E=this.getColor.start=this.getColor.start||{h:0,s:1,b:e||0.75},b=this.hsb2rgb(E.h,E.s,E.b);E.h+=0.075;if(E.h>1){E.h=0;E.s-=0.2;E.s<=0&&(this.getColor.start={h:0,s:1,b:E.b})}return b.hex};aP.getColor.reset=function(){delete this.start};aP.parsePathString=aH(function(b){if(!b){return null}var E={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},e=[];if(aP.is(b,be)&&aP.is(b[0],be)){e=aZ(b)}if(!e[z]){bJ(b)[bz](aY,function(S,R,bQ){var bP=[],bO=bN.call(R);bQ[bz](aN,function(bS,bR){bR&&bP[n](+bR)});if(bO=="m"&&bP[z]>2){e[n]([R][bD](bP.splice(0,2)));bO="l";R=R=="m"?"l":"L"}while(bP[z]>=E[bO]){e[n]([R][bD](bP.splice(0,E[bO])));if(!E[bO]){break}}})}e[a7]=aP._path2string;return e});aP.findDotsAtSegment=function(e,b,b3,b1,bP,S,bR,bQ,bX){var bV=1-bX,bU=bs(bV,3)*e+bs(bV,2)*3*bX*b3+bV*3*bX*bX*bP+bs(bX,3)*bR,bS=bs(bV,3)*b+bs(bV,2)*3*bX*b1+bV*3*bX*bX*S+bs(bX,3)*bQ,bZ=e+2*bX*(b3-e)+bX*bX*(bP-2*b3+e),bY=b+2*bX*(b1-b)+bX*bX*(S-2*b1+b),b2=b3+2*bX*(bP-b3)+bX*bX*(bR-2*bP+b3),b0=b1+2*bX*(S-b1)+bX*bX*(bQ-2*S+b1),bW=(1-bX)*e+bX*b3,bT=(1-bX)*b+bX*b1,R=(1-bX)*bP+bX*bR,E=(1-bX)*S+bX*bQ,bO=(90-aw.atan((bZ-b2)/(bY-b0))*180/aT);(bZ>b2||bY<b0)&&(bO+=180);return{x:bU,y:bS,m:{x:bZ,y:bY},n:{x:b2,y:b0},start:{x:bW,y:bT},end:{x:R,y:E},alpha:bO}};var ap=aH(function(bT){if(!bT){return{x:0,y:0,width:0,height:0}}bT=ac(bT);var bQ=0,bP=0,R=[],e=[],E;for(var S=0,bS=bT[z];S<bS;S++){E=bT[S];if(E[0]=="M"){bQ=E[1];bP=E[2];R[n](bQ);e[n](bP)}else{var bO=bd(bQ,bP,E[1],E[2],E[3],E[4],E[5],E[6]);R=R[bD](bO.min.x,bO.max.x);e=e[bD](bO.min.y,bO.max.y);bQ=E[5];bP=E[6]}}var b=bp[bI](0,R),bR=bp[bI](0,e);return{x:b,y:bR,width:p[bI](0,R)-b,height:p[bI](0,e)-bR}}),aZ=function(bO){var E=[];if(!aP.is(bO,be)||!aP.is(bO&&bO[0],be)){bO=aP.parsePathString(bO)}for(var e=0,R=bO[z];e<R;e++){E[e]=[];for(var b=0,S=bO[e][z];b<S;b++){E[e][b]=bO[e][b]}}E[a7]=aP._path2string;return E},aB=aH(function(R){if(!aP.is(R,be)||!aP.is(R&&R[0],be)){R=aP.parsePathString(R)}var bS=[],bU=0,bT=0,bX=0,bW=0,E=0;if(R[0][0]=="M"){bU=R[0][1];bT=R[0][2];bX=bU;bW=bT;E++;bS[n](["M",bU,bT])}for(var bP=E,bY=R[z];bP<bY;bP++){var b=bS[bP]=[],bV=R[bP];if(bV[0]!=bN.call(bV[0])){b[0]=bN.call(bV[0]);switch(b[0]){case"a":b[1]=bV[1];b[2]=bV[2];b[3]=bV[3];b[4]=bV[4];b[5]=bV[5];b[6]=+(bV[6]-bU).toFixed(3);b[7]=+(bV[7]-bT).toFixed(3);break;case"v":b[1]=+(bV[1]-bT).toFixed(3);break;case"m":bX=bV[1];bW=bV[2];default:for(var bO=1,bQ=bV[z];bO<bQ;bO++){b[bO]=+(bV[bO]-((bO%2)?bU:bT)).toFixed(3)}}}else{b=bS[bP]=[];if(bV[0]=="m"){bX=bV[1]+bU;bW=bV[2]+bT}for(var S=0,e=bV[z];S<e;S++){bS[bP][S]=bV[S]}}var bR=bS[bP][z];switch(bS[bP][0]){case"z":bU=bX;bT=bW;break;case"h":bU+=+bS[bP][bR-1];break;case"v":bT+=+bS[bP][bR-1];break;default:bU+=+bS[bP][bR-2];bT+=+bS[bP][bR-1]}}bS[a7]=aP._path2string;return bS},0,aZ),G=aH(function(R){if(!aP.is(R,be)||!aP.is(R&&R[0],be)){R=aP.parsePathString(R)}var bR=[],bT=0,bS=0,bW=0,bV=0,E=0;if(R[0][0]=="M"){bT=+R[0][1];bS=+R[0][2];bW=bT;bV=bS;E++;bR[0]=["M",bT,bS]}for(var bP=E,bX=R[z];bP<bX;bP++){var b=bR[bP]=[],bU=R[bP];if(bU[0]!=bv.call(bU[0])){b[0]=bv.call(bU[0]);switch(b[0]){case"A":b[1]=bU[1];b[2]=bU[2];b[3]=bU[3];b[4]=bU[4];b[5]=bU[5];b[6]=+(bU[6]+bT);b[7]=+(bU[7]+bS);break;case"V":b[1]=+bU[1]+bS;break;case"H":b[1]=+bU[1]+bT;break;case"M":bW=+bU[1]+bT;bV=+bU[2]+bS;default:for(var bO=1,bQ=bU[z];bO<bQ;bO++){b[bO]=+bU[bO]+((bO%2)?bT:bS)}}}else{for(var S=0,e=bU[z];S<e;S++){bR[bP][S]=bU[S]}}switch(b[0]){case"Z":bT=bW;bS=bV;break;case"H":bT=b[1];break;case"V":bS=b[1];break;case"M":bW=bR[bP][bR[bP][z]-2];bV=bR[bP][bR[bP][z]-1];default:bT=bR[bP][bR[bP][z]-2];bS=bR[bP][bR[bP][z]-1]}}bR[a7]=aP._path2string;return bR},null,aZ),bK=function(e,R,b,E){return[e,R,b,E,b,E]},bq=function(e,R,bP,S,b,E){var bO=1/3,bQ=2/3;return[bO*e+bQ*bP,bO*R+bQ*S,bO*b+bQ*bP,bO*E+bQ*S,b,E]},ag=function(bW,cr,b5,b3,bX,bR,R,bV,cq,bY){var b2=aT*120/180,b=aT/180*(+bX||0),b9=[],b6,cn=aH(function(ct,cw,cs){var cv=ct*aw.cos(cs)-cw*aw.sin(cs),cu=ct*aw.sin(cs)+cw*aw.cos(cs);return{x:cv,y:cu}});if(!bY){b6=cn(bW,cr,-b);bW=b6.x;cr=b6.y;b6=cn(bV,cq,-b);bV=b6.x;cq=b6.y;var e=aw.cos(aT/180*bX),bT=aw.sin(aT/180*bX),cb=(bW-bV)/2,ca=(cr-cq)/2;var cl=(cb*cb)/(b5*b5)+(ca*ca)/(b3*b3);if(cl>1){cl=aw.sqrt(cl);b5=cl*b5;b3=cl*b3}var E=b5*b5,ce=b3*b3,cg=(bR==R?-1:1)*aw.sqrt(ay((E*ce-E*ca*ca-ce*cb*cb)/(E*ca*ca+ce*cb*cb))),b0=cg*b5*ca/b3+(bW+bV)/2,bZ=cg*-b3*cb/b5+(cr+cq)/2,bQ=aw.asin(((cr-bZ)/b3).toFixed(9)),bP=aw.asin(((cq-bZ)/b3).toFixed(9));bQ=bW<b0?aT-bQ:bQ;bP=bV<b0?aT-bP:bP;bQ<0&&(bQ=aT*2+bQ);bP<0&&(bP=aT*2+bP);if(R&&bQ>bP){bQ=bQ-aT*2}if(!R&&bP>bQ){bP=bP-aT*2}}else{bQ=bY[0];bP=bY[1];b0=bY[2];bZ=bY[3]}var bU=bP-bQ;if(ay(bU)>b2){var b1=bP,b4=bV,bS=cq;bP=bQ+b2*(R&&bP>bQ?1:-1);bV=b0+b5*aw.cos(bP);cq=bZ+b3*aw.sin(bP);b9=ag(bV,cq,b5,b3,bX,0,R,b4,bS,[bP,b1,b0,bZ])}bU=bP-bQ;var bO=aw.cos(bQ),cp=aw.sin(bQ),S=aw.cos(bP),co=aw.sin(bP),cc=aw.tan(bU/4),cf=4/3*b5*cc,cd=4/3*b3*cc,cm=[bW,cr],ck=[bW+cf*cp,cr-cd*bO],cj=[bV+cf*co,cq-cd*S],ch=[bV,cq];ck[0]=2*cm[0]-ck[0];ck[1]=2*cm[1]-ck[1];if(bY){return[ck,cj,ch][bD](b9)}else{b9=[ck,cj,ch][bD](b9)[a3]()[P](",");var b7=[];for(var ci=0,b8=b9[z];ci<b8;ci++){b7[ci]=ci%2?cn(b9[ci-1],b9[ci],b).y:cn(b9[ci],b9[ci+1],b).x}return b7}},aj=function(e,b,R,E,bR,bQ,bP,bO,bS){var S=1-bS;return{x:bs(S,3)*e+bs(S,2)*3*bS*R+S*3*bS*bS*bR+bs(bS,3)*bP,y:bs(S,3)*b+bs(S,2)*3*bS*E+S*3*bS*bS*bQ+bs(bS,3)*bO}},bd=aH(function(R,e,bO,S,bZ,bY,bV,bS){var bX=(bZ-2*bO+R)-(bV-2*bZ+bO),bU=2*(bO-R)-2*(bZ-bO),bR=R-bO,bQ=(-bU+aw.sqrt(bU*bU-4*bX*bR))/2/bX,bP=(-bU-aw.sqrt(bU*bU-4*bX*bR))/2/bX,bT=[e,bS],bW=[R,bV],E;ay(bQ)>"1e12"&&(bQ=0.5);ay(bP)>"1e12"&&(bP=0.5);if(bQ>0&&bQ<1){E=aj(R,e,bO,S,bZ,bY,bV,bS,bQ);bW[n](E.x);bT[n](E.y)}if(bP>0&&bP<1){E=aj(R,e,bO,S,bZ,bY,bV,bS,bP);bW[n](E.x);bT[n](E.y)}bX=(bY-2*S+e)-(bS-2*bY+S);bU=2*(S-e)-2*(bY-S);bR=e-S;bQ=(-bU+aw.sqrt(bU*bU-4*bX*bR))/2/bX;bP=(-bU-aw.sqrt(bU*bU-4*bX*bR))/2/bX;ay(bQ)>"1e12"&&(bQ=0.5);ay(bP)>"1e12"&&(bP=0.5);if(bQ>0&&bQ<1){E=aj(R,e,bO,S,bZ,bY,bV,bS,bQ);bW[n](E.x);bT[n](E.y)}if(bP>0&&bP<1){E=aj(R,e,bO,S,bZ,bY,bV,bS,bP);bW[n](E.x);bT[n](E.y)}return{min:{x:bp[bI](0,bW),y:bp[bI](0,bT)},max:{x:p[bI](0,bW),y:p[bI](0,bT)}}}),ac=aH(function(bX,bS){var R=G(bX),bT=bS&&G(bS),bU={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},b={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},bO=function(bZ,b0){var bY,b1;if(!bZ){return["C",b0.x,b0.y,b0.x,b0.y,b0.x,b0.y]}!(bZ[0] in {T:1,Q:1})&&(b0.qx=b0.qy=null);switch(bZ[0]){case"M":b0.X=bZ[1];b0.Y=bZ[2];break;case"A":bZ=["C"][bD](ag[bI](0,[b0.x,b0.y][bD](bZ.slice(1))));break;case"S":bY=b0.x+(b0.x-(b0.bx||b0.x));b1=b0.y+(b0.y-(b0.by||b0.y));bZ=["C",bY,b1][bD](bZ.slice(1));break;case"T":b0.qx=b0.x+(b0.x-(b0.qx||b0.x));b0.qy=b0.y+(b0.y-(b0.qy||b0.y));bZ=["C"][bD](bq(b0.x,b0.y,b0.qx,b0.qy,bZ[1],bZ[2]));break;case"Q":b0.qx=bZ[1];b0.qy=bZ[2];bZ=["C"][bD](bq(b0.x,b0.y,bZ[1],bZ[2],bZ[3],bZ[4]));break;case"L":bZ=["C"][bD](bK(b0.x,b0.y,bZ[1],bZ[2]));break;case"H":bZ=["C"][bD](bK(b0.x,b0.y,bZ[1],b0.y));break;case"V":bZ=["C"][bD](bK(b0.x,b0.y,b0.x,bZ[1]));break;case"Z":bZ=["C"][bD](bK(b0.x,b0.y,b0.X,b0.Y));break}return bZ},e=function(bY,bZ){if(bY[bZ][z]>7){bY[bZ].shift();var b0=bY[bZ];while(b0[z]){bY.splice(bZ++,0,["C"][bD](b0.splice(0,6)))}bY.splice(bZ,1);bV=p(R[z],bT&&bT[z]||0)}},E=function(b2,b1,bZ,bY,b0){if(b2&&b1&&b2[b0][0]=="M"&&b1[b0][0]!="M"){b1.splice(b0,0,["M",bY.x,bY.y]);bZ.bx=0;bZ.by=0;bZ.x=b2[b0][1];bZ.y=b2[b0][2];bV=p(R[z],bT&&bT[z]||0)}};for(var bQ=0,bV=p(R[z],bT&&bT[z]||0);bQ<bV;bQ++){R[bQ]=bO(R[bQ],bU);e(R,bQ);bT&&(bT[bQ]=bO(bT[bQ],b));bT&&e(bT,bQ);E(R,bT,bU,b,bQ);E(bT,R,b,bU,bQ);var bP=R[bQ],bW=bT&&bT[bQ],S=bP[z],bR=bT&&bW[z];bU.x=bP[S-2];bU.y=bP[S-1];bU.bx=aq(bP[S-4])||bU.x;bU.by=aq(bP[S-3])||bU.y;b.bx=bT&&(aq(bW[bR-4])||b.x);b.by=bT&&(aq(bW[bR-3])||b.y);b.x=bT&&bW[bR-2];b.y=bT&&bW[bR-1]}return bT?[R,bT]:R},null,aZ),D=aH(function(bR){var bQ=[];for(var S=0,bS=bR[z];S<bS;S++){var b={},bP=bR[S].match(/^([^:]*):?([\d\.]*)/);b.color=aP.getRGB(bP[1]);if(b.color.error){return null}b.color=b.color.hex;bP[2]&&(b.offset=bP[2]+"%");bQ[n](b)}for(S=1,bS=bQ[z]-1;S<bS;S++){if(!bQ[S].offset){var e=aq(bQ[S-1].offset||0),E=0;for(var R=S+1;R<bS;R++){if(bQ[R].offset){E=bQ[R].offset;break}}if(!E){E=100;R=bS}E=aq(E);var bO=(E-e)/(R-S+1);for(;S<R;S++){e+=bO;bQ[S].offset=e+"%"}}}return bQ}),aQ=function(b,S,E,R){var e;if(aP.is(b,am)||aP.is(b,"object")){e=aP.is(b,am)?ah.getElementById(b):b;if(e.tagName){if(S==null){return{container:e,width:e.style.pixelWidth||e.offsetWidth,height:e.style.pixelHeight||e.offsetHeight}}else{return{container:e,width:S,height:E}}}}else{return{container:1,x:b,y:S,width:E,height:R}}},bl=function(b,E){var e=this;for(var R in E){if(E[an](R)&&!(R in b)){switch(typeof E[R]){case"function":(function(S){b[R]=b===e?S:function(){return S[bI](e,arguments)}})(E[R]);break;case"object":b[R]=b[R]||{};bl.call(this,b[R],E[R]);break;default:b[R]=E[R];break}}}},aL=function(b,e){b==e.top&&(e.top=b.prev);b==e.bottom&&(e.bottom=b.next);b.next&&(b.next.prev=b.prev);b.prev&&(b.prev.next=b.next)},at=function(b,e){if(e.top===b){return}aL(b,e);b.next=null;b.prev=e.top;e.top.next=b;e.top=b},u=function(b,e){if(e.bottom===b){return}aL(b,e);b.next=e.bottom;b.prev=null;e.bottom.prev=b;e.bottom=b},Q=function(e,b,E){aL(e,E);b==E.top&&(E.top=e);b.next&&(b.next.prev=e);e.next=b.next;e.prev=b;b.next=e},aS=function(e,b,E){aL(e,E);b==E.bottom&&(E.bottom=e);b.prev&&(b.prev.next=e);e.prev=b.prev;b.prev=e;e.next=b},H=function(b){return function(){throw new Error("Rapha\xebl: you are calling to method \u201c"+b+"\u201d of removed object")}};aP.pathToRelative=aB;if(aP.svg){a6.svgns="http://www.w3.org/2000/svg";a6.xlink="http://www.w3.org/1999/xlink";ak=function(b){return +b+(~~b===b)*0.5};var bo=function(E,b){if(b){for(var e in b){if(b[an](e)){E[L](e,bJ(b[e]))}}}else{E=ah.createElementNS(a6.svgns,E);E.style.webkitTapHighlightColor="rgba(0,0,0,0)";return E}};aP[a7]=function(){return"Your browser supports SVG.\nYou are running Rapha\xebl "+this.version};var F=function(b,R){var e=bo("path");R.canvas&&R.canvas[br](e);var E=new a1(e,R);E.type="path";av(E,{fill:"none",stroke:"#000",path:b});return E};var g=function(S,bY,b){var bV="linear",bR=0.5,bP=0.5,b0=S.style;bY=bJ(bY)[bz](aV,function(b2,e,b3){bV="radial";if(e&&b3){bR=aq(e);bP=aq(b3);var b1=((bP>0.5)*2-1);bs(bR-0.5,2)+bs(bP-0.5,2)>0.25&&(bP=aw.sqrt(0.25-bs(bR-0.5,2))*b1+0.5)&&bP!=0.5&&(bP=bP.toFixed(5)-0.00001*b1)}return aW});bY=bY[P](/\s*\-\s*/);if(bV=="linear"){var bQ=bY.shift();bQ=-aq(bQ);if(isNaN(bQ)){return null}var bO=[0,0,aw.cos(bQ*aT/180),aw.sin(bQ*aT/180)],bX=1/(p(ay(bO[2]),ay(bO[3]))||1);bO[2]*=bX;bO[3]*=bX;if(bO[2]<0){bO[0]=-bO[2];bO[2]=0}if(bO[3]<0){bO[1]=-bO[3];bO[3]=0}}var bU=D(bY);if(!bU){return null}var E=S.getAttribute(bb);E=E.match(/^url\(#(.*)\)$/);try{E&&b.defs.removeChild(ah.getElementById(E[1]))}catch(bT){SC.Logger.warn("scui-sai exception removing element "+E[1])}var R=bo(bV+"Gradient");R.id=k();bo(R,bV=="radial"?{fx:bR,fy:bP}:{x1:bO[0],y1:bO[1],x2:bO[2],y2:bO[3]});b.defs[br](R);for(var bS=0,bZ=bU[z];bS<bZ;bS++){var bW=bo("stop");bo(bW,{offset:bU[bS].offset?bU[bS].offset:!bS?"0%":"100%","stop-color":bU[bS].color||"#fff"});R[br](bW)}bo(S,{fill:"url(#"+R.id+")",opacity:1,"fill-opacity":1});b0.fill=aW;b0.opacity=1;b0.fillOpacity=1;return 1};var ai=function(e){var b=e.getBBox();bo(e.pattern,{patternTransform:aP.format("translate({0},{1})",b.x,b.y)})};var av=function(bW,b5){var bZ={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},b1=bW.node,bX=bW.attrs,bT=bW.rotate(),bP=function(cc,cb){cb=bZ[bN.call(cb)];if(cb){var b9=cc.attrs["stroke-width"]||"1",b7={round:b9,square:b9,butt:0}[cc.attrs["stroke-linecap"]||b5["stroke-linecap"]]||0,ca=[];var b8=cb[z];while(b8--){ca[b8]=cb[b8]*b9+((b8%2)?1:-1)*b7}bo(b1,{"stroke-dasharray":ca[a3](",")})}};b5[an]("rotation")&&(bT=b5.rotation);var bS=bJ(bT)[P](a);if(!(bS.length-1)){bS=null}else{bS[1]=+bS[1];bS[2]=+bS[2]}aq(bT)&&bW.rotate(0,true);for(var b0 in b5){if(b5[an](b0)){if(!v[an](b0)){continue}var bY=b5[b0];bX[b0]=bY;switch(b0){case"blur":bW.blur(bY);break;case"rotation":bW.rotate(bY,true);break;case"href":case"title":case"target":var b3=b1.parentNode;if(bN.call(b3.tagName)!="a"){var S=bo("a");b3.insertBefore(S,b1);S[br](b1);b3=S}if(b0=="target"&&bY=="blank"){b3.setAttributeNS(bW.paper.xlink,"show","new")}else{b3.setAttributeNS(bW.paper.xlink,b0,bY)}break;case"cursor":b1.style.cursor=bY;break;case"clip-rect":var e=bJ(bY)[P](a);if(e[z]==4){bW.clip&&bW.clip.parentNode.parentNode.removeChild(bW.clip.parentNode);var E=bo("clipPath"),b2=bo("rect");E.id=k();bo(b2,{x:e[0],y:e[1],width:e[2],height:e[3]});E[br](b2);bW.paper.defs[br](E);bo(b1,{"clip-path":"url(#"+E.id+")"});bW.clip=b2}if(!bY){var b4=ah.getElementById(b1.getAttribute("clip-path")[bz](/(^url\(#|\)$)/g,aW));b4&&b4.parentNode.removeChild(b4);bo(b1,{"clip-path":aW});delete bW.clip}break;case"path":if(bW.type=="path"){bo(b1,{d:bY?bX.path=G(bY):"M0,0"})}break;case"width":b1[L](b0,bY);if(bX.fx){b0="x";bY=bX.x}else{break}case"x":if(bX.fx){bY=-bX.x-(bX.width||0)}case"rx":if(b0=="rx"&&bW.type=="rect"){break}case"cx":bS&&(b0=="x"||b0=="cx")&&(bS[1]+=bY-bX[b0]);b1[L](b0,bY);bW.pattern&&ai(bW);break;case"height":b1[L](b0,bY);if(bX.fy){b0="y";bY=bX.y}else{break}case"y":if(bX.fy){bY=-bX.y-(bX.height||0)}case"ry":if(b0=="ry"&&bW.type=="rect"){break}case"cy":bS&&(b0=="y"||b0=="cy")&&(bS[2]+=bY-bX[b0]);b1[L](b0,bY);bW.pattern&&ai(bW);break;case"r":if(bW.type=="rect"){bo(b1,{rx:bY,ry:bY})}else{b1[L](b0,bY)}break;case"src":if(bW.type=="image"){b1.setAttributeNS(bW.paper.xlink,"href",bY)}break;case"stroke-width":b1.style.strokeWidth=bY;b1[L](b0,bY);if(bX["stroke-dasharray"]){bP(bW,bX["stroke-dasharray"])}break;case"stroke-dasharray":bP(bW,bY);break;case"translation":var bQ=bJ(bY)[P](a);bQ[0]=+bQ[0]||0;bQ[1]=+bQ[1]||0;if(bS){bS[1]+=bQ[0];bS[2]+=bQ[1]}I.call(bW,bQ[0],bQ[1]);break;case"scale":bQ=bJ(bY)[P](a);bW.scale(+bQ[0]||1,+bQ[1]||+bQ[0]||1,isNaN(aq(bQ[2]))?null:+bQ[2],isNaN(aq(bQ[3]))?null:+bQ[3]);break;case bb:var bO=bJ(bY).match(j);if(bO){E=bo("pattern");var bV=bo("image");E.id=k();bo(E,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1});bo(bV,{x:0,y:0});bV.setAttributeNS(bW.paper.xlink,"href",bO[1]);E[br](bV);var b6=ah.createElement("img");b6.style.cssText="position:absolute;left:-9999em;top-9999em";b6.onload=function(){bo(E,{width:this.offsetWidth,height:this.offsetHeight});bo(bV,{width:this.offsetWidth,height:this.offsetHeight});ah.body.removeChild(this);bW.paper.safari()};ah.body[br](b6);b6.src=bO[1];bW.paper.defs[br](E);b1.style.fill="url(#"+E.id+")";bo(b1,{fill:"url(#"+E.id+")"});bW.pattern=E;bW.pattern&&ai(bW);break}var R=aP.getRGB(bY);if(!R.error){delete b5.gradient;delete bX.gradient;!aP.is(bX.opacity,"undefined")&&aP.is(b5.opacity,"undefined")&&bo(b1,{opacity:bX.opacity});!aP.is(bX["fill-opacity"],"undefined")&&aP.is(b5["fill-opacity"],"undefined")&&bo(b1,{"fill-opacity":bX["fill-opacity"]})}else{if((({circle:1,ellipse:1})[an](bW.type)||bJ(bY).charAt()!="r")&&g(b1,bY,bW.paper)){bX.gradient=bY;bX.fill="none";break}}R[an]("opacity")&&bo(b1,{"fill-opacity":R.opacity>1?R.opacity/100:R.opacity});case"stroke":R=aP.getRGB(bY);b1[L](b0,R.hex);b0=="stroke"&&R[an]("opacity")&&bo(b1,{"stroke-opacity":R.opacity>1?R.opacity/100:R.opacity});break;case"gradient":(({circle:1,ellipse:1})[an](bW.type)||bJ(bY).charAt()!="r")&&g(b1,bY,bW.paper);break;case"opacity":if(bX.gradient&&!bX[an]("stroke-opacity")){bo(b1,{"stroke-opacity":bY>1?bY/100:bY})}case"fill-opacity":if(bX.gradient){var b=ah.getElementById(b1.getAttribute(bb)[bz](/^url\(#|\)$/g,aW));if(b){var bR=b.getElementsByTagName("stop");bR[bR[z]-1][L]("stop-opacity",bY)}break}default:b0=="font-size"&&(bY=aa(bY,10)+"px");var bU=b0[bz](/(\-.)/g,function(b7){return bv.call(b7.substring(1))});b1.style[bU]=bY;b1[L](b0,bY);break}}}Y(bW,b5);if(bS){bW.rotate(bS.join(aO))}else{aq(bT)&&bW.rotate(bT,true)}};var t=1.2,Y=function(b,R){if(b.type!="text"||!(R[an]("text")||R[an]("font")||R[an]("font-size")||R[an]("x")||R[an]("y"))){return}var bR=b.attrs,e=b.node,bT=e.firstChild?aa(ah.defaultView.getComputedStyle(e.firstChild,aW).getPropertyValue("font-size"),10):10;if(R[an]("text")){bR.text=R.text;while(e.firstChild){e.removeChild(e.firstChild)}var E=bJ(R.text)[P]("\n");for(var S=0,bS=E[z];S<bS;S++){if(E[S]){var bP=bo("tspan");S&&bo(bP,{dy:bT*t,x:bR.x});bP[br](ah.createTextNode(E[S]));e[br](bP)}}}else{E=e.getElementsByTagName("tspan");for(S=0,bS=E[z];S<bS;S++){S&&bo(E[S],{dy:bT*t,x:bR.x})}}bo(e,{y:bR.y});var bO=b.getBBox(),bQ=bR.y-(bO.y+bO.height/2);bQ&&aP.is(bQ,"finite")&&bo(e,{y:bR.y+bQ})},a1=function(e,b){var R=0,E=0;this[0]=e;this.id=aP._oid++;this.node=e;e.raphael=this;this.paper=b;this.attrs=this.attrs||{};this.transformations=[];this._={tx:0,ty:0,rt:{deg:0,cx:0,cy:0},sx:1,sy:1};!b.bottom&&(b.bottom=this);this.prev=b.top;b.top&&(b.top.next=this);b.top=this;this.next=null};var bj=a1[bL];a1[bL].rotate=function(e,b,R){if(this.removed){return this}if(e==null){if(this._.rt.cx){return[this._.rt.deg,this._.rt.cx,this._.rt.cy][a3](aO)}return this._.rt.deg}var E=this.getBBox();e=bJ(e)[P](a);if(e[z]-1){b=aq(e[1]);R=aq(e[2])}e=aq(e[0]);if(b!=null&&b!==false){this._.rt.deg=e}else{this._.rt.deg+=e}(R==null)&&(b=null);this._.rt.cx=b;this._.rt.cy=R;b=b==null?E.x+E.width/2:b;R=R==null?E.y+E.height/2:R;if(this._.rt.deg){this.transformations[0]=aP.format("rotate({0} {1} {2})",this._.rt.deg,b,R);this.clip&&bo(this.clip,{transform:aP.format("rotate({0} {1} {2})",-this._.rt.deg,b,R)})}else{this.transformations[0]=aW;this.clip&&bo(this.clip,{transform:aW})}bo(this.node,{transform:this.transformations[a3](aO)});return this};a1[bL].hide=function(){!this.removed&&(this.node.style.display="none");return this};a1[bL].show=function(){!this.removed&&(this.node.style.display="");return this};a1[bL].remove=function(){if(this.removed){return}aL(this,this.paper);this.node.parentNode.removeChild(this.node);for(var b in this){delete this[b]}this.removed=true};a1[bL].getBBox=function(){if(this.removed){return this}if(this.type=="path"){return ap(this.attrs.path)}if(this.node.style.display=="none"){this.show();var E=true}var bP={};try{bP=this.node.getBBox()}catch(S){}finally{bP=bP||{}}if(this.type=="text"){bP={x:bP.x,y:Infinity,width:0,height:0};for(var b=0,R=this.node.getNumberOfChars();b<R;b++){var bO=this.node.getExtentOfChar(b);(bO.y<bP.y)&&(bP.y=bO.y);(bO.y+bO.height-bP.y>bP.height)&&(bP.height=bO.y+bO.height-bP.y);(bO.x+bO.width-bP.x>bP.width)&&(bP.width=bO.x+bO.width-bP.x)}}E&&this.hide();return bP};a1[bL].attr=function(b,bR){if(this.removed){return this}if(b==null){var bQ={};for(var S in this.attrs){if(this.attrs[an](S)){bQ[S]=this.attrs[S]}}this._.rt.deg&&(bQ.rotation=this.rotate());(this._.sx!=1||this._.sy!=1)&&(bQ.scale=this.scale());bQ.gradient&&bQ.fill=="none"&&(bQ.fill=bQ.gradient)&&delete bQ.gradient;return bQ}if(bR==null&&aP.is(b,am)){if(b=="translation"){return I.call(this)}if(b=="rotation"){return this.rotate()}if(b=="scale"){return this.scale()}if(b==bb&&this.attrs.fill=="none"&&this.attrs.gradient){return this.attrs.gradient}return this.attrs[b]}if(bR==null&&aP.is(b,be)){var bT={};for(var R=0,bO=b.length;R<bO;R++){bT[b[R]]=this.attr(b[R])}return bT}if(bR!=null){var e={};e[b]=bR}else{if(b!=null&&aP.is(b,"object")){e=b}}for(var bS in this.paper.customAttributes){if(this.paper.customAttributes[an](bS)&&e[an](bS)&&aP.is(this.paper.customAttributes[bS],"function")){var bP=this.paper.customAttributes[bS].apply(this,[][bD](e[bS]));this.attrs[bS]=e[bS];for(var E in bP){if(bP[an](E)){e[E]=bP[E]}}}}av(this,e);return this};a1[bL].toFront=function(){if(this.removed){return this}this.node.parentNode[br](this.node);var b=this.paper;b.top!=this&&at(this,b);return this};a1[bL].toBack=function(){if(this.removed){return this}if(this.node.parentNode.firstChild!=this.node){this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild);u(this,this.paper);var b=this.paper}return this};a1[bL].insertAfter=function(b){if(this.removed){return this}var e=b.node||b[b.length-1].node;if(e.nextSibling){e.parentNode.insertBefore(this.node,e.nextSibling)}else{e.parentNode[br](this.node)}Q(this,b,this.paper);return this};a1[bL].insertBefore=function(b){if(this.removed){return this}var e=b.node||b[0].node;e.parentNode.insertBefore(this.node,e);aS(this,b,this.paper);return this};a1[bL].blur=function(e){var b=this;if(+e!==0){var E=bo("filter"),R=bo("feGaussianBlur");b.attrs.blur=e;E.id=k();bo(R,{stdDeviation:+e||1.5});E.appendChild(R);b.paper.defs.appendChild(E);b._blur=E;bo(b.node,{filter:"url(#"+E.id+")"})}else{if(b._blur){b._blur.parentNode.removeChild(b._blur);delete b._blur;delete b.attrs.blur}b.node.removeAttribute("filter")}};var al=function(e,b,bO,S){var R=bo("circle");e.canvas&&e.canvas[br](R);var E=new a1(R,e);E.attrs={cx:b,cy:bO,r:S,fill:"none",stroke:"#000"};E.type="circle";bo(R,E.attrs);return E},bi=function(E,b,bQ,e,bO,bP){var S=bo("rect");E.canvas&&E.canvas[br](S);var R=new a1(S,E);R.attrs={x:b,y:bQ,width:e,height:bO,r:bP||0,rx:bP||0,ry:bP||0,fill:"none",stroke:"#000"};R.type="rect";bo(S,R.attrs);return R},aG=function(e,b,bP,bO,S){var R=bo("ellipse");e.canvas&&e.canvas[br](R);var E=new a1(R,e);E.attrs={cx:b,cy:bP,rx:bO,ry:S,fill:"none",stroke:"#000"};E.type="ellipse";bo(R,E.attrs);return E},C=function(E,bP,b,bQ,e,bO){var S=bo("image");bo(S,{x:b,y:bQ,width:e,height:bO,preserveAspectRatio:"none"});S.setAttributeNS(E.xlink,"href",bP);E.canvas&&E.canvas[br](S);var R=new a1(S,E);R.attrs={x:b,y:bQ,width:e,height:bO,src:bP};R.type="image";return R},ar=function(e,b,bO,S){var R=bo("text");bo(R,{x:b,y:bO,"text-anchor":"middle"});e.canvas&&e.canvas[br](R);var E=new a1(R,e);E.attrs={x:b,y:bO,"text-anchor":"middle",text:S,font:v.font,stroke:"none",fill:"#000"};E.type="text";av(E,E.attrs);return E},bH=function(e,b){this.width=e||this.width;this.height=b||this.height;this.canvas[L]("width",this.width);this.canvas[L]("height",this.height);return this},M=function(){var R=aQ[bI](0,arguments),E=R&&R.container,e=R.x,bP=R.y,S=R.width,b=R.height;if(!E){throw new Error("SVG container not found.")}var bO=bo("svg");e=e||0;bP=bP||0;S=S||512;b=b||342;bo(bO,{xmlns:"http://www.w3.org/2000/svg",version:1.1,width:S,height:b});if(E==1){bO.style.cssText="position:absolute;left:"+e+"px;top:"+bP+"px";ah.body[br](bO)}else{if(E.firstChild){E.insertBefore(bO,E.firstChild)}else{E[br](bO)}}E=new bG;E.width=S;E.height=b;E.canvas=bO;bl.call(E,E,aP.fn);E.clear();return E};a6.clear=function(){var b=this.canvas;while(b.firstChild){b.removeChild(b.firstChild)}this.bottom=this.top=null;(this.desc=bo("desc"))[br](ah.createTextNode("Created with Rapha\xebl"));b[br](this.desc);b[br](this.defs=bo("defs"))};a6.remove=function(){this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var b in this){this[b]=H(b)}}}if(aP.vml){var W={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},aU=/([clmz]),?([^clmz]*)/gi,bE=/ progid:\S+Blur\([^\)]+\)/g,bM=/-?[^,\s-]+/g,a4=1000+aO+1000,B=10,A={path:1,rect:1},bn=function(bT){var bQ=/[ahqstv]/ig,E=G;bJ(bT).match(bQ)&&(E=ac);bQ=/[clmz]/g;if(E==G&&!bJ(bT).match(bQ)){var bP=bJ(bT)[bz](aU,function(bX,bZ,bV){var bY=[],bU=bN.call(bZ)=="m",bW=W[bZ];bV[bz](bM,function(b0){if(bU&&bY[z]==2){bW+=bY+W[bZ=="m"?"l":"L"];bY=[]}bY[n](ak(b0*B))});return bW+bY});return bP}var bR=E(bT),e,b;bP=[];for(var S=0,bS=bR[z];S<bS;S++){e=bR[S];b=bN.call(bR[S][0]);b=="z"&&(b="x");for(var R=1,bO=e[z];R<bO;R++){b+=ak(e[R]*B)+(R!=bO-1?",":aW)}bP[n](b)}return bP[a3](aO)};aP[a7]=function(){return"Your browser doesn\u2019t support SVG. Falling down to VML.\nYou are running Rapha\xebl "+this.version};F=function(E,e){var bO=aF("group");bO.style.cssText="position:absolute;left:0;top:0;width:"+e.width+"px;height:"+e.height+"px";bO.coordsize=e.coordsize;bO.coordorigin=e.coordorigin;var S=aF("shape"),R=S.style;R.width=e.width+"px";R.height=e.height+"px";S.coordsize=a4;S.coordorigin=e.coordorigin;bO[br](S);var bP=new a1(S,bO,e),b={fill:"none",stroke:"#000"};E&&(b.path=E);bP.type="path";bP.path=[];bP.Path=aW;av(bP,b);e.canvas[br](bO);return bP};av=function(bS,bZ){bS.attrs=bS.attrs||{};var bW=bS.node,b0=bS.attrs,bP=bW.style,R,bY=(bZ.x!=b0.x||bZ.y!=b0.y||bZ.width!=b0.width||bZ.height!=b0.height||bZ.r!=b0.r)&&bS.type=="rect",b4=bS;for(var bQ in bZ){if(bZ[an](bQ)){b0[bQ]=bZ[bQ]}}if(bY){b0.path=aA(b0.x,b0.y,b0.width,b0.height,b0.r);bS.X=b0.x;bS.Y=b0.y;bS.W=b0.width;bS.H=b0.height}bZ.href&&(bW.href=bZ.href);bZ.title&&(bW.title=bZ.title);bZ.target&&(bW.target=bZ.target);bZ.cursor&&(bP.cursor=bZ.cursor);"blur" in bZ&&bS.blur(bZ.blur);if(bZ.path&&bS.type=="path"||bY){bW.path=bn(b0.path)}if(bZ.rotation!=null){bS.rotate(bZ.rotation,true)}if(bZ.translation){R=bJ(bZ.translation)[P](a);I.call(bS,R[0],R[1]);if(bS._.rt.cx!=null){bS._.rt.cx+=+R[0];bS._.rt.cy+=+R[1];bS.setBox(bS.attrs,R[0],R[1])}}if(bZ.scale){R=bJ(bZ.scale)[P](a);bS.scale(+R[0]||1,+R[1]||+R[0]||1,+R[2]||null,+R[3]||null)}if("clip-rect" in bZ){var b=bJ(bZ["clip-rect"])[P](a);if(b[z]==4){b[2]=+b[2]+(+b[0]);b[3]=+b[3]+(+b[1]);var bR=bW.clipRect||ah.createElement("div"),b3=bR.style,bO=bW.parentNode;b3.clip=aP.format("rect({1}px {2}px {3}px {0}px)",b);if(!bW.clipRect){b3.position="absolute";b3.top=0;b3.left=0;b3.width=bS.paper.width+"px";b3.height=bS.paper.height+"px";bO.parentNode.insertBefore(bR,bO);bR[br](bO);bW.clipRect=bR}}if(!bZ["clip-rect"]){bW.clipRect&&(bW.clipRect.style.clip=aW)}}if(bS.type=="image"&&bZ.src){bW.src=bZ.src}if(bS.type=="image"&&bZ.opacity){bW.filterOpacity=bc+".Alpha(opacity="+(bZ.opacity*100)+")";bP.filter=(bW.filterMatrix||aW)+(bW.filterOpacity||aW)}bZ.font&&(bP.font=bZ.font);bZ["font-family"]&&(bP.fontFamily='"'+bZ["font-family"][P](",")[0][bz](/^['"]+|['"]+$/g,aW)+'"');bZ["font-size"]&&(bP.fontSize=bZ["font-size"]);bZ["font-weight"]&&(bP.fontWeight=bZ["font-weight"]);bZ["font-style"]&&(bP.fontStyle=bZ["font-style"]);if(bZ.opacity!=null||bZ["stroke-width"]!=null||bZ.fill!=null||bZ.stroke!=null||bZ["stroke-width"]!=null||bZ["stroke-opacity"]!=null||bZ["fill-opacity"]!=null||bZ["stroke-dasharray"]!=null||bZ["stroke-miterlimit"]!=null||bZ["stroke-linejoin"]!=null||bZ["stroke-linecap"]!=null){bW=bS.shape||bW;var bX=(bW.getElementsByTagName(bb)&&bW.getElementsByTagName(bb)[0]),b1=false;!bX&&(b1=bX=aF(bb));if("fill-opacity" in bZ||"opacity" in bZ){var e=((+b0["fill-opacity"]+1||2)-1)*((+b0.opacity+1||2)-1)*((+aP.getRGB(bZ.fill).o+1||2)-1);e=bp(p(e,0),1);bX.opacity=e}bZ.fill&&(bX.on=true);if(bX.on==null||bZ.fill=="none"){bX.on=false}if(bX.on&&bZ.fill){var E=bZ.fill.match(j);if(E){bX.src=E[1];bX.type="tile"}else{bX.color=aP.getRGB(bZ.fill).hex;bX.src=aW;bX.type="solid";if(aP.getRGB(bZ.fill).error&&(b4.type in {circle:1,ellipse:1}||bJ(bZ.fill).charAt()!="r")&&g(b4,bZ.fill)){b0.fill="none";b0.gradient=bZ.fill}}}b1&&bW[br](bX);var S=(bW.getElementsByTagName("stroke")&&bW.getElementsByTagName("stroke")[0]),b2=false;!S&&(b2=S=aF("stroke"));if((bZ.stroke&&bZ.stroke!="none")||bZ["stroke-width"]||bZ["stroke-opacity"]!=null||bZ["stroke-dasharray"]||bZ["stroke-miterlimit"]||bZ["stroke-linejoin"]||bZ["stroke-linecap"]){S.on=true}(bZ.stroke=="none"||S.on==null||bZ.stroke==0||bZ["stroke-width"]==0)&&(S.on=false);var bV=aP.getRGB(bZ.stroke);S.on&&bZ.stroke&&(S.color=bV.hex);e=((+b0["stroke-opacity"]+1||2)-1)*((+b0.opacity+1||2)-1)*((+bV.o+1||2)-1);var bT=(aq(bZ["stroke-width"])||1)*0.75;e=bp(p(e,0),1);bZ["stroke-width"]==null&&(bT=b0["stroke-width"]);bZ["stroke-width"]&&(S.weight=bT);bT&&bT<1&&(e*=bT)&&(S.weight=1);S.opacity=e;bZ["stroke-linejoin"]&&(S.joinstyle=bZ["stroke-linejoin"]||"miter");S.miterlimit=bZ["stroke-miterlimit"]||8;bZ["stroke-linecap"]&&(S.endcap=bZ["stroke-linecap"]=="butt"?"flat":bZ["stroke-linecap"]=="square"?"square":"round");if(bZ["stroke-dasharray"]){var bU={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};S.dashstyle=bU[an](bZ["stroke-dasharray"])?bU[bZ["stroke-dasharray"]]:aW}b2&&bW[br](S)}if(b4.type=="text"){bP=b4.paper.span.style;b0.font&&(bP.font=b0.font);b0["font-family"]&&(bP.fontFamily=b0["font-family"]);b0["font-size"]&&(bP.fontSize=b0["font-size"]);b0["font-weight"]&&(bP.fontWeight=b0["font-weight"]);b0["font-style"]&&(bP.fontStyle=b0["font-style"]);b4.node.string&&(b4.paper.span.innerHTML=bJ(b4.node.string)[bz](/</g,"&#60;")[bz](/&/g,"&#38;")[bz](/\n/g,"<br>"));b4.W=b0.w=b4.paper.span.offsetWidth;b4.H=b0.h=b4.paper.span.offsetHeight;b4.X=b0.x;b4.Y=b0.y+ak(b4.H/2);switch(b0["text-anchor"]){case"start":b4.node.style["v-text-align"]="left";b4.bbx=ak(b4.W/2);break;case"end":b4.node.style["v-text-align"]="right";b4.bbx=-ak(b4.W/2);break;default:b4.node.style["v-text-align"]="center";break}}};g=function(b,bP){b.attrs=b.attrs||{};var bQ=b.attrs,bS,S="linear",bO=".5 .5";b.attrs.gradient=bP;bP=bJ(bP)[bz](aV,function(bV,bW,bU){S="radial";if(bW&&bU){bW=aq(bW);bU=aq(bU);bs(bW-0.5,2)+bs(bU-0.5,2)>0.25&&(bU=aw.sqrt(0.25-bs(bW-0.5,2))*((bU>0.5)*2-1)+0.5);bO=bW+aO+bU}return aW});bP=bP[P](/\s*\-\s*/);if(S=="linear"){var e=bP.shift();e=-aq(e);if(isNaN(e)){return null}}var R=D(bP);if(!R){return null}b=b.shape||b.node;bS=b.getElementsByTagName(bb)[0]||aF(bb);!bS.parentNode&&b.appendChild(bS);if(R[z]){bS.on=true;bS.method="none";bS.color=R[0].color;bS.color2=R[R[z]-1].color;var bT=[];for(var E=0,bR=R[z];E<bR;E++){R[E].offset&&bT[n](R[E].offset+aO+R[E].color)}bS.colors&&(bS.colors.value=bT[z]?bT[a3]():"0% "+bS.color);if(S=="radial"){bS.type="gradientradial";bS.focus="100%";bS.focussize=bO;bS.focusposition=bO}else{bS.type="gradient";bS.angle=(270-e)%360}}return 1};a1=function(S,bP,b){var bO=0,E=0,e=0,R=1;this[0]=S;this.id=aP._oid++;this.node=S;S.raphael=this;this.X=0;this.Y=0;this.attrs={};this.Group=bP;this.paper=b;this._={tx:0,ty:0,rt:{deg:0},sx:1,sy:1};!b.bottom&&(b.bottom=this);this.prev=b.top;b.top&&(b.top.next=this);b.top=this;this.next=null};bj=a1[bL];bj.rotate=function(e,b,E){if(this.removed){return this}if(e==null){if(this._.rt.cx){return[this._.rt.deg,this._.rt.cx,this._.rt.cy][a3](aO)}return this._.rt.deg}e=bJ(e)[P](a);if(e[z]-1){b=aq(e[1]);E=aq(e[2])}e=aq(e[0]);if(b!=null){this._.rt.deg=e}else{this._.rt.deg+=e}E==null&&(b=null);this._.rt.cx=b;this._.rt.cy=E;this.setBox(this.attrs,b,E);this.Group.style.rotation=this._.rt.deg;return this};bj.setBox=function(R,S,E){if(this.removed){return this}var b=this.Group.style,bO=(this.shape&&this.shape.style)||this.node.style;R=R||{};for(var bP in R){if(R[an](bP)){this.attrs[bP]=R[bP]}}S=S||this._.rt.cx;E=E||this._.rt.cy;var bS=this.attrs,bV,bU,bW,bR;switch(this.type){case"circle":bV=bS.cx-bS.r;bU=bS.cy-bS.r;bW=bR=bS.r*2;break;case"ellipse":bV=bS.cx-bS.rx;bU=bS.cy-bS.ry;bW=bS.rx*2;bR=bS.ry*2;break;case"image":bV=+bS.x;bU=+bS.y;bW=bS.width||0;bR=bS.height||0;break;case"text":this.textpath.v=["m",ak(bS.x),", ",ak(bS.y-2),"l",ak(bS.x)+1,", ",ak(bS.y-2)][a3](aW);bV=bS.x-ak(this.W/2);bU=bS.y-this.H/2;bW=this.W;bR=this.H;break;case"rect":case"path":if(!this.attrs.path){bV=0;bU=0;bW=this.paper.width;bR=this.paper.height}else{var bQ=ap(this.attrs.path);bV=bQ.x;bU=bQ.y;bW=bQ.width;bR=bQ.height}break;default:bV=0;bU=0;bW=this.paper.width;bR=this.paper.height;break}S=(S==null)?bV+bW/2:S;E=(E==null)?bU+bR/2:E;var e=S-this.paper.width/2,bT=E-this.paper.height/2,bX;b.left!=(bX=e+"px")&&(b.left=bX);b.top!=(bX=bT+"px")&&(b.top=bX);this.X=A[an](this.type)?-e:bV;this.Y=A[an](this.type)?-bT:bU;this.W=bW;this.H=bR;if(A[an](this.type)){bO.left!=(bX=-e*B+"px")&&(bO.left=bX);bO.top!=(bX=-bT*B+"px")&&(bO.top=bX)}else{if(this.type=="text"){bO.left!=(bX=-e+"px")&&(bO.left=bX);bO.top!=(bX=-bT+"px")&&(bO.top=bX)}else{b.width!=(bX=this.paper.width+"px")&&(b.width=bX);b.height!=(bX=this.paper.height+"px")&&(b.height=bX);bO.left!=(bX=bV-e+"px")&&(bO.left=bX);bO.top!=(bX=bU-bT+"px")&&(bO.top=bX);bO.width!=(bX=bW+"px")&&(bO.width=bX);bO.height!=(bX=bR+"px")&&(bO.height=bX)}}};bj.hide=function(){!this.removed&&(this.Group.style.display="none");return this};bj.show=function(){!this.removed&&(this.Group.style.display="block");return this};bj.getBBox=function(){if(this.removed){return this}if(A[an](this.type)){return ap(this.attrs.path)}return{x:this.X+(this.bbx||0),y:this.Y,width:this.W,height:this.H}};bj.remove=function(){if(this.removed){return}aL(this,this.paper);this.node.parentNode.removeChild(this.node);this.Group.parentNode.removeChild(this.Group);this.shape&&this.shape.parentNode.removeChild(this.shape);for(var b in this){delete this[b]}this.removed=true};bj.attr=function(b,bP){if(this.removed){return this}if(b==null){var bO={};for(var R in this.attrs){if(this.attrs[an](R)){bO[R]=this.attrs[R]}}this._.rt.deg&&(bO.rotation=this.rotate());(this._.sx!=1||this._.sy!=1)&&(bO.scale=this.scale());bO.gradient&&bO.fill=="none"&&(bO.fill=bO.gradient)&&delete bO.gradient;return bO}if(bP==null&&aP.is(b,"string")){if(b=="translation"){return I.call(this)}if(b=="rotation"){return this.rotate()}if(b=="scale"){return this.scale()}if(b==bb&&this.attrs.fill=="none"&&this.attrs.gradient){return this.attrs.gradient}return this.attrs[b]}if(this.attrs&&bP==null&&aP.is(b,be)){var bS,bR={};for(R=0,bS=b[z];R<bS;R++){bR[b[R]]=this.attr(b[R])}return bR}var e;if(bP!=null){e={};e[b]=bP}bP==null&&aP.is(b,"object")&&(e=b);if(e){for(var bQ in this.paper.customAttributes){if(this.paper.customAttributes[an](bQ)&&e[an](bQ)&&aP.is(this.paper.customAttributes[bQ],"function")){var S=this.paper.customAttributes[bQ].apply(this,[][bD](e[bQ]));this.attrs[bQ]=e[bQ];for(var E in S){if(S[an](E)){e[E]=S[E]}}}}if(e.text&&this.type=="text"){this.node.string=e.text}av(this,e);if(e.gradient&&(({circle:1,ellipse:1})[an](this.type)||bJ(e.gradient).charAt()!="r")){g(this,e.gradient)}(!A[an](this.type)||this._.rt.deg)&&this.setBox(this.attrs)}return this};bj.toFront=function(){!this.removed&&this.Group.parentNode[br](this.Group);this.paper.top!=this&&at(this,this.paper);return this};bj.toBack=function(){if(this.removed){return this}if(this.Group.parentNode.firstChild!=this.Group){this.Group.parentNode.insertBefore(this.Group,this.Group.parentNode.firstChild);u(this,this.paper)}return this};bj.insertAfter=function(b){if(this.removed){return this}if(b.constructor==ao){b=b[b.length-1]}if(b.Group.nextSibling){b.Group.parentNode.insertBefore(this.Group,b.Group.nextSibling)}else{b.Group.parentNode[br](this.Group)}Q(this,b,this.paper);return this};bj.insertBefore=function(b){if(this.removed){return this}if(b.constructor==ao){b=b[0]}b.Group.parentNode.insertBefore(this.Group,b.Group);aS(this,b,this.paper);return this};bj.blur=function(b){var e=this.node.runtimeStyle,E=e.filter;E=E.replace(bE,aW);if(+b!==0){this.attrs.blur=b;e.filter=E+aO+bc+".Blur(pixelradius="+(+b||1.5)+")";e.margin=aP.format("-{0}px 0 0 -{0}px",ak(+b||1.5))}else{e.filter=E;e.margin=0;delete this.attrs.blur}};al=function(e,b,bQ,bO){var S=aF("group"),bP=aF("oval"),E=bP.style;S.style.cssText="position:absolute;left:0;top:0;width:"+e.width+"px;height:"+e.height+"px";S.coordsize=a4;S.coordorigin=e.coordorigin;S[br](bP);var R=new a1(bP,S,e);R.type="circle";av(R,{stroke:"#000",fill:"none"});R.attrs.cx=b;R.attrs.cy=bQ;R.attrs.r=bO;R.setBox({x:b-bO,y:bQ-bO,width:bO*2,height:bO*2});e.canvas[br](S);return R};function aA(b,S,e,E,R){if(R){return aP.format("M{0},{1}l{2},0a{3},{3},0,0,1,{3},{3}l0,{5}a{3},{3},0,0,1,{4},{3}l{6},0a{3},{3},0,0,1,{4},{4}l0,{7}a{3},{3},0,0,1,{3},{4}z",b+R,S,e-R*2,R,-R,E-R*2,R*2-e,R*2-E)}else{return aP.format("M{0},{1}l{2},0,0,{3},{4},0z",b,S,e,E,-e)}}bi=function(e,bP,S,bQ,E,b){var bR=aA(bP,S,bQ,E,b),R=e.path(bR),bO=R.attrs;R.X=bO.x=bP;R.Y=bO.y=S;R.W=bO.width=bQ;R.H=bO.height=E;bO.r=b;bO.path=bR;R.type="rect";return R};aG=function(b,bR,bQ,E,e){var S=aF("group"),R=aF("oval"),bP=R.style;S.style.cssText="position:absolute;left:0;top:0;width:"+b.width+"px;height:"+b.height+"px";S.coordsize=a4;S.coordorigin=b.coordorigin;S[br](R);var bO=new a1(R,S,b);bO.type="ellipse";av(bO,{stroke:"#000"});bO.attrs.cx=bR;bO.attrs.cy=bQ;bO.attrs.rx=E;bO.attrs.ry=e;bO.setBox({x:bR-E,y:bQ-e,width:E*2,height:e*2});b.canvas[br](S);return bO};C=function(e,b,bQ,bP,bR,R){var S=aF("group"),E=aF("image");S.style.cssText="position:absolute;left:0;top:0;width:"+e.width+"px;height:"+e.height+"px";S.coordsize=a4;S.coordorigin=e.coordorigin;E.src=b;S[br](E);var bO=new a1(E,S,e);bO.type="image";bO.attrs.src=b;bO.attrs.x=bQ;bO.attrs.y=bP;bO.attrs.w=bR;bO.attrs.h=R;bO.setBox({x:bQ,y:bP,width:bR,height:R});e.canvas[br](S);return bO};ar=function(e,bR,bQ,bS){var S=aF("group"),R=aF("shape"),bP=R.style,bT=aF("path"),b=bT.style,E=aF("textpath");S.style.cssText="position:absolute;left:0;top:0;width:"+e.width+"px;height:"+e.height+"px";S.coordsize=a4;S.coordorigin=e.coordorigin;bT.v=aP.format("m{0},{1}l{2},{1}",ak(bR*10),ak(bQ*10),ak(bR*10)+1);bT.textpathok=true;bP.width=e.width;bP.height=e.height;E.string=bJ(bS);E.on=true;R[br](E);R[br](bT);S[br](R);var bO=new a1(E,S,e);bO.shape=R;bO.textpath=bT;bO.type="text";bO.attrs.text=bS;bO.attrs.x=bR;bO.attrs.y=bQ;bO.attrs.w=1;bO.attrs.h=1;av(bO,{font:v.font,stroke:"none",fill:"#000"});bO.setBox();e.canvas[br](S);return bO};bH=function(E,b){var e=this.canvas.style;E==+E&&(E+="px");b==+b&&(b+="px");e.width=E;e.height=b;e.clip="rect(0 "+E+" "+b+" 0)";return this};var aF;ah.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!ah.namespaces.rvml&&ah.namespaces.add("rvml","urn:schemas-microsoft-com:vml");aF=function(b){return ah.createElement("<rvml:"+b+' class="rvml">')}}catch(aD){aF=function(b){return ah.createElement("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}M=function(){var E=aQ[bI](0,arguments),b=E.container,bR=E.height,bS,e=E.width,bQ=E.x,bP=E.y;if(!b){throw new Error("VML container not found.")}var S=new bG,bO=S.canvas=ah.createElement("div"),R=bO.style;bQ=bQ||0;bP=bP||0;e=e||512;bR=bR||342;e==+e&&(e+="px");bR==+bR&&(bR+="px");S.width=1000;S.height=1000;S.coordsize=B*1000+aO+B*1000;S.coordorigin="0 0";S.span=ah.createElement("span");S.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";bO[br](S.span);R.cssText=aP.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",e,bR);if(b==1){ah.body[br](bO);R.left=bQ+"px";R.top=bP+"px";R.position="absolute"}else{if(b.firstChild){b.insertBefore(bO,b.firstChild)}else{b[br](bO)}}bl.call(S,S,aP.fn);return S};a6.clear=function(){this.canvas.innerHTML=aW;this.span=ah.createElement("span");this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";this.canvas[br](this.span);this.bottom=this.top=null};a6.remove=function(){this.canvas.parentNode.removeChild(this.canvas);for(var b in this){this[b]=H(b)}return true}}var ab=navigator.userAgent.match(/Version\/(.*?)\s/);if((navigator.vendor=="Apple Computer, Inc.")&&(ab&&ab[1]<4||navigator.platform.slice(0,2)=="iP")){a6.safari=function(){var b=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});aX.setTimeout(function(){b.remove()})}}else{a6.safari=function(){}}var X=function(){this.returnValue=false},bC=function(){return this.originalEvent.preventDefault()},ba=function(){this.cancelBubble=true},aK=function(){return this.originalEvent.stopPropagation()},aC=(function(){if(ah.addEventListener){return function(bO,R,E,e){var b=ad&&bx[R]?bx[R]:R;var S=function(bS){if(ad&&bx[an](R)){for(var bQ=0,bR=bS.targetTouches&&bS.targetTouches.length;bQ<bR;bQ++){if(bS.targetTouches[bQ].target==bO){var bP=bS;bS=bS.targetTouches[bQ];bS.originalEvent=bP;bS.preventDefault=bC;bS.stopPropagation=aK;break}}}return E.call(e,bS)};bO.addEventListener(b,S,false);return function(){bO.removeEventListener(b,S,false);return true}}}else{if(ah.attachEvent){return function(bO,R,E,e){var S=function(bP){bP=bP||aX.event;bP.preventDefault=bP.preventDefault||X;bP.stopPropagation=bP.stopPropagation||ba;return E.call(e,bP)};bO.attachEvent("on"+R,S);var b=function(){bO.detachEvent("on"+R,S);return true};return b}}}})(),bf=[],by=function(bO){var bQ=bO.clientX,bP=bO.clientY,bR=ah.documentElement.scrollTop||ah.body.scrollTop,bS=ah.documentElement.scrollLeft||ah.body.scrollLeft,b,E=bf.length;while(E--){b=bf[E];if(ad){var S=bO.touches.length,R;while(S--){R=bO.touches[S];if(R.identifier==b.el._drag.id){bQ=R.clientX;bP=R.clientY;(bO.originalEvent?bO.originalEvent:bO).preventDefault();break}}}else{bO.preventDefault()}bQ+=bS;bP+=bR;b.move&&b.move.call(b.move_scope||b.el,bQ-b.el._drag.x,bP-b.el._drag.y,bQ,bP,bO)}},f=function(R){aP.unmousemove(by).unmouseup(f);var E=bf.length,b;while(E--){b=bf[E];b.el._drag={};b.end&&b.end.call(b.end_scope||b.start_scope||b.move_scope||b.el,R)}bf=[]};for(var az=Z[z];az--;){(function(b){aP[b]=a1[bL][b]=function(E,e){if(aP.is(E,"function")){this.events=this.events||[];this.events.push({name:b,f:E,unbind:aC(this.shape||this.node||ah,b,E,e||this)})}return this};aP["un"+b]=a1[bL]["un"+b]=function(R){var E=this.events,e=E[z];while(e--){if(E[e].name==b&&E[e].f==R){E[e].unbind();E.splice(e,1);!E.length&&delete this.events;return this}}return this}})(Z[az])}bj.hover=function(R,b,E,e){return this.mouseover(R,E).mouseout(b,e||E)};bj.unhover=function(e,b){return this.unmouseover(e).unmouseout(b)};bj.drag=function(e,bO,S,b,E,R){this._drag={};this.mousedown(function(bQ){(bQ.originalEvent||bQ).preventDefault();var bP=ah.documentElement.scrollTop||ah.body.scrollTop,bR=ah.documentElement.scrollLeft||ah.body.scrollLeft;this._drag.x=bQ.clientX+bR;this._drag.y=bQ.clientY+bP;this._drag.id=bQ.identifier;bO&&bO.call(E||b||this,bQ.clientX+bR,bQ.clientY+bP,bQ);!bf.length&&aP.mousemove(by).mouseup(f);bf.push({el:this,move:e,end:S,move_scope:b,start_scope:E,end_scope:R})});return this};bj.undrag=function(b,R,E){var e=bf.length;while(e--){bf[e].el==this&&(bf[e].move==b&&bf[e].end==E)&&bf.splice(e++,1)}!bf.length&&aP.unmousemove(by).unmouseup(f)};a6.circle=function(b,E,e){return al(this,b||0,E||0,e||0)};a6.rect=function(b,S,e,E,R){return bi(this,b||0,S||0,e||0,E||0,R||0)};a6.ellipse=function(b,R,E,e){return aG(this,b||0,R||0,E||0,e||0)};a6.path=function(b){b&&!aP.is(b,am)&&!aP.is(b[0],be)&&(b+=aW);return F(aP.format[bI](aP,arguments),this)};a6.image=function(R,b,S,e,E){return C(this,R||"about:blank",b||0,S||0,e||0,E||0)};a6.text=function(b,E,e){return ar(this,b||0,E||0,bJ(e))};a6.set=function(b){arguments[z]>1&&(b=Array[bL].splice.call(arguments,0,arguments[z]));return new ao(b)};a6.setSize=bH;a6.top=a6.bottom=null;a6.raphael=aP;function K(){return this.x+aO+this.y}bj.resetScale=function(){if(this.removed){return this}this._.sx=1;this._.sy=1;this.attrs.scale="1 1"};bj.scale=function(b7,b6,bY,bW){if(this.removed){return this}if(b7==null&&b6==null){return{x:this._.sx,y:this._.sy,toString:K}}b6=b6||b7;!+b6&&(b6=b7);var e,b,cf,ce,ci=this.attrs;if(b7!=0){var cj=this.getBBox(),R=cj.x+cj.width/2,E=cj.y+cj.height/2,cc=ay(b7/this._.sx),cb=ay(b6/this._.sy);bY=(+bY||bY==0)?bY:R;bW=(+bW||bW==0)?bW:E;var bR=this._.sx>0,bQ=this._.sy>0,bX=~~(b7/ay(b7)),bV=~~(b6/ay(b6)),bO=cc*bX,S=cb*bV,b8=this.node.style,b5=bY+ay(R-bY)*bO*(R>bY==bR?1:-1),b4=bW+ay(E-bW)*S*(E>bW==bQ?1:-1),b1=(b7*bX>b6*bV?cb:cc);switch(this.type){case"rect":case"image":var bT=ci.width*cc,b2=ci.height*cb;this.attr({height:b2,r:ci.r*b1,width:bT,x:b5-bT/2,y:b4-b2/2});break;case"circle":case"ellipse":this.attr({rx:ci.rx*cc,ry:ci.ry*cb,r:ci.r*b1,cx:b5,cy:b4});break;case"text":this.attr({x:b5,y:b4});break;case"path":var ca=aB(ci.path),bS=true,b0=bR?bO:cc,bZ=bQ?S:cb;for(var ch=0,b3=ca[z];ch<b3;ch++){var cd=ca[ch],bU=bv.call(cd[0]);if(bU=="M"&&bS){continue}else{bS=false}if(bU=="A"){cd[ca[ch][z]-2]*=b0;cd[ca[ch][z]-1]*=bZ;cd[1]*=cc;cd[2]*=cb;cd[5]=+(bX+bV?!!+cd[5]:!+cd[5])}else{if(bU=="H"){for(var cg=1,bP=cd[z];cg<bP;cg++){cd[cg]*=b0}}else{if(bU=="V"){for(cg=1,bP=cd[z];cg<bP;cg++){cd[cg]*=bZ}}else{for(cg=1,bP=cd[z];cg<bP;cg++){cd[cg]*=(cg%2)?b0:bZ}}}}}var b9=ap(ca);e=b5-b9.x-b9.width/2;b=b4-b9.y-b9.height/2;ca[0][1]+=e;ca[0][2]+=b;this.attr({path:ca});break}if(this.type in {text:1,image:1}&&(bX!=1||bV!=1)){if(this.transformations){this.transformations[2]="scale("[bD](bX,",",bV,")");this.node[L]("transform",this.transformations[a3](aO));e=(bX==-1)?-ci.x-(bT||0):ci.x;b=(bV==-1)?-ci.y-(b2||0):ci.y;this.attr({x:e,y:b});ci.fx=bX-1;ci.fy=bV-1}else{this.node.filterMatrix=bc+".Matrix(M11="[bD](bX,", M12=0, M21=0, M22=",bV,", Dx=0, Dy=0, sizingmethod='auto expand', filtertype='bilinear')");b8.filter=(this.node.filterMatrix||aW)+(this.node.filterOpacity||aW)}}else{if(this.transformations){this.transformations[2]=aW;this.node[L]("transform",this.transformations[a3](aO));ci.fx=0;ci.fy=0}else{this.node.filterMatrix=aW;b8.filter=(this.node.filterMatrix||aW)+(this.node.filterOpacity||aW)}}ci.scale=[b7,b6,bY,bW][a3](aO);this._.sx=b7;this._.sy=b6}return this};bj.clone=function(){if(this.removed){return null}var b=this.attr();delete b.scale;delete b.translation;return this.paper[this.type]().attr(b)};var a9={},o=function(S,e,bR,bQ,bZ,bY,bX,bV,bO){var bU=0,bT=100,R=[S,e,bR,bQ,bZ,bY,bX,bV].join(),b=a9[R],bP,E;!b&&(a9[R]=b={data:[]});b.timer&&clearTimeout(b.timer);b.timer=setTimeout(function(){delete a9[R]},2000);if(bO!=null){var bW=o(S,e,bR,bQ,bZ,bY,bX,bV);bT=~~bW*10}for(var bS=0;bS<bT+1;bS++){if(b.data[bO]>bS){E=b.data[bS*bT]}else{E=aP.findDotsAtSegment(S,e,bR,bQ,bZ,bY,bX,bV,bS/bT);b.data[bS]=E}bS&&(bU+=bs(bs(bP.x-E.x,2)+bs(bP.y-E.y,2),0.5));if(bO!=null&&bU>=bO){return E}bP=E}if(bO==null){return bU}},a8=function(b,e){return function(bX,S,bO){bX=ac(bX);var bT,bS,E,bP,R="",bW={},bU,bR=0;for(var bQ=0,bV=bX.length;bQ<bV;bQ++){E=bX[bQ];if(E[0]=="M"){bT=+E[1];bS=+E[2]}else{bP=o(bT,bS,E[1],E[2],E[3],E[4],E[5],E[6]);if(bR+bP>S){if(e&&!bW.start){bU=o(bT,bS,E[1],E[2],E[3],E[4],E[5],E[6],S-bR);R+=["C",bU.start.x,bU.start.y,bU.m.x,bU.m.y,bU.x,bU.y];if(bO){return R}bW.start=R;R=["M",bU.x,bU.y+"C",bU.n.x,bU.n.y,bU.end.x,bU.end.y,E[5],E[6]][a3]();bR+=bP;bT=+E[5];bS=+E[6];continue}if(!b&&!e){bU=o(bT,bS,E[1],E[2],E[3],E[4],E[5],E[6],S-bR);return{x:bU.x,y:bU.y,alpha:bU.alpha}}}bR+=bP;bT=+E[5];bS=+E[6]}R+=E}bW.end=R;bU=b?bR:e?bW:aP.findDotsAtSegment(bT,bS,E[1],E[2],E[3],E[4],E[5],E[6],1);bU.alpha&&(bU={x:bU.x,y:bU.y,alpha:bU.alpha});return bU}};var aR=a8(1),U=a8(),af=a8(0,1);bj.getTotalLength=function(){if(this.type!="path"){return}if(this.node.getTotalLength){return this.node.getTotalLength()}return aR(this.attrs.path)};bj.getPointAtLength=function(b){if(this.type!="path"){return}return U(this.attrs.path,b)};bj.getSubpath=function(E,e){if(this.type!="path"){return}if(ay(this.getTotalLength()-e)<"1e-6"){return af(this.attrs.path,E).end}var b=af(this.attrs.path,e,1);return E?af(b,E).end:b};aP.easing_formulas={linear:function(b){return b},"<":function(b){return bs(b,3)},">":function(b){return bs(b-1,3)+1},"<>":function(b){b=b*2;if(b<1){return bs(b,3)/2}b-=2;return(bs(b,3)+2)/2},backIn:function(e){var b=1.70158;return e*e*((b+1)*e-b)},backOut:function(e){e=e-1;var b=1.70158;return e*e*((b+1)*e+b)+1},elastic:function(E){if(E==0||E==1){return E}var e=0.3,b=e/4;return bs(2,-10*E)*aw.sin((E-b)*(2*aT)/e)+1},bounce:function(R){var e=7.5625,E=2.75,b;if(R<(1/E)){b=e*R*R}else{if(R<(2/E)){R-=(1.5/E);b=e*R*R+0.75}else{if(R<(2.5/E)){R-=(2.25/E);b=e*R*R+0.9375}else{R-=(2.625/E);b=e*R*R+0.984375}}}return b}};var ae=[],bB=function(){var bQ=+new Date;for(var b1=0;b1<ae[z];b1++){var b6=ae[b1];if(b6.stop||b6.el.removed){continue}var S=bQ-b6.start,bY=b6.ms,bX=b6.easing,b2=b6.from,bV=b6.diff,E=b6.to,bU=b6.t,bP=b6.el,bW={},b;if(S<bY){var R=bX(S/bY);for(var bZ in b2){if(b2[an](bZ)){switch(au[bZ]){case"along":b=R*bY*bV[bZ];E.back&&(b=E.len-b);var b0=U(E[bZ],b);bP.translate(bV.sx-bV.x||0,bV.sy-bV.y||0);bV.x=b0.x;bV.y=b0.y;bP.translate(b0.x-bV.sx,b0.y-bV.sy);E.rot&&bP.rotate(bV.r+b0.alpha,b0.x,b0.y);break;case aM:b=+b2[bZ]+R*bY*bV[bZ];break;case"colour":b="rgb("+[T(ak(b2[bZ].r+R*bY*bV[bZ].r)),T(ak(b2[bZ].g+R*bY*bV[bZ].g)),T(ak(b2[bZ].b+R*bY*bV[bZ].b))][a3](",")+")";break;case"path":b=[];for(var b4=0,bT=b2[bZ][z];b4<bT;b4++){b[b4]=[b2[bZ][b4][0]];for(var b3=1,b5=b2[bZ][b4][z];b3<b5;b3++){b[b4][b3]=+b2[bZ][b4][b3]+R*bY*bV[bZ][b4][b3]}b[b4]=b[b4][a3](aO)}b=b[a3](aO);break;case"csv":switch(bZ){case"translation":var bS=R*bY*bV[bZ][0]-bU.x,bR=R*bY*bV[bZ][1]-bU.y;bU.x+=bS;bU.y+=bR;b=bS+aO+bR;break;case"rotation":b=+b2[bZ][0]+R*bY*bV[bZ][0];b2[bZ][1]&&(b+=","+b2[bZ][1]+","+b2[bZ][2]);break;case"scale":b=[+b2[bZ][0]+R*bY*bV[bZ][0],+b2[bZ][1]+R*bY*bV[bZ][1],(2 in E[bZ]?E[bZ][2]:aW),(3 in E[bZ]?E[bZ][3]:aW)][a3](aO);break;case"clip-rect":b=[];b4=4;while(b4--){b[b4]=+b2[bZ][b4]+R*bY*bV[bZ][b4]}break}break;default:var bO=[].concat(b2[bZ]);b=[];b4=bP.paper.customAttributes[bZ].length;while(b4--){b[b4]=+bO[b4]+R*bY*bV[bZ][b4]}break}bW[bZ]=b}}bP.attr(bW);bP._run&&bP._run.call(bP)}else{if(E.along){b0=U(E.along,E.len*!E.back);bP.translate(bV.sx-(bV.x||0)+b0.x-bV.sx,bV.sy-(bV.y||0)+b0.y-bV.sy);E.rot&&bP.rotate(bV.r+b0.alpha,b0.x,b0.y)}(bU.x||bU.y)&&bP.translate(-bU.x,-bU.y);E.scale&&(E.scale+=aW);bP.attr(E);ae.splice(b1--,1)}}aP.svg&&bP&&bP.paper&&bP.paper.safari();ae[z]&&setTimeout(bB)},bF=function(b,E,bO,S,R){var e=bO-S;E.timeouts.push(setTimeout(function(){aP.is(R,"function")&&R.call(E);E.animate(b,e,b.easing)},S))},T=function(b){return p(bp(b,255),0)},I=function(b,E){if(b==null){return{x:this._.tx,y:this._.ty,toString:K}}this._.tx+=+b;this._.ty+=+E;switch(this.type){case"circle":case"ellipse":this.attr({cx:+b+this.attrs.cx,cy:+E+this.attrs.cy});break;case"rect":case"image":case"text":this.attr({x:+b+this.attrs.x,y:+E+this.attrs.y});break;case"path":var e=aB(this.attrs.path);e[0][1]+=+b;e[0][2]+=+E;this.attr({path:e});break}return this};bj.animateWith=function(E,S,b,bP,bO){for(var e=0,R=ae.length;e<R;e++){if(ae[e].el.id==E.id){S.start=ae[e].start}}return this.animate(S,b,bP,bO)};bj.animateAlong=a2();bj.animateAlongBack=a2(1);function a2(b){return function(R,E,e,bO){var S={back:b};aP.is(e,"function")?(bO=e):(S.rot=e);R&&R.constructor==a1&&(R=R.attrs.path);R&&(S.along=R);return this.animate(S,E,bO)}}function a5(bW,R,e,bV,bU,bQ){var bR=3*R,bT=3*(bV-R)-bR,b=1-bR-bT,bP=3*e,bS=3*(bU-e)-bP,bX=1-bP-bS;function bO(bY){return((b*bY+bT)*bY+bR)*bY}function E(bY,b0){var bZ=S(bY,b0);return((bX*bZ+bS)*bZ+bP)*bZ}function S(bY,b5){var b4,b3,b1,bZ,b2,b0;for(b1=bY,b0=0;b0<8;b0++){bZ=bO(b1)-bY;if(ay(bZ)<b5){return b1}b2=(3*b*b1+2*bT)*b1+bR;if(ay(b2)<0.000001){break}b1=b1-bZ/b2}b4=0;b3=1;b1=bY;if(b1<b4){return b4}if(b1>b3){return b3}while(b4<b3){bZ=bO(b1);if(ay(bZ-bY)<b5){return b1}if(bY>bZ){b4=b1}else{b3=b1}b1=(b3-b4)/2+b4}return b1}return E(bW,1/(200*bQ))}bj.onAnimation=function(b){this._run=b||0;return this};bj.animate=function(b8,bY,bX,S){var e=this;e.timeouts=e.timeouts||[];if(aP.is(bX,"function")||!bX){S=bX||null}if(e.removed){S&&S.call(e);return e}var b2={},E={},bO=false,bT={};for(var bZ in b8){if(b8[an](bZ)){if(au[an](bZ)||e.paper.customAttributes[an](bZ)){bO=true;b2[bZ]=e.attr(bZ);(b2[bZ]==null)&&(b2[bZ]=v[bZ]);E[bZ]=b8[bZ];switch(au[bZ]){case"along":var b6=aR(b8[bZ]);var b0=U(b8[bZ],b6*!!b8.back);var bP=e.getBBox();bT[bZ]=b6/bY;bT.tx=bP.x;bT.ty=bP.y;bT.sx=b0.x;bT.sy=b0.y;E.rot=b8.rot;E.back=b8.back;E.len=b6;b8.rot&&(bT.r=aq(e.rotate())||0);break;case aM:bT[bZ]=(E[bZ]-b2[bZ])/bY;break;case"colour":b2[bZ]=aP.getRGB(b2[bZ]);var b1=aP.getRGB(E[bZ]);bT[bZ]={r:(b1.r-b2[bZ].r)/bY,g:(b1.g-b2[bZ].g)/bY,b:(b1.b-b2[bZ].b)/bY};break;case"path":var bQ=ac(b2[bZ],E[bZ]);b2[bZ]=bQ[0];var bV=bQ[1];bT[bZ]=[];for(var b5=0,bS=b2[bZ][z];b5<bS;b5++){bT[bZ][b5]=[0];for(var b4=1,b7=b2[bZ][b5][z];b4<b7;b4++){bT[bZ][b5][b4]=(bV[b5][b4]-b2[bZ][b5][b4])/bY}}break;case"csv":var b=bJ(b8[bZ])[P](a),bR=bJ(b2[bZ])[P](a);switch(bZ){case"translation":b2[bZ]=[0,0];bT[bZ]=[b[0]/bY,b[1]/bY];break;case"rotation":b2[bZ]=(bR[1]==b[1]&&bR[2]==b[2])?bR:[0,b[1],b[2]];bT[bZ]=[(b[0]-b2[bZ][0])/bY,0,0];break;case"scale":b8[bZ]=b;b2[bZ]=bJ(b2[bZ])[P](a);bT[bZ]=[(b[0]-b2[bZ][0])/bY,(b[1]-b2[bZ][1])/bY,0,0];break;case"clip-rect":b2[bZ]=bJ(b2[bZ])[P](a);bT[bZ]=[];b5=4;while(b5--){bT[bZ][b5]=(b[b5]-b2[bZ][b5])/bY}break}E[bZ]=b;break;default:b=[].concat(b8[bZ]);bR=[].concat(b2[bZ]);bT[bZ]=[];b5=e.paper.customAttributes[bZ][z];while(b5--){bT[bZ][b5]=((b[b5]||0)-(bR[b5]||0))/bY}break}}}}if(!bO){var bW=[],R;for(var b9 in b8){if(b8[an](b9)&&bm.test(b9)){bZ={value:b8[b9]};b9=="from"&&(b9=0);b9=="to"&&(b9=100);bZ.key=aa(b9,10);bW.push(bZ)}}bW.sort(bt);if(bW[0].key){bW.unshift({key:0,value:e.attrs})}for(b5=0,bS=bW[z];b5<bS;b5++){bF(bW[b5].value,e,bY/100*bW[b5].key,bY/100*(bW[b5-1]&&bW[b5-1].key||0),bW[b5-1]&&bW[b5-1].value.callback)}R=bW[bW[z]-1].value.callback;if(R){e.timeouts.push(setTimeout(function(){R.call(e)},bY))}}else{var b3=aP.easing_formulas[bX];if(!b3){b3=bJ(bX).match(c);if(b3&&b3[z]==5){var bU=b3;b3=function(ca){return a5(ca,+bU[1],+bU[2],+bU[3],+bU[4],bY)}}else{b3=function(ca){return ca}}}ae.push({start:b8.start||+new Date,ms:bY,easing:b3,from:b2,diff:bT,to:E,el:e,t:{x:0,y:0}});aP.is(S,"function")&&(e._ac=setTimeout(function(){S.call(e)},bY));ae[z]==1&&setTimeout(bB)}return this};bj.stop=function(){for(var b=0;b<ae.length;b++){ae[b].el.id==this.id&&ae.splice(b--,1)}for(b=0,ii=this.timeouts&&this.timeouts.length;b<ii;b++){clearTimeout(this.timeouts[b])}this.timeouts=[];clearTimeout(this._ac);delete this._ac;return this};bj.translate=function(b,e){return this.attr({translation:b+" "+e})};bj[a7]=function(){return"Rapha\xebl\u2019s object"};aP.ae=ae;var ao=function(b){this.items=[];this[z]=0;this.type="set";if(b){for(var e=0,E=b[z];e<E;e++){if(b[e]&&(b[e].constructor==a1||b[e].constructor==ao)){this[this.items[z]]=this.items[this.items[z]]=b[e];this[z]++}}}};ao[bL][n]=function(){var R,b;for(var e=0,E=arguments[z];e<E;e++){R=arguments[e];if(R&&(R.constructor==a1||R.constructor==ao)){b=this.items[z];this[b]=this.items[b]=R;this[z]++}}return this};ao[bL].pop=function(){delete this[this[z]--];return this.items.pop()};for(var O in bj){if(bj[an](O)){ao[bL][O]=(function(b){return function(){for(var e=0,E=this.items[z];e<E;e++){this.items[e][b][bI](this.items[e],arguments)}return this}})(O)}}ao[bL].attr=function(e,bO){if(e&&aP.is(e,be)&&aP.is(e[0],"object")){for(var b=0,S=e[z];b<S;b++){this.items[b].attr(e[b])}}else{for(var E=0,R=this.items[z];E<R;E++){this.items[E].attr(e,bO)}}return this};ao[bL].animate=function(e,b,bO,bQ){(aP.is(bO,"function")||!bO)&&(bQ=bO||null);var S=this.items[z],E=S,bR,bP=this,R;bQ&&(R=function(){!--S&&bQ.call(bP)});bO=aP.is(bO,am)?bO:R;bR=this.items[--E].animate(e,b,bO,R);while(E--){this.items[E]&&!this.items[E].removed&&this.items[E].animateWith(bR,e,b,bO,R)}return this};ao[bL].insertAfter=function(e){var b=this.items[z];while(b--){this.items[b].insertAfter(e)}return this};ao[bL].getBBox=function(){var b=[],bO=[],e=[],R=[];for(var E=this.items[z];E--;){var S=this.items[E].getBBox();b[n](S.x);bO[n](S.y);e[n](S.x+S.width);R[n](S.y+S.height)}b=bp[bI](0,b);bO=bp[bI](0,bO);return{x:b,y:bO,width:p[bI](0,e)-b,height:p[bI](0,R)-bO}};ao[bL].clone=function(E){E=new ao;for(var b=0,e=this.items[z];b<e;b++){E[n](this.items[b].clone())}return E};aP.registerFont=function(e){if(!e.face){return e}this.fonts=this.fonts||{};var R={w:e.w,face:{},glyphs:{}},E=e.face["font-family"];for(var bP in e.face){if(e.face[an](bP)){R.face[bP]=e.face[bP]}}if(this.fonts[E]){this.fonts[E][n](R)}else{this.fonts[E]=[R]}if(!e.svg){R.face["units-per-em"]=aa(e.face["units-per-em"],10);for(var S in e.glyphs){if(e.glyphs[an](S)){var bO=e.glyphs[S];R.glyphs[S]={w:bO.w,k:{},d:bO.d&&"M"+bO.d[bz](/[mlcxtrv]/g,function(bQ){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[bQ]||"M"})+"z"};if(bO.k){for(var b in bO.k){if(bO[an](b)){R.glyphs[S].k[b]=bO.k[b]}}}}}}return e};a6.getFont=function(bQ,bR,e,R){R=R||"normal";e=e||"normal";bR=+bR||{normal:400,bold:700,lighter:300,bolder:800}[bR]||400;if(!aP.fonts){return}var S=aP.fonts[bQ];if(!S){var E=new RegExp("(^|\\s)"+bQ[bz](/[^\w\d\s+!~.:_-]/g,aW)+"(\\s|$)","i");for(var b in aP.fonts){if(aP.fonts[an](b)){if(E.test(b)){S=aP.fonts[b];break}}}}var bO;if(S){for(var bP=0,bS=S[z];bP<bS;bP++){bO=S[bP];if(bO.face["font-weight"]==bR&&(bO.face["font-style"]==e||!bO.face["font-style"])&&bO.face["font-stretch"]==R){break}}}return bO};a6.print=function(S,R,b,bQ,bR,b0,e){b0=b0||"middle";e=p(bp(e||0,1),-1);var bW=this.set(),bZ=bJ(b)[P](aW),bX=0,bU=aW,b1;aP.is(bQ,b)&&(bQ=this.getFont(bQ));if(bQ){b1=(bR||16)/bQ.face["units-per-em"];var E=bQ.face.bbox.split(a),bP=+E[0],bS=+E[1]+(b0=="baseline"?E[3]-E[1]+(+bQ.face.descent):(E[3]-E[1])/2);for(var bV=0,bO=bZ[z];bV<bO;bV++){var bT=bV&&bQ.glyphs[bZ[bV-1]]||{},bY=bQ.glyphs[bZ[bV]];bX+=bV?(bT.w||bQ.w)+(bT.k&&bT.k[bZ[bV]]||0)+(bQ.w*e):0;bY&&bY.d&&bW[n](this.path(bY.d).attr({fill:"#000",stroke:"none",translation:[bX,0]}))}bW.scale(b1,b1,bP,bS).translate(S-bP,R-bS)}return bW};aP.format=function(e,E){var b=aP.is(E,be)?[0][bD](E):arguments;e&&aP.is(e,am)&&b[z]-1&&(e=e[bz](bu,function(S,R){return b[++R]==null?aW:b[R]}));return e||aW};aP.ninja=function(){w.was?(aX.Raphael=w.is):delete Raphael;return aP};aP.el=bj;aP.st=ao[bL];w.was?(aX.Raphael=aP):(Raphael=aP)})();
/*!
 * Color Picker 0.1.0 - Raphael plugin
 *
 * Copyright (c) 2010 Dmitry Baranovskiy (http://raphaeljs.com)
 * Based on Color Wheel (http://jweir.github.com/colorwheel) by John Weir (http://famedriver.com)
 * Licensed under the MIT (http://www.opensource.org/licenses/mit-license.php) license.
 */
sc_require("raphael");(function(a){a.colorpicker=function(j,p,n,o,k){return new b(j,p,n,o,k)};a.fn.colorPickerIcon=function(j,t,p){var n=f*p*2/Math.min(p/8,4);var k=f/2-f*2/n*1.5,q=["M",j,t-p,"A",p,p,0,0,1,p*Math.cos(k)+j,t-p*Math.sin(k),"L",j,t,"z"].join();for(var o=0;o<n;o++){this.path(q).attr({stroke:"none",fill:"hsb("+(n-o)*(360/n)+", 100, 100)",rotation:[90+(360/n)*o,j,t]})}return this.circle(j,t,p).attr({fill:"r#fff-#fff","fill-opacity":0,"stroke-width":Math.round(p*0.03),stroke:"#fff"})};var f=Math.PI;function g(j,k){return(j<0)*180+Math.atan(-k/-j)*180/f}var e=document,c=window,b=function(w,u,I,k,j){I=I||200;var v=3*I/200,A=I/200,C=1.6180339887,N=I/20,q=I/2,F=2*I/200,J=I+N*2+F*3,D=this,z=1,n=1,K=1,E=I-(N*4),G=j?a(j,I,J):a(w,u,I,J),o=E/6+N*2+F,p=E*2/3-F*2;A<1&&(A=1);v<1&&(v=1);G.colorPickerIcon(q,q,q-F);D.cursor=G.set();D.cursor.push(G.circle(q,q,N/2).attr({stroke:"#000",opacity:0.5,"stroke-width":v}));D.cursor.push(D.cursor[0].clone().attr({stroke:"#fff",opacity:1,"stroke-width":A}));D.disc=G.circle(q,q,q-F).attr({fill:"#000","fill-opacity":0,stroke:"none",cursor:"crosshair"});var M=D.disc.node.style;M.unselectable="on";M.MozUserSelect="none";M.WebkitUserSelect="none";var L=N*2+2;D.brect=G.rect(F+L/C/2,I+F*2,I-F*2-L/C,L-F*2).attr({stroke:"#fff",fill:"180-#fff-#000"});D.cursorb=G.set();D.cursorb.push(G.rect(I-F-L/C,I+F,~~(L/C),L,v).attr({stroke:"#000",opacity:0.5,"stroke-width":v}));D.cursorb.push(D.cursorb[0].clone().attr({stroke:"#fff",opacity:1,"stroke-width":A}));D.btop=D.brect.clone().attr({stroke:"#000",fill:"#000",opacity:0});M=D.btop.node.style;M.unselectable="on";M.MozUserSelect="none";M.WebkitUserSelect="none";D.bwidth=~~(L/C)/2;D.minx=F+D.bwidth;D.maxx=I-L/C-F+D.bwidth;D.H=D.S=D.B=1;D.padding=F;D.raphael=G;D.size2=q;D.size20=N;D.x=w;D.y=u;D.disc.drag(function(H,B,t,O){D.docOnMove(H,B,t,O)},function(t,O){var B=e.documentElement.scrollTop||e.body.scrollTop,H=e.documentElement.scrollLeft||e.body.scrollLeft;D.hsOnTheMove=true;D.setHS(t+H-D.x,O+B-D.y)},function(){D.hsOnTheMove=false});D.btop.drag(function(H,B,t,O){D.docOnMove(H,B,t,O)},function(t,H){var B=e.documentElement.scrollLeft||e.body.scrollLeft;D.bOnTheMove=true;D.setB(t+B-D.x)},function(){D.bOnTheMove=false});D.color(k||"#fff");this.onchanged&&this.onchanged(this.color())};b.prototype.setB=function(j){j<this.minx&&(j=this.minx);j>this.maxx&&(j=this.maxx);this.cursorb.attr({x:j-this.bwidth});this.B=(j-this.minx)/(this.maxx-this.minx);this.onchange&&this.onchange(this.color())};b.prototype.setHS=function(j,t){var q=j-this.size2,p=t-this.size2,k=this.size2-this.size20/2-this.padding,o=g(q,p),n=o*f/180;isNaN(o)&&(o=0);if(q*q+p*p>k*k){j=k*Math.cos(n)+this.size2;t=k*Math.sin(n)+this.size2}this.cursor.attr({cx:j,cy:t});this.H=(1-o/360)%1;this.S=Math.min((q*q+p*p)/k/k,1);this.brect.attr({fill:"180-hsl("+[this.H,this.S]+",1)-#000"});this.onchange&&this.onchange(this.color())};b.prototype.docOnMove=function(n,k,j,q){var o=e.documentElement.scrollTop||e.body.scrollTop,p=e.documentElement.scrollLeft||e.body.scrollLeft;if(this.hsOnTheMove){this.setHS(j+p-this.x,q+o-this.y)}if(this.bOnTheMove){this.setB(j+p-this.x)}};b.prototype.remove=function(){this.raphael.remove();this.color=function(){return false}};b.prototype.color=function(k){if(k){k=a.getRGB(k);var p=k.hex;k=a.rgb2hsb(k.r,k.g,k.b);q=k.h*360;this.H=k.h;this.S=k.s;this.B=k.b;this.cursorb.attr({x:this.B*(this.maxx-this.minx)+this.minx-this.bwidth});this.brect.attr({fill:"180-hsl("+[this.H,this.S]+",1)-#000"});var q=(1-this.H)*360,o=q*f/180,n=(this.size2-this.size20/2-this.padding)*this.S,j=Math.cos(o)*n+this.size2,t=Math.sin(o)*n+this.size2;this.cursor.attr({cx:j,cy:t});return this}else{return a.hsb2rgb(this.H,this.S,this.B).hex}}})(window.Raphael);sc_require("color_picker/colorwheel");(function(a){a.colorwheel=function(k,q,o,p,n){return new b(k,q,o,p,n)};var g=Math.PI;function j(k,n){return(k<0)*180+Math.atan(-n/-k)*180/g}var f=document,e=window;var c=(function(){if(f.addEventListener){return function(q,o,n,k){var p=function(t){return n.call(k,t)};q.addEventListener(o,p,false);return function(){q.removeEventListener(o,p,false);return true}}}else{if(f.attachEvent){return function(t,p,o,n){var q=function(u){return o.call(n,u||e.event)};t.attachEvent("on"+p,q);var k=function(){t.detachEvent("on"+p,q);return true};return k}}}})();var b=function(A,w,K,n,k){K=K||200;var z=3*K/200,D=K/200,E=1.6180339887,N=g*K/5,U=K/20,v=K/2,I=2*K/200,F=this;var C=1,o=1,L=1,G=K-(U*4);var J=k?a(k,K,K):a(A,w,K,K),q=G/6+U*2+I,u=G*2/3-I*2;D<1&&(D=1);z<1&&(z=1);var T=g/2-g*2/N*1.3,p=v-I,Q=v-I-U*2,M=["M",v,I,"A",p,p,0,0,1,p*Math.cos(T)+p+I,p-p*Math.sin(T)+I,"L",Q*Math.cos(T)+p+I,p-Q*Math.sin(T)+I,"A",Q,Q,0,0,0,v,I+U*2,"z"].join();for(var O=0;O<N;O++){J.path(M).attr({stroke:"none",fill:"hsb("+O*(255/N)+", 255, 200)",rotation:[(360/N)*O,v,v]})}J.path(["M",v,I,"A",p,p,0,1,1,v-1,I,"l1,0","M",v,I+U*2,"A",Q,Q,0,1,1,v-1,I+U*2,"l1,0"]).attr({"stroke-width":z,stroke:"#fff"});F.cursorhsb=J.set();var P=U*2+2;F.cursorhsb.push(J.rect(v-P/E/2,I-1,P/E,P,3*K/200).attr({stroke:"#000",opacity:0.5,"stroke-width":z}));F.cursorhsb.push(F.cursorhsb[0].clone().attr({stroke:"#fff",opacity:1,"stroke-width":D}));F.ring=J.path(["M",v,I,"A",p,p,0,1,1,v-1,I,"l1,0M",v,I+U*2,"A",Q,Q,0,1,1,v-1,I+U*2,"l1,0"]).attr({fill:"#000",opacity:0,stroke:"none"});F.main=J.rect(q,q,u,u).attr({stroke:"none",fill:"#f00",opacity:1});F.main.clone().attr({stroke:"none",fill:"0-#fff-#fff",opacity:0});F.square=J.rect(q-1,q-1,u+2,u+2).attr({r:2,stroke:"#fff","stroke-width":z,fill:"90-#000-#000",opacity:0,cursor:"crosshair"});F.cursor=J.set();F.cursor.push(J.circle(v,v,U/2).attr({stroke:"#000",opacity:0.5,"stroke-width":z}));F.cursor.push(F.cursor[0].clone().attr({stroke:"#fff",opacity:1,"stroke-width":D}));F.H=F.S=F.B=1;F.raphael=J;F.size2=v;F.wh=u;F.x=A;F.xy=q;F.y=w;F.hsbon=c(F.ring.node,"mousedown",function(t){this.hsbOnTheMove=true;this.setH(t.clientX-this.x-this.size2,t.clientY-this.y-this.size2);this.docmove=c(f,"mousemove",this.docOnMove,this);this.docup=c(f,"mouseup",this.docOnUp,this)},F);F.clron=c(F.square.node,"mousedown",function(t){this.clrOnTheMove=true;this.setSB(t.clientX-this.x,t.clientY-this.y);this.docmove=c(f,"mousemove",this.docOnMove,this);this.docup=c(f,"mouseup",this.docOnUp,this)},F);F.winunload=c(e,"unload",function(){this.hsbon();this.clron();this.docmove&&this.docmove();this.docup&&this.docup();this.winunload()},F);F.color(n||"#f00");this.onchanged&&this.onchanged(this.color())};b.prototype.setH=function(k,p){var o=j(k,p),n=o*g/180;this.cursorhsb.rotate(o+90,this.size2,this.size2);this.H=(o+90)/360;this.main.attr({fill:"hsb("+this.H+",1,1)"});this.onchange&&this.onchange(this.color())};b.prototype.setSB=function(k,n){k<this.size2-this.wh/2&&(k=this.size2-this.wh/2);k>this.size2+this.wh/2&&(k=this.size2+this.wh/2);n<this.size2-this.wh/2&&(n=this.size2-this.wh/2);n>this.size2+this.wh/2&&(n=this.size2+this.wh/2);this.cursor.attr({cx:k,cy:n});this.B=1-(n-this.xy)/this.wh;this.S=(k-this.xy)/this.wh;this.onchange&&this.onchange(this.color())};b.prototype.docOnMove=function(k){if(this.hsbOnTheMove){this.setH(k.clientX-this.x-this.size2,k.clientY-this.y-this.size2)}if(this.clrOnTheMove){this.setSB(k.clientX-this.x,k.clientY-this.y)}k.preventDefault&&k.preventDefault();k.returnValue=false;return false};b.prototype.docOnUp=function(k){this.hsbOnTheMove=this.clrOnTheMove=false;if(this.docmove){this.docmove()}delete this.docmove;if(this.docup){this.docup()}delete this.docup;this.onchanged&&this.onchanged(this.color())};b.prototype.remove=function(){this.raphael.remove();this.color=function(){return false}};b.prototype.color=function(n){if(n){n=a.getRGB(n);n=a.rgb2hsb(n.r,n.g,n.b);var o=n.h*360;this.H=n.h;this.S=n.s;this.B=n.b;this.cursorhsb.rotate(o,this.size2,this.size2);this.main.attr({fill:"hsb("+this.H+",1,1)"});var k=this.S*this.wh+this.xy,p=(1-this.B)*this.wh+this.xy;this.cursor.attr({cx:k,cy:p});return this}else{return a.hsb2rgb(this.H,this.S,this.B).hex}}})(window.Raphael);sc_require("raphael");(function(){Raphael.fn.g=Raphael.fn.g||{};Raphael.fn.g.markers={disc:"disc",o:"disc",flower:"flower",f:"flower",diamond:"diamond",d:"diamond",square:"square",s:"square",triangle:"triangle",t:"triangle",star:"star","*":"star",cross:"cross",x:"cross",plus:"plus","+":"plus",arrow:"arrow","->":"arrow"};Raphael.fn.g.shim={stroke:"none",fill:"#000","fill-opacity":0};Raphael.fn.g.txtattr={font:"12px Arial, sans-serif"};Raphael.fn.g.colors=[];var b=[0.6,0.2,0.05,0.1333,0.75,0];for(var a=0;a<10;a++){if(a<b.length){Raphael.fn.g.colors.push("hsb("+b[a]+", .75, .75)")}else{Raphael.fn.g.colors.push("hsb("+b[a-b.length]+", 1, .5)")}}Raphael.fn.g.text=function(c,f,e){return this.text(c,f,e).attr(this.g.txtattr)};Raphael.fn.g.labelise=function(c,f,e){if(c){return(c+"").replace(/(##+(?:\.#+)?)|(%%+(?:\.%+)?)/g,function(g,k,j){if(k){return(+f).toFixed(k.replace(/^#+\.?/g,"").length)}if(j){return(f*100/e).toFixed(j.replace(/^%+\.?/g,"").length)+"%"}})}else{return(+f).toFixed(0)}};Raphael.fn.g.finger=function(n,k,e,o,f,g,j){if((f&&!o)||(!f&&!e)){return j?"":this.path()}g={square:"square",sharp:"sharp",soft:"soft"}[g]||"round";var q;o=Math.round(o);e=Math.round(e);n=Math.round(n);k=Math.round(k);switch(g){case"round":if(!f){var c=Math.floor(o/2);if(e<c){c=e;q=["M",n+0.5,k+0.5-Math.floor(o/2),"l",0,0,"a",c,Math.floor(o/2),0,0,1,0,o,"l",0,0,"z"]}else{q=["M",n+0.5,k+0.5-c,"l",e-c,0,"a",c,c,0,1,1,0,o,"l",c-e,0,"z"]}}else{var c=Math.floor(e/2);if(o<c){c=o;q=["M",n-Math.floor(e/2),k,"l",0,0,"a",Math.floor(e/2),c,0,0,1,e,0,"l",0,0,"z"]}else{q=["M",n-c,k,"l",0,c-o,"a",c,c,0,1,1,e,0,"l",0,o-c,"z"]}}break;case"sharp":if(!f){var p=Math.floor(o/2);q=["M",n,k+p,"l",0,-o,Math.max(e-p,0),0,Math.min(p,e),p,-Math.min(p,e),p+(p*2<o),"z"]}else{var p=Math.floor(e/2);q=["M",n+p,k,"l",-e,0,0,-Math.max(o-p,0),p,-Math.min(p,o),p,Math.min(p,o),p,"z"]}break;case"square":if(!f){q=["M",n,k+Math.floor(o/2),"l",0,-o,e,0,0,o,"z"]}else{q=["M",n+Math.floor(e/2),k,"l",1-e,0,0,-o,e-1,0,"z"]}break;case"soft":var c;if(!f){c=Math.min(e,Math.round(o/5));q=["M",n+0.5,k+0.5-Math.floor(o/2),"l",e-c,0,"a",c,c,0,0,1,c,c,"l",0,o-c*2,"a",c,c,0,0,1,-c,c,"l",c-e,0,"z"]}else{c=Math.min(Math.round(e/5),o);q=["M",n-Math.floor(e/2),k,"l",0,c-o,"a",c,c,0,0,1,c,-c,"l",e-2*c,0,"a",c,c,0,0,1,c,c,"l",0,o-c,"z"]}}if(j){return q.join(",")}else{return this.path(q)}};Raphael.fn.g.disc=function(c,f,e){return this.circle(c,f,e)};Raphael.fn.g.line=function(c,f,e){return this.rect(c-e,f-e/5,2*e,2*e/5)};Raphael.fn.g.square=function(c,f,e){e=e*0.7;return this.rect(c-e,f-e,2*e,2*e)};Raphael.fn.g.triangle=function(c,f,e){e*=1.75;return this.path("M".concat(c,",",f,"m0-",e*0.58,"l",e*0.5,",",e*0.87,"-",e,",0z"))};Raphael.fn.g.diamond=function(c,f,e){return this.path(["M",c,f-e,"l",e,e,-e,e,-e,-e,e,-e,"z"])};Raphael.fn.g.flower=function(g,f,c,e){c=c*1.25;var p=c,o=p*0.5;e=+e<3||!e?5:e;var q=["M",g,f+o,"Q"],k;for(var j=1;j<e*2+1;j++){k=j%2?p:o;q=q.concat([+(g+k*Math.sin(j*Math.PI/e)).toFixed(3),+(f+k*Math.cos(j*Math.PI/e)).toFixed(3)])}q.push("z");return this.path(q.join(","))};Raphael.fn.g.star=function(c,n,k,e){e=e||k*0.5;var j=["M",c,n+e,"L"],g;for(var f=1;f<10;f++){g=f%2?k:e;j=j.concat([(c+g*Math.sin(f*Math.PI*0.2)).toFixed(3),(n+g*Math.cos(f*Math.PI*0.2)).toFixed(3)])}j.push("z");return this.path(j.join(","))};Raphael.fn.g.cross=function(c,f,e){e=e/2.5;return this.path("M".concat(c-e,",",f,"l",[-e,-e,e,-e,e,e,e,-e,e,e,-e,e,e,e,-e,e,-e,-e,-e,e,-e,-e,"z"]))};Raphael.fn.g.plus=function(c,f,e){e=e/2;return this.path("M".concat(c-e/2,",",f-e/2,"l",[0,-e,e,0,0,e,e,0,0,e,-e,0,0,e,-e,0,0,-e,-e,0,0,-e,"z"]))};Raphael.fn.g.arrow=function(c,f,e){return this.path("M".concat(c-e*0.7,",",f-e*0.4,"l",[e*0.6,0,0,-e*0.4,e,e*0.8,-e,e*0.8,0,-e*0.4,-e*0.6,0],"z"))};Raphael.fn.g.tag=function(c,o,n,k,g){k=k||0;g=g==null?5:g;n=n==null?"$9.99":n;var f=0.5522*g,e=this.set(),j=3;e.push(this.path().attr({fill:"#000",stroke:"none"}));e.push(this.text(c,o,n).attr(this.g.txtattr).attr({fill:"#fff"}));e.update=function(){this.rotate(0,c,o);var q=this[1].getBBox();if(q.height>=g*2){this[0].attr({path:["M",c,o+g,"a",g,g,0,1,1,0,-g*2,g,g,0,1,1,0,g*2,"m",0,-g*2-j,"a",g+j,g+j,0,1,0,0,(g+j)*2,"L",c+g+j,o+q.height/2+j,"l",q.width+2*j,0,0,-q.height-2*j,-q.width-2*j,0,"L",c,o-g-j].join(",")})}else{var p=Math.sqrt(Math.pow(g+j,2)-Math.pow(q.height/2+j,2));this[0].attr({path:["M",c,o+g,"c",-f,0,-g,f-g,-g,-g,0,-f,g-f,-g,g,-g,f,0,g,g-f,g,g,0,f,f-g,g,-g,g,"M",c+p,o-q.height/2-j,"a",g+j,g+j,0,1,0,0,q.height+2*j,"l",g+j-p+q.width+2*j,0,0,-q.height-2*j,"L",c+p,o-q.height/2-j].join(",")})}this[1].attr({x:c+g+j+q.width/2,y:o});k=(360-k)%360;this.rotate(k,c,o);k>90&&k<270&&this[1].attr({x:c-g-j-q.width/2,y:o,rotation:[180+k,c,o]});return this};e.update();return e};Raphael.fn.g.popupit=function(k,j,n,e,v){e=e==null?2:e;v=v||5;k=Math.round(k)+0.5;j=Math.round(j)+0.5;var g=n.getBBox(),o=Math.round(g.width/2),f=Math.round(g.height/2),u=[0,o+v*2,0,-o-v*2],q=[-f*2-v*3,-f-v,0,-f-v],c=["M",k-u[e],j-q[e],"l",-v,(e==2)*-v,-Math.max(o-v,0),0,"a",v,v,0,0,1,-v,-v,"l",0,-Math.max(f-v,0),(e==3)*-v,-v,(e==3)*v,-v,0,-Math.max(f-v,0),"a",v,v,0,0,1,v,-v,"l",Math.max(o-v,0),0,v,!e*-v,v,!e*v,Math.max(o-v,0),0,"a",v,v,0,0,1,v,v,"l",0,Math.max(f-v,0),(e==1)*v,v,(e==1)*-v,v,0,Math.max(f-v,0),"a",v,v,0,0,1,-v,v,"l",-Math.max(o-v,0),0,"z"].join(","),t=[{x:k,y:j+v*2+f},{x:k-v*2-o,y:j},{x:k,y:j-v*2-f},{x:k+v*2+o,y:j}][e];n.translate(t.x-o-g.x,t.y-f-g.y);return this.path(c).attr({fill:"#000",stroke:"none"}).insertBefore(n.node?n:n[0])};Raphael.fn.g.popup=function(c,n,k,e,g){e=e==null?2:e;g=g||5;k=k||"$9.99";var f=this.set(),j=3;f.push(this.path().attr({fill:"#000",stroke:"none"}));f.push(this.text(c,n,k).attr(this.g.txtattr).attr({fill:"#fff"}));f.update=function(t,q,u){t=t||c;q=q||n;var z=this[1].getBBox(),A=z.width/2,v=z.height/2,D=[0,A+g*2,0,-A-g*2],B=[-v*2-g*3,-v-g,0,-v-g],o=["M",t-D[e],q-B[e],"l",-g,(e==2)*-g,-Math.max(A-g,0),0,"a",g,g,0,0,1,-g,-g,"l",0,-Math.max(v-g,0),(e==3)*-g,-g,(e==3)*g,-g,0,-Math.max(v-g,0),"a",g,g,0,0,1,g,-g,"l",Math.max(A-g,0),0,g,!e*-g,g,!e*g,Math.max(A-g,0),0,"a",g,g,0,0,1,g,g,"l",0,Math.max(v-g,0),(e==1)*g,g,(e==1)*-g,g,0,Math.max(v-g,0),"a",g,g,0,0,1,-g,g,"l",-Math.max(A-g,0),0,"z"].join(","),C=[{x:t,y:q+g*2+v},{x:t-g*2-A,y:q},{x:t,y:q-g*2-v},{x:t+g*2+A,y:q}][e];if(u){this[0].animate({path:o},500,">");this[1].animate(C,500,">")}else{this[0].attr({path:o});this[1].attr(C)}return this};return f.update(c,n)};Raphael.fn.g.flag=function(c,k,j,g){g=g||0;j=j||"$9.99";var e=this.set(),f=3;e.push(this.path().attr({fill:"#000",stroke:"none"}));e.push(this.text(c,k,j).attr(this.g.txtattr).attr({fill:"#fff"}));e.update=function(n,q){this.rotate(0,n,q);var p=this[1].getBBox(),o=p.height/2;this[0].attr({path:["M",n,q,"l",o+f,-o-f,p.width+2*f,0,0,p.height+2*f,-p.width-2*f,0,"z"].join(",")});this[1].attr({x:n+o+f+p.width/2,y:q});g=360-g;this.rotate(g,n,q);g>90&&g<270&&this[1].attr({x:n-r-f-p.width/2,y:q,rotation:[180+g,n,q]});return this};return e.update(c,k)};Raphael.fn.g.label=function(c,g,f){var e=this.set();e.push(this.rect(c,g,10,10).attr({stroke:"none",fill:"#000"}));e.push(this.text(c,g,f).attr(this.g.txtattr).attr({fill:"#fff"}));e.update=function(){var k=this[1].getBBox(),j=Math.min(k.width+10,k.height+10)/2;this[0].attr({x:k.x-j/2,y:k.y-j/2,width:k.width+j,height:k.height+j,r:j})};e.update();return e};Raphael.fn.g.labelit=function(f){var e=f.getBBox(),c=Math.min(20,e.width+10,e.height+10)/2;return this.rect(e.x-c/2,e.y-c/2,e.width+c,e.height+c,c).attr({stroke:"none",fill:"#000"}).insertBefore(f[0])};Raphael.fn.g.drop=function(c,k,j,f,g){f=f||30;g=g||0;var e=this.set();e.push(this.path(["M",c,k,"l",f,0,"A",f*0.4,f*0.4,0,1,0,c+f*0.7,k-f*0.7,"z"]).attr({fill:"#000",stroke:"none",rotation:[22.5-g,c,k]}));g=(g+90)*Math.PI/180;e.push(this.text(c+f*Math.sin(g),k+f*Math.cos(g),j).attr(this.g.txtattr).attr({"font-size":f*12/30,fill:"#fff"}));e.drop=e[0];e.text=e[1];return e};Raphael.fn.g.blob=function(e,o,n,k,g){k=(+k+1?k:45)+90;g=g||12;var c=Math.PI/180,j=g*12/12;var f=this.set();f.push(this.path().attr({fill:"#000",stroke:"none"}));f.push(this.text(e+g*Math.sin((k)*c),o+g*Math.cos((k)*c)-j/2,n).attr(this.g.txtattr).attr({"font-size":j,fill:"#fff"}));f.update=function(z,v,D){z=z||e;v=v||o;var F=this[1].getBBox(),I=Math.max(F.width+j,g*25/12),E=Math.max(F.height+j,g*25/12),q=z+g*Math.sin((k-22.5)*c),G=v+g*Math.cos((k-22.5)*c),u=z+g*Math.sin((k+22.5)*c),H=v+g*Math.cos((k+22.5)*c),K=(u-q)/2,J=(H-G)/2,t=I/2,p=E/2,C=-Math.sqrt(Math.abs(t*t*p*p-t*t*J*J-p*p*K*K)/(t*t*J*J+p*p*K*K)),B=C*t*J/p+(u+q)/2,A=C*-p*K/t+(H+G)/2;if(D){this.animate({x:B,y:A,path:["M",e,o,"L",u,H,"A",t,p,0,1,1,q,G,"z"].join(",")},500,">")}else{this.attr({x:B,y:A,path:["M",e,o,"L",u,H,"A",t,p,0,1,1,q,G,"z"].join(",")})}return this};f.update(e,o);return f};Raphael.fn.g.colorValue=function(g,f,e,c){return"hsb("+[Math.min((1-g/f)*0.4,1),e||0.75,c||0.75]+")"};Raphael.fn.g.snapEnds=function(o,p,n){var j=o,q=p;if(j==q){return{from:j,to:q,power:0}}function u(f){return Math.abs(f-0.5)<0.25?Math.floor(f)+0.5:Math.round(f)}var k=(q-j)/n,c=Math.floor(k),g=c,e=0;if(c){while(g){e--;g=Math.floor(k*Math.pow(10,e))/Math.pow(10,e)}e++}else{while(!c){e=e||1;c=Math.floor(k*Math.pow(10,e))/Math.pow(10,e);e++}e&&e--}var q=u(p*Math.pow(10,e))/Math.pow(10,e);if(q<p){q=u((p+0.5)*Math.pow(10,e))/Math.pow(10,e)}var j=u((o-(e>0?0:0.5))*Math.pow(10,e))/Math.pow(10,e);return{from:j,to:q,power:e}};Raphael.fn.g.axis=function(z,w,p,I,k,L,n,N,o,c){c=c==null?2:c;o=o||"t";L=L||10;var H=o=="|"||o==" "?["M",z+0.5,w,"l",0,0.001]:n==1||n==3?["M",z+0.5,w,"l",0,-p]:["M",z,w+0.5,"l",p,0],B=this.g.snapEnds(I,k,L),M=B.from,D=B.to,K=B.power,J=0,E=this.set();d=(D-M)/L;var v=M,u=K>0?K:0;A=p/L;if(+n==1||+n==3){var e=w,C=(n-1?1:-1)*(c+3+!!(n-1));while(e>=w-p){o!="-"&&o!=" "&&(H=H.concat(["M",z-(o=="+"||o=="|"?c:!(n-1)*c*2),e+0.5,"l",c*2+1,0]));E.push(this.text(z+C,e,(N&&N[J++])||(Math.round(v)==v?v:+v.toFixed(u))).attr(this.g.txtattr).attr({"text-anchor":n-1?"start":"end"}));v+=d;e-=A}if(Math.round(e+A-(w-p))){o!="-"&&o!=" "&&(H=H.concat(["M",z-(o=="+"||o=="|"?c:!(n-1)*c*2),w-p+0.5,"l",c*2+1,0]));E.push(this.text(z+C,w-p,(N&&N[J])||(Math.round(v)==v?v:+v.toFixed(u))).attr(this.g.txtattr).attr({"text-anchor":n-1?"start":"end"}))}}else{var g=z,v=M,u=K>0?K:0,C=(n?-1:1)*(c+9+!n),A=p/L,F=0,G=0;while(g<=z+p){o!="-"&&o!=" "&&(H=H.concat(["M",g+0.5,w-(o=="+"?c:!!n*c*2),"l",0,c*2+1]));E.push(F=this.text(g,w+C,(N&&N[J++])||(Math.round(v)==v?v:+v.toFixed(u))).attr(this.g.txtattr));var q=F.getBBox();if(G>=q.x-5){E.pop(E.length-1).remove()}else{G=q.x+q.width}v+=d;g+=A}if(Math.round(g-A-z-p)){o!="-"&&o!=" "&&(H=H.concat(["M",z+p+0.5,w-(o=="+"?c:!!n*c*2),"l",0,c*2+1]));E.push(this.text(z+p,w+C,(N&&N[J])||(Math.round(v)==v?v:+v.toFixed(u))).attr(this.g.txtattr))}}var O=this.path(H);O.text=E;O.all=this.set([O,E]);O.remove=function(){this.text.remove();this.constructor.prototype.remove.call(this)};return O};Raphael.el.lighter=function(e){e=e||2;var c=[this.attrs.fill,this.attrs.stroke];this.fs=this.fs||[c[0],c[1]];c[0]=Raphael.rgb2hsb(Raphael.getRGB(c[0]).hex);c[1]=Raphael.rgb2hsb(Raphael.getRGB(c[1]).hex);c[0].b=Math.min(c[0].b*e,1);c[0].s=c[0].s/e;c[1].b=Math.min(c[1].b*e,1);c[1].s=c[1].s/e;this.attr({fill:"hsb("+[c[0].h,c[0].s,c[0].b]+")",stroke:"hsb("+[c[1].h,c[1].s,c[1].b]+")"})};Raphael.el.darker=function(e){e=e||2;var c=[this.attrs.fill,this.attrs.stroke];this.fs=this.fs||[c[0],c[1]];c[0]=Raphael.rgb2hsb(Raphael.getRGB(c[0]).hex);c[1]=Raphael.rgb2hsb(Raphael.getRGB(c[1]).hex);c[0].s=Math.min(c[0].s*e,1);c[0].b=c[0].b/e;c[1].s=Math.min(c[1].s*e,1);c[1].b=c[1].b/e;this.attr({fill:"hsb("+[c[0].h,c[0].s,c[0].b]+")",stroke:"hsb("+[c[1].h,c[1].s,c[1].b]+")"})};Raphael.el.original=function(){if(this.fs){this.attr({fill:this.fs[0],stroke:this.fs[1]});delete this.fs}}})();sc_require("graphing/graphael");Raphael.fn.g.barchart=function(G,E,a,e,S,A){A=A||{};var T={round:"round",sharp:"sharp",soft:"soft"}[A.type]||"square",q=parseFloat(A.gutter||"20%"),Q=this.set(),B=this.set(),f=this.set(),w=this.set(),C=Math.max.apply(Math,S),R=[],c=this,F=0,J=A.colors||this.g.colors,v=S.length;if(this.raphael.is(S[0],"array")){C=[];F=v;v=0;for(var O=S.length;O--;){B.push(this.set());C.push(Math.max.apply(Math,S[O]));v=Math.max(v,S[O].length)}if(A.stacked){for(var O=v;O--;){var o=0;for(var N=S.length;N--;){o+=+S[N][O]||0}R.push(o)}}for(var O=S.length;O--;){if(S[O].length<v){for(var N=v;N--;){S[O].push(0)}}}C=Math.max.apply(Math,A.stacked?R:C)}C=(A.to)||C;var H=a/(v*(100+q)+q)*100,b=H*q/100,k=A.vgutter==null?20:A.vgutter,z=[],n=G+b,g=(e-2*k)/C;if(!A.stretch){b=Math.round(b);H=Math.floor(H)}!A.stacked&&(H/=F||1);for(var O=0;O<v;O++){z=[];for(var N=0;N<(F||1);N++){var P=Math.round((F?S[N][O]:S[O])*g),p=E+e-k-P,L=this.g.finger(Math.round(n+H/2),p+P,H,P,true,T).attr({stroke:J[F?N:O],fill:J[F?N:O]});if(F){B[N].push(L)}else{B.push(L)}L.y=p;L.x=Math.round(n+H/2);L.w=H;L.h=P;L.value=F?S[N][O]:S[O];if(!A.stacked){n+=H}else{z.push(L)}}if(A.stacked){var M;w.push(M=this.rect(z[0].x-z[0].w/2,E,H,e).attr(this.g.shim));M.bars=this.set();var t=0;for(var I=z.length;I--;){z[I].toFront()}for(var I=0,u=z.length;I<u;I++){var L=z[I],D,P=(t+L.value)*g,K=this.g.finger(L.x,E+e-k-!!t*0.5,H,P,true,T,1);M.bars.push(L);t&&L.attr({path:K});L.h=P;L.y=E+e-k-!!t*0.5-P;f.push(D=this.rect(L.x-L.w/2,L.y,H,L.value*g).attr(this.g.shim));D.bar=L;D.value=L.value;t+=L.value}n+=H}n+=b}w.toFront();n=G+b;if(!A.stacked){for(var O=0;O<v;O++){for(var N=0;N<(F||1);N++){var D;f.push(D=this.rect(Math.round(n),E+k,H,e-k).attr(this.g.shim));D.bar=F?B[N][O]:B[O];D.value=D.bar.value;n+=H}n+=b}}Q.label=function(X,aa){X=X||[];this.labels=c.set();var ab,U=-Infinity;if(A.stacked){for(var W=0;W<v;W++){var Y=0;for(var V=0;V<(F||1);V++){Y+=F?S[V][W]:S[W];if(V==F-1){var ac=c.g.labelise(X[W],Y,C);ab=c.g.text(B[W*(F||1)+V].x,E+e-k/2,ac).insertBefore(f[W*(F||1)+V]);var Z=ab.getBBox();if(Z.x-7<U){ab.remove()}else{this.labels.push(ab);U=Z.x+Z.width}}}}}else{for(var W=0;W<v;W++){for(var V=0;V<(F||1);V++){var ac=c.g.labelise(F?X[V]&&X[V][W]:X[W],F?S[V][W]:S[W],C);ab=c.g.text(B[W*(F||1)+V].x,aa?E+e-k/2:B[W*(F||1)+V].y-10,ac).insertBefore(f[W*(F||1)+V]);var Z=ab.getBBox();if(Z.x-7<U){ab.remove()}else{this.labels.push(ab);U=Z.x+Z.width}}}}return this};Q.hover=function(U,j){w.hide();f.show();f.mouseover(U).mouseout(j);return this};Q.hoverColumn=function(U,j){f.hide();w.show();j=j||function(){};w.mouseover(U).mouseout(j);return this};Q.click=function(j){w.hide();f.show();f.click(j);return this};Q.each=function(U){if(!Raphael.is(U,"function")){return this}for(var j=f.length;j--;){U.call(f[j])}return this};Q.eachColumn=function(U){if(!Raphael.is(U,"function")){return this}for(var j=w.length;j--;){U.call(w[j])}return this};Q.clickColumn=function(j){f.hide();w.show();w.click(j);return this};Q.push(B,f,w);Q.bars=B;Q.covers=f;return Q};Raphael.fn.g.hbarchart=function(t,p,G,D,c,z){z=z||{};var f={round:"round",sharp:"sharp",soft:"soft"}[z.type]||"square",g=parseFloat(z.gutter||"20%"),B=this.set(),F=this.set(),n=this.set(),J=this.set(),R=Math.max.apply(Math,c),a=[],u=this,H=0,q=z.colors||this.g.colors,M=c.length;if(this.raphael.is(c[0],"array")){R=[];H=M;M=0;for(var L=c.length;L--;){F.push(this.set());R.push(Math.max.apply(Math,c[L]));M=Math.max(M,c[L].length)}if(z.stacked){for(var L=M;L--;){var v=0;for(var K=c.length;K--;){v+=+c[K][L]||0}a.push(v)}}for(var L=c.length;L--;){if(c[L].length<M){for(var K=M;K--;){c[L].push(0)}}}R=Math.max.apply(Math,z.stacked?a:R)}R=(z.to)||R;var O=Math.floor(D/(M*(100+g)+g)*100),o=Math.floor(O*g/100),k=[],b=p+o,e=(G-1)/R;!z.stacked&&(O/=H||1);for(var L=0;L<M;L++){k=[];for(var K=0;K<(H||1);K++){var Q=H?c[K][L]:c[L],N=this.g.finger(t,b+O/2,Math.round(Q*e),O-1,false,f).attr({stroke:q[H?K:L],fill:q[H?K:L]});if(H){F[K].push(N)}else{F.push(N)}N.x=t+Math.round(Q*e);N.y=b+O/2;N.w=Math.round(Q*e);N.h=O;N.value=+Q;if(!z.stacked){b+=O}else{k.push(N)}}if(z.stacked){var w=this.rect(t,k[0].y-k[0].h/2,G,O).attr(this.g.shim);J.push(w);w.bars=this.set();var C=0;for(var A=k.length;A--;){k[A].toFront()}for(var A=0,I=k.length;A<I;A++){var N=k[A],P,Q=Math.round((C+N.value)*e),E=this.g.finger(t,N.y,Q,O-1,false,f,1);w.bars.push(N);C&&N.attr({path:E});N.w=Q;N.x=t+Q;n.push(P=this.rect(t+C*e,N.y-N.h/2,N.value*e,O).attr(this.g.shim));P.bar=N;C+=N.value}b+=O}b+=o}J.toFront();b=p+o;if(!z.stacked){for(var L=0;L<M;L++){for(var K=0;K<H;K++){var P=this.rect(t,b,G,O).attr(this.g.shim);n.push(P);P.bar=F[K][L];b+=O}b+=o}}B.label=function(aa,Y){aa=aa||[];this.labels=u.set();for(var W=0;W<M;W++){for(var V=0;V<H;V++){var U=u.g.labelise(H?aa[V]&&aa[V][W]:aa[W],H?c[V][W]:c[W],R);var Z=Y?F[W*(H||1)+V].x-O/2+3:t+5,T=Y?"end":"start",S;this.labels.push(S=u.g.text(Z,F[W*(H||1)+V].y,U).attr({"text-anchor":T}).insertBefore(n[0]));if(S.getBBox().x<t+5){S.attr({x:t+5,"text-anchor":"start"})}else{F[W*(H||1)+V].label=S}}}return this};B.hover=function(S,j){J.hide();n.show();j=j||function(){};n.mouseover(S).mouseout(j);return this};B.hoverColumn=function(S,j){n.hide();J.show();j=j||function(){};J.mouseover(S).mouseout(j);return this};B.each=function(S){if(!Raphael.is(S,"function")){return this}for(var j=n.length;j--;){S.call(n[j])}return this};B.eachColumn=function(S){if(!Raphael.is(S,"function")){return this}for(var j=J.length;j--;){S.call(J[j])}return this};B.click=function(j){J.hide();n.show();n.click(j);return this};B.clickColumn=function(j){n.hide();J.show();J.click(j);return this};B.push(F,n,J);B.bars=F;B.covers=n;return B};sc_require("graphing/graphael");Raphael.fn.g.dotchart=function(Q,P,a,j,E,D,z,L){function Z(b){+b[0]&&(b[0]=c.g.axis(Q+w,P+w,a-2*w,H,t,L.axisxstep||Math.floor((a-2*w)/20),2,L.axisxlabels||null,L.axisxtype||"t"));+b[1]&&(b[1]=c.g.axis(Q+a-w,P+j-w,j-2*w,G,q,L.axisystep||Math.floor((j-2*w)/20),3,L.axisylabels||null,L.axisytype||"t"));+b[2]&&(b[2]=c.g.axis(Q+w,P+j-w+K,a-2*w,H,t,L.axisxstep||Math.floor((a-2*w)/20),0,L.axisxlabels||null,L.axisxtype||"t"));+b[3]&&(b[3]=c.g.axis(Q+w-K,P+j-w,j-2*w,G,q,L.axisystep||Math.floor((j-2*w)/20),1,L.axisylabels||null,L.axisytype||"t"))}L=L||{};var C=this.g.snapEnds(Math.min.apply(Math,E),Math.max.apply(Math,E),E.length-1),H=C.from,t=C.to,w=L.gutter||10,O=this.g.snapEnds(Math.min.apply(Math,D),Math.max.apply(Math,D),D.length-1),G=O.from,q=O.to,F=Math.max(E.length,D.length,z.length),B=this.g.markers[L.symbol]||"disc",M=this.set(),A=this.set(),J=L.max||100,v=Math.max.apply(Math,z),u=[],c=this,U=Math.sqrt(v/Math.PI)*2/J;for(var V=0;V<F;V++){u[V]=Math.min(Math.sqrt(z[V]/Math.PI)*2/U,J)}w=Math.max.apply(Math,u.concat(w));var I=this.set(),K=Math.max.apply(Math,u);if(L.axis){var p=(L.axis+"").split(/[,\s]+/);Z(p);var W=[],aa=[];for(var V=0,N=p.length;V<N;V++){var ab=p[V].all?p[V].all.getBBox()[["height","width"][V%2]]:0;W[V]=ab+w;aa[V]=ab}w=Math.max.apply(Math,W.concat(w));for(var V=0,N=p.length;V<N;V++){if(p[V].all){p[V].remove();p[V]=1}}Z(p);for(var V=0,N=p.length;V<N;V++){if(p[V].all){I.push(p[V].all)}}M.axis=I}var T=(a-w*2)/((t-H)||1),S=(j-w*2)/((q-G)||1);for(var V=0,N=D.length;V<N;V++){var f=this.raphael.is(B,"array")?B[V]:B,o=Q+w+(E[V]-H)*T,n=P+j-w-(D[V]-G)*S;f&&u[V]&&A.push(this.g[f](o,n,u[V]).attr({fill:L.heat?this.g.colorValue(u[V],K):Raphael.fn.g.colors[0],"fill-opacity":L.opacity?u[V]/J:1,stroke:"none"}))}var e=this.set();for(var V=0,N=D.length;V<N;V++){var o=Q+w+(E[V]-H)*T,n=P+j-w-(D[V]-G)*S;e.push(this.circle(o,n,K).attr(this.g.shim));L.href&&L.href[V]&&e[V].attr({href:L.href[V]});e[V].r=+u[V].toFixed(3);e[V].x=+o.toFixed(3);e[V].y=+n.toFixed(3);e[V].X=E[V];e[V].Y=D[V];e[V].value=z[V]||0;e[V].dot=A[V]}M.covers=e;M.series=A;M.push(A,I,e);M.hover=function(g,b){e.mouseover(g).mouseout(b);return this};M.click=function(b){e.click(b);return this};M.each=function(g){if(!Raphael.is(g,"function")){return this}for(var b=e.length;b--;){g.call(e[b])}return this};M.href=function(k){var g;for(var b=e.length;b--;){g=e[b];if(g.X==k.x&&g.Y==k.y&&g.value==k.value){g.attr({href:k.href})}}};return M};sc_require("graphing/graphael");Raphael.fn.g.linechart=function(P,O,a,c,A,z,I){function H(ad,ah){var Y=ad.length/ah,ae=0,X=Y,ag=0,af=[];while(ae<ad.length){X--;if(X<0){ag+=ad[ae]*(1+X);af.push(ag/Y);ag=ad[ae++]*-X;X+=Y}else{ag+=ad[ae++]}}return af}I=I||{};if(!this.raphael.is(A[0],"array")){A=[A]}if(!this.raphael.is(z[0],"array")){z=[z]}var U=Array.prototype.concat.apply([],A),S=Array.prototype.concat.apply([],z),u=this.g.snapEnds(Math.min.apply(Math,U),Math.max.apply(Math,U),A[0].length-1),D=u.from,n=u.to,p=I.gutter||10,V=(a-p*2)/(n-D),M=this.g.snapEnds(Math.min.apply(Math,S),Math.max.apply(Math,S),z[0].length-1),C=M.from,k=M.to,T=(c-p*2)/(k-C),B=Math.max(A[0].length,z[0].length),t=I.symbol||"",Q=I.colors||Raphael.fn.g.colors,N=this,v=null,o=null,ab=this.set(),R=[];for(var aa=0,K=z.length;aa<K;aa++){B=Math.max(B,z[aa].length)}var ac=this.set();for(var aa=0,K=z.length;aa<K;aa++){if(I.shade){ac.push(this.path().attr({stroke:"none",fill:Q[aa],opacity:I.nostroke?1:0.3}))}if(z[aa].length>a-2*p){z[aa]=H(z[aa],a-2*p);B=a-2*p}if(A[aa]&&A[aa].length>a-2*p){A[aa]=H(A[aa],a-2*p)}}var E=this.set();if(I.axis){var g=(I.axis+"").split(/[,\s]+/);+g[0]&&E.push(this.g.axis(P+p,O+p,a-2*p,D,n,I.axisxstep||Math.floor((a-2*p)/20),2));+g[1]&&E.push(this.g.axis(P+a-p,O+c-p,c-2*p,C,k,I.axisystep||Math.floor((c-2*p)/20),3));+g[2]&&E.push(this.g.axis(P+p,O+c-p,a-2*p,D,n,I.axisxstep||Math.floor((a-2*p)/20),0));+g[3]&&E.push(this.g.axis(P+p,O+c-p,c-2*p,C,k,I.axisystep||Math.floor((c-2*p)/20),1))}var L=this.set(),W=this.set(),q;for(var aa=0,K=z.length;aa<K;aa++){if(!I.nostroke){L.push(q=this.path().attr({stroke:Q[aa],"stroke-width":I.width||2,"stroke-linejoin":"round","stroke-linecap":"round","stroke-dasharray":I.dash||""}))}var b=this.raphael.is(t,"array")?t[aa]:t,F=this.set();R=[];for(var Z=0,w=z[aa].length;Z<w;Z++){var f=P+p+((A[aa]||A[0])[Z]-D)*V;var e=O+c-p-(z[aa][Z]-C)*T;(Raphael.is(b,"array")?b[Z]:b)&&F.push(this.g[Raphael.fn.g.markers[this.raphael.is(b,"array")?b[Z]:b]](f,e,(I.width||2)*3).attr({fill:Q[aa],stroke:"none"}));R=R.concat([Z?"L":"M",f,e])}W.push(F);if(I.shade){ac[aa].attr({path:R.concat(["L",f,O+c-p,"L",P+p+((A[aa]||A[0])[0]-D)*V,O+c-p,"z"]).join(",")})}!I.nostroke&&q.attr({path:R.join(",")})}function J(am){var aj=[];for(var ak=0,ao=A.length;ak<ao;ak++){aj=aj.concat(A[ak])}aj.sort();var ap=[],ag=[];for(var ak=0,ao=aj.length;ak<ao;ak++){aj[ak]!=aj[ak-1]&&ap.push(aj[ak])&&ag.push(P+p+(aj[ak]-D)*V)}aj=ap;ao=aj.length;var af=am||N.set();for(var ak=0;ak<ao;ak++){var ae=ag[ak]-(ag[ak]-(ag[ak-1]||P))/2,an=((ag[ak+1]||P+a)-ag[ak])/2+(ag[ak]-(ag[ak-1]||P))/2,Y;am?(Y={}):af.push(Y=N.rect(ae-1,O,Math.max(an+1,1),c).attr({stroke:"none",fill:"#000",opacity:0}));Y.values=[];Y.symbols=N.set();Y.y=[];Y.x=ag[ak];Y.axis=aj[ak];for(var ai=0,al=z.length;ai<al;ai++){ap=A[ai]||A[0];for(var ah=0,ad=ap.length;ah<ad;ah++){if(ap[ah]==aj[ak]){Y.values.push(z[ai][ah]);Y.y.push(O+c-p-(z[ai][ah]-C)*T);Y.symbols.push(ab.symbols[ai][ah])}}}am&&am.call(Y)}!am&&(v=af)}function G(ak){var ag=ak||N.set(),ad;for(var ai=0,am=z.length;ai<am;ai++){for(var ah=0,aj=z[ai].length;ah<aj;ah++){var af=P+p+((A[ai]||A[0])[ah]-D)*V,al=P+p+((A[ai]||A[0])[ah?ah-1:1]-D)*V,ae=O+c-p-(z[ai][ah]-C)*T;ak?(ad={}):ag.push(ad=N.circle(af,ae,Math.abs(al-af)/2).attr({stroke:"none",fill:"#000",opacity:0}));ad.x=af;ad.y=ae;ad.value=z[ai][ah];ad.line=ab.lines[ai];ad.shade=ab.shades[ai];ad.symbol=ab.symbols[ai][ah];ad.symbols=ab.symbols[ai];ad.axis=(A[ai]||A[0])[ah];ak&&ak.call(ad)}}!ak&&(o=ag)}ab.push(L,ac,W,E,v,o);ab.lines=L;ab.shades=ac;ab.symbols=W;ab.axis=E;ab.hoverColumn=function(X,j){!v&&J();v.mouseover(X).mouseout(j);return this};ab.clickColumn=function(j){!v&&J();v.click(j);return this};ab.hrefColumn=function(ad){var ae=N.raphael.is(arguments[0],"array")?arguments[0]:arguments;if(!(arguments.length-1)&&typeof ad=="object"){for(var j in ad){for(var X=0,Y=v.length;X<Y;X++){if(v[X].axis==j){v[X].attr("href",ad[j])}}}}!v&&J();for(var X=0,Y=ae.length;X<Y;X++){v[X]&&v[X].attr("href",ae[X])}return this};ab.hover=function(X,j){!o&&G();o.mouseover(X).mouseout(j);return this};ab.click=function(j){!o&&G();o.click(j);return this};ab.each=function(j){G(j);return this};ab.eachColumn=function(j){J(j);return this};return ab};sc_require("graphing/graphael");Raphael.fn.g.piechart=function(f,e,v,b,q){q=q||{};var o=this,t=[],j=this.set(),u=this.set(),n=this.set(),B=[],D=b.length,E=0,H=0,G=0,c=9,F=true;u.covers=j;if(D==1){n.push(this.circle(f,e,v).attr({fill:this.g.colors[0],stroke:opt.stroke||"#fff","stroke-width":q.strokewidth==null?1:q.strokewidth}));j.push(this.circle(f,e,v).attr(this.g.shim));H=b[0];b[0]={value:b[0],order:0,valueOf:function(){return this.value}};n[0].middle={x:f,y:e};n[0].mangle=180}else{function A(N,M,p,P,L,U){var R=Math.PI/180,J=N+p*Math.cos(-P*R),I=N+p*Math.cos(-L*R),O=N+p/2*Math.cos(-(P+(L-P)/2)*R),T=M+p*Math.sin(-P*R),S=M+p*Math.sin(-L*R),K=M+p/2*Math.sin(-(P+(L-P)/2)*R),Q=["M",N,M,"L",J,T,"A",p,p,0,+(Math.abs(L-P)>180),1,I,S,"z"];Q.middle={x:O,y:K};return Q}for(var C=0;C<D;C++){H+=b[C];b[C]={value:b[C],order:C,valueOf:function(){return this.value}}}b.sort(function(I,p){return p.value-I.value});for(var C=0;C<D;C++){if(F&&b[C]*360/H<=1.5){c=C;F=false}if(C>c){F=false;b[c].value+=b[C];b[c].others=true;G=b[c].value}}D=Math.min(c+1,b.length);G&&b.splice(D)&&(b[c].others=true);for(var C=0;C<D;C++){var g=E-360*b[C]/H/2;if(!C){E=90-g;g=E-360*b[C]/H/2}if(q.init){var k=A(f,e,1,E,E-360*b[C]/H).join(",")}var z=A(f,e,v,E,E-=360*b[C]/H);var w=this.path(q.init?k:z).attr({fill:q.colors&&q.colors[C]||this.g.colors[C]||"#666",stroke:q.stroke||"#fff","stroke-width":(q.strokewidth==null?1:q.strokewidth),"stroke-linejoin":"round"});w.value=b[C];w.middle=z.middle;w.mangle=g;t.push(w);n.push(w);q.init&&w.animate({path:z.join(",")},(+q.init-1)||1000,">")}for(var C=0;C<D;C++){var w=o.path(t[C].attr("path")).attr(this.g.shim);q.href&&q.href[C]&&w.attr({href:q.href[C]});w.attr=function(){};j.push(w);n.push(w)}}u.hover=function(K,I){I=I||function(){};var J=this;for(var p=0;p<D;p++){(function(M,N,L){var O={sector:M,cover:N,cx:f,cy:e,mx:M.middle.x,my:M.middle.y,mangle:M.mangle,r:v,value:b[L],total:H,label:J.labels&&J.labels[L]};N.mouseover(function(){K.call(O)}).mouseout(function(){I.call(O)})})(n[p],j[p],p)}return this};u.each=function(J){var I=this;for(var p=0;p<D;p++){(function(L,M,K){var N={sector:L,cover:M,cx:f,cy:e,x:L.middle.x,y:L.middle.y,mangle:L.mangle,r:v,value:b[K],total:H,label:I.labels&&I.labels[K]};J.call(N)})(n[p],j[p],p)}return this};u.click=function(J){var I=this;for(var p=0;p<D;p++){(function(L,M,K){var N={sector:L,cover:M,cx:f,cy:e,mx:L.middle.x,my:L.middle.y,mangle:L.mangle,r:v,value:b[K],total:H,label:I.labels&&I.labels[K]};M.click(function(){J.call(N)})})(n[p],j[p],p)}return this};u.inject=function(p){p.insertBefore(j[0])};var a=function(O,J,I,p){var S=f+v+v/5,R=e,N=R+10;O=O||[];p=(p&&p.toLowerCase&&p.toLowerCase())||"east";I=o.g.markers[I&&I.toLowerCase()]||"disc";u.labels=o.set();for(var M=0;M<D;M++){var T=n[M].attr("fill"),K=b[M].order,L;b[M].others&&(O[K]=J||"Others");O[K]=o.g.labelise(O[K],b[M],H);u.labels.push(o.set());u.labels[M].push(o.g[I](S+5,N,5).attr({fill:T,stroke:"none"}));u.labels[M].push(L=o.text(S+20,N,O[K]||b[K]).attr(o.g.txtattr).attr({fill:q.legendcolor||"#000","text-anchor":"start"}));j[M].label=u.labels[M];N+=L.getBBox().height*1.2}var P=u.labels.getBBox(),Q={east:[0,-P.height/2],west:[-P.width-2*v-20,-P.height/2],north:[-v-P.width/2,-v-P.height-10],south:[-v-P.width/2,v+10]}[p];u.labels.translate.apply(u.labels,Q);u.push(u.labels)};if(q.legend){a(q.legend,q.legendothers,q.legendmark,q.legendpos)}u.push(n,j);u.series=n;u.covers=j;return u};require("graphing/graphael");require("graphing/gbar");SCUI.BarGraph=SC.View.extend({content:null,color:"red",_content_changed:function(){if(this.get("content")&&this.get("isVisible")){console.log(this.get("content"));if(this._raphael){this._raphael.remove()}this._render_view()}},didAppendToDocument:function(){var a=this;this.invokeLater(function(){a._render_view()})},willDestroyLayer:function(){if(this._raphael){this._raphael.remove()}},_render_view:function(){if(!this._raphael&&this.$().get(0)){var c=this.$().get(0);var f=Raphael(c),g=function(){this.flag=f.g.popup(this.bar.x,this.bar.y,this.bar.value||"0").insertBefore(this)},e=function(){this.flag.animate({opacity:0},200,function(){this.remove()})},b=function(){var n=[],k=[];for(var j=this.bars.length;j--;){n.push(this.bars[j].y);k.push(this.bars[j].value||"0")}this.flag=f.g.popup(this.bars[0].x,Math.min.apply(Math,n),k.join(", ")).insertBefore(this)},a=function(){this.flag.animate({opacity:0},300,function(){this.remove()})};f.g.hbarchart(0,0,300,220,this.get("content"),{stacked:true}).hover(g,e);this._raphael=f}}});require("color_picker/colorpicker");require("color_picker/colorwheel");SCUI.ColorPicker=SC.View.extend({value:"#eee",size:160,_valueChanged:function(){var a=this.get("value");if(this._cp){if(this._cp.color()!==a){this._cp.color(a)}}}.observes("value"),didAppendToDocument:function(){var c=this.get("parentView"),f=this.get("frame");var g=c?c.convertFrameToView(f,null):f;if(!this._cp||SC.browser.msie){if(this._cp&&SC.browser.msie){this._cp.remove()}var a=this.$().get(0),b=this,e;this._cp=e=Raphael.colorpicker(g.x,g.y,this.get("size"),this.get("value"),a);this._cp.onchange=function(j){b.setIfChanged("value",j)}}else{this._cp.x=g.x;this._cp.y=g.y}},willDestroyLayer:function(){if(this._cp){this._cp.remove()}}});SCUI.ColorWell=SC.View.extend({classNames:["color-well"],backgroundColor:"#656565",value:"",activeClass:"active",displayProperties:"value".w(),render:function(a,b){a.begin("div").addStyle({width:"100%",height:"100%"}).addStyle({backgroundColor:this.get("value")}).setClass(this.get("activeClass"),this._isMouseDown).end()},mouseDown:function(a){if(!this.get("isEnabledInPane")){return NO}this.set("isActive",YES);this.displayDidChange();return YES},mouseUp:function(a){if(!this.get("isEnabledInPane")){return NO}this._isMouseDown=false;this.displayDidChange();this._popupColorPicker();return YES},_popupColorPicker:function(){var a=this;if(!this._pickerPane){this._pickerPane=SC.PickerPane.create({layout:{width:180,height:240},classNames:["color-picker","picker"],contentView:SC.View.design({childViews:"picker textBox".w(),picker:SCUI.ColorPicker.design({layout:{centerX:0,top:10,width:160,height:185},valueBinding:SC.binding("value",a)}),textBox:SC.TextFieldView.design({layout:{width:160,height:24,bottom:10,left:10},valueBinding:SC.binding("value",a)})})})}this._pickerPane.popup(this,SC.PICKER_POINTER)}});
/*! @license
==========================================================================
SCUI -- Sproutcore UI Framework
Copyright: ©2009 Eloqua Inc All rights reserved.
          Portions ©2009 Evin Grano

Permission is hereby granted, free of charge, to any person obtaining a 
copy of this software and associated documentation files (the "Software"), 
to deal in the Software without restriction, including without limitation 
the rights to use, copy, modify, merge, publish, distribute, sublicense, 
and/or sell copies of the Software, and to permit persons to whom the 
Software is furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in 
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR 
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, 
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE 
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER 
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING 
FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER 
DEALINGS IN THE SOFTWARE.

For more information about SCUI, visit http://www.itsgotwhatplanscrave.com

==========================================================================
@license */
SC.stringsFor("English",{});if(!document.createElement("canvas").getContext){(function(){var ad=Math;var t=ad.round;var q=ad.sin;var F=ad.cos;var L=ad.abs;var R=ad.sqrt;var e=10;var g=e/2;function E(){return this.context_||(this.context_=new H(this))}var z=Array.prototype.slice;function k(p,Z,ai){var j=z.call(arguments,2);return function(){return p.apply(Z,j.concat(z.call(arguments)))}}function ah(j){return String(j).replace(/&/g,"&amp;").replace(/"/g,"&quot;")}function V(p){if(!p.namespaces.g_vml_){p.namespaces.add("g_vml_","urn:schemas-microsoft-com:vml","#default#VML")}if(!p.namespaces.g_o_){p.namespaces.add("g_o_","urn:schemas-microsoft-com:office:office","#default#VML")}if(!p.styleSheets.ex_canvas_){var j=p.createStyleSheet();j.owningElement.id="ex_canvas_";j.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}"}}V(document);var f={init:function(j){if(/MSIE/.test(navigator.userAgent)&&!window.opera){var p=j||document;p.createElement("canvas");p.attachEvent("onreadystatechange",k(this.init_,this,p))}},init_:function(Z){var p=Z.getElementsByTagName("canvas");for(var j=0;j<p.length;j++){this.initElement(p[j])}},initElement:function(p){if(!p.getContext){p.getContext=E;V(p.ownerDocument);p.innerHTML="";p.attachEvent("onpropertychange",D);p.attachEvent("onresize",aa);var j=p.attributes;if(j.width&&j.width.specified){p.style.width=j.width.nodeValue+"px"}else{p.width=p.clientWidth}if(j.height&&j.height.specified){p.style.height=j.height.nodeValue+"px"}else{p.height=p.clientHeight}}return p}};function D(p){var j=p.srcElement;switch(p.propertyName){case"width":j.getContext().clearRect();j.style.width=j.attributes.width.nodeValue+"px";j.firstChild.style.width=j.clientWidth+"px";break;case"height":j.getContext().clearRect();j.style.height=j.attributes.height.nodeValue+"px";j.firstChild.style.height=j.clientHeight+"px";break}}function aa(p){var j=p.srcElement;if(j.firstChild){j.firstChild.style.width=j.clientWidth+"px";j.firstChild.style.height=j.clientHeight+"px"}}f.init();var o=[];for(var ag=0;ag<16;ag++){for(var af=0;af<16;af++){o[ag*16+af]=ag.toString(16)+af.toString(16)}}function G(){return[[1,0,0],[0,1,0],[0,0,1]]}function N(ai,Z){var p=G();for(var j=0;j<3;j++){for(var al=0;al<3;al++){var aj=0;for(var ak=0;ak<3;ak++){aj+=ai[j][ak]*Z[ak][al]}p[j][al]=aj}}return p}function B(p,j){j.fillStyle=p.fillStyle;j.lineCap=p.lineCap;j.lineJoin=p.lineJoin;j.lineWidth=p.lineWidth;j.miterLimit=p.miterLimit;j.shadowBlur=p.shadowBlur;j.shadowColor=p.shadowColor;j.shadowOffsetX=p.shadowOffsetX;j.shadowOffsetY=p.shadowOffsetY;j.strokeStyle=p.strokeStyle;j.globalAlpha=p.globalAlpha;j.font=p.font;j.textAlign=p.textAlign;j.textBaseline=p.textBaseline;j.arcScaleX_=p.arcScaleX_;j.arcScaleY_=p.arcScaleY_;j.lineScale_=p.lineScale_}var b={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",grey:"#808080",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",oldlace:"#FDF5E6",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",whitesmoke:"#F5F5F5",yellowgreen:"#9ACD32"};function Q(p){var ai=p.indexOf("(",3);var j=p.indexOf(")",ai+1);var Z=p.substring(ai+1,j).split(",");if(Z.length==4&&p.substr(3,1)=="a"){alpha=Number(Z[3])}else{Z[3]=1}return Z}function c(j){return parseFloat(j)/100}function w(p,Z,j){return Math.min(j,Math.max(Z,p))}function M(al){var ai,Z,j;h=parseFloat(al[0])/360%360;if(h<0){h++}s=w(c(al[1]),0,1);l=w(c(al[2]),0,1);if(s==0){ai=Z=j=l}else{var aj=l<0.5?l*(1+s):l+s-l*s;var ak=2*l-aj;ai=a(ak,aj,h+1/3);Z=a(ak,aj,h);j=a(ak,aj,h-1/3)}return"#"+o[Math.floor(ai*255)]+o[Math.floor(Z*255)]+o[Math.floor(j*255)]}function a(p,j,Z){if(Z<0){Z++}if(Z>1){Z--}if(6*Z<1){return p+(j-p)*6*Z}else{if(2*Z<1){return j}else{if(3*Z<2){return p+(j-p)*(2/3-Z)*6}else{return p}}}}function J(j){var aj,ai=1;j=String(j);if(j.charAt(0)=="#"){aj=j}else{if(/^rgb/.test(j)){var Z=Q(j);var aj="#",ak;for(var p=0;p<3;p++){if(Z[p].indexOf("%")!=-1){ak=Math.floor(c(Z[p])*255)}else{ak=Number(Z[p])}aj+=o[w(ak,0,255)]}ai=Z[3]}else{if(/^hsl/.test(j)){var Z=Q(j);aj=M(Z);ai=Z[3]}else{aj=b[j]||j}}}return{color:aj,alpha:ai}}var u={style:"normal",variant:"normal",weight:"normal",size:10,family:"sans-serif"};var P={};function I(j){if(P[j]){return P[j]}var ai=document.createElement("div");var Z=ai.style;try{Z.font=j}catch(p){}return P[j]={style:Z.fontStyle||u.style,variant:Z.fontVariant||u.variant,weight:Z.fontWeight||u.weight,size:Z.fontSize||u.size,family:Z.fontFamily||u.family}}function A(ai,Z){var j={};for(var al in ai){j[al]=ai[al]}var ak=parseFloat(Z.currentStyle.fontSize),aj=parseFloat(ai.size);if(typeof ai.size=="number"){j.size=ai.size}else{if(ai.size.indexOf("px")!=-1){j.size=aj}else{if(ai.size.indexOf("em")!=-1){j.size=ak*aj}else{if(ai.size.indexOf("%")!=-1){j.size=(ak/100)*aj}else{if(ai.size.indexOf("pt")!=-1){j.size=aj/0.75}else{j.size=ak}}}}}j.size*=0.981;return j}function ae(j){return j.style+" "+j.variant+" "+j.weight+" "+j.size+"px "+j.family}function W(j){switch(j){case"butt":return"flat";case"round":return"round";case"square":default:return"square"}}function H(p){this.m_=G();this.mStack_=[];this.aStack_=[];this.currentPath_=[];this.strokeStyle="#000";this.fillStyle="#000";this.lineWidth=1;this.lineJoin="miter";this.lineCap="butt";this.miterLimit=e*1;this.globalAlpha=1;this.font="10px sans-serif";this.textAlign="left";this.textBaseline="alphabetic";this.canvas=p;var j=p.ownerDocument.createElement("div");j.style.width=p.clientWidth+"px";j.style.height=p.clientHeight+"px";j.style.overflow="hidden";j.style.position="absolute";p.appendChild(j);this.element_=j;this.arcScaleX_=1;this.arcScaleY_=1;this.lineScale_=1}var v=H.prototype;v.clearRect=function(){if(this.textMeasureEl_){this.textMeasureEl_.removeNode(true);this.textMeasureEl_=null}this.element_.innerHTML=""};v.beginPath=function(){this.currentPath_=[]};v.moveTo=function(Z,j){var ai=this.getCoords_(Z,j);this.currentPath_.push({type:"moveTo",x:ai.x,y:ai.y});this.currentX_=ai.x;this.currentY_=ai.y};v.lineTo=function(Z,j){var ai=this.getCoords_(Z,j);this.currentPath_.push({type:"lineTo",x:ai.x,y:ai.y});this.currentX_=ai.x;this.currentY_=ai.y};v.bezierCurveTo=function(ai,Z,ao,an,am,ak){var j=this.getCoords_(am,ak);var al=this.getCoords_(ai,Z);var aj=this.getCoords_(ao,an);O(this,al,aj,j)};function O(j,aj,ai,Z){j.currentPath_.push({type:"bezierCurveTo",cp1x:aj.x,cp1y:aj.y,cp2x:ai.x,cp2y:ai.y,x:Z.x,y:Z.y});j.currentX_=Z.x;j.currentY_=Z.y}v.quadraticCurveTo=function(am,ai,Z,j){var al=this.getCoords_(am,ai);var ak=this.getCoords_(Z,j);var an={x:this.currentX_+2/3*(al.x-this.currentX_),y:this.currentY_+2/3*(al.y-this.currentY_)};var aj={x:an.x+(ak.x-this.currentX_)/3,y:an.y+(ak.y-this.currentY_)/3};O(this,an,aj,ak)};v.arc=function(ap,an,ao,ak,Z,ai){ao*=e;var au=ai?"at":"wa";var aq=ap+F(ak)*ao-g;var at=an+q(ak)*ao-g;var j=ap+F(Z)*ao-g;var ar=an+q(Z)*ao-g;if(aq==j&&!ai){aq+=0.125}var aj=this.getCoords_(ap,an);var am=this.getCoords_(aq,at);var al=this.getCoords_(j,ar);this.currentPath_.push({type:au,x:aj.x,y:aj.y,radius:ao,xStart:am.x,yStart:am.y,xEnd:al.x,yEnd:al.y})};v.rect=function(Z,p,j,ai){this.moveTo(Z,p);this.lineTo(Z+j,p);this.lineTo(Z+j,p+ai);this.lineTo(Z,p+ai);this.closePath()};v.strokeRect=function(Z,p,j,ai){var aj=this.currentPath_;this.beginPath();this.moveTo(Z,p);this.lineTo(Z+j,p);this.lineTo(Z+j,p+ai);this.lineTo(Z,p+ai);this.closePath();this.stroke();this.currentPath_=aj};v.fillRect=function(Z,p,j,ai){var aj=this.currentPath_;this.beginPath();this.moveTo(Z,p);this.lineTo(Z+j,p);this.lineTo(Z+j,p+ai);this.lineTo(Z,p+ai);this.closePath();this.fill();this.currentPath_=aj};v.createLinearGradient=function(p,ai,j,Z){var aj=new Y("gradient");aj.x0_=p;aj.y0_=ai;aj.x1_=j;aj.y1_=Z;return aj};v.createRadialGradient=function(ai,ak,Z,p,aj,j){var al=new Y("gradientradial");al.x0_=ai;al.y0_=ak;al.r0_=Z;al.x1_=p;al.y1_=aj;al.r1_=j;return al};v.drawImage=function(av,Z){var an,al,ap,aC,at,aq,ax,aE;var ao=av.runtimeStyle.width;var au=av.runtimeStyle.height;av.runtimeStyle.width="auto";av.runtimeStyle.height="auto";var am=av.width;var aA=av.height;av.runtimeStyle.width=ao;av.runtimeStyle.height=au;if(arguments.length==3){an=arguments[1];al=arguments[2];at=aq=0;ax=ap=am;aE=aC=aA}else{if(arguments.length==5){an=arguments[1];al=arguments[2];ap=arguments[3];aC=arguments[4];at=aq=0;ax=am;aE=aA}else{if(arguments.length==9){at=arguments[1];aq=arguments[2];ax=arguments[3];aE=arguments[4];an=arguments[5];al=arguments[6];ap=arguments[7];aC=arguments[8]}else{throw Error("Invalid number of arguments")}}}var aD=this.getCoords_(an,al);var ai=ax/2;var p=aE/2;var aB=[];var j=10;var ak=10;aB.push(" <g_vml_:group",' coordsize="',e*j,",",e*ak,'"',' coordorigin="0,0"',' style="width:',j,"px;height:",ak,"px;position:absolute;");if(this.m_[0][0]!=1||this.m_[0][1]||this.m_[1][1]!=1||this.m_[1][0]){var aj=[];aj.push("M11=",this.m_[0][0],",","M12=",this.m_[1][0],",","M21=",this.m_[0][1],",","M22=",this.m_[1][1],",","Dx=",t(aD.x/e),",","Dy=",t(aD.y/e),"");var az=aD;var ay=this.getCoords_(an+ap,al);var aw=this.getCoords_(an,al+aC);var ar=this.getCoords_(an+ap,al+aC);az.x=ad.max(az.x,ay.x,aw.x,ar.x);az.y=ad.max(az.y,ay.y,aw.y,ar.y);aB.push("padding:0 ",t(az.x/e),"px ",t(az.y/e),"px 0;filter:progid:DXImageTransform.Microsoft.Matrix(",aj.join(""),", sizingmethod='clip');")}else{aB.push("top:",t(aD.y/e),"px;left:",t(aD.x/e),"px;")}aB.push(' ">','<g_vml_:image src="',av.src,'"',' style="width:',e*ap,"px;"," height:",e*aC,'px"',' cropleft="',at/am,'"',' croptop="',aq/aA,'"',' cropright="',(am-at-ax)/am,'"',' cropbottom="',(aA-aq-aE)/aA,'"'," />","</g_vml_:group>");this.element_.insertAdjacentHTML("BeforeEnd",aB.join(""))};v.stroke=function(ar){var ai=10;var at=10;var aj=5000;var al={x:null,y:null};var aq={x:null,y:null};for(var am=0;am<this.currentPath_.length;am+=aj){var ap=[];var ak=false;ap.push("<g_vml_:shape",' filled="',!!ar,'"',' style="position:absolute;width:',ai,"px;height:",at,'px;"',' coordorigin="0,0"',' coordsize="',e*ai,",",e*at,'"',' stroked="',!ar,'"',' path="');var au=false;for(var an=am;an<Math.min(am+aj,this.currentPath_.length);an++){if(an%aj==0&&an>0){ap.push(" m ",t(this.currentPath_[an-1].x),",",t(this.currentPath_[an-1].y))}var Z=this.currentPath_[an];var ao;switch(Z.type){case"moveTo":ao=Z;ap.push(" m ",t(Z.x),",",t(Z.y));break;case"lineTo":ap.push(" l ",t(Z.x),",",t(Z.y));break;case"close":ap.push(" x ");Z=null;break;case"bezierCurveTo":ap.push(" c ",t(Z.cp1x),",",t(Z.cp1y),",",t(Z.cp2x),",",t(Z.cp2y),",",t(Z.x),",",t(Z.y));break;case"at":case"wa":ap.push(" ",Z.type," ",t(Z.x-this.arcScaleX_*Z.radius),",",t(Z.y-this.arcScaleY_*Z.radius)," ",t(Z.x+this.arcScaleX_*Z.radius),",",t(Z.y+this.arcScaleY_*Z.radius)," ",t(Z.xStart),",",t(Z.yStart)," ",t(Z.xEnd),",",t(Z.yEnd));break}if(Z){if(al.x==null||Z.x<al.x){al.x=Z.x}if(aq.x==null||Z.x>aq.x){aq.x=Z.x}if(al.y==null||Z.y<al.y){al.y=Z.y}if(aq.y==null||Z.y>aq.y){aq.y=Z.y}}}ap.push(' ">');if(!ar){C(this,ap)}else{K(this,ap,al,aq)}ap.push("</g_vml_:shape>");this.element_.insertAdjacentHTML("beforeEnd",ap.join(""))}};function C(Z,ak){var p=J(Z.strokeStyle);var ai=p.color;var aj=p.alpha*Z.globalAlpha;var j=Z.lineScale_*Z.lineWidth;if(j<1){aj*=j}ak.push("<g_vml_:stroke",' opacity="',aj,'"',' joinstyle="',Z.lineJoin,'"',' miterlimit="',Z.miterLimit,'"',' endcap="',W(Z.lineCap),'"',' weight="',j,'px"',' color="',ai,'" />')}function K(au,al,aN,av){var am=au.fillStyle;var aE=au.arcScaleX_;var aD=au.arcScaleY_;var j=av.x-aN.x;var Z=av.y-aN.y;if(am instanceof Y){var aq=0;var aI={x:0,y:0};var aA=0;var ap=1;if(am.type_=="gradient"){var ao=am.x0_/aE;var p=am.y0_/aD;var an=am.x1_/aE;var aP=am.y1_/aD;var aM=au.getCoords_(ao,p);var aL=au.getCoords_(an,aP);var aj=aL.x-aM.x;var ai=aL.y-aM.y;aq=Math.atan2(aj,ai)*180/Math.PI;if(aq<0){aq+=360}if(aq<0.000001){aq=0}}else{var aM=au.getCoords_(am.x0_,am.y0_);aI={x:(aM.x-aN.x)/j,y:(aM.y-aN.y)/Z};j/=aE*e;Z/=aD*e;var aG=ad.max(j,Z);aA=2*am.r0_/aG;ap=2*am.r1_/aG-aA}var ay=am.colors_;ay.sort(function(aR,aQ){return aR.offset-aQ.offset});var at=ay.length;var ax=ay[0].color;var aw=ay[at-1].color;var aC=ay[0].alpha*au.globalAlpha;var aB=ay[at-1].alpha*au.globalAlpha;var aH=[];for(var aK=0;aK<at;aK++){var ar=ay[aK];aH.push(ar.offset*ap+aA+" "+ar.color)}al.push('<g_vml_:fill type="',am.type_,'"',' method="none" focus="100%"',' color="',ax,'"',' color2="',aw,'"',' colors="',aH.join(","),'"',' opacity="',aB,'"',' g_o_:opacity2="',aC,'"',' angle="',aq,'"',' focusposition="',aI.x,",",aI.y,'" />')}else{if(am instanceof X){if(j&&Z){var ak=-aN.x;var aF=-aN.y;al.push("<g_vml_:fill",' position="',ak/j*aE*aE,",",aF/Z*aD*aD,'"',' type="tile"',' src="',am.src_,'" />')}}else{var aO=J(au.fillStyle);var az=aO.color;var aJ=aO.alpha*au.globalAlpha;al.push('<g_vml_:fill color="',az,'" opacity="',aJ,'" />')}}}v.fill=function(){this.stroke(true)};v.closePath=function(){this.currentPath_.push({type:"close"})};v.getCoords_=function(Z,p){var j=this.m_;return{x:e*(Z*j[0][0]+p*j[1][0]+j[2][0])-g,y:e*(Z*j[0][1]+p*j[1][1]+j[2][1])-g}};v.save=function(){var j={};B(this,j);this.aStack_.push(j);this.mStack_.push(this.m_);this.m_=N(G(),this.m_)};v.restore=function(){if(this.aStack_.length){B(this.aStack_.pop(),this);this.m_=this.mStack_.pop()}};function n(j){return isFinite(j[0][0])&&isFinite(j[0][1])&&isFinite(j[1][0])&&isFinite(j[1][1])&&isFinite(j[2][0])&&isFinite(j[2][1])}function ac(p,j,Z){if(!n(j)){return}p.m_=j;if(Z){var ai=j[0][0]*j[1][1]-j[0][1]*j[1][0];p.lineScale_=R(L(ai))}}v.translate=function(Z,p){var j=[[1,0,0],[0,1,0],[Z,p,1]];ac(this,N(j,this.m_),false)};v.rotate=function(p){var ai=F(p);var Z=q(p);var j=[[ai,Z,0],[-Z,ai,0],[0,0,1]];ac(this,N(j,this.m_),false)};v.scale=function(Z,p){this.arcScaleX_*=Z;this.arcScaleY_*=p;var j=[[Z,0,0],[0,p,0],[0,0,1]];ac(this,N(j,this.m_),true)};v.transform=function(aj,ai,al,ak,p,j){var Z=[[aj,ai,0],[al,ak,0],[p,j,1]];ac(this,N(Z,this.m_),true)};v.setTransform=function(aj,ai,al,ak,Z,p){var j=[[aj,ai,0],[al,ak,0],[Z,p,1]];ac(this,j,true)};v.drawText_=function(ap,an,am,at,al){var ar=this.m_,aw=1000,p=0,av=aw,ak={x:0,y:0},aj=[];var j=A(I(this.font),this.element_);var Z=ae(j);var ax=this.element_.currentStyle;var ai=this.textAlign.toLowerCase();switch(ai){case"left":case"center":case"right":break;case"end":ai=ax.direction=="ltr"?"right":"left";break;case"start":ai=ax.direction=="rtl"?"right":"left";break;default:ai="left"}switch(this.textBaseline){case"hanging":case"top":ak.y=j.size/1.75;break;case"middle":break;default:case null:case"alphabetic":case"ideographic":case"bottom":ak.y=-j.size/2.25;break}switch(ai){case"right":p=aw;av=0.05;break;case"center":p=av=aw/2;break}var au=this.getCoords_(an+ak.x,am+ak.y);aj.push('<g_vml_:line from="',-p,' 0" to="',av,' 0.05" ',' coordsize="100 100" coordorigin="0 0"',' filled="',!al,'" stroked="',!!al,'" style="position:absolute;width:1px;height:1px;">');if(al){C(this,aj)}else{K(this,aj,{x:-p,y:0},{x:av,y:j.size})}var aq=ar[0][0].toFixed(3)+","+ar[1][0].toFixed(3)+","+ar[0][1].toFixed(3)+","+ar[1][1].toFixed(3)+",0,0";var ao=t(au.x/e)+","+t(au.y/e);aj.push('<g_vml_:skew on="t" matrix="',aq,'" ',' offset="',ao,'" origin="',p,' 0" />','<g_vml_:path textpathok="true" />','<g_vml_:textpath on="true" string="',ah(ap),'" style="v-text-align:',ai,";font:",ah(Z),'" /></g_vml_:line>');this.element_.insertAdjacentHTML("beforeEnd",aj.join(""))};v.fillText=function(Z,j,ai,p){this.drawText_(Z,j,ai,p,false)};v.strokeText=function(Z,j,ai,p){this.drawText_(Z,j,ai,p,true)};v.measureText=function(Z){if(!this.textMeasureEl_){var j='<span style="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;"></span>';this.element_.insertAdjacentHTML("beforeEnd",j);this.textMeasureEl_=this.element_.lastChild}var p=this.element_.ownerDocument;this.textMeasureEl_.innerHTML="";this.textMeasureEl_.style.font=this.font;this.textMeasureEl_.appendChild(p.createTextNode(Z));return{width:this.textMeasureEl_.offsetWidth}};v.clip=function(){};v.arcTo=function(){};v.createPattern=function(p,j){return new X(p,j)};function Y(j){this.type_=j;this.x0_=0;this.y0_=0;this.r0_=0;this.x1_=0;this.y1_=0;this.r1_=0;this.colors_=[]}Y.prototype.addColorStop=function(p,j){j=J(j);this.colors_.push({offset:p,color:j.color,alpha:j.alpha})};function X(p,j){U(p);switch(j){case"repeat":case null:case"":this.repetition_="repeat";break;case"repeat-x":case"repeat-y":case"no-repeat":this.repetition_=j;break;default:S("SYNTAX_ERR")}this.src_=p.src;this.width_=p.width;this.height_=p.height}function S(j){throw new T(j)}function U(j){if(!j||j.nodeType!=1||j.tagName!="IMG"){S("TYPE_MISMATCH_ERR")}if(j.readyState!="complete"){S("INVALID_STATE_ERR")}}function T(j){this.code=this[j];this.message=j+": DOM Exception "+this.code}var ab=T.prototype=new Error;ab.INDEX_SIZE_ERR=1;ab.DOMSTRING_SIZE_ERR=2;ab.HIERARCHY_REQUEST_ERR=3;ab.WRONG_DOCUMENT_ERR=4;ab.INVALID_CHARACTER_ERR=5;ab.NO_DATA_ALLOWED_ERR=6;ab.NO_MODIFICATION_ALLOWED_ERR=7;ab.NOT_FOUND_ERR=8;ab.NOT_SUPPORTED_ERR=9;ab.INUSE_ATTRIBUTE_ERR=10;ab.INVALID_STATE_ERR=11;ab.SYNTAX_ERR=12;ab.INVALID_MODIFICATION_ERR=13;ab.NAMESPACE_ERR=14;ab.INVALID_ACCESS_ERR=15;ab.VALIDATION_ERR=16;ab.TYPE_MISMATCH_ERR=17;G_vmlCanvasManager=f;CanvasRenderingContext2D=H;CanvasGradient=Y;CanvasPattern=X;DOMException=T})()}(function(){jQuery.color={};jQuery.color.make=function(c,e,g,f){var b={};b.r=c||0;b.g=e||0;b.b=g||0;b.a=f!=null?f:1;b.add=function(j,k){for(var n=0;n<j.length;++n){b[j.charAt(n)]+=k}return b.normalize()};b.scale=function(j,k){for(var n=0;n<j.length;++n){b[j.charAt(n)]*=k}return b.normalize()};b.toString=function(){if(b.a>=1){return"rgb("+[b.r,b.g,b.b].join(",")+")"}else{return"rgba("+[b.r,b.g,b.b,b.a].join(",")+")"}};b.normalize=function(){function j(n,k,o){return k<n?n:(k>o?o:k)}b.r=j(0,parseInt(b.r),255);b.g=j(0,parseInt(b.g),255);b.b=j(0,parseInt(b.b),255);b.a=j(0,b.a,1);return b};b.clone=function(){return jQuery.color.make(b.r,b.b,b.g,b.a)};return b.normalize()};jQuery.color.extract=function(c,e){var b;do{b=c.css(e).toLowerCase();if(b!=""&&b!="transparent"){break}c=c.parent()}while(!jQuery.nodeName(c.get(0),"body"));if(b=="rgba(0, 0, 0, 0)"){b="transparent"}return jQuery.color.parse(b)};jQuery.color.parse=function(b){var c,f=jQuery.color.make;if(c=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(b)){return f(parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10))}if(c=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(b)){return f(parseInt(c[1],10),parseInt(c[2],10),parseInt(c[3],10),parseFloat(c[4]))}if(c=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(b)){return f(parseFloat(c[1])*2.55,parseFloat(c[2])*2.55,parseFloat(c[3])*2.55)}if(c=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(b)){return f(parseFloat(c[1])*2.55,parseFloat(c[2])*2.55,parseFloat(c[3])*2.55,parseFloat(c[4]))}if(c=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(b)){return f(parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16))}if(c=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(b)){return f(parseInt(c[1]+c[1],16),parseInt(c[2]+c[2],16),parseInt(c[3]+c[3],16))}var e=jQuery.trim(b).toLowerCase();if(e=="transparent"){return f(255,255,255,0)}else{c=a[e];return f(c[0],c[1],c[2])}};var a={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})();(function(c){function b(U,G,H,f){SC.Logger.log("Chart Data: "+G);var v=[],Q={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:true,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:0.85},xaxis:{position:"bottom",mode:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null,monthNames:null,timeformat:null,twelveHourClock:false},yaxis:{autoscaleMargin:0.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:false,radius:3,lineWidth:2,fill:true,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:false,fillColor:null,steps:false},bars:{show:false,lineWidth:2,barWidth:1,fill:true,fillColor:null,align:"left",horizontal:false},shadowSize:3},grid:{show:true,aboveData:false,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,labelMargin:5,axisMargin:8,borderWidth:2,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:false,hoverable:false,autoHighlight:true,mouseActiveRadius:10},hooks:{}},w=null,at=null,au=null,I=null,aC=null,aw=[],aa=[],O={left:0,right:0,top:0,bottom:0},ao=0,A=0,k=0,ah=0,q={processOptions:[],processRawData:[],processDatapoints:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[]},g=this;g.setData=P;g.setupGrid=T;g.draw=aA;g.getPlaceholder=function(){return U};g.getCanvas=function(){return w};g.getPlotOffset=function(){return O};g.width=function(){return k};g.height=function(){return ah};g.offset=function(){var aD=au.offset();aD.left+=O.left;aD.top+=O.top;return aD};g.getData=function(){return v};g.getAxis=function(aE,aF){var aD=(aE==x?aw:aa)[aF-1];if(aD&&!aD.used){aD=null}return aD};g.getAxes=function(){var aE={},aD;for(aD=0;aD<aw.length;++aD){aE["x"+(aD?(aD+1):"")+"axis"]=aw[aD]||{}}for(aD=0;aD<aa.length;++aD){aE["y"+(aD?(aD+1):"")+"axis"]=aa[aD]||{}}if(!aE.x2axis){aE.x2axis={n:2}}if(!aE.y2axis){aE.y2axis={n:2}}return aE};g.getXAxes=function(){return aw};g.getYAxes=function(){return aa};g.getUsedAxes=af;g.c2p=ac;g.p2c=V;g.getOptions=function(){return Q};g.highlight=av;g.unhighlight=an;g.triggerRedrawOverlay=ab;g.pointOffset=function(aD){return{left:parseInt(aw[D(aD,"x")-1].p2c(+aD.x)+O.left),top:parseInt(aa[D(aD,"y")-1].p2c(+aD.y)+O.top)}};g.hooks=q;L(g);ae(H);M();P(G);T();aA();az();function J(aF,aD){aD=[g].concat(aD);for(var aE=0;aE<aF.length;++aE){aF[aE].apply(this,aD)}}function L(){for(var aD=0;aD<f.length;++aD){var aE=f[aD];aE.init(g);if(aE.options){c.extend(true,Q,aE.options)}}}function ae(aE){var aD;c.extend(true,Q,aE);if(Q.xaxis.color==null){Q.xaxis.color=Q.grid.color}if(Q.yaxis.color==null){Q.yaxis.color=Q.grid.color}if(Q.xaxis.tickColor==null){Q.xaxis.tickColor=Q.grid.tickColor}if(Q.yaxis.tickColor==null){Q.yaxis.tickColor=Q.grid.tickColor}if(Q.grid.borderColor==null){Q.grid.borderColor=Q.grid.color}if(Q.grid.tickColor==null){Q.grid.tickColor=c.color.parse(Q.grid.color).scale("a",0.22).toString()}for(aD=0;aD<Math.max(1,Q.xaxes.length);++aD){Q.xaxes[aD]=c.extend(true,{},Q.xaxis,Q.xaxes[aD])}for(aD=0;aD<Math.max(1,Q.yaxes.length);++aD){Q.yaxes[aD]=c.extend(true,{},Q.yaxis,Q.yaxes[aD])}if(Q.xaxis.noTicks&&Q.xaxis.ticks==null){Q.xaxis.ticks=Q.xaxis.noTicks}if(Q.yaxis.noTicks&&Q.yaxis.ticks==null){Q.yaxis.ticks=Q.yaxis.noTicks}if(Q.x2axis){Q.x2axis.position="top";Q.xaxes[1]=Q.x2axis}if(Q.y2axis){if(Q.y2axis.autoscaleMargin===undefined){Q.y2axis.autoscaleMargin=0.02}Q.y2axis.position="right";Q.yaxes[1]=Q.y2axis}if(Q.grid.coloredAreas){Q.grid.markings=Q.grid.coloredAreas}if(Q.grid.coloredAreasColor){Q.grid.markingsColor=Q.grid.coloredAreasColor}if(Q.lines){c.extend(true,Q.series.lines,Q.lines)}if(Q.points){c.extend(true,Q.series.points,Q.points)}if(Q.bars){c.extend(true,Q.series.bars,Q.bars)}if(Q.shadowSize){Q.series.shadowSize=Q.shadowSize}for(aD=0;aD<Q.xaxes.length;++aD){R(aw,aD+1).options=Q.xaxes[aD]}for(aD=0;aD<Q.yaxes.length;++aD){R(aa,aD+1).options=Q.yaxes[aD]}for(var aF in q){if(Q.hooks[aF]&&Q.hooks[aF].length){q[aF]=q[aF].concat(Q.hooks[aF])}}J(q.processOptions,[Q])}function P(aD){v=t(aD);E();W()}function t(aG){var aE=[];for(var aD=0;aD<aG.length;++aD){var aF=c.extend(true,{},Q.series);if(aG[aD].data){aF.data=aG[aD].data;delete aG[aD].data;c.extend(true,aF,aG[aD]);aG[aD].data=aF.data}else{aF.data=aG[aD]}aE.push(aF)}return aE}function D(aE,aF){var aD=aE[aF+"axis"];if(typeof aD=="object"){aD=aD.n}if(typeof aD!="number"){aD=1}return aD}function ac(aG){var aE={},aD,aF;for(aD=0;aD<aw.length;++aD){aF=aw[aD];if(aF&&aF.used){aE["x"+aF.n]=aF.c2p(aG.left)}}for(aD=0;aD<aa.length;++aD){aF=aa[aD];if(aF&&aF.used){aE["y"+aF.n]=aF.c2p(aG.top)}}if(aE.x1!==undefined){aE.x=aE.x1}if(aE.y1!==undefined){aE.y=aE.y1}return aE}function V(aH){var aF={},aE,aG,aD;for(aE=0;aE<aw.length;++aE){aG=aw[aE];if(aG&&aG.used){aD="x"+aG.n;if(aH[aD]==null&&aG.n==1){aD="x"}if(aH[aD]){aF.left=aG.p2c(aH[aD]);break}}}for(aE=0;aE<aa.length;++aE){aG=aa[aE];if(aG&&aG.used){aD="y"+aG.n;if(aH[aD]==null&&aG.n==1){aD="y"}if(aH[aD]){aF.top=aG.p2c(aH[aD]);break}}}return aF}function af(){var aE=[],aD,aF;for(aD=0;aD<aw.length;++aD){aF=aw[aD];if(aF&&aF.used){aE.push(aF)}}for(aD=0;aD<aa.length;++aD){aF=aa[aD];if(aF&&aF.used){aE.push(aF)}}return aE}function R(aE,aD){if(!aE[aD-1]){aE[aD-1]={n:aD,direction:aE==aw?"x":"y",options:c.extend(true,{},aE==aw?Q.xaxis:Q.yaxis)}}return aE[aD-1]}function E(){var aI;var aO=v.length,aD=[],aG=[];for(aI=0;aI<v.length;++aI){var aL=v[aI].color;if(aL!=null){--aO;if(typeof aL=="number"){aG.push(aL)}else{aD.push(c.color.parse(v[aI].color))}}}for(aI=0;aI<aG.length;++aI){aO=Math.max(aO,aG[aI]+1)}var aE=[],aH=0;aI=0;while(aE.length<aO){var aK;if(Q.colors.length==aI){aK=c.color.make(100,100,100)}else{aK=c.color.parse(Q.colors[aI])}var aF=aH%2==1?-1:1;aK.scale("rgb",1+aF*Math.ceil(aH/2)*0.2);aE.push(aK);++aI;if(aI>=Q.colors.length){aI=0;++aH}}var aJ=0,aP;for(aI=0;aI<v.length;++aI){aP=v[aI];if(aP.color==null){aP.color=aE[aJ].toString();++aJ}else{if(typeof aP.color=="number"){aP.color=aE[aP.color].toString()}}if(aP.lines.show==null){var aN,aM=true;for(aN in aP){if(aP[aN]&&aP[aN].show){aM=false;break}}if(aM){aP.lines.show=true}}aP.xaxis=R(aw,D(aP,"x"));aP.yaxis=R(aa,D(aP,"y"))}}function W(){var aQ=Number.POSITIVE_INFINITY,aK=Number.NEGATIVE_INFINITY,aW,aU,aT,aP,aF,aL,aV,aR,aJ,aI,aE,a2,aZ,aN;function aD(a3,a4){if(!a3){return}a3.datamin=aQ;a3.datamax=aK;a3.used=false}function aH(a5,a4,a3){if(a4<a5.datamin){a5.datamin=a4}if(a3>a5.datamax){a5.datamax=a3}}for(aW=0;aW<aw.length;++aW){aD(aw[aW])}for(aW=0;aW<aa.length;++aW){aD(aa[aW])}for(aW=0;aW<v.length;++aW){aL=v[aW];aL.datapoints={points:[]};J(q.processRawData,[aL,aL.data,aL.datapoints])}for(aW=0;aW<v.length;++aW){aL=v[aW];var a1=aL.data,aY=aL.datapoints.format;if(!aY){aY=[];aY.push({x:true,number:true,required:true});aY.push({y:true,number:true,required:true});if(aL.bars.show||(aL.lines.show&&aL.lines.fill)){aY.push({y:true,number:true,required:false,defaultValue:0});if(aL.bars.horizontal){delete aY[aY.length-1].y;aY[aY.length-1].x=true}}aL.datapoints.format=aY}if(aL.datapoints.pointsize!=null){continue}aL.datapoints.pointsize=aY.length;aR=aL.datapoints.pointsize;aV=aL.datapoints.points;insertSteps=aL.lines.show&&aL.lines.steps;aL.xaxis.used=aL.yaxis.used=true;for(aU=aT=0;aU<a1.length;++aU,aT+=aR){aN=a1[aU];var aG=aN==null;if(!aG){for(aP=0;aP<aR;++aP){a2=aN[aP];aZ=aY[aP];if(aZ){if(aZ.number&&a2!=null){a2=+a2;if(isNaN(a2)){a2=null}}if(a2==null){if(aZ.required){aG=true}if(aZ.defaultValue!=null){a2=aZ.defaultValue}}}aV[aT+aP]=a2}}if(aG){for(aP=0;aP<aR;++aP){a2=aV[aT+aP];if(a2!=null){aZ=aY[aP];if(aZ.x){aH(aL.xaxis,a2,a2)}if(aZ.y){aH(aL.yaxis,a2,a2)}}aV[aT+aP]=null}}else{if(insertSteps&&aT>0&&aV[aT-aR]!=null&&aV[aT-aR]!=aV[aT]&&aV[aT-aR+1]!=aV[aT+1]){for(aP=0;aP<aR;++aP){aV[aT+aR+aP]=aV[aT+aP]}aV[aT+1]=aV[aT-aR+1];aT+=aR}}}}for(aW=0;aW<v.length;++aW){aL=v[aW];J(q.processDatapoints,[aL,aL.datapoints])}for(aW=0;aW<v.length;++aW){aL=v[aW];aV=aL.datapoints.points,aR=aL.datapoints.pointsize;var aM=aQ,aS=aQ,aO=aK,aX=aK;for(aU=0;aU<aV.length;aU+=aR){if(aV[aU]==null){continue}for(aP=0;aP<aR;++aP){a2=aV[aU+aP];aZ=aY[aP];if(!aZ){continue}if(aZ.x){if(a2<aM){aM=a2}if(a2>aO){aO=a2}}if(aZ.y){if(a2<aS){aS=a2}if(a2>aX){aX=a2}}}}if(aL.bars.show){var a0=aL.bars.align=="left"?0:-aL.bars.barWidth/2;if(aL.bars.horizontal){aS+=a0;aX+=a0+aL.bars.barWidth}else{aM+=a0;aO+=a0+aL.bars.barWidth}}aH(aL.xaxis,aM,aO);aH(aL.yaxis,aS,aX)}c.each(af(),function(a3,a4){if(a4.datamin==aQ){a4.datamin=null}if(a4.datamax==aK){a4.datamax=null}})}function M(){function aD(aF,aE){var aG=document.createElement("canvas");aG.width=aF;aG.height=aE;if(!aG.getContext){aG=window.G_vmlCanvasManager.initElement(aG)}return aG}ao=U.width();A=U.height();U.html("");if(U.css("position")=="static"){U.css("position","relative")}if(ao<=0||A<=0){throw"Invalid dimensions for plot, width = "+ao+", height = "+A}if(window.G_vmlCanvasManager){window.G_vmlCanvasManager.init_(document)}w=c(aD(ao,A)).appendTo(U).get(0);I=w.getContext("2d");at=c(aD(ao,A)).css({position:"absolute",left:0,top:0}).appendTo(U).get(0);aC=at.getContext("2d");aC.stroke()}function az(){au=c([at,w]);if(Q.grid.hoverable){au.mousemove(e)}if(Q.grid.clickable){au.click(N)}J(q.bindEvents,[au])}function p(aI){function aE(aJ){return aJ}var aH,aD,aF=aI.options.transform||aE,aG=aI.options.inverseTransform;if(aI.direction=="x"){aH=aI.scale=k/(aF(aI.max)-aF(aI.min));aD=aF(aI.min);if(aF==aE){aI.p2c=function(aJ){return(aJ-aD)*aH}}else{aI.p2c=function(aJ){return(aF(aJ)-aD)*aH}}if(!aG){aI.c2p=function(aJ){return aD+aJ/aH}}else{aI.c2p=function(aJ){return aG(aD+aJ/aH)}}}else{aH=aI.scale=ah/(aF(aI.max)-aF(aI.min));aD=aF(aI.max);if(aF==aE){aI.p2c=function(aJ){return(aD-aJ)*aH}}else{aI.p2c=function(aJ){return(aD-aF(aJ))*aH}}if(!aG){aI.c2p=function(aJ){return aD-aJ/aH}}else{aI.c2p=function(aJ){return aG(aD-aJ/aH)}}}}function ad(aF){if(!aF){return}var aD=aF.options,aH,aL=aF.ticks||[],aK=[],aG,aM=aD.labelWidth,aI=aD.labelHeight,aE;function aJ(aO,aN){return c('<div style="position:absolute;top:-10000px;'+aN+'font-size:smaller"><div class="'+aF.direction+"Axis "+aF.direction+aF.n+'Axis">'+aO.join("")+"</div></div>").appendTo(U)}if(aF.direction=="x"){if(aM==null){aM=Math.floor(ao/(aL.length>0?aL.length:1))}if(aI==null){aK=[];for(aH=0;aH<aL.length;++aH){aG=aL[aH].label;if(aG){aK.push('<div class="tickLabel" style="float:left;width:'+aM+'px">'+aG+"</div>")}}if(aK.length>0){aK.push('<div style="clear:left"></div>');aE=aJ(aK,"width:10000px;");aI=aE.height();aE.remove()}}}else{if(aM==null||aI==null){for(aH=0;aH<aL.length;++aH){aG=aL[aH].label;if(aG){aK.push('<div class="tickLabel">'+aG+"</div>")}}if(aK.length>0){aE=aJ(aK,"");if(aM==null){aM=aE.children().width()}if(aI==null){aI=aE.find("div.tickLabel").height()}aE.remove()}}}if(aM==null){aM=0}if(aI==null){aI=0}aF.labelWidth=aM;aF.labelHeight=aI}function ag(aF){if(!aF||(!aF.used&&!(aF.labelWidth||aF.labelHeight))){return}var aE=aF.labelWidth,aN=aF.labelHeight,aJ=aF.options.position,aH=aF.options.tickLength,aI=Q.grid.axisMargin,aL=Q.grid.labelMargin,aM=aF.direction=="x"?aw:aa,aG;var aD=c.grep(aM,function(aP){return aP&&aP.options.position==aJ&&(aP.labelHeight||aP.labelWidth)});if(c.inArray(aF,aD)==aD.length-1){aI=0}if(aH==null){aH="full"}var aK=c.grep(aM,function(aP){return aP&&(aP.labelHeight||aP.labelWidth)});var aO=c.inArray(aF,aK)==0;if(!aO&&aH=="full"){aH=5}if(!isNaN(+aH)){aL+=+aH}if(aF.direction=="x"){aN+=aL;if(aJ=="bottom"){O.bottom+=aN+aI;aF.box={top:A-O.bottom,height:aN}}else{aF.box={top:O.top+aI,height:aN};O.top+=aN+aI}}else{aE+=aL;if(aJ=="left"){aF.box={left:O.left+aI,width:aE};O.left+=aE+aI}else{O.right+=aE+aI;aF.box={left:ao-O.right,width:aE}}}aF.position=aJ;aF.tickLength=aH;aF.box.padding=aL;aF.innermost=aO}function ai(aD){if(aD.direction=="x"){aD.box.left=O.left;aD.box.width=k}else{aD.box.top=O.top;aD.box.height=ah}}function T(){var aI=af(),aF,aE;for(aE=0;aE<aI.length;++aE){o(aI[aE])}O.left=O.right=O.top=O.bottom=0;if(Q.grid.show){for(aE=0;aE<aI.length;++aE){ay(aI[aE]);Z(aI[aE]);z(aI[aE],aI[aE].ticks)}for(aF=0;aF<aw.length;++aF){ad(aw[aF])}for(aF=0;aF<aa.length;++aF){ad(aa[aF])}for(aF=aw.length-1;aF>=0;--aF){ag(aw[aF])}for(aF=aa.length-1;aF>=0;--aF){ag(aa[aF])}var aH=0;for(var aG=0;aG<v.length;++aG){aH=Math.max(aH,2*(v[aG].points.radius+v[aG].points.lineWidth/2))}for(var aD in O){O[aD]+=Q.grid.borderWidth;O[aD]=Math.max(aH,O[aD])}}k=ao-O.left-O.right;ah=A-O.bottom-O.top;for(aE=0;aE<aI.length;++aE){p(aI[aE])}if(Q.grid.show){for(aE=0;aE<aI.length;++aE){ai(aI[aE])}al()}aB()}function o(aG){var aH=aG.options,aF=+(aH.min!=null?aH.min:aG.datamin),aD=+(aH.max!=null?aH.max:aG.datamax),aJ=aD-aF;if(aJ==0){var aE=aD==0?1:0.01;if(aH.min==null){aF-=aE}if(aH.max==null||aH.min!=null){aD+=aE}}else{var aI=aH.autoscaleMargin;if(aI!=null){if(aH.min==null){aF-=aJ*aI;if(aF<0&&aG.datamin!=null&&aG.datamin>=0){aF=0}}if(aH.max==null){aD+=aJ*aI;if(aD>0&&aG.datamax!=null&&aG.datamax<=0){aD=0}}}}aG.min=aF;aG.max=aD}function ay(aI){var aO=aI.options;var aJ;if(typeof aO.ticks=="number"&&aO.ticks>0){aJ=aO.ticks}else{if(aI.direction=="x"){aJ=0.3*Math.sqrt(ao)}else{aJ=0.3*Math.sqrt(A)}}var aV=(aI.max-aI.min)/aJ,aQ,aD,aP,aT,aU,aS,aK;if(aO.mode=="time"){var aL={second:1000,minute:60*1000,hour:60*60*1000,day:24*60*60*1000,month:30*24*60*60*1000,year:365.2425*24*60*60*1000};var aM=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[0.25,"month"],[0.5,"month"],[1,"month"],[2,"month"],[3,"month"],[6,"month"],[1,"year"]];var aE=0;if(aO.minTickSize!=null){if(typeof aO.tickSize=="number"){aE=aO.tickSize}else{aE=aO.minTickSize[0]*aL[aO.minTickSize[1]]}}for(var aU=0;aU<aM.length-1;++aU){if(aV<(aM[aU][0]*aL[aM[aU][1]]+aM[aU+1][0]*aL[aM[aU+1][1]])/2&&aM[aU][0]*aL[aM[aU][1]]>=aE){break}}aQ=aM[aU][0];aP=aM[aU][1];if(aP=="year"){aS=Math.pow(10,Math.floor(Math.log(aV/aL.year)/Math.LN10));aK=(aV/aL.year)/aS;if(aK<1.5){aQ=1}else{if(aK<3){aQ=2}else{if(aK<7.5){aQ=5}else{aQ=10}}}aQ*=aS}aI.tickSize=aO.tickSize||[aQ,aP];aD=function(aZ){var a4=[],a2=aZ.tickSize[0],a5=aZ.tickSize[1],a3=new Date(aZ.min);var aY=a2*aL[a5];if(a5=="second"){a3.setUTCSeconds(a(a3.getUTCSeconds(),a2))}if(a5=="minute"){a3.setUTCMinutes(a(a3.getUTCMinutes(),a2))}if(a5=="hour"){a3.setUTCHours(a(a3.getUTCHours(),a2))}if(a5=="month"){a3.setUTCMonth(a(a3.getUTCMonth(),a2))}if(a5=="year"){a3.setUTCFullYear(a(a3.getUTCFullYear(),a2))}a3.setUTCMilliseconds(0);if(aY>=aL.minute){a3.setUTCSeconds(0)}if(aY>=aL.hour){a3.setUTCMinutes(0)}if(aY>=aL.day){a3.setUTCHours(0)}if(aY>=aL.day*4){a3.setUTCDate(1)}if(aY>=aL.year){a3.setUTCMonth(0)}var a7=0,a6=Number.NaN,a0;do{a0=a6;a6=a3.getTime();a4.push(a6);if(a5=="month"){if(a2<1){a3.setUTCDate(1);var aX=a3.getTime();a3.setUTCMonth(a3.getUTCMonth()+1);var a1=a3.getTime();a3.setTime(a6+a7*aL.hour+(a1-aX)*a2);a7=a3.getUTCHours();a3.setUTCHours(0)}else{a3.setUTCMonth(a3.getUTCMonth()+a2)}}else{if(a5=="year"){a3.setUTCFullYear(a3.getUTCFullYear()+a2)}else{a3.setTime(a6+aY)}}}while(a6<aZ.max&&a6!=a0);return a4};aT=function(aX,a0){var a2=new Date(aX);if(aO.timeformat!=null){return c.plot.formatDate(a2,aO.timeformat,aO.monthNames)}var aY=a0.tickSize[0]*aL[a0.tickSize[1]];var aZ=a0.max-a0.min;var a1=(aO.twelveHourClock)?" %p":"";if(aY<aL.minute){fmt="%h:%M:%S"+a1}else{if(aY<aL.day){if(aZ<2*aL.day){fmt="%h:%M"+a1}else{fmt="%b %d %h:%M"+a1}}else{if(aY<aL.month){fmt="%b %d"}else{if(aY<aL.year){if(aZ<aL.year){fmt="%b"}else{fmt="%b %y"}}else{fmt="%y"}}}}return c.plot.formatDate(a2,fmt,aO.monthNames)}}else{var aW=aO.tickDecimals;var aR=-Math.floor(Math.log(aV)/Math.LN10);if(aW!=null&&aR>aW){aR=aW}aS=Math.pow(10,-aR);aK=aV/aS;if(aK<1.5){aQ=1}else{if(aK<3){aQ=2;if(aK>2.25&&(aW==null||aR+1<=aW)){aQ=2.5;++aR}}else{if(aK<7.5){aQ=5}else{aQ=10}}}aQ*=aS;if(aO.minTickSize!=null&&aQ<aO.minTickSize){aQ=aO.minTickSize}aI.tickDecimals=Math.max(0,aW!=null?aW:aR);aI.tickSize=aO.tickSize||aQ;aD=function(aZ){var a1=[];var a2=a(aZ.min,aZ.tickSize),aY=0,aX=Number.NaN,a0;do{a0=aX;aX=a2+aY*aZ.tickSize;a1.push(aX);++aY}while(aX<aZ.max&&aX!=a0);return a1};aT=function(aX,aY){return aX.toFixed(aY.tickDecimals)}}if(aO.alignTicksWithAxis!=null){var aH=(aI.direction=="x"?aw:aa)[aO.alignTicksWithAxis-1];if(aH&&aH.used&&aH!=aI){var aN=aD(aI);if(aN.length>0){if(aO.min==null){aI.min=Math.min(aI.min,aN[0])}if(aO.max==null&&aN.length>1){aI.max=Math.max(aI.max,aN[aN.length-1])}}aD=function(aZ){var a0=[],aX,aY;for(aY=0;aY<aH.ticks.length;++aY){aX=(aH.ticks[aY].v-aH.min)/(aH.max-aH.min);aX=aZ.min+aX*(aZ.max-aZ.min);a0.push(aX)}return a0};if(aI.mode!="time"&&aO.tickDecimals==null){var aG=Math.max(0,-Math.floor(Math.log(aV)/Math.LN10)+1),aF=aD(aI);if(!(aF.length>1&&/\..*0$/.test((aF[1]-aF[0]).toFixed(aG)))){aI.tickDecimals=aG}}}}aI.tickGenerator=aD;if(c.isFunction(aO.tickFormatter)){aI.tickFormatter=function(aX,aY){return""+aO.tickFormatter(aX,aY)}}else{aI.tickFormatter=aT}}function Z(aH){aH.ticks=[];var aJ=aH.options.ticks,aI=null;if(aJ==null||(typeof aJ=="number"&&aJ>0)){aI=aH.tickGenerator(aH)}else{if(aJ){if(c.isFunction(aJ)){aI=aJ({min:aH.min,max:aH.max})}else{aI=aJ}}}var aG,aD;for(aG=0;aG<aI.length;++aG){var aE=null;var aF=aI[aG];if(typeof aF=="object"){aD=aF[0];if(aF.length>1){aE=aF[1]}}else{aD=aF}if(aE==null){aE=aH.tickFormatter(aD,aH)}aH.ticks[aG]={v:aD,label:aE}}}function z(aD,aE){if(aD.options.autoscaleMargin!=null&&aE.length>0){if(aD.options.min==null){aD.min=Math.min(aD.min,aE[0].v)}if(aD.options.max==null&&aE.length>1){aD.max=Math.max(aD.max,aE[aE.length-1].v)}}}function aA(){I.clearRect(0,0,ao,A);var aE=Q.grid;if(aE.show&&!aE.aboveData){C()}for(var aD=0;aD<v.length;++aD){J(q.drawSeries,[I,v[aD]]);aq(v[aD])}J(q.draw,[I]);if(aE.show&&aE.aboveData){C()}}function u(aD,aK){var aG,aJ,aI,aH,aF;aH=af();for(i=0;i<aH.length;++i){aG=aH[i];if(aG.direction==aK){aF=aK+aG.n+"axis";if(!aD[aF]&&aG.n==1){aF=aK+"axis"}if(aD[aF]){aJ=aD[aF].from;aI=aD[aF].to;break}}}if(!aD[aF]){aG=aK=="x"?aw[0]:aa[0];aJ=aD[aK+"1"];aI=aD[aK+"2"]}if(aJ!=null&&aI!=null&&aJ>aI){var aE=aJ;aJ=aI;aI=aE}return{from:aJ,to:aI,axis:aG}}function C(){var aH;I.save();I.translate(O.left,O.top);if(Q.grid.backgroundColor){I.fillStyle=B(Q.grid.backgroundColor,ah,0,"rgba(255, 255, 255, 0)");I.fillRect(0,0,k,ah)}var aJ=Q.grid.markings;if(aJ){if(c.isFunction(aJ)){var aM=g.getAxes();aM.xmin=aM.xaxis.min;aM.xmax=aM.xaxis.max;aM.ymin=aM.yaxis.min;aM.ymax=aM.yaxis.max;aJ=aJ(aM)}for(aH=0;aH<aJ.length;++aH){var aF=aJ[aH],aE=u(aF,"x"),aK=u(aF,"y");if(aE.from==null){aE.from=aE.axis.min}if(aE.to==null){aE.to=aE.axis.max}if(aK.from==null){aK.from=aK.axis.min}if(aK.to==null){aK.to=aK.axis.max}if(aE.to<aE.axis.min||aE.from>aE.axis.max||aK.to<aK.axis.min||aK.from>aK.axis.max){continue}aE.from=Math.max(aE.from,aE.axis.min);aE.to=Math.min(aE.to,aE.axis.max);aK.from=Math.max(aK.from,aK.axis.min);aK.to=Math.min(aK.to,aK.axis.max);if(aE.from==aE.to&&aK.from==aK.to){continue}aE.from=aE.axis.p2c(aE.from);aE.to=aE.axis.p2c(aE.to);aK.from=aK.axis.p2c(aK.from);aK.to=aK.axis.p2c(aK.to);if(aE.from==aE.to||aK.from==aK.to){I.beginPath();I.strokeStyle=aF.color||Q.grid.markingsColor;I.lineWidth=aF.lineWidth||Q.grid.markingsLineWidth;I.moveTo(aE.from,aK.from);I.lineTo(aE.to,aK.to);I.stroke()}else{I.fillStyle=aF.color||Q.grid.markingsColor;I.fillRect(aE.from,aK.to,aE.to-aE.from,aK.from-aK.to)}}}var aM=af(),aO=Q.grid.borderWidth;for(var aG=0;aG<aM.length;++aG){var aD=aM[aG],aI=aD.box,aS=aD.tickLength,aP,aN,aR,aL;I.strokeStyle=aD.options.tickColor||c.color.parse(aD.options.color).scale("a",0.22).toString();I.lineWidth=1;if(aD.direction=="x"){aP=0;if(aS=="full"){aN=(aD.position=="top"?0:ah)}else{aN=aI.top-O.top+(aD.position=="top"?aI.height:0)}}else{aN=0;if(aS=="full"){aP=(aD.position=="left"?0:k)}else{aP=aI.left-O.left+(aD.position=="left"?aI.width:0)}}if(!aD.innermost){I.beginPath();aR=aL=0;if(aD.direction=="x"){aR=k}else{aL=ah}if(I.lineWidth==1){aP=Math.floor(aP)+0.5;aN=Math.floor(aN)+0.5}I.moveTo(aP,aN);I.lineTo(aP+aR,aN+aL);I.stroke()}I.beginPath();for(aH=0;aH<aD.ticks.length;++aH){var aQ=aD.ticks[aH].v;aR=aL=0;if(aQ<aD.min||aQ>aD.max||(aS=="full"&&aO>0&&(aQ==aD.min||aQ==aD.max))){continue}if(aD.direction=="x"){aP=aD.p2c(aQ);aL=aS=="full"?-ah:aS;if(aD.position=="top"){aL=-aL}}else{aN=aD.p2c(aQ);aR=aS=="full"?-k:aS;if(aD.position=="left"){aR=-aR}}if(I.lineWidth==1){if(aD.direction=="x"){aP=Math.floor(aP)+0.5}else{aN=Math.floor(aN)+0.5}}I.moveTo(aP,aN);I.lineTo(aP+aR,aN+aL)}I.stroke()}if(aO){I.lineWidth=aO;I.strokeStyle=Q.grid.borderColor;I.strokeRect(-aO/2,-aO/2,k+aO,ah+aO)}I.restore()}function al(){U.find(".tickLabels").remove();var aI=['<div class="tickLabels" style="font-size:smaller">'];var aL=af();for(var aF=0;aF<aL.length;++aF){var aE=aL[aF],aH=aE.box;aI.push('<div class="'+aE.direction+"Axis "+aE.direction+aE.n+'Axis" style="color:'+aE.options.color+'">');for(var aG=0;aG<aE.ticks.length;++aG){var aJ=aE.ticks[aG];if(!aJ.label||aJ.v<aE.min||aJ.v>aE.max){continue}var aM={},aK;if(aE.direction=="x"){aK="center";aM.left=Math.round(O.left+aE.p2c(aJ.v)-aE.labelWidth/2);if(aE.position=="bottom"){aM.top=aH.top+aH.padding}else{aM.bottom=A-(aH.top+aH.height-aH.padding)}}else{aM.top=Math.round(O.top+aE.p2c(aJ.v)-aE.labelHeight/2);if(aE.position=="left"){aM.right=ao-(aH.left+aH.width-aH.padding);aK="right"}else{aM.left=aH.left+aH.padding;aK="left"}}aM.width=aE.labelWidth;var aD=["position:absolute","text-align:"+aK];for(var aN in aM){aD.push(aN+":"+aM[aN]+"px")}aI.push('<div class="tickLabel" style="'+aD.join(";")+'">'+aJ.label+"</div>")}aI.push("</div>")}aI.push("</div>");U.append(aI.join(""))}function aq(aD){if(aD.lines.show){K(aD)}if(aD.bars.show){X(aD)}if(aD.points.show){Y(aD)}}function K(aG){function aF(aR,aS,aK,aW,aV){var aX=aR.points,aL=aR.pointsize,aP=null,aO=null;I.beginPath();for(var aQ=aL;aQ<aX.length;aQ+=aL){var aN=aX[aQ-aL],aU=aX[aQ-aL+1],aM=aX[aQ],aT=aX[aQ+1];if(aN==null||aM==null){continue}if(aU<=aT&&aU<aV.min){if(aT<aV.min){continue}aN=(aV.min-aU)/(aT-aU)*(aM-aN)+aN;aU=aV.min}else{if(aT<=aU&&aT<aV.min){if(aU<aV.min){continue}aM=(aV.min-aU)/(aT-aU)*(aM-aN)+aN;aT=aV.min}}if(aU>=aT&&aU>aV.max){if(aT>aV.max){continue}aN=(aV.max-aU)/(aT-aU)*(aM-aN)+aN;aU=aV.max}else{if(aT>=aU&&aT>aV.max){if(aU>aV.max){continue}aM=(aV.max-aU)/(aT-aU)*(aM-aN)+aN;aT=aV.max}}if(aN<=aM&&aN<aW.min){if(aM<aW.min){continue}aU=(aW.min-aN)/(aM-aN)*(aT-aU)+aU;aN=aW.min}else{if(aM<=aN&&aM<aW.min){if(aN<aW.min){continue}aT=(aW.min-aN)/(aM-aN)*(aT-aU)+aU;aM=aW.min}}if(aN>=aM&&aN>aW.max){if(aM>aW.max){continue}aU=(aW.max-aN)/(aM-aN)*(aT-aU)+aU;aN=aW.max}else{if(aM>=aN&&aM>aW.max){if(aN>aW.max){continue}aT=(aW.max-aN)/(aM-aN)*(aT-aU)+aU;aM=aW.max}}if(aN!=aP||aU!=aO){I.moveTo(aW.p2c(aN)+aS,aV.p2c(aU)+aK)}aP=aM;aO=aT;I.lineTo(aW.p2c(aM)+aS,aV.p2c(aT)+aK)}I.stroke()}function aH(aK,aS,aR){var aY=aK.points,aX=aK.pointsize,aP=Math.min(Math.max(0,aR.min),aR.max),aZ=0,aW,aV=false,aO=1,aN=0,aT=0;while(true){if(aX>0&&aZ>aY.length+aX){break}aZ+=aX;var a1=aY[aZ-aX],aM=aY[aZ-aX+aO],a0=aY[aZ],aL=aY[aZ+aO];if(aV){if(aX>0&&a1!=null&&a0==null){aT=aZ;aX=-aX;aO=2;continue}if(aX<0&&aZ==aN+aX){I.fill();aV=false;aX=-aX;aO=1;aZ=aN=aT+aX;continue}}if(a1==null||a0==null){continue}if(a1<=a0&&a1<aS.min){if(a0<aS.min){continue}aM=(aS.min-a1)/(a0-a1)*(aL-aM)+aM;a1=aS.min}else{if(a0<=a1&&a0<aS.min){if(a1<aS.min){continue}aL=(aS.min-a1)/(a0-a1)*(aL-aM)+aM;a0=aS.min}}if(a1>=a0&&a1>aS.max){if(a0>aS.max){continue}aM=(aS.max-a1)/(a0-a1)*(aL-aM)+aM;a1=aS.max}else{if(a0>=a1&&a0>aS.max){if(a1>aS.max){continue}aL=(aS.max-a1)/(a0-a1)*(aL-aM)+aM;a0=aS.max}}if(!aV){I.beginPath();I.moveTo(aS.p2c(a1),aR.p2c(aP));aV=true}if(aM>=aR.max&&aL>=aR.max){I.lineTo(aS.p2c(a1),aR.p2c(aR.max));I.lineTo(aS.p2c(a0),aR.p2c(aR.max));continue}else{if(aM<=aR.min&&aL<=aR.min){I.lineTo(aS.p2c(a1),aR.p2c(aR.min));I.lineTo(aS.p2c(a0),aR.p2c(aR.min));continue}}var aQ=a1,aU=a0;if(aM<=aL&&aM<aR.min&&aL>=aR.min){a1=(aR.min-aM)/(aL-aM)*(a0-a1)+a1;aM=aR.min}else{if(aL<=aM&&aL<aR.min&&aM>=aR.min){a0=(aR.min-aM)/(aL-aM)*(a0-a1)+a1;aL=aR.min}}if(aM>=aL&&aM>aR.max&&aL<=aR.max){a1=(aR.max-aM)/(aL-aM)*(a0-a1)+a1;aM=aR.max}else{if(aL>=aM&&aL>aR.max&&aM<=aR.max){a0=(aR.max-aM)/(aL-aM)*(a0-a1)+a1;aL=aR.max}}if(a1!=aQ){I.lineTo(aS.p2c(aQ),aR.p2c(aM))}I.lineTo(aS.p2c(a1),aR.p2c(aM));I.lineTo(aS.p2c(a0),aR.p2c(aL));if(a0!=aU){I.lineTo(aS.p2c(a0),aR.p2c(aL));I.lineTo(aS.p2c(aU),aR.p2c(aL))}}}I.save();I.translate(O.left,O.top);I.lineJoin="round";var aI=aG.lines.lineWidth,aD=aG.shadowSize;if(aI>0&&aD>0){I.lineWidth=aD;I.strokeStyle="rgba(0,0,0,0.1)";var aJ=Math.PI/18;aF(aG.datapoints,Math.sin(aJ)*(aI/2+aD/2),Math.cos(aJ)*(aI/2+aD/2),aG.xaxis,aG.yaxis);I.lineWidth=aD/2;aF(aG.datapoints,Math.sin(aJ)*(aI/2+aD/4),Math.cos(aJ)*(aI/2+aD/4),aG.xaxis,aG.yaxis)}I.lineWidth=aI;I.strokeStyle=aG.color;var aE=F(aG.lines,aG.color,0,ah);if(aE){I.fillStyle=aE;aH(aG.datapoints,aG.xaxis,aG.yaxis)}if(aI>0){aF(aG.datapoints,0,0,aG.xaxis,aG.yaxis)}I.restore()}function Y(aG){function aJ(aP,aO,aW,aM,aU,aV,aS,aL){var aT=aP.points,aK=aP.pointsize;for(var aN=0;aN<aT.length;aN+=aK){var aR=aT[aN],aQ=aT[aN+1];if(aR==null||aR<aV.min||aR>aV.max||aQ<aS.min||aQ>aS.max){continue}I.beginPath();aR=aV.p2c(aR);aQ=aS.p2c(aQ)+aM;if(aL=="circle"){I.arc(aR,aQ,aO,0,aU?Math.PI:Math.PI*2,false)}else{aL(I,aR,aQ,aO,aU)}I.closePath();if(aW){I.fillStyle=aW;I.fill()}I.stroke()}}I.save();I.translate(O.left,O.top);var aI=aG.points.lineWidth,aE=aG.shadowSize,aD=aG.points.radius,aH=aG.points.symbol;if(aI>0&&aE>0){var aF=aE/2;I.lineWidth=aF;I.strokeStyle="rgba(0,0,0,0.1)";aJ(aG.datapoints,aD,null,aF+aF/2,true,aG.xaxis,aG.yaxis,aH);I.strokeStyle="rgba(0,0,0,0.2)";aJ(aG.datapoints,aD,null,aF/2,true,aG.xaxis,aG.yaxis,aH)}I.lineWidth=aI;I.strokeStyle=aG.color;aJ(aG.datapoints,aD,F(aG.points,aG.color),0,false,aG.xaxis,aG.yaxis,aH);I.restore()}function ar(aP,aO,aX,aK,aS,aH,aF,aN,aM,aW,aT,aE){var aG,aV,aL,aR,aI,aD,aQ,aJ,aU;if(aT){aJ=aD=aQ=true;aI=false;aG=aX;aV=aP;aR=aO+aK;aL=aO+aS;if(aV<aG){aU=aV;aV=aG;aG=aU;aI=true;aD=false}}else{aI=aD=aQ=true;aJ=false;aG=aP+aK;aV=aP+aS;aL=aX;aR=aO;if(aR<aL){aU=aR;aR=aL;aL=aU;aJ=true;aQ=false}}if(aV<aN.min||aG>aN.max||aR<aM.min||aL>aM.max){return}if(aG<aN.min){aG=aN.min;aI=false}if(aV>aN.max){aV=aN.max;aD=false}if(aL<aM.min){aL=aM.min;aJ=false}if(aR>aM.max){aR=aM.max;aQ=false}aG=aN.p2c(aG);aL=aM.p2c(aL);aV=aN.p2c(aV);aR=aM.p2c(aR);if(aF){aW.beginPath();aW.moveTo(aG,aL);aW.lineTo(aG,aR);aW.lineTo(aV,aR);aW.lineTo(aV,aL);aW.fillStyle=aF(aL,aR);aW.fill()}if(aE>0&&(aI||aD||aQ||aJ)){aW.beginPath();aW.moveTo(aG,aL+aH);if(aI){aW.lineTo(aG,aR+aH)}else{aW.moveTo(aG,aR+aH)}if(aQ){aW.lineTo(aV,aR+aH)}else{aW.moveTo(aV,aR+aH)}if(aD){aW.lineTo(aV,aL+aH)}else{aW.moveTo(aV,aL+aH)}if(aJ){aW.lineTo(aG,aL+aH)}else{aW.moveTo(aG,aL+aH)}aW.stroke()}}function X(aF){function aE(aL,aK,aN,aI,aM,aP,aO){var aQ=aL.points,aH=aL.pointsize;for(var aJ=0;aJ<aQ.length;aJ+=aH){if(aQ[aJ]==null){continue}ar(aQ[aJ],aQ[aJ+1],aQ[aJ+2],aK,aN,aI,aM,aP,aO,I,aF.bars.horizontal,aF.bars.lineWidth)}}I.save();I.translate(O.left,O.top);I.lineWidth=aF.bars.lineWidth;I.strokeStyle=aF.color;var aD=aF.bars.align=="left"?0:-aF.bars.barWidth/2;var aG=aF.bars.fill?function(aH,aI){return F(aF.bars,aF.color,aH,aI)}:null;aE(aF.datapoints,aD,aD+aF.bars.barWidth,0,aG,aF.xaxis,aF.yaxis);I.restore()}function F(aF,aD,aE,aH){var aG=aF.fill;if(!aG){return null}if(aF.fillColor){return B(aF.fillColor,aE,aH,aD)}var aI=c.color.parse(aD);aI.a=typeof aG=="number"?aG:0.4;aI.normalize();return aI.toString()}function aB(){U.find(".legend").remove();if(!Q.legend.show){return}var aJ=[],aH=false,aP=Q.legend.labelFormatter,aO,aL;for(var aG=0;aG<v.length;++aG){aO=v[aG];aL=aO.label;if(!aL){continue}if(aG%Q.legend.noColumns==0){if(aH){aJ.push("</tr>")}aJ.push("<tr>");aH=true}if(aP){aL=aP(aL,aO)}aJ.push('<td class="legendColorBox"><div style="border:1px solid '+Q.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+aO.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+aL+"</td>")}if(aH){aJ.push("</tr>")}if(aJ.length==0){return}var aN='<table style="font-size:smaller;color:'+Q.grid.color+'">'+aJ.join("")+"</table>";if(Q.legend.container!=null){c(Q.legend.container).html(aN)}else{var aK="",aE=Q.legend.position,aF=Q.legend.margin;if(aF[0]==null){aF=[aF,aF]}if(aE.charAt(0)=="n"){aK+="top:"+(aF[1]+O.top)+"px;"}else{if(aE.charAt(0)=="s"){aK+="bottom:"+(aF[1]+O.bottom)+"px;"}}if(aE.charAt(1)=="e"){aK+="right:"+(aF[0]+O.right)+"px;"}else{if(aE.charAt(1)=="w"){aK+="left:"+(aF[0]+O.left)+"px;"}}var aM=c('<div class="legend">'+aN.replace('style="','style="position:absolute;'+aK+";")+"</div>").appendTo(U);if(Q.legend.backgroundOpacity!=0){var aI=Q.legend.backgroundColor;if(aI==null){aI=Q.grid.backgroundColor;if(aI&&typeof aI=="string"){aI=c.color.parse(aI)}else{aI=c.color.extract(aM,"background-color")}aI.a=1;aI=aI.toString()}var aD=aM.children();c('<div style="position:absolute;width:'+aD.width()+"px;height:"+aD.height()+"px;"+aK+"background-color:"+aI+';"> </div>').prependTo(aM).css("opacity",Q.legend.backgroundOpacity)}}}var am=[],n=null;function ax(aK,aI,aF){var aQ=Q.grid.mouseActiveRadius,a2=aQ*aQ+1,a0=null,aT=false,aY,aW;for(aY=v.length-1;aY>=0;--aY){if(!aF(v[aY])){continue}var aR=v[aY],aJ=aR.xaxis,aH=aR.yaxis,aX=aR.datapoints.points,aV=aR.datapoints.pointsize,aS=aJ.c2p(aK),aP=aH.c2p(aI),aE=aQ/aJ.scale,aD=aQ/aH.scale;if(aR.lines.show||aR.points.show){for(aW=0;aW<aX.length;aW+=aV){var aM=aX[aW],aL=aX[aW+1];if(aM==null){continue}if(aM-aS>aE||aM-aS<-aE||aL-aP>aD||aL-aP<-aD){continue}var aO=Math.abs(aJ.p2c(aM)-aK),aN=Math.abs(aH.p2c(aL)-aI),aU=aO*aO+aN*aN;if(aU<a2){a2=aU;a0=[aY,aW/aV]}}}if(aR.bars.show&&!a0){var aG=aR.bars.align=="left"?0:-aR.bars.barWidth/2,aZ=aG+aR.bars.barWidth;for(aW=0;aW<aX.length;aW+=aV){var aM=aX[aW],aL=aX[aW+1],a1=aX[aW+2];if(aM==null){continue}if(v[aY].bars.horizontal?(aS<=Math.max(a1,aM)&&aS>=Math.min(a1,aM)&&aP>=aL+aG&&aP<=aL+aZ):(aS>=aM+aG&&aS<=aM+aZ&&aP>=Math.min(a1,aL)&&aP<=Math.max(a1,aL))){a0=[aY,aW/aV]}}}}if(a0){aY=a0[0];aW=a0[1];aV=v[aY].datapoints.pointsize;return{datapoint:v[aY].datapoints.points.slice(aW*aV,(aW+1)*aV),dataIndex:aW,series:v[aY],seriesIndex:aY}}return null}function e(aD){if(Q.grid.hoverable){j("plothover",aD,function(aE){return aE.hoverable!=false})}}function N(aD){j("plotclick",aD,function(aE){return aE.clickable!=false})}function j(aE,aD,aF){var aG=au.offset(),aJ=aD.pageX-aG.left-O.left,aH=aD.pageY-aG.top-O.top,aL=ac({left:aJ,top:aH});aL.pageX=aD.pageX;aL.pageY=aD.pageY;var aM=ax(aJ,aH,aF);if(aM){aM.pageX=parseInt(aM.series.xaxis.p2c(aM.datapoint[0])+aG.left+O.left);aM.pageY=parseInt(aM.series.yaxis.p2c(aM.datapoint[1])+aG.top+O.top)}if(Q.grid.autoHighlight){for(var aI=0;aI<am.length;++aI){var aK=am[aI];if(aK.auto==aE&&!(aM&&aK.series==aM.series&&aK.point==aM.datapoint)){an(aK.series,aK.point)}}if(aM){av(aM.series,aM.datapoint,aE)}}U.trigger(aE,[aL,aM])}function ab(){if(!n){n=setTimeout(ak,30)}}function ak(){n=null;aC.save();aC.clearRect(0,0,ao,A);aC.translate(O.left,O.top);var aE,aD;for(aE=0;aE<am.length;++aE){aD=am[aE];if(aD.series.bars.show){ap(aD.series,aD.point)}else{aj(aD.series,aD.point)}}aC.restore();J(q.drawOverlay,[aC])}function av(aF,aD,aH){if(typeof aF=="number"){aF=v[aF]}if(typeof aD=="number"){var aG=aF.datapoints.pointsize;aD=aF.datapoints.points.slice(aG*aD,aG*(aD+1))}var aE=S(aF,aD);if(aE==-1){am.push({series:aF,point:aD,auto:aH});ab()}else{if(!aH){am[aE].auto=false}}}function an(aF,aD){if(aF==null&&aD==null){am=[];ab()}if(typeof aF=="number"){aF=v[aF]}if(typeof aD=="number"){aD=aF.data[aD]}var aE=S(aF,aD);if(aE!=-1){am.splice(aE,1);ab()}}function S(aF,aG){for(var aD=0;aD<am.length;++aD){var aE=am[aD];if(aE.series==aF&&aE.point[0]==aG[0]&&aE.point[1]==aG[1]){return aD}}return -1}function aj(aG,aF){var aE=aF[0],aK=aF[1],aJ=aG.xaxis,aI=aG.yaxis;if(aE<aJ.min||aE>aJ.max||aK<aI.min||aK>aI.max){return}var aH=aG.points.radius+aG.points.lineWidth/2;aC.lineWidth=aH;aC.strokeStyle=c.color.parse(aG.color).scale("a",0.5).toString();var aD=1.5*aH,aE=aJ.p2c(aE),aK=aI.p2c(aK);aC.beginPath();if(aG.points.symbol=="circle"){aC.arc(aE,aK,aD,0,2*Math.PI,false)}else{aG.points.symbol(aC,aE,aK,aD,false)}aC.closePath();aC.stroke()}function ap(aG,aD){aC.lineWidth=aG.bars.lineWidth;aC.strokeStyle=c.color.parse(aG.color).scale("a",0.5).toString();var aF=c.color.parse(aG.color).scale("a",0.5).toString();var aE=aG.bars.align=="left"?0:-aG.bars.barWidth/2;ar(aD[0],aD[1],aD[2]||0,aE,aE+aG.bars.barWidth,0,function(){return aF},aG.xaxis,aG.yaxis,aC,aG.bars.horizontal,aG.bars.lineWidth)}function B(aL,aD,aJ,aE){if(typeof aL=="string"){return aL}else{var aK=I.createLinearGradient(0,aJ,0,aD);for(var aG=0,aF=aL.colors.length;aG<aF;++aG){var aH=aL.colors[aG];if(typeof aH!="string"){var aI=c.color.parse(aE);if(aH.brightness!=null){aI=aI.scale("rgb",aH.brightness)}if(aH.opacity!=null){aI.a*=aH.opacity}aH=aI.toString()}aK.addColorStop(aG/(aF-1),aH)}return aK}}}c.plot=function(j,f,e){var g=new b(c(j),f,e,c.plot.plugins);return g};c.plot.plugins=[];c.plot.formatDate=function(o,f,j){var t=function(v){v=""+v;return v.length==1?"0"+v:v};var e=[];var u=false,k=false;var q=o.getUTCHours();var n=q<12;if(j==null){j=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}if(f.search(/%p|%P/)!=-1){if(q>12){q=q-12}else{if(q==0){q=12}}}for(var g=0;g<f.length;++g){var p=f.charAt(g);if(u){switch(p){case"h":p=""+q;break;case"H":p=t(q);break;case"M":p=t(o.getUTCMinutes());break;case"S":p=t(o.getUTCSeconds());break;case"d":p=""+o.getUTCDate();break;case"m":p=""+(o.getUTCMonth()+1);break;case"y":p=""+o.getUTCFullYear();break;case"b":p=""+j[o.getUTCMonth()];break;case"p":p=(n)?("am"):("pm");break;case"P":p=(n)?("AM"):("PM");break;case"0":p="";k=true;break}if(p&&k){p=t(p);k=false}e.push(p);if(!k){u=false}}else{if(p=="%"){u=true}else{e.push(p)}}}return e.join("")};function a(f,e){return e*Math.floor(f/e)}})(jQuery);(function(b){var a={crosshair:{mode:null,color:"rgba(170, 0, 0, 0.80)",lineWidth:1}};function c(j){var k={x:-1,y:-1,locked:false};j.setCrosshair=function e(p){if(!p){k.x=-1}else{var n=j.p2c(p);k.x=Math.max(0,Math.min(n.left,j.width()));k.y=Math.max(0,Math.min(n.top,j.height()))}j.triggerRedrawOverlay()};j.clearCrosshair=j.setCrosshair;j.lockCrosshair=function f(n){if(n){j.setCrosshair(n)}k.locked=true};j.unlockCrosshair=function g(){k.locked=false};j.hooks.bindEvents.push(function(o,n){if(!o.getOptions().crosshair.mode){return}n.mouseout(function(){if(k.locked){return}if(k.x!=-1){k.x=-1;o.triggerRedrawOverlay()}});n.mousemove(function(p){if(k.locked){return}if(o.getSelection&&o.getSelection()){k.x=-1;return}var q=o.offset();k.x=Math.max(0,Math.min(p.pageX-q.left,o.width()));k.y=Math.max(0,Math.min(p.pageY-q.top,o.height()));o.triggerRedrawOverlay()})});j.hooks.drawOverlay.push(function(p,n){var q=p.getOptions().crosshair;if(!q.mode){return}var o=p.getPlotOffset();n.save();n.translate(o.left,o.top);if(k.x!=-1){n.strokeStyle=q.color;n.lineWidth=q.lineWidth;n.lineJoin="round";n.beginPath();if(q.mode.indexOf("x")!=-1){n.moveTo(k.x,0);n.lineTo(k.x,p.height())}if(q.mode.indexOf("y")!=-1){n.moveTo(0,k.y);n.lineTo(p.width(),k.y)}n.stroke()}n.restore()})}b.plot.plugins.push({init:c,options:a,name:"crosshair",version:"1.0"})})(jQuery);(function(b){var a={series:{fillBetween:null}};function c(g){function e(n,k){var j;for(j=0;j<k.length;++j){if(k[j].id==n.fillBetween){return k[j]}}if(typeof n.fillBetween=="number"){j=n.fillBetween;if(j<0||j>=k.length){return null}return k[j]}return null}function f(G,z,k){if(z.fillBetween==null){return}var t=e(z,G.getData());if(!t){return}var D=k.pointsize,J=k.points,n=t.datapoints.pointsize,C=t.datapoints.points,v=[],B,A,o,L,K,u,w=z.lines.show,q=D>2&&k.format[2].y,p=w&&z.lines.steps,I=true,H=0,F=0,E;while(true){if(H>=J.length){break}E=v.length;if(J[H]==null){for(m=0;m<D;++m){v.push(J[H+m])}H+=D}else{if(F>=C.length){if(!w){for(m=0;m<D;++m){v.push(J[H+m])}}H+=D}else{if(C[F]==null){for(m=0;m<D;++m){v.push(null)}I=true;F+=n}else{B=J[H];A=J[H+1];L=C[F];K=C[F+1];u=0;if(B==L){for(m=0;m<D;++m){v.push(J[H+m])}u=K;H+=D;F+=n}else{if(B>L){if(w&&H>0&&J[H-D]!=null){o=A+(J[H-D+1]-A)*(L-B)/(J[H-D]-B);v.push(L);v.push(o);for(m=2;m<D;++m){v.push(J[H+m])}u=K}F+=n}else{if(I&&w){H+=D;continue}for(m=0;m<D;++m){v.push(J[H+m])}if(w&&F>0&&C[F-n]!=null){u=K+(C[F-n+1]-K)*(B-L)/(C[F-n]-L)}H+=D}}I=false;if(E!=v.length&&q){v[E+2]=u}}}}if(p&&E!=v.length&&E>0&&v[E]!=null&&v[E]!=v[E-D]&&v[E+1]!=v[E-D+1]){for(m=0;m<D;++m){v[E+D+m]=v[E+m]}v[E+1]=v[E-D+1]}}k.points=v}g.hooks.processDatapoints.push(f)}b.plot.plugins.push({init:c,options:a,name:"fillbetween",version:"1.0"})})(jQuery);(function(c){var a={series:{images:{show:false,alpha:1,anchor:"corner"}}};c.plot.image={};c.plot.image.loadDataImages=function(j,g,p){var o=[],k=[];var n=g.series.images.show;c.each(j,function(q,t){if(!(n||t.images.show)){return}if(t.data){t=t.data}c.each(t,function(u,v){if(typeof v[0]=="string"){o.push(v[0]);k.push(v)}})});c.plot.image.load(o,function(q){c.each(k,function(u,v){var t=v[0];if(q[t]){v[0]=q[t]}});p()})};c.plot.image.load=function(k,n){var j=k.length,g={};if(j==0){n({})}c.each(k,function(p,o){var q=function(){--j;g[o]=this;if(j==0){n(g)}};c("<img />").load(q).error(q).attr("src",o)})};function e(w,u,p){var q=w.getPlotOffset();if(!p.images||!p.images.show){return}var z=p.datapoints.points,t=p.datapoints.pointsize;for(var B=0;B<z.length;B+=t){var G=z[B],E=z[B+1],j=z[B+2],D=z[B+3],g=z[B+4],k=p.xaxis,C=p.yaxis,F;if(!G||G.width<=0||G.height<=0){continue}if(E>D){F=D;D=E;E=F}if(j>g){F=g;g=j;j=F}if(p.images.anchor=="center"){F=0.5*(D-E)/(G.width-1);E-=F;D+=F;F=0.5*(g-j)/(G.height-1);j-=F;g+=F}if(E==D||j==g||E>=k.max||D<=k.min||j>=C.max||g<=C.min){continue}var o=0,A=0,n=G.width,v=G.height;if(E<k.min){o+=(n-o)*(k.min-E)/(D-E);E=k.min}if(D>k.max){n+=(n-o)*(k.max-D)/(D-E);D=k.max}if(j<C.min){v+=(A-v)*(C.min-j)/(g-j);j=C.min}if(g>C.max){A+=(A-v)*(C.max-g)/(g-j);g=C.max}E=k.p2c(E);D=k.p2c(D);j=C.p2c(j);g=C.p2c(g);if(E>D){F=D;D=E;E=F}if(j>g){F=g;g=j;j=F}F=u.globalAlpha;u.globalAlpha*=p.images.alpha;u.drawImage(G,o,A,n-o,v-A,E+q.left,j+q.top,D-E,g-j);u.globalAlpha=F}}function b(n,g,j,k){if(!g.images.show){return}k.format=[{required:true},{x:true,number:true,required:true},{y:true,number:true,required:true},{x:true,number:true,required:true},{y:true,number:true,required:true}]}function f(g){g.hooks.processRawData.push(b);g.hooks.drawSeries.push(e)}c.plot.plugins.push({init:f,options:a,name:"image",version:"1.1"})})(jQuery);(function(n){n.fn.drag=function(o,p,q){if(p){this.bind("dragstart",o)}if(q){this.bind("dragend",q)}return !o?this.trigger("drag"):this.bind("drag",p?p:o)};var e=n.event,c=e.special,k=c.drag={not:":input",distance:0,which:1,dragging:false,setup:function(o){o=n.extend({distance:k.distance,which:k.which,not:k.not},o||{});o.distance=f(o.distance);e.add(this,"mousedown",g,o);if(this.attachEvent){this.attachEvent("ondragstart",a)}},teardown:function(){e.remove(this,"mousedown",g);if(this===k.dragging){k.dragging=k.proxy=false}j(this,true);if(this.detachEvent){this.detachEvent("ondragstart",a)}}};c.dragstart=c.dragend={setup:function(){},teardown:function(){}};function g(o){var p=this,q,t=o.data||{};if(t.elem){p=o.dragTarget=t.elem;o.dragProxy=k.proxy||p;o.cursorOffsetX=t.pageX-t.left;o.cursorOffsetY=t.pageY-t.top;o.offsetX=o.pageX-o.cursorOffsetX;o.offsetY=o.pageY-o.cursorOffsetY}else{if(k.dragging||(t.which>0&&o.which!=t.which)||n(o.target).is(t.not)){return}}switch(o.type){case"mousedown":n.extend(t,n(p).offset(),{elem:p,target:o.target,pageX:o.pageX,pageY:o.pageY});e.add(document,"mousemove mouseup",g,t);j(p,false);k.dragging=null;return false;case !k.dragging&&"mousemove":if(f(o.pageX-t.pageX)+f(o.pageY-t.pageY)<t.distance){break}o.target=t.target;q=b(o,"dragstart",p);if(q!==false){k.dragging=p;k.proxy=o.dragProxy=n(q||p)[0]}case"mousemove":if(k.dragging){q=b(o,"drag",p);if(c.drop){c.drop.allowed=(q!==false);c.drop.handler(o)}if(q!==false){break}o.type="mouseup"}case"mouseup":e.remove(document,"mousemove mouseup",g);if(k.dragging){if(c.drop){c.drop.handler(o)}b(o,"dragend",p)}j(p,true);k.dragging=k.proxy=t.elem=false;break}return true}function b(t,p,o){t.type=p;var q=n.event.handle.call(o,t);return q===false?false:q||t.result}function f(o){return Math.pow(o,2)}function a(){return(k.dragging===false)}function j(o,p){if(!o){return}o.unselectable=p?"off":"on";o.onselectstart=function(){return p};if(o.style){o.style.MozUserSelect=p?"":"none"}}})(jQuery);(function(g){var f=["DOMMouseScroll","mousewheel"];g.event.special.mousewheel={setup:function(){if(this.addEventListener){for(var a=f.length;a;){this.addEventListener(f[--a],e,false)}}else{this.onmousewheel=e}},teardown:function(){if(this.removeEventListener){for(var a=f.length;a;){this.removeEventListener(f[--a],e,false)}}else{this.onmousewheel=null}}};g.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}});function e(b){var j=[].slice.call(arguments,1),a=0,c=true;b=g.event.fix(b||window.event);b.type="mousewheel";if(b.wheelDelta){a=b.wheelDelta/120}if(b.detail){a=-b.detail/3}j.unshift(b,a);return g.event.handle.apply(this,j)}})(jQuery);(function(b){var a={xaxis:{zoomRange:null,panRange:null},zoom:{interactive:false,trigger:"dblclick",amount:1.5},pan:{interactive:false,frameRate:20}};function c(e){function f(p,g){var q=p.getOptions();if(q.zoom.interactive){function u(v,o){var w=p.offset();w.left=v.pageX-w.left;w.top=v.pageY-w.top;if(o){p.zoomOut({center:w})}else{p.zoom({center:w})}}g[q.zoom.trigger](u);g.mousewheel(function(o,v){u(o,v<0);return false})}if(q.pan.interactive){var n="default",k=0,j=0,t=null;g.bind("dragstart",{distance:10},function(o){if(o.which!=1){return false}eventHolderCursor=g.css("cursor");g.css("cursor","move");k=o.pageX;j=o.pageY});g.bind("drag",function(o){if(t||!q.pan.frameRate){return}t=setTimeout(function(){p.pan({left:k-o.pageX,top:j-o.pageY});k=o.pageX;j=o.pageY;t=null},1/q.pan.frameRate*1000)});g.bind("dragend",function(o){if(t){clearTimeout(t);t=null}g.css("cursor",n);p.pan({left:k-o.pageX,top:j-o.pageY})})}}e.zoomOut=function(g){if(!g){g={}}if(!g.amount){g.amount=e.getOptions().zoom.amount}g.amount=1/g.amount;e.zoom(g)};e.zoom=function(j){if(!j){j={}}var t=j.center,k=j.amount||e.getOptions().zoom.amount,g=e.width(),o=e.height();if(!t){t={left:g/2,top:o/2}}var n=t.left/g,q=t.top/o,p={x:{min:t.left-n*g/k,max:t.left+(1-n)*g/k},y:{min:t.top-q*o/k,max:t.top+(1-q)*o/k}};b.each(e.getUsedAxes(),function(A,B){var C=B.options,z=p[B.direction].min,u=p[B.direction].max;z=B.c2p(z);u=B.c2p(u);if(z>u){var w=z;z=u;u=w}var v=u-z,D=C.zoomRange;if(D&&((D[0]!=null&&v<D[0])||(D[1]!=null&&v>D[1]))){return}C.min=z;C.max=u});e.setupGrid();e.draw();if(!j.preventEvent){e.getPlaceholder().trigger("plotzoom",[e])}};e.pan=function(g){var j={x:+g.left,y:+g.top};if(isNaN(j.x)){j.x=0}if(isNaN(j.y)){j.y=0}b.each(e.getUsedAxes(),function(o,p){var q=p.options,n,k,t=j[p.direction];n=p.c2p(p.p2c(p.min)+t),k=p.c2p(p.p2c(p.max)+t);var u=q.panRange;if(u){if(u[0]!=null&&u[0]>n){t=u[0]-n;n+=t;k+=t}if(u[1]!=null&&u[1]<k){t=u[1]-k;n+=t;k+=t}}q.min=n;q.max=k});e.setupGrid();e.draw();if(!g.preventEvent){e.getPlaceholder().trigger("plotpan",[e])}};e.hooks.bindEvents.push(f)}b.plot.plugins.push({init:c,options:a,name:"navigate",version:"1.2"})})(jQuery);(function(b){function c(J){var k=null;var R=null;var t=null;var H=null;var v=null;var S=0;var L=true;var u=10;var E=0.95;var G=0;var e=false;var F=false;var n=[];J.hooks.processOptions.push(j);J.hooks.bindEvents.push(f);function j(U,T){if(T.series.pie.show){T.grid.show=false;if(T.series.pie.label.show=="auto"){if(T.legend.show){T.series.pie.label.show=false}else{T.series.pie.label.show=true}}if(T.series.pie.radius=="auto"){if(T.series.pie.label.show){T.series.pie.radius=3/4}else{T.series.pie.radius=1}}if(T.series.pie.tilt>1){T.series.pie.tilt=1}if(T.series.pie.tilt<0){T.series.pie.tilt=0}U.hooks.processDatapoints.push(K);U.hooks.drawOverlay.push(N);U.hooks.draw.push(z)}}function f(V,T){var U=V.getOptions();if(U.series.pie.show&&U.grid.hoverable){T.unbind("mousemove").mousemove(B)}if(U.series.pie.show&&U.grid.clickable){T.unbind("click").click(p)}}function M(U){var V="";function T(Y,Z){if(!Z){Z=0}for(var X=0;X<Y.length;++X){for(var W=0;W<Z;W++){V+="\t"}if(typeof Y[X]=="object"){V+=""+X+":\n";T(Y[X],Z+1)}else{V+=""+X+": "+Y[X]+"\n"}}}T(U);alert(V)}function w(V){for(var T=0;T<V.length;++T){var U=parseFloat(V[T].data[0][1]);if(U){S+=U}}}function K(W,T,U,V){if(!e){e=true;k=W.getCanvas();R=b(k).parent();a=W.getOptions();W.setData(Q(W.getData()))}}function O(){G=R.children().filter(".legend").children().width();t=Math.min(k.width,(k.height/a.series.pie.tilt))/2;v=(k.height/2)+a.series.pie.offset.top;H=(k.width/2);if(a.series.pie.offset.left=="auto"){if(a.legend.position.match("w")){H+=G/2}else{H-=G/2}}else{H+=a.series.pie.offset.left}if(H<t){H=t}else{if(H>k.width-t){H=k.width-t}}}function D(U){for(var T=0;T<U.length;++T){if(typeof(U[T].data)=="number"){U[T].data=[[1,U[T].data]]}else{if(typeof(U[T].data)=="undefined"||typeof(U[T].data[0])=="undefined"){if(typeof(U[T].data)!="undefined"&&typeof(U[T].data.label)!="undefined"){U[T].label=U[T].data.label}U[T].data=[[1,0]]}}}return U}function Q(W){W=D(W);w(W);var V=0;var Y=0;var T=a.series.pie.combine.color;var X=[];for(var U=0;U<W.length;++U){W[U].data[0][1]=parseFloat(W[U].data[0][1]);if(!W[U].data[0][1]){W[U].data[0][1]=0}if(W[U].data[0][1]/S<=a.series.pie.combine.threshold){V+=W[U].data[0][1];Y++;if(!T){T=W[U].color}}else{X.push({data:[[1,W[U].data[0][1]]],color:W[U].color,label:W[U].label,angle:(W[U].data[0][1]*(Math.PI*2))/S,percent:(W[U].data[0][1]/S*100)})}}if(Y>0){X.push({data:[[1,V]],color:T,label:a.series.pie.combine.label,angle:(V*(Math.PI*2))/S,percent:(V/S*100)})}return X}function z(Y,W){if(!R){return}ctx=W;O();var Z=Y.getData();var V=0;while(L&&V<u){L=false;if(V>0){t*=E}V+=1;T();if(a.series.pie.tilt<=0.8){U()}X()}if(V>=u){T();R.prepend('<div class="error">Could not draw pie with labels contained inside canvas</div>')}if(Y.setSeries&&Y.insertLegend){Y.setSeries(Z);Y.insertLegend()}function T(){ctx.clearRect(0,0,k.width,k.height);R.children().filter(".pieLabel, .pieLabelBackground").remove()}function U(){var af=5;var ae=15;var ac=10;var ad=0.02;if(a.series.pie.radius>1){var aa=a.series.pie.radius}else{var aa=t*a.series.pie.radius}if(aa>=(k.width/2)-af||aa*a.series.pie.tilt>=(k.height/2)-ae||aa<=ac){return}ctx.save();ctx.translate(af,ae);ctx.globalAlpha=ad;ctx.fillStyle="#000";ctx.translate(H,v);ctx.scale(1,a.series.pie.tilt);for(var ab=1;ab<=ac;ab++){ctx.beginPath();ctx.arc(0,0,aa,0,Math.PI*2,false);ctx.fill();aa-=ab}ctx.restore()}function X(){startAngle=Math.PI*a.series.pie.startAngle;if(a.series.pie.radius>1){var aa=a.series.pie.radius}else{var aa=t*a.series.pie.radius}ctx.save();ctx.translate(H,v);ctx.scale(1,a.series.pie.tilt);ctx.save();var ae=startAngle;for(var ac=0;ac<Z.length;++ac){Z[ac].startAngle=ae;ad(Z[ac].angle,Z[ac].color,true)}ctx.restore();ctx.save();ctx.lineWidth=a.series.pie.stroke.width;ae=startAngle;for(var ac=0;ac<Z.length;++ac){ad(Z[ac].angle,a.series.pie.stroke.color,false)}ctx.restore();P(ctx);if(a.series.pie.label.show){ab()}ctx.restore();function ad(ah,af,ag){if(ah<=0){return}if(ag){ctx.fillStyle=af}else{ctx.strokeStyle=af;ctx.lineJoin="round"}ctx.beginPath();if(ah!=Math.PI*2){ctx.moveTo(0,0)}else{if(b.browser.msie){ah-=0.0001}}ctx.arc(0,0,aa,ae,ae+ah,false);ctx.closePath();ae+=ah;if(ag){ctx.fill()}else{ctx.stroke()}}function ab(){var ai=startAngle;if(a.series.pie.label.radius>1){var af=a.series.pie.label.radius}else{var af=t*a.series.pie.label.radius}for(var ah=0;ah<Z.length;++ah){if(Z[ah].percent>=a.series.pie.label.threshold*100){ag(Z[ah],ai,ah)}ai+=Z[ah].angle}function ag(aw,ao,am){if(aw.data[0][1]==0){return}var ay=a.legend.labelFormatter,ax,ak=a.series.pie.label.formatter;if(ay){ax=ay(aw.label,aw)}else{ax=aw.label}if(ak){ax=ak(ax,aw)}var ap=((ao+aw.angle)+ao)/2;var av=H+Math.round(Math.cos(ap)*af);var at=v+Math.round(Math.sin(ap)*af)*a.series.pie.tilt;var al='<span class="pieLabel" id="pieLabel'+am+'" style="position:absolute;top:'+at+"px;left:"+av+'px;">'+ax+"</span>";R.append(al);var au=R.children("#pieLabel"+am);var aj=(at-au.height()/2);var an=(av-au.width()/2);au.css("top",aj);au.css("left",an);if(0-aj>0||0-an>0||k.height-(aj+au.height())<0||k.width-(an+au.width())<0){L=true}if(a.series.pie.label.background.opacity!=0){var aq=a.series.pie.label.background.color;if(aq==null){aq=aw.color}var ar="top:"+aj+"px;left:"+an+"px;";b('<div class="pieLabelBackground" style="position:absolute;width:'+au.width()+"px;height:"+au.height()+"px;"+ar+"background-color:"+aq+';"> </div>').insertBefore(au).css("opacity",a.series.pie.label.background.opacity)}}}}}function P(T){if(a.series.pie.innerRadius>0){T.save();innerRadius=a.series.pie.innerRadius>1?a.series.pie.innerRadius:t*a.series.pie.innerRadius;T.globalCompositeOperation="destination-out";T.beginPath();T.fillStyle=a.series.pie.stroke.color;T.arc(0,0,innerRadius,0,Math.PI*2,false);T.fill();T.closePath();T.restore();T.save();T.beginPath();T.strokeStyle=a.series.pie.stroke.color;T.arc(0,0,innerRadius,0,Math.PI*2,false);T.stroke();T.closePath();T.restore()}}function A(W,X){for(var Y=false,V=-1,T=W.length,U=T-1;++V<T;U=V){((W[V][1]<=X[1]&&X[1]<W[U][1])||(W[U][1]<=X[1]&&X[1]<W[V][1]))&&(X[0]<(W[U][0]-W[V][0])*(X[1]-W[V][1])/(W[U][1]-W[V][1])+W[V][0])&&(Y=!Y)}return Y}function C(X,V){var Z=J.getData(),U=J.getOptions(),T=U.series.pie.radius>1?U.series.pie.radius:t*U.series.pie.radius;for(var W=0;W<Z.length;++W){var Y=Z[W];if(Y.pie.show){ctx.save();ctx.beginPath();ctx.moveTo(0,0);ctx.arc(0,0,T,Y.startAngle,Y.startAngle+Y.angle,false);ctx.closePath();x=X-H;y=V-v;if(ctx.isPointInPath){if(ctx.isPointInPath(X-H,V-v)){ctx.restore();return{datapoint:[Y.percent,Y.data],dataIndex:0,series:Y,seriesIndex:W}}}else{p1X=(T*Math.cos(Y.startAngle));p1Y=(T*Math.sin(Y.startAngle));p2X=(T*Math.cos(Y.startAngle+(Y.angle/4)));p2Y=(T*Math.sin(Y.startAngle+(Y.angle/4)));p3X=(T*Math.cos(Y.startAngle+(Y.angle/2)));p3Y=(T*Math.sin(Y.startAngle+(Y.angle/2)));p4X=(T*Math.cos(Y.startAngle+(Y.angle/1.5)));p4Y=(T*Math.sin(Y.startAngle+(Y.angle/1.5)));p5X=(T*Math.cos(Y.startAngle+Y.angle));p5Y=(T*Math.sin(Y.startAngle+Y.angle));arrPoly=[[0,0],[p1X,p1Y],[p2X,p2Y],[p3X,p3Y],[p4X,p4Y],[p5X,p5Y]];arrPoint=[x,y];if(A(arrPoly,arrPoint)){ctx.restore();return{datapoint:[Y.percent,Y.data],dataIndex:0,series:Y,seriesIndex:W}}}ctx.restore()}}return null}function B(T){q("plothover",T)}function p(T){q("plotclick",T)}function q(T,Z){var U=J.offset(),X=parseInt(Z.pageX-U.left),V=parseInt(Z.pageY-U.top),ab=C(X,V);if(a.grid.autoHighlight){for(var W=0;W<n.length;++W){var Y=n[W];if(Y.auto==T&&!(ab&&Y.series==ab.series)){g(Y.series)}}}if(!ab){return}o(ab.series,T);var aa={pageX:Z.pageX,pageY:Z.pageY};R.trigger(T,[aa,ab])}function o(U,V){if(typeof U=="number"){U=series[U]}var T=I(U);if(T==-1){n.push({series:U,auto:V});J.triggerRedrawOverlay()}else{if(!V){n[T].auto=false}}}function g(U){if(U==null){n=[];J.triggerRedrawOverlay()}if(typeof U=="number"){U=series[U]}var T=I(U);if(T!=-1){n.splice(T,1);J.triggerRedrawOverlay()}}function I(V){for(var T=0;T<n.length;++T){var U=n[T];if(U.series==V){return T}}return -1}function N(W,X){var V=W.getOptions();var T=V.series.pie.radius>1?V.series.pie.radius:t*V.series.pie.radius;X.save();X.translate(H,v);X.scale(1,V.series.pie.tilt);for(i=0;i<n.length;++i){U(n[i].series)}P(X);X.restore();function U(Y){if(Y.angle<0){return}X.fillStyle="rgba(255, 255, 255, "+V.series.pie.highlight.opacity+")";X.beginPath();if(Y.angle!=Math.PI*2){X.moveTo(0,0)}X.arc(0,0,T,Y.startAngle,Y.startAngle+Y.angle,false);X.closePath();X.fill()}}}var a={series:{pie:{show:false,radius:"auto",innerRadius:0,startAngle:3/2,tilt:1,offset:{top:0,left:"auto"},stroke:{color:"#FFF",width:1},label:{show:"auto",formatter:function(e,f){return'<div style="font-size:x-small;text-align:center;padding:2px;color:'+f.color+';">'+e+"<br/>"+Math.round(f.percent)+"%</div>"},radius:1,background:{color:null,opacity:0},threshold:0},combine:{threshold:-1,color:null,label:"Other"},highlight:{opacity:0.5}}}};b.plot.plugins.push({init:c,options:a,name:"pie",version:"1.0"})})(jQuery);(function(a){function b(p){var w={first:{x:-1,y:-1},second:{x:-1,y:-1},show:false,active:false};var t={};function f(A){if(w.active){p.getPlaceholder().trigger("plotselecting",[j()]);q(A)}}function u(A){if(A.which!=1){return}document.body.focus();if(document.onselectstart!==undefined&&t.onselectstart==null){t.onselectstart=document.onselectstart;document.onselectstart=function(){return false}}if(document.ondrag!==undefined&&t.ondrag==null){t.ondrag=document.ondrag;document.ondrag=function(){return false}}e(w.first,A);w.active=true;a(document).one("mouseup",o)}function o(A){if(document.onselectstart!==undefined){document.onselectstart=t.onselectstart}if(document.ondrag!==undefined){document.ondrag=t.ondrag}w.active=false;q(A);if(g()){n()}else{p.getPlaceholder().trigger("plotunselected",[]);p.getPlaceholder().trigger("plotselecting",[null])}return false}function j(){if(!g()){return null}var C={},B=w.first,A=w.second;a.each(p.getAxes(),function(D,E){if(E.used){var G=E.c2p(B[E.direction]),F=E.c2p(A[E.direction]);C[D]={from:Math.min(G,F),to:Math.max(G,F)}}});return C}function n(){var A=j();p.getPlaceholder().trigger("plotselected",[A]);if(A.xaxis&&A.yaxis){p.getPlaceholder().trigger("selected",[{x1:A.xaxis.from,y1:A.yaxis.from,x2:A.xaxis.to,y2:A.yaxis.to}])}}function k(B,C,A){return C<B?B:(C>A?A:C)}function e(E,B){var D=p.getOptions();var C=p.getPlaceholder().offset();var A=p.getPlotOffset();E.x=k(0,B.pageX-C.left-A.left,p.width());E.y=k(0,B.pageY-C.top-A.top,p.height());if(D.selection.mode=="y"){E.x=E==w.first?0:p.width()}if(D.selection.mode=="x"){E.y=E==w.first?0:p.height()}}function q(A){if(A.pageX==null){return}e(w.second,A);if(g()){w.show=true;p.triggerRedrawOverlay()}else{z(true)}}function z(A){if(w.show){w.show=false;p.triggerRedrawOverlay();if(!A){p.getPlaceholder().trigger("plotunselected",[])}}}function c(A,H){var D,G,F,E,C;E=p.getUsedAxes();for(i=0;i<E.length;++i){D=E[i];if(D.direction==H){C=H+D.n+"axis";if(!A[C]&&D.n==1){C=H+"axis"}if(A[C]){G=A[C].from;F=A[C].to;break}}}if(!A[C]){D=H=="x"?p.getXAxes()[0]:p.getYAxes()[0];G=A[H+"1"];F=A[H+"2"]}if(G!=null&&F!=null&&G>F){var B=G;G=F;F=B}return{from:G,to:F,axis:D}}function v(B,A){var D,C,E=p.getOptions();if(E.selection.mode=="y"){w.first.x=0;w.second.x=p.width()}else{C=c(B,"x");w.first.x=C.axis.p2c(C.from);w.second.x=C.axis.p2c(C.to)}if(E.selection.mode=="x"){w.first.y=0;w.second.y=p.height()}else{C=c(B,"y");w.first.y=C.axis.p2c(C.from);w.second.y=C.axis.p2c(C.to)}w.show=true;p.triggerRedrawOverlay();if(!A&&g()){n()}}function g(){var A=5;return Math.abs(w.second.x-w.first.x)>=A&&Math.abs(w.second.y-w.first.y)>=A}p.clearSelection=z;p.setSelection=v;p.getSelection=j;p.hooks.bindEvents.push(function(B,A){var C=B.getOptions();if(C.selection.mode!=null){A.mousemove(f)}if(C.selection.mode!=null){A.mousedown(u)}});p.hooks.drawOverlay.push(function(D,I){if(w.show&&g()){var B=D.getPlotOffset();var A=D.getOptions();I.save();I.translate(B.left,B.top);var E=a.color.parse(A.selection.color);I.strokeStyle=E.scale("a",0.8).toString();I.lineWidth=1;I.lineJoin="round";I.fillStyle=E.scale("a",0.4).toString();var G=Math.min(w.first.x,w.second.x),F=Math.min(w.first.y,w.second.y),H=Math.abs(w.second.x-w.first.x),C=Math.abs(w.second.y-w.first.y);I.fillRect(G,F,H,C);I.strokeRect(G,F,H,C);I.restore()}})}a.plot.plugins.push({init:b,options:{selection:{mode:null,color:"#e8cfac"}},name:"selection",version:"1.0"})})(jQuery);(function(b){var a={series:{stack:null}};function c(g){function e(o,n){var k=null;for(var j=0;j<n.length;++j){if(o==n[j]){break}if(n[j].stack==o.stack){k=n[j]}}return k}function f(H,A,k){if(A.stack==null){return}var t=e(A,H.getData());if(!t){return}var E=k.pointsize,K=k.points,n=t.datapoints.pointsize,D=t.datapoints.points,w=[],C,B,o,O,N,v,z=A.lines.show,L=A.bars.horizontal,q=E>2&&(L?k.format[2].x:k.format[2].y),p=z&&A.lines.steps,J=true,u=L?1:0,M=L?0:1,I=0,G=0,F;while(true){if(I>=K.length){break}F=w.length;if(K[I]==null){for(m=0;m<E;++m){w.push(K[I+m])}I+=E}else{if(G>=D.length){if(!z){for(m=0;m<E;++m){w.push(K[I+m])}}I+=E}else{if(D[G]==null){for(m=0;m<E;++m){w.push(null)}J=true;G+=n}else{C=K[I+u];B=K[I+M];O=D[G+u];N=D[G+M];v=0;if(C==O){for(m=0;m<E;++m){w.push(K[I+m])}w[F+M]+=N;v=N;I+=E;G+=n}else{if(C>O){if(z&&I>0&&K[I-E]!=null){o=B+(K[I-E+M]-B)*(O-C)/(K[I-E+u]-C);w.push(O);w.push(o+N);for(m=2;m<E;++m){w.push(K[I+m])}v=N}G+=n}else{if(J&&z){I+=E;continue}for(m=0;m<E;++m){w.push(K[I+m])}if(z&&G>0&&D[G-n]!=null){v=N+(D[G-n+M]-N)*(C-O)/(D[G-n+u]-O)}w[F+M]+=v;I+=E}}J=false;if(F!=w.length&&q){w[F+2]+=v}}}}if(p&&F!=w.length&&F>0&&w[F]!=null&&w[F]!=w[F-E]&&w[F+1]!=w[F-E+1]){for(m=0;m<E;++m){w[F+E+m]=w[F+m]}w[F+1]=w[F-E+1]}}k.points=w}g.hooks.processDatapoints.push(f)}b.plot.plugins.push({init:c,options:a,name:"stack",version:"1.2"})})(jQuery);(function(b){var a={series:{threshold:null}};function c(e){function f(t,C,u){if(!C.threshold){return}var g=u.pointsize,n,w,v,j,q,k=b.extend({},C);k.datapoints={points:[],pointsize:g};k.label=null;k.color=C.threshold.color;k.threshold=null;k.originSeries=C;k.data=[];var z=C.threshold.below,A=u.points,B=C.lines.show;threspoints=[];newpoints=[];for(n=0;n<A.length;n+=g){w=A[n];v=A[n+1];q=j;if(v<z){j=threspoints}else{j=newpoints}if(B&&q!=j&&w!=null&&n>0&&A[n-g]!=null){var o=(w-A[n-g])/(v-A[n-g+1])*(z-v)+w;q.push(o);q.push(z);for(m=2;m<g;++m){q.push(A[n+m])}j.push(null);j.push(null);for(m=2;m<g;++m){j.push(A[n+m])}j.push(o);j.push(z);for(m=2;m<g;++m){j.push(A[n+m])}}j.push(w);j.push(v)}u.points=newpoints;k.datapoints.points=threspoints;if(k.datapoints.points.length>0){t.getData().push(k)}}e.hooks.processDatapoints.push(f)}b.plot.plugins.push({init:c,options:a,name:"threshold",version:"1.0"})})(jQuery);sc_require("excanvas.js");sc_require("jquery.flot.js");sc_require("jquery.flot.crosshair.js");sc_require("jquery.flot.fillbetween.js");sc_require("jquery.flot.image.js");sc_require("jquery.flot.navigate.js");sc_require("jquery.flot.pie.js");sc_require("jquery.flot.selection.js");sc_require("jquery.flot.stack.js");sc_require("jquery.flot.threshold.js");Flot=SC.Object.create({NAMESPACE:"Flot",VERSION:"0.1.0",plot:$.plot});(function(){jQuery.color={};jQuery.color.make=function(j,f,c,e){var k={};k.r=j||0;k.g=f||0;k.b=c||0;k.a=e!=null?e:1;k.add=function(n,g){for(var b=0;b<n.length;++b){k[n.charAt(b)]+=g}return k.normalize()};k.scale=function(n,g){for(var b=0;b<n.length;++b){k[n.charAt(b)]*=g}return k.normalize()};k.toString=function(){if(k.a>=1){return"rgb("+[k.r,k.g,k.b].join(",")+")"}else{return"rgba("+[k.r,k.g,k.b,k.a].join(",")+")"}};k.normalize=function(){function b(n,o,g){return o<n?n:(o>g?g:o)}k.r=b(0,parseInt(k.r),255);k.g=b(0,parseInt(k.g),255);k.b=b(0,parseInt(k.b),255);k.a=b(0,k.a,1);return k};k.clone=function(){return jQuery.color.make(k.r,k.b,k.g,k.a)};return k.normalize()};jQuery.color.extract=function(e,b){var f;do{f=e.css(b).toLowerCase();if(f!=""&&f!="transparent"){break}e=e.parent()}while(!jQuery.nodeName(e.get(0),"body"));if(f=="rgba(0, 0, 0, 0)"){f="transparent"}return jQuery.color.parse(f)};jQuery.color.parse=function(f){var e,b=jQuery.color.make;if(e=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(f)){return b(parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10))}if(e=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(f)){return b(parseInt(e[1],10),parseInt(e[2],10),parseInt(e[3],10),parseFloat(e[4]))}if(e=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(f)){return b(parseFloat(e[1])*2.55,parseFloat(e[2])*2.55,parseFloat(e[3])*2.55)}if(e=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(f)){return b(parseFloat(e[1])*2.55,parseFloat(e[2])*2.55,parseFloat(e[3])*2.55,parseFloat(e[4]))}if(e=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(f)){return b(parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16))}if(e=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(f)){return b(parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16))}var c=jQuery.trim(f).toLowerCase();if(c=="transparent"){return b(255,255,255,0)}else{e=a[c];return b(e[0],e[1],e[2])}};var a={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})();(function(b){function a(k,f,j){var e={square:function(p,o,u,n,t){var q=n*Math.sqrt(Math.PI)/2;p.rect(o-q,u-q,q+q,q+q)},diamond:function(p,o,u,n,t){var q=n*Math.sqrt(Math.PI/2);p.moveTo(o-q,u);p.lineTo(o,u-q);p.lineTo(o+q,u);p.lineTo(o,u+q);p.lineTo(o-q,u)},triangle:function(q,p,v,o,u){var t=o*Math.sqrt(2*Math.PI/Math.sin(Math.PI/3));var n=t*Math.sin(Math.PI/3);q.moveTo(p-t/2,v+n/2);q.lineTo(p+t/2,v+n/2);if(!u){q.lineTo(p,v-n/2);q.lineTo(p-t/2,v+n/2)}},cross:function(p,o,u,n,t){var q=n*Math.sqrt(Math.PI)/2;p.moveTo(o-q,u-q);p.lineTo(o+q,u+q);p.moveTo(o-q,u+q);p.lineTo(o+q,u-q)}};var g=f.points.symbol;if(e[g]){f.points.symbol=e[g]}}function c(e){e.hooks.processDatapoints.push(a)}b.plot.plugins.push({init:c,name:"symbols",version:"1.0"})})(jQuery);sc_require("core.js");Flot.GraphView=SC.View.extend({series:null,data:null,options:null,debugInConsole:false,previousPoint:null,showTooltip:false,render:function(b,a){arguments.callee.base.apply(this,arguments);if(!this.get("layer")||!this.get("isVisibleInWindow")){return}if((this.get("frame").width<=0)||(this.get("frame").height<=0)){return}if(($(this.get("layer")).width()<=0)||($(this.get("layer")).height()<=0)){return}var c=this.get("data"),f=null,j=this.get("series"),g=null;var n={xaxis:{mode:"time",timeformat:"%d/%m/%y %h:%M",twelveHourClock:false},yaxis:{min:0,tickFormatter:this.yaxisConverter},series:{lines:{show:true},points:{show:true}},grid:{hoverable:true,clickable:true},crosshair:{mode:"x"},legend:{show:true,position:"sw"}};SC.Logger.log("Graph Render: "+c);if(!SC.empty(c)&&(c.get("status")&SC.Record.READY)){f=c.get("data");if(this.debugInConsole){console.log(this.get("layer"))}Flot.plot(this.get("layer"),c,n);if(this.debugInConsole){console.log("render data")}}else{if(!SC.empty(j)&&(j.get("status")&SC.Record.READY)){SC.Logger.log("seriesObject.chart: "+j.get("chart"));if(j.get("chart")){var e=j.get("chart");Flot.plot(this.get("layer"),e,n);if(this.debugInConsole){console.log("render series")}}}else{if(this.debugInConsole){console.warn("data was empty")}}}if(this.showTooltip){var k="#"+this.get("layer").id;$(k).bind("plothover",function(t,w,q){$("#x").text(w.x.toFixed(2));$("#y").text(w.y.toFixed(2));if(q){if(previousPoint!=q.datapoint){previousPoint=q.datapoint;$("#tooltip").remove();var o=q.datapoint[0].toFixed(2);var v=q.datapoint[1].toFixed(2);var u=" x = "+Flot.plot.formatDate(new Date(o*1),"%d/%m/%y %h:%M");var p=" y = "+v;$('<div id="tooltip">'+q.series.label+"<br />"+u+"<br />"+p+"</div>").css({position:"absolute",display:"none",top:q.pageY+5,left:q.pageX+5,border:"1px solid #fdd",padding:"2px","background-color":"#fee",opacity:0.8}).appendTo("body").fadeIn(200)}}else{$("#tooltip").remove();previousPoint=null}})}},plotDataDidChange:function(){this.setLayerNeedsUpdate();if(this.debugInConsole){console.log("data changed")}}.observes(".data",".data.[]"),plotSeriesDidChange:function(){this.setLayerNeedsUpdate();if(this.debugInConsole){console.log("series changed")}}.observes(".series",".series.[]"),plotOptionsDidChange:function(){this.setLayerNeedsUpdate();if(this.debugInConsole){console.log("options changed")}}.observes(".options",".options.[]"),visibilityDidChange:function(){if(this.get("isVisibleInWindow")&&this.get("isVisible")){if(this.debugInConsole){console.log("visibility changed")}this.setLayerNeedsUpdate()}}.observes("isVisibleInWindow","isVisible"),layerDidChange:function(){if(this.debugInConsole){console.log("layerchanged")}this.setLayerNeedsUpdate()}.observes("layer"),layoutDidChange:function(){arguments.callee.base.apply(this,arguments);if(this.debugInConsole){console.log("layout changed")}this.setLayerNeedsUpdate()},updateLayerLocationIfNeeded:function(){var a=arguments.callee.base.apply(this,arguments);if(this.debugInConsole){console.log("layer location update")}this.setLayerNeedsUpdate();return a},setLayerNeedsUpdate:function(){this.invokeOnce(function(){this.set("layerNeedsUpdate",YES);if(this.debugInConsole){console.log("need update")}})},viewDidResize:function(){arguments.callee.base.apply(this,arguments);this.setLayerNeedsUpdate();if(this.debugInConsole){console.log("view did resize")}}.observes("layout"),parentViewDidResize:function(){arguments.callee.base.apply(this,arguments);this.setLayerNeedsUpdate();if(this.debugInConsole){console.log("parent did resize")}},yaxisConverter:function(a){var b=Math.round(a*1000)/1000;if(a>=1000&&a<1000000){b=a/1000;b=b+"k"}if(a>=1000000&&a<1000000000){b=a/1000000;b=b+"m"}if(a>=1000000000&&a<1000000000000){b=a/1000000000;b=b+"g"}if(a>=1000000000000&&a<1000000000000000){b=a/1000000000000;b=b+"t"}return b}});SC.TableDelegate={isTableDelegate:YES,tableShouldResizeColumnTo:function(f,e,b){var c=e.get("minWidth")||0,a=e.get("maxWidth")||b;b=Math.max(c,b);b=Math.min(a,b);return b},tableShouldResizeWidthTo:function(e,b){var c=e.get("minWidth")||0,a=e.get("maxWidth")||b;b=Math.max(c,b);b=Math.min(a,b);return b}};SC.SORT_ASCENDING="ascending";SC.SORT_DESCENDING="descending";SC.TableColumn=SC.Object.extend({key:null,title:null,width:100,minWidth:16,maxWidth:700,escapeHTML:NO,formatter:null,isVisible:YES,isFlexible:NO,isReorderable:YES,isSortable:YES,icon:null,tableHeader:null,sortState:null,tableContent:null});sc_require("views/table");SC.TableHeaderView=SC.View.extend({classNames:["sc-table-header"],displayProperties:["sortState","isInDragMode"],acceptsFirstResponder:YES,isInDragMode:NO,hasHorizontalScroller:NO,hasVerticalScroller:NO,childViews:["dragModeView"],dragModeView:SC.ListView.extend({isVisible:NO,layout:{left:0,right:0,bottom:0},init:function(){arguments.callee.base.apply(this,arguments);var a=this.get("parentView");if(a){a.addObserver("isInDragMode",this,"_scthv_dragModeDidChange")}},_scthv_dragModeDidChange:function(){}}),column:null,render:function(b,g){var f=this.get("column"),e=f.get("icon"),a;var c=b.begin("span");if(e){a='<img src="%@" class="icon" />'.fmt(e);c.push(a)}else{c.push(this.get("label"))}c.end()},init:function(){arguments.callee.base.apply(this,arguments);var a=this.get("column");a.addObserver("width",this,"_scthv_layoutDidChange");a.addObserver("maxWidth",this,"_scthv_layoutDidChange");a.addObserver("minWidth",this,"_scthv_layoutDidChange");a.addObserver("sortState",this,"_scthv_sortStateDidChange");a.addObserver("tableContent",this,"_scthv_tableContentDidChange")},sortState:function(){return this.get("column").get("sortState")}.property(),mouseDown:function(b){var a=this.get("tableView");return a?a.mouseDownInTableHeaderView(b,this):arguments.callee.base.apply(this,arguments)},mouseUp:function(b){var a=this.get("tableView");return a?a.mouseUpInTableHeaderView(b,this):arguments.callee.base.apply(this,arguments)},mouseDragged:function(b){var a=this.get("tableView");return a?a.mouseDraggedInTableHeaderView(b,this):arguments.callee.base.apply(this,arguments)},_scthv_dragViewForHeader:function(){var b=this.get("layer").cloneNode(true);var a=SC.View.create({layer:b,parentView:this});SC.$(b).css("backgroundColor","transparent").css("border","none").css("top",0).css("left",0);return a},_scthv_enterDragMode:function(){this.set("isInDragMode",YES)},_scthv_exitDragMode:function(){this.set("isInDragMode",NO)},_scthv_dragModeViewDidChange:function(){var a=this.get("dragModeView");if(a&&a.set){a.set("tableHeadView",this);a.set("tableView",this.get("tableView"))}}.observes("dragModeView"),_scthv_layoutDidChange:function(c,b,g,a){var f=this.get("parentView");f.invokeOnce(f.layoutChildViews);var e=this.get("layout")},_scthv_tableContentDidChange:function(){var b=this.get("column").get("tableContent");var a=this.get("parentView")._scthv_columnContentFromTableContent(b,this.get("columnIndex"));this.set("content",a)},_scthv_sortStateDidChange:function(){SC.RunLoop.begin();var a=this.get("column").get("sortState");var b=this.get("classNames");b.removeObject("sc-table-header-sort-asc");b.removeObject("sc-table-header-sort-desc");b.removeObject("sc-table-header-sort-active");if(a!==null){b.push("sc-table-header-sort-active")}if(a===SC.SORT_ASCENDING){b.push("sc-table-header-sort-asc")}if(a===SC.SORT_DESCENDING){b.push("sc-table-header-sort-desc")}this.displayDidChange();this.invokeOnce("updateLayer");SC.RunLoop.end()}});sc_require("views/table");sc_require("views/table_header");SC.TableHeadView=SC.View.extend({layout:{height:18,left:0,right:0,top:0},classNames:["sc-table-head"],cells:[],acceptsFirstResponder:YES,dragOrder:null,init:function(){arguments.callee.base.apply(this,arguments);this._scthv_handleChildren()},columns:function(){return this.get("parentView").get("columns")}.property(),renderChildViews:function(e,f){var c=this.get("cells"),b,a;for(a=0;a<c.get("length");a++){b=c.objectAt(a);e=e.begin(b.get("tagName"));b.prepareContext(e,f);e=e.end()}return e},layoutChildViews:function(){var c=this.get("cells"),b,a;for(a=0;a<c.get("length");a++){b=c.objectAt(a);b.adjust(this._scthv_layoutForHeaderAtColumnIndex(a));b.updateLayout()}},_scthv_enterDragMode:function(){var b=[],c=this.get("columns"),a;for(a=0;a<c.get("length");a++){b.push(c.objectAt(a).get("key"))}this.set("dragOrder",b)},_scthv_changeDragOrder:function(c,e){var b=this.get("dragOrder"),a=b.objectAt(c);b.removeAt(idx);b.insertAt(e,a)},_scthv_reorderDragColumnViews:function(){}.observes("dragOrder"),_scthv_columnContentFromTableContent:function(e,j){var g=this.get("columns").objectAt(j),f=g.get("key"),c=[],b;if(!e){return c}var a=this.get("parentView"),k=e.get("length");for(b=0;b<k;b++){c.push(e.objectAt(b).get(f))}return c},_scthv_layoutForHeaderAtColumnIndex:function(b){var c=this.get("columns"),f=this.get("parentView").get("rowHeight"),e={},g=0,a;for(a=0;a<b;a++){g+=c.objectAt(a).get("width")}return{left:g,width:c.objectAt(b).get("width"),height:f}},_scthv_handleChildren:function(){var b=this.get("columns");var e=this.get("parentView");var c=e.get("content");var a,n,g,f,o=[],k,j;for(j=0;j<b.get("length");j++){a=b.objectAt(j);n=a.get("key");g=a.get("label");f=this._scthv_columnContentFromTableContent(c,j);k=this._scthv_createTableHeader(a,g,f,j);o.push(k)}this.set("cells",o);if(o.length>0){this.replaceAllChildren(o)}},_scthv_createTableHeader:function(f,e,g,c){var b=this.get("parentView");var a=SC.TableHeaderView.create({column:f,label:e,content:g,tableView:b,columnIndex:c});return a}});sc_require("mixins/table_delegate");sc_require("views/table_head");SC.TableView=SC.ListView.extend(SC.TableDelegate,{classNames:["sc-table-view"],childViews:"tableHeadView scrollView".w(),scrollView:SC.ScrollView.extend({isVisible:YES,layout:{left:-1,right:0,bottom:0,top:19},hasHorizontalScroller:NO,borderStyle:SC.BORDER_NONE,contentView:SC.View.extend({}),_sv_offsetDidChange:function(){this.get("parentView")._sctv_scrollOffsetDidChange()}.observes("verticalScrollOffset","horizontalScrollOffset")}),hasHorizontalScroller:NO,hasVerticalScroller:NO,selectOnMouseDown:NO,containerView:function(){var a=this.get("scrollView");return(a&&a.get)?a.get("contentView"):null}.property("scrollView"),layout:{left:0,right:0,top:0,bottom:0},init:function(){arguments.callee.base.apply(this,arguments);window.table=this},canReorderContent:NO,isInDragMode:NO,mouseDownInTableHeaderView:function(a,c){var b=c.get("column");if(!b.get("isReorderable")&&!b.get("isSortable")){return NO}this._mouseDownEvent=a;this._mouseDownTimer=SC.Timer.schedule({target:this,action:"_scthv_enterDragMode",interval:300});return YES},mouseUpInTableHeaderView:function(b,g){var e=this.get("isInDragMode");if(!e){var c=g.get("column");this.set("sortedColumn",c);var a=c.get("sortState");var f=a===SC.SORT_ASCENDING?SC.SORT_DESCENDING:SC.SORT_ASCENDING;c.set("sortState",f)}this._dragging=false;if(this._mouseDownTimer){this._mouseDownTimer.invalidate()}},mouseDraggedInTableHeaderView:function(a,c){SC.RunLoop.begin();var b=this.get("isInDragMode");if(!b){return NO}if(!this._dragging){SC.Drag.start({event:this._mouseDownEvent,source:c,dragView:this._scthv_dragViewForHeader(),ghost:YES});this._dragging=true}return arguments.callee.base.apply(this,arguments);SC.RunLoop.end()},columns:[],flexibleColumn:null,sortedColumn:null,hasTableHead:YES,tableHeadView:SC.TableHeadView.extend({layout:{top:0,left:0,right:0}}),tableHeadHeight:18,hasUniformRowHeights:YES,rowHeight:18,exampleView:SC.TableRowView,isInColumnDragMode:NO,filterKey:null,rowOffsetForContentIndex:function(c){var b=0,a;if(this.get("hasUniformRowHeights")){return b+(this.get("rowHeight")*c)}else{for(a=0;a<c;i++){b+=this.rowHeightForContentIndex(a)}return b}},rowHeightForContentIndex:function(a){if(this.get("hasUniformRowHeights")){return this.get("rowHeight")}else{}},layoutForContentIndex:function(a){return{top:this.rowOffsetForContentIndex(a),height:this.rowHeightForContentIndex(a),left:0,right:0}},createItemView:function(c,a,b){b.tableView=this;return c.create(b)},clippingFrame:function(){var b=this.get("containerView"),a=this.get("scrollView"),c=this.get("frame");if(!a.get){return c}return{height:c.height,width:c.width,x:a.get("horizontalScrollOffset"),y:a.get("verticalScrollOffset")}}.property("frame","content").cacheable(),_sctv_scrollOffsetDidChange:function(){this.notifyPropertyChange("clippingFrame")},computeLayout:function(){var b=arguments.callee.base.apply(this,arguments),a=this.get("containerView"),e=this.get("frame");var c=b.minHeight;delete b.minHeight;a.adjust("minHeight",c);a.layoutDidChange();this.notifyPropertyChange("clippingFrame");return b},_sctv_columnsDidChange:function(){var b=this.get("columns"),c=this.get("content"),a;for(a=0;a<b.get("length");a++){b.objectAt(a).set("tableContent",c)}this.get("tableHeadView")._scthv_handleChildren();this.reload()}.observes("columns"),_sctv_adjustColumnWidthsOnResize:function(){var g=this.get("frame").width;var j=this.get("content"),c=this.delegateFor("isTableDelegate",this.delegate,j);if(this.get("columns").length==0){return}g=c.tableShouldResizeWidthTo(this,g);var f=this.get("columns"),k=0,a;for(var a=0;a<f.length;a++){k+=f.objectAt(a).get("width")}if(g===0){g=k}var b=this.get("flexibleColumn")||this.get("columns").objectAt(this.get("columns").length-1);var e=b.get("width")+(g-k);b.set("width",e)}.observes("frame"),_sctv_sortContent:function(){var b=this.get("sortedColumn");var a=b.get("key");this.set("orderBy",a)},_sctv_sortedColumnDidChange:function(){var b=this.get("columns"),e=this.get("sortedColumn"),c,a;for(a=0;a<b.get("length");a++){c=b.objectAt(a);if(c!==e){c.set("sortState",null)}}this.invokeOnce("_sctv_sortContent")}.observes("sortedColumn")});SC.TableRowView=SC.View.extend({classNames:["sc-table-row"],cells:[],acceptsFirstResponder:YES,tableView:null,init:function(){arguments.callee.base.apply(this,arguments);this._sctrv_handleChildren()},columns:function(){return this.get("tableView").get("columns")}.property(),prepareContext:function(a,b){arguments.callee.base.apply(this,arguments);a.setClass("sel",this.get("isSelected"))},render:function(b,c){var a=[];a.push((this.get("contentIndex")%2===0)?"even":"odd");b.addClass(a);arguments.callee.base.apply(this,arguments)},renderChildViews:function(e,f){var c=this.get("cells"),b,a;for(a=0;a<c.get("length");a++){b=c.objectAt(a);e=e.begin(b.get("tagName"));b.prepareContext(e,f);e=e.end()}return e},layoutChildViews:function(){var c=this.get("cells"),e=this.get("columns"),b,g,a;var k=0,f,j=this.get("tableView").get("rowHeight");for(a=0;a<c.get("length");a++){b=c.objectAt(a);g=e.objectAt(a);f=g.get("width");b.adjust({left:k,width:f,height:j});k+=f;b.updateLayout()}},_sctrv_layoutForChildAtColumnIndex:function(b){var c=this.get("columns"),f=this.get("tableView").get("rowHeight"),e={},g=0,a;for(a=0;a<b;a++){g+=c.objectAt(a).get("width")}return{left:g,width:c.objectAt(b).get("width"),height:f}},_sctrv_createTableCell:function(b,c){var a=SC.TableCellView.create({column:b,content:c});return a},_sctrv_handleSelection:function(){this.displayDidChange()}.observes("isSelected"),_sctrv_handleChildren:function(){var j=this.get("content"),f=this.get("columns");this.removeAllChildren();var g,e,k,c=[],b,a;for(a=0;a<f.get("length");a++){g=f.objectAt(a);e=g.get("key");k=j?j.getPath(e):"";b=this._sctrv_createTableCell(g,k);c.push(b);this.appendChild(b)}this.set("cells",c)}});sc_require("views/table_row");SC.TableCellView=SC.View.extend({classNames:["sc-table-cell"],column:null,escapeHTMLBinding:SC.Binding.oneWay(".column.escapeHTML"),formatter:SC.Binding.oneWay(".column.formatter"),displayValue:function(){var g=this.get("content");var e=this.get("column").get("formatter");if(e){var f=(SC.typeOf(e)===SC.T_FUNCTION)?e(g,this):e.fieldValueForObject(g,this);if(!SC.none(f)){g=f}}if(SC.typeOf(g)===SC.T_ARRAY){var c=[];for(var b=0;b<g.get("length");b++){var a=g.objectAt(b);if(!SC.none(a)&&a.toString){a=a.toString()}c.push(a)}g=c.join(",")}if(!SC.none(g)&&g.toString){g=g.toString()}if(this.get("escapeHTML")){g=SC.RenderContext.escapeHTML(g)}return g}.property("content","escapeHTML","formatter").cacheable(),render:function(a,b){a.push(this.get("displayValue"))},init:function(){arguments.callee.base.apply(this,arguments);var a=this.get("column");a.addObserver("width",this,"_sctcv_layoutDidChange");a.addObserver("maxWidth",this,"_sctcv_layoutDidChange");a.addObserver("minWidth",this,"_sctcv_layoutDidChange")},_sctcv_layoutDidChange:function(c,b,f,a){var e=this.get("parentView");SC.run(function(){e.layoutChildViews()})}});SC.MenuPane=SC.MenuPane;SC.MenuPane.reopen({shouldAutoResize:YES,minimumMenuWidth:SC.propertyFromRenderDelegate("minimumMenuWidth",0),menuWidthPadding:SC.propertyFromRenderDelegate("menuWidthPadding",0),init:function(a){a();if(this.get("shouldAutoResize")){this.invokeOnce("_updateMenuWidth")}}.enhance(),createMenuItemViews:function(f){var e=f();var b,a=e.length,c;if(this.get("shouldAutoResize")){for(b=0;b<a;b++){c=e[b];c.set("shouldMeasureSize",YES);c.addObserver("measuredSize",this,this._menuItemMeasuredSizeDidChange)}}return e}.enhance(),_menuItemViewsDidChange:function(){if(this.get("shouldAutoResize")){this.invokeOnce("_updateMenuWidth")}}.observes("menuItemViews"),_menuItemMeasuredSizeDidChange:function(a){this.invokeOnce("_updateMenuWidth")},_menuMinimumMenuWidthDidChange:function(){this.invokeOnce("_updateMenuWidth")}.observes("minimumMenuWidth"),_updateMenuWidth:function(){var f=this.get("menuItemViews");if(!f){return}var b=f.length,a,c,e=this.get("minimumMenuWidth");for(a=0;a<b;a++){c=f[a];e=Math.max(e,c.get("measuredSize").width+this.get("menuWidthPadding"))}this.adjust("width",e)}});SC.MenuItemView=SC.MenuItemView;SC.MenuItemView.reopen(SC.AutoResize);SC.MenuItemView.reopen({supportsAutoResize:YES,shouldAutoResize:NO,shouldMeasureSize:NO,autoResizePadding:0,autoResizeText:function(){return this.get("title")}.property("title"),autoResizeLayer:function(){return this.$(".value")[0]}.property("layer").cacheable(),didUpdateLayer:function(){this.notifyPropertyChange("autoResizeLayer");this.scheduleMeasurement()}.enhance()});SC.SelectViewMenu={selectView:null,value:null,valueBinding:".selectView.value",valueDidChange:function(){var c=this.get("menuItemViews"),b,a=c.length,e;for(b=0;b<a;b++){e=c[b];if(e._lastIsChecked){e.notifyPropertyChange("isChecked")}if(e.get("isChecked")){e.notifyPropertyChange("isChecked")}}}.observes("value"),exampleView:SC.MenuItemView.extend({isChecked:function(){this._lastIsChecked=this.getContentProperty("itemValueKey")===this.getPath("parentMenu.rootMenu.value");return this._lastIsChecked}.property(),displayProperties:["isChecked"]}),_svm_bindToProperties:["items","itemTitleKey","itemIsEnabledKey","itemValueKey","itemIconKey","itemHeightKey","itemSubMenuKey","itemSeparatorKey","itemTargetKey","itemActionKey","itemCheckboxKey","itemShortCutKey","itemKeyEquivalentKey","itemDisableMenuFlashKey","minimumMenuWidth","preferType","preferMatrix"],_svm_setupBindings:function(){var c=this.get("selectView");if(!c){return}var f=this._svm_bindToProperties,b,a=f.length,e;for(b=0;b<a;b++){e=f[b];this[e+"Binding"]=this.bind(e,c,e)}this._svm_isBoundTo=c},_svm_clearBindings:function(){var f=this._svm_isBoundTo;if(!f){return}var e=this._svm_bindToProperties,b,a=e.length,c;for(b=0;b<a;b++){c=e[b];this[c+"Binding"].disconnect()}},_svm_selectViewDidChange:function(){this._svm_clearBindings();this._svm_setupBindings()}.observes("selectView"),initMixin:function(){this._svm_setupBindings()},destroyMixin:function(){this._svm_clearBindings()}};SC.BaseTheme.selectRenderDelegate=SC.BaseTheme.buttonRenderDelegate.create({menuLeftOffset:-3,menuTopOffset:2,menuMinimumWidthOffset:-18});SC.PopupButtonView=SC.ButtonView.extend({renderDelegateName:"popupButtonRenderDelegate",menu:SC.MenuPane,shouldLoadInBackground:NO,_menuIsLoaded:NO,isActive:NO,acceptsFirstResponder:YES,init:function(){arguments.callee.base.apply(this,arguments);this._currentMenu=null;this.invokeOnce("scheduleMenuSetupIfNeeded")},scheduleMenuSetupIfNeeded:function(){var a=this.get("menu");if(a&&a.isClass&&this.get("shouldLoadInBackground")){SC.backgroundTaskQueue.push(SC.PopupButtonView.InstantiateMenuTask.create({popupButton:this}))}},menuDidChange:function(){var a=this.get("menu");if(a===this._currentMenu){return}this.invokeOnce("scheduleMenuSetupIfNeeded")}.observes("menu"),setupMenu:function(){var a=this.get("menu");if(a===this._currentMenu){return}if(this._currentMenu){this.isActiveBinding.disconnect();this._currentMenu.destroy();this._currentMenu=null}if(a&&a.isClass){a=this.createMenu(a)}this._currentMenu=a;this.set("menu",a);this.isActiveBinding=this.bind("isActive",a,"isVisibleInWindow")},createMenu:function(a){return a.create()},showMenu:function(){this.setupMenu();this.invokeLast("_showMenu")},hideMenu:function(){var a=this.get("menu");if(a&&!a.isClass){a.remove()}},menuPreferMatrix:[0,0,0],_showMenu:function(){var a=this.get("menu");a.popup(this,this.get("menuPreferMatrix"))},mouseDown:function(a){if(!this.get("isEnabled")){return YES}this.set("_mouseDown",YES);this.showMenu();this._mouseDownTimestamp=new Date().getTime();this.becomeFirstResponder();return YES},mouseUp:function(b){var e=this.get("menu"),a,c;if(e&&this.get("_mouseDown")){a=e.getPath("rootMenu.targetMenuItem");if(a&&e.get("mouseHasEntered")){if(!a.performAction()){e.remove()}}else{if(this._mouseDownTimestamp&&b.timeStamp-this._mouseDownTimestamp>400){e.remove()}}}this._mouseDownTimestamp=undefined;return YES},keyDown:function(a){if(a.which==13){this.showMenu();return YES}return arguments.callee.base.apply(this,arguments)}});SC.PopupButtonView.InstantiateMenuTask=SC.Task.extend({popupButton:null,run:function(a){this.popupButton.setupMenu()}});sc_require("views/popup_button");sc_require("mixins/select_view_menu");SC.SelectView=SC.PopupButtonView.extend({theme:"popup",renderDelegateName:"selectRenderDelegate",items:null,itemsBindingDefault:SC.Binding.multiple(),itemTitleKey:"title",itemSortKey:null,itemValueKey:"value",itemIconKey:null,itemSeparatorKey:"separator",itemIsEnabledKey:"isEnabled",menu:SC.MenuPane.extend(SC.SelectViewMenu),selectedItem:null,selectedItemBinding:"*menu.rootMenu.selectedItem",supportsFocusRing:YES,init:function(){arguments.callee.base.apply(this,arguments);this._scsv_valueDidChange()},_scsv_getValueForMenuItem:function(b){var a=this.get("itemValueKey")||"value";if(SC.typeOf(b)===SC.T_STRING){return b}else{if(b.get){return b.get(a)}else{return b[a]}}},_scsv_selectedItemDidChange:function(){var e=this.get("selectedItem"),c=this._scsv_lastSelection,a=this.get("itemTitleKey")||"title",b=this.get("itemValueKey")||"value";if(e){this.setIfChanged("value",this._scsv_getValueForMenuItem(e))}if(c&&c.addObserver&&e!==c){c.removeObserver(a,this,this._scsv_selectedItemPropertyDidChange);c.removeObserver(b,this,this._scsv_selectedItemPropertyDidChange)}if(e&&e.addObserver&&e!==c){e.addObserver(a,this,this._scsv_selectedItemPropertyDidChange);e.addObserver(b,this,this._scsv_selectedItemPropertyDidChange)}this._scsv_lastSelection=e}.observes("selectedItem"),_scsv_selectedItemPropertyDidChange:function(a){this.notifyPropertyChange("title");this.set("value",a.get(this.get("itemValueKey")||"value"))},defaultTitle:"",title:function(){var a=this.get("selectedItem");if(!a){return this.get("defaultTitle")}else{if(a.get){return a.get(this.get("itemTitleKey")||"title")}else{if(SC.typeOf(a)==SC.T_HASH){return a[this.get("itemTitleKey")||"title"]}else{return a}}}}.property("selectedItem").cacheable(),_scsv_valueDidChange:function(){var e=this.get("value");if(!this.get("items")){return}var c=this.get("items"),b=c.length,a;for(a=0;a<b;a++){if(this._scsv_getValueForMenuItem(c[a])===e){this.setIfChanged("selectedItem",c[a]);return}}this.setIfChanged("selectedItem",null)}.observes("value"),createMenu:function(a){var b={selectView:this,selectedItem:this.get("selectedItem"),minimumMenuWidth:this.get("minimumMenuWidth")};return a.create(b)},menuLeftOffset:SC.propertyFromRenderDelegate("menuLeftOffset",0),menuTopOffset:SC.propertyFromRenderDelegate("menuTopOffset",0),menuMinimumWidthOffset:SC.propertyFromRenderDelegate("menuMinimumWidthOffset",0),menuPreferMatrix:function(){var f=this.get("menu"),e=this.get("menuLeftOffset"),c=this.get("menuTopOffset");if(!f){return[e,c,2]}var a=this.get("_selectedItemIndex"),b=f.get("menuItemViews");if(a>-1){return[e,c-b[a].get("layout").top,2]}return[e,c,2]}.property("value","menu").cacheable(),_selectedItemIndex:function(){var g=this.get("menu");if(!g){return -1}var e=g.get("menuItemViews"),b,a=e.length,c;for(b=0;b<a;b++){c=e[b];var f=c.get("content").get(this.get("itemValueKey"));if(f===this.get("value")){break}}if(b<a){return b}return -1}.property("value","menu").cacheable(),showMenu:function(c){c();var b=this.get("menu"),a=b.get("menuItemViews")}.enhance(),minimumMenuWidth:function(){return this.get("frame").width+this.get("menuMinimumWidthOffset")}.property("frame","menuMinimumWidthOffset").cacheable(),keyDown:function(a){if(this.interpretKeyEvents(a)){return YES}else{arguments.callee.base.apply(this,arguments)}},interpretKeyEvents:function(a){if(a){if((a.keyCode===38||a.keyCode===40)){this.showMenu();return YES}else{if(a.keyCode===27){this.resignFirstResponder();return YES}}}return arguments.callee.base.apply(this,arguments)},acceptsFirstResponder:function(){return this.get("isEnabled")}.property("isEnabled").cacheable()});SC.SplitChild={isSplitDivider:NO,minimumSize:100,maximumSize:undefined,size:undefined,position:0,positionOffset:SC.propertyFromRenderDelegate("splitPositionOffset",0),sizeOffset:SC.propertyFromRenderDelegate("splitSizeOffset",0),canCollapse:NO,collapseAtSize:undefined,autoResizeStyle:undefined,compensatesForMovement:YES,allowsIndirectAdjustments:YES,_scsvc_positionOrSizeDidChange:function(){this.invokeOnce("splitChildLayoutDidChange")}.observes("position","size"),splitChildLayoutDidChange:function(){var c=this.get("splitView");if(!c){return}var a=this.get("position")+this.get("positionOffset"),b=this.get("size")+this.get("sizeOffset");if(c.get("layoutDirection")===SC.LAYOUT_HORIZONTAL){this.set("layout",{left:a,width:b,top:0,bottom:0})}else{this.set("layout",{top:a,height:b,right:0,left:0})}},splitView:function(){var a=this;while(a&&!a.isSplitView){a=a.get("parentView")}return a}.property("parentView").cacheable(),splitViewLayoutDirection:null,splitViewLayoutDirectionBinding:"*splitView.layoutDirection",splitViewLayoutDirectionDidChange:function(){this.invokeOnce("splitChildLayoutDidChange")}.observes("splitViewLayoutDirection")};SC.MOVES_AUTOMATIC_CHILD="moves-automatic-child";SC.MOVES_CHILD="moves-child";SC.MOVES_PREVIOUS_CHILD="moves-previous-child";SC.MOVES_NEXT_CHILD="moves-next-child";SC.SplitThumb={movesChild:function(){var a=this,e,c=this.get("splitView"),b=this.get("movesSibling");while(a&&a!==c){e=a;a=a.get("parentView")}if(b===SC.MOVES_NEXT_CHILD){return e.nextView}if(b===SC.MOVES_PREVIOUS_CHILD){return e.previousView}if(b===SC.MOVES_AUTOMATIC_CHILD){if(!e.nextView){return e.previousView}if(!e.previousView){return e.nextView}}return e}.property("splitView","movesSibling").cacheable(),movesSibling:SC.MOVES_AUTOMATIC_CHILD,splitView:function(){var a=this;while(a&&!a.isSplitView){a=a.get("parentView")}return a}.property("parentView").cacheable(),splitViewLayoutDirection:null,splitViewLayoutDirectionBinding:"*splitView.layoutDirection",splitCursorStyle:function(){if(this.get("splitViewLayoutDirection")===SC.LAYOUT_HORIZONTAL){return"ew-resize"}else{return"ns-resize"}}.property("splitViewLayoutDirection").cacheable(),splitCursorStyleDidChange:function(){if(this._isDragging){this.get("splitView").set("splitChildCursorStyle",this.get("splitCursorStyle"))}this.$().css("cursor",this.get("splitCursorStyle"))}.observes("splitCursorStyle"),renderMixin:function(a){a.css("cursor",this.get("splitCursorStyle"))},touchStart:function(b){this._isDragging=YES;var a=this.get("splitView");this._scst_mouseStartPosition=a.get("layoutDirection")===SC.LAYOUT_HORIZONTAL?b.pageX:b.pageY;this._scst_childStartPosition=a.getPositionForChild(this.get("movesChild"));return YES},touchesDragged:function(a){var b=this.get("splitView");var f=b.get("layoutDirection")===SC.LAYOUT_HORIZONTAL?a.pageX:a.pageY;var c=f-this._scst_mouseStartPosition,e=this._scst_childStartPosition;b.adjustPositionForChild(this.get("movesChild"),e+c);return YES},touchEnd:function(f){this._isDragging=NO;var a=this.get("splitView");var e=a.get("layoutDirection")===SC.LAYOUT_HORIZONTAL?f.pageX:f.pageY;var b=e-this._scst_mouseStartPosition,c=this._scst_childStartPosition;a.adjustPositionForChild(this.get("movesChild"),c+b);a.set("splitChildCursorStyle",null);return YES},mouseDown:function(a){var b=this.get("splitView");b.set("splitChildCursorStyle",this.get("splitCursorStyle"));return this.touchStart(a)},mouseDragged:function(a){return this.touchesDragged(a)},mouseUp:function(a){this.get("splitView").set("splitChildCursorStyle",null);return this.touchEnd(a)}};SC.BaseTheme.splitRenderDelegate=SC.RenderDelegate.create({className:"split",render:function(b,a){a.addClass(b.get("layoutDirection"))},update:function(b,a){a.addClass(b.get("layoutDirection"))}});SC.BaseTheme.splitDividerRenderDelegate=SC.RenderDelegate.create({className:"split-divider",dividerSize:1,splitPositionOffset:-5,splitSizeOffset:10,render:function(b,a){this.addSizeClassName(b,a);a.push("<div class='line'></div>")},update:function(b,a){this.updateSizeClassName(b,a)}});sc_require("mixins/split_child");sc_require("mixins/split_thumb");SC.SplitDividerView=SC.View.extend(SC.SplitChild,SC.SplitThumb,{classNames:["sc-split-divider-view"],isSplitDivider:YES,autoResizeStyle:"sc-fixed-size",movesSibling:SC.MOVES_CHILD,size:SC.propertyFromRenderDelegate("dividerSize",10),renderDelegateName:"splitDividerRenderDelegate"});sc_require("views/split_divider");SC.FIXED_SIZE="sc-fixed-size";SC.RESIZE_MANUAL="sc-manual-size";SC.RESIZE_AUTOMATIC="sc-automatic-resize";SC.SplitView=SC.View.extend({classNames:["sc-split-view"],childViews:["topLeftView","bottomRightView"],isSplitView:YES,splitDividerView:SC.SplitDividerView,layoutDirection:SC.LAYOUT_HORIZONTAL,shouldResizeChildrenToFit:YES,splitChildCursorStyle:null,_scsv_splitChildCursorDidChange:function(){this.get("cursor").set("cursorStyle",this.get("splitChildCursorStyle"))}.observes("splitChildCursorStyle"),init:function(){this.cursor=SC.Cursor.create();arguments.callee.base.apply(this,arguments)},displayProperties:["layoutDirection"],renderDelegateName:"splitRenderDelegate",_frameSize:function(){if(this.get("layoutDirection")===SC.LAYOUT_HORIZONTAL){return this.get("frame").width}else{return this.get("frame").height}}.property("frame","layoutDirection").cacheable(),viewDidResize:function(a){this.invokeOnce("_scsv_tile");a()}.enhance(),layoutDirectionDidChange:function(){this.invokeOnce("_scsv_tile")}.observes("layoutDirection"),adjustPositionForChild:function(b,a){return this.invokeDelegateMethod(this.get("delegate"),"splitViewAdjustPositionForChild",this,b,a)},getPositionForChild:function(a){return this.invokeDelegateMethod(this.get("delegate"),"splitViewGetPositionForChild",this,a)},didAddChild:function(){if(this._scsv_settingUpChildViews){return}this._scsv_settingUpChildViews=YES;this.invokeOnce("_scsv_setupChildViews");this._scsv_settingUpChildViews=NO},didRemoveChild:function(){if(this._scsv_settingUpChildViews){return}this._scsv_settingUpChildViews=YES;this.invokeOnce("_scsv_setupChildViews");this._scsv_settingUpChildViews=NO},createChildViews:function(){arguments.callee.base.apply(this,arguments);if(this._scsv_settingUpChildViews){return}this._scsv_settingUpChildViews=YES;this.invokeOnce("_scsv_setupChildViews");this._scsv_settingUpChildViews=NO},_scsv_setupChildViews:function(){var p=this.get("delegate"),e=this.get("childViews").copy(),j=e.length,o,c,a,f,n=this._scsv_dividers||{},b={},g,k;for(o=0;o<j;o++){c=e[o];if(!c.get("autoResizeStyle")){if(c.get("size")!==undefined){c.set("autoResizeStyle",SC.RESIZE_MANUAL)}else{c.set("autoResizeStyle",SC.RESIZE_AUTOMATIC)}}var q=this.invokeDelegateMethod(p,"splitViewGetSizeForChild",this,c);q=this.invokeDelegateMethod(p,"splitViewConstrainSizeForChild",this,c,q);this.invokeDelegateMethod(p,"splitViewSetSizeForChild",this,c,q);c.previousView=a;c.nextView=undefined;c.viewIndex=o;if(a){a.nextView=c}if(f&&!c.isSplitDivider){k=SC.guidFor(f)+"-"+SC.guidFor(c);g=n[k];if(!g&&!a.isSplitDivider){g=this.invokeDelegateMethod(p,"splitViewDividerBetween",this,f,c)}if(g){g.isSplitDivider=YES;b[k]=g;if(n[k]){delete n[k]}else{this.insertBefore(g,c)}}}a=c;if(!c.isSplitDivider){f=c}}for(k in n){this.removeChild(n[k]);n[k].destroy()}this._scsv_dividers=b;this.invokeOnce("_scsv_tile")},_scsv_tile:function(){var a=this.get("delegate");var c,b=this.get("_frameSize");c=this.invokeDelegateMethod(a,"splitViewLayoutChildren",this);if(this.get("shouldResizeChildrenToFit")&&c!==b){this.invokeDelegateMethod(a,"splitViewResizeChildrenToFit",this,c);c=this.invokeDelegateMethod(a,"splitViewLayoutChildren",this)}if(!this.get("shouldResizeChildrenToFit")){if(this.get("layoutDirection")===SC.LAYOUT_HORIZONTAL){this.adjust("width",c)}else{this.adjust("height",c)}}},splitViewLayoutChildren:function(f){var c=this.get("delegate");var e=this.get("childViews"),b=e.length,a,j,g=0;for(a=0;a<b;a++){j=e[a];this.invokeDelegateMethod(c,"splitViewSetPositionForChild",this,e[a],g);g+=this.invokeDelegateMethod(c,"splitViewGetSizeForChild",this,e[a])}return g},splitViewResizeChildrenToFit:function(k,e){var q=this.get("delegate");var j=this.get("_frameSize");var f=this.get("childViews"),n=f.length,p,c,a=0,g=0,o;for(p=0;p<n;p++){c=f[p];o=this.invokeDelegateMethod(q,"splitViewGetSizeForChild",this,c);if(this.invokeDelegateMethod(q,"splitViewShouldResizeChildToFit",this,c)){a+=o}else{g+=o}}var b=e;b=this._resizeChildrenForSize(b,j,YES,a);b=this._resizeChildrenForSize(b,j,YES,-1);b=this._resizeChildrenForSize(b,j,NO,g);b=this._resizeChildrenForSize(b,j,NO,-1)},_resizeChildrenForSize:function(e,f,g,k){var q=this.get("delegate");var c=this.get("childViews"),o,j=c.length,b;var n=f-e;for(o=0;o<j;o++){b=c[o];var p=this.invokeDelegateMethod(q,"splitViewGetSizeForChild",this,b),t=p;var a=this.invokeDelegateMethod(q,"splitViewShouldResizeChildToFit",this,b);if(a===g){if(k===-1){t+=n}else{t+=(t/k)*n}t=Math.round(t);t=this.invokeDelegateMethod(q,"splitViewConstrainSizeForChild",this,b,t);this.invokeDelegateMethod(q,"splitViewSetSizeForChild",this,b,t);if(k!==-1){k-=p}}e-=p;e+=t;n=f-e}return e},splitViewShouldResizeChildToFit:function(a,b){return(this.get("shouldResizeChildrenToFit")&&b.get("autoResizeStyle")===SC.RESIZE_AUTOMATIC)},splitViewAdjustPositionForChild:function(e,g,a){var b=this.get("delegate");var f=this._scsv_createPlan();var c=this._scsv_adjustPositionForChildInPlan(f,g,a,g);this._scsv_commitPlan(f);return c},_scsv_createPlan:function(){var c=this.get("delegate"),j=[],g=this.get("childViews"),b,a=g.length,k,f,e;for(b=0;b<a;b++){k=g[b];f=this.invokeDelegateMethod(c,"splitViewGetPositionForChild",this,k);e=this.invokeDelegateMethod(c,"splitViewGetSizeForChild",this,k);j[b]={child:k,originalPosition:f,position:f,originalSize:e,size:e}}return j},_scsv_resetPlanRange:function(c,e,b){for(var a=e;a<=b;a++){c[a].position=c[a].originalPosition;c[a].size=c[a].originalSize}},_scsv_commitPlan:function(g){var e=this.get("delegate"),b=g.length,a,f,c=0;for(a=0;a<b;a++){f=g[a];if(f.size!==f.originalSize){this.invokeDelegateMethod(e,"splitViewSetSizeForChild",this,f.child,f.size)}if(f.position!==f.originalPosition){this.invokeDelegateMethod(e,"splitViewSetPositionForChild",this,f.child,f.position)}c=f.position+f.size}if(!this.get("shouldResizeChildrenToFit")){if(this.get("layoutDirection")===SC.LAYOUT_HORIZONTAL){this.adjust("width",c)}else{this.adjust("height",c)}}},_scsv_adjustPositionForChildInPlan:function(n,e,g,a){var o=this.get("delegate");if(!e.get("allowsIndirectAdjustments")&&a!==e&&a!==e.previousView){return n[e.viewIndex].position}if(e._splitViewIsAdjusting){return n[e.viewIndex].position}e._splitViewIsAdjusting=YES;var j=e.previousView,b=e.nextView,c,p,k,f,q=n[e.viewIndex].size;if(j&&!j._splitViewIsAdjusting){c=n[j.viewIndex].position;p=g-c;p=this._scsv_adjustSizeForChildInPlan(n,j,p,a);g=c+p}else{if(!j){g=0}}if(b&&b._splitViewIsAdjusting){e._splitViewIsAdjusting=NO;n[e.viewIndex].position=g;return g}if(e.get("compensatesForMovement")&&b){k=n[b.viewIndex].position;q=this._scsv_adjustSizeForChildInPlan(n,e,k-g)}else{if(!b&&this.get("shouldResizeChildrenToFit")){k=this.get("_frameSize");q=this._scsv_adjustSizeForChildInPlan(n,e,k-g);g=k-q}}if(b){k=g+q;k=this._scsv_adjustPositionForChildInPlan(n,b,k,a)}if(k&&g!==k-q){g=k-q;if(j&&!j._splitViewIsAdjusting){this._scsv_resetPlanRange(n,0,j.viewIndex);p=g-n[j.viewIndex].position;this._scsv_adjustSizeForChildInPlan(n,j,p,e)}}n[e.viewIndex].position=g;e._splitViewIsAdjusting=NO;return g},_scsv_adjustSizeForChildInPlan:function(g,b,n,a){var j=this.get("delegate");if(a&&!b.get("allowsIndirectAdjustments")&&a!==b&&a!==b.nextView&&a!==b.previousView){return g[b.viewIndex].size}var k=this.invokeDelegateMethod(j,"splitViewConstrainSizeForChild",this,b,n);g[b.viewIndex].size=k;if(n===k){return n}var c=g[b.viewIndex].position,e=c+n-k;var f=this._scsv_adjustPositionForChildInPlan(g,b,e,a);return f+k-c},splitViewDividerBetween:function(c,b,a){if(!this.get("splitDividerView")){return null}return this.get("splitDividerView").create()},splitViewGetPositionForChild:function(a,b){return b.get("position")},splitViewSetPositionForChild:function(b,c,a){c.set("position",a)},splitViewGetSizeForChild:function(a,b){return b.get("size")||100},splitViewSetSizeForChild:function(b,c,a){c.set("size",a)},splitViewConstrainSizeForChild:function(c,g,a){if(g.get("autoResizeStyle")===SC.FIXED_SIZE){return this.invokeDelegateMethod(this.get("delegate"),"splitViewGetSizeForChild",this,g)}if(g.get("canCollapse")){var b=g.get("collapseAtSize");if(b&&a<b){return 0}}var e=g.get("minimumSize")||0;if(e!==undefined&&e!==null){a=Math.max(e,a)}var f=g.get("maximumSize");if(f!==undefined&&f!==null){a=Math.min(f,a)}return a}});SC.ThumbView=SC.View.extend(SC.SplitThumb,{classNames:["sc-thumb-view"],init:function(){arguments.callee.base.apply(this,arguments);console.warn("SC.ThumbView is deprecated. Please use a normal view and mix in SC.SplitThumb instead.")}});SC.stringsFor("English",{});CoreTools=SC.Object.create({NAMESPACE:"CoreTools",VERSION:"1.0.0",attachUrlPrefix:function(a){if(a&&SC.urlPrefix){a=SC.urlPrefix+a}return a}});CoreTools.DataSource=SC.DataSource.extend({fetch:function(a,c){var b=NO;switch(c.get("recordType")){case CoreTools.Target:b=this.fetchTargets(a,c);break;case CoreTools.Test:b=this.fetchTests(a,c);break}return b},fetchTargets:function(a,b){if(!b.get("isRemote")){return NO}SC.Request.getUrl(CoreTools.attachUrlPrefix("/sc/targets.json")).set("isJSON",YES).notify(this,"fetchTargetsDidComplete",{query:b,store:a}).send();return YES},fetchTargetsDidComplete:function(f,e){var b=f.get("response"),g=e.query,a=e.store,c;if(!SC.$ok(b)){console.error("TODO: Add handler when fetching targets fails")}else{c=a.loadRecords(CoreTools.Target,b);a.loadQueryResults(g,c)}},fetchTests:function(a,c){var b=c.get("url");if(!c.get("isRemote")||!b){return NO}SC.Request.getUrl(b).set("isJSON",YES).notify(this,"fetchTestsDidComplete",{query:c,store:a}).send();return YES},fetchTestsDidComplete:function(f,e){var b=f.get("response"),a=e.store,g=e.query,c;if(!SC.$ok(b)){console.error("TODO: Add handler when fetching tests fails")}else{c=a.loadRecords(CoreTools.Test,b);a.loadQueryResults(g,c)}}});CoreTools.Target=SC.Record.extend({primaryKey:"name",name:SC.Record.attr(String),parent:SC.Record.toOne("CoreTools.Target"),testsUrl:SC.Record.attr(String,{key:"link_tests"}),appUrl:function(){return(this.get("kind")==="app")?CoreTools.attachUrlPrefix(this.get("name")):null}.property("kind","name").cacheable(),isExpanded:SC.Record.attr(Boolean,{defaultValue:NO}),children:function(){var a=this.get("store"),c=CoreTools.TARGETS_QUERY,b=a.find(c).filterProperty("parent",this);if(b){b=b.sortProperty("kind","displayName")}return(b&&b.get("length")>0)?b:null}.property().cacheable(),displayName:function(){var a=(this.get("name")||"(unknown)").split("/");return a[a.length-1]}.property("name").cacheable(),targetIcon:function(){var a="sc-icon-document-16";switch(this.get("kind")){case"framework":a="sc-icon-folder-16";break;case"app":a="sc-icon-options-16";break}return a}.property("kind").cacheable(),sortKind:function(){if(this.get("name")==="/sproutcore"){return null}var a=this.get("parent");if(a&&(a.get("name")==="/sproutcore")){return"sproutcore"}else{return(this.get("kind")||"unknown").toLowerCase()}}.property("kind","parent").cacheable(),testsQuery:function(){return SC.Query.remote(CoreTools.Test,{url:this.get("testsUrl")})}.property("testsUrl").cacheable(),tests:function(){return this.get("store").find(this.get("testsQuery"))}.property("testsQuery").cacheable()});CoreTools.TARGETS_QUERY=SC.Query.remote(CoreTools.Target);CoreTools.Test=SC.Record.extend({primaryKey:"url",filename:SC.Record.attr(String),url:SC.Record.attr(String),displayName:function(){return(this.get("filename")||"").replace(/^tests\//,"")}.property("filename").cacheable(),icon:"sc-icon-document-16",isRunnable:YES});TestControls=SC.Application.create({NAMESPACE:"TestControls",VERSION:"0.1.0",store:SC.Store.create().from(SC.Record.fixtures)});if(typeof CHANCE_SLICES==="undefined"){var CHANCE_SLICES=[]}CHANCE_SLICES=CHANCE_SLICES.concat([]);TestControls.alertController=SC.Controller.create({alertType:"error",buttonCount:1,message:"Hello, World!",description:"This is a description...",caption:"And this is a caption.",button1Title:"OK",button2Title:"Cancel",button3Title:"Nokay",showAlert:function(){var a=[];a.push(this.get("message"));a.push(this.get("description"));a.push(this.get("caption"));a.push(this.get("button1Title"));if(this.get("buttonCount")>1){a.push(this.get("button2Title"))}if(this.get("buttonCount")>2){a.push(this.get("button3Title"))}SC.AlertPane[this.get("alertType")].apply(SC.AlertPane,a)}});TestControls.buttonsController=SC.Controller.create({theme:"square",toggleable:YES,selected:NO,disabled:NO,"default":NO,buttonBehavior:function(){if(this.get("toggleable")){return SC.TOGGLE_BEHAVIOR}return SC.PUSH_BEHAVIOR}.property("toggleable").cacheable()});TestControls.rootCategory=SC.Object.create({treeItemIsExpanded:YES,treeItemChildren:[SC.Object.create({treeItemIsExpanded:YES,group:true,name:"Controls",treeItemChildren:[SC.Object.create({name:"Buttons",show:"buttons_page"}),SC.Object.create({name:"Checkboxes",show:"checkboxes_page"}),SC.Object.create({name:"Progress",show:"progress_page"}),SC.Object.create({name:"Radio",show:"radio_page"}),SC.Object.create({name:"Segmented Button",show:"segmented_page"}),SC.Object.create({name:"Select Button",show:"select_page"}),SC.Object.create({name:"Sliders",show:"sliders_page"}),SC.Object.create({name:"Tabbed View",show:"tab_page"})]}),SC.Object.create({treeItemIsExpanded:YES,group:true,name:"Panels",treeItemChildren:[SC.Object.create({name:"Panels",show:"panels_page"})]}),SC.Object.create({treeItemIsExpanded:YES,group:true,name:"Collections",treeItemChildren:[SC.Object.create({name:"List",show:"list_page"})]}),SC.Object.create({treeItemIsExpanded:YES,group:true,name:"Fields",treeItemChildren:[SC.Object.create({name:"Text Field",show:"text_field_page"})]}),SC.Object.create({treeItemIsExpanded:YES,group:true,name:"Layout",treeItemChildren:[SC.Object.create({name:"Flowed Layout",show:"flow_layout_page"}),SC.Object.create({name:"Split",show:"split_page"})]}),SC.Object.create({treeItemIsExpanded:YES,group:true,name:"Scroll",treeItemChildren:[SC.Object.create({name:"Simple",show:"scroll_page"})]})]});TestControls.categoriesController=SC.TreeController.create({treeItemIsGrouped:YES});TestControls.categoryController=SC.ObjectController.create({contentBinding:"TestControls.categoriesController.selection",contentBindingDefault:SC.Binding.single(),nowShowing:"welcome",delayShow:function(){this.set("nowShowing",this.get("show")||"welcome");this.hideMasterPicker()}.observes("show"),hideMasterPicker:function(){TestControls.mainPage.mainPane.split.hideMasterPicker()},useDarkTheme:NO,themeName:function(){return this.get("useDarkTheme")?"dark":"ace"}.property("useDarkTheme").cacheable()});TestControls.buttonsController=SC.Controller.create({selectedValue:"printer:a"});TestControls.splitController=SC.Controller.create({shouldResizeChildrenToFit:YES,layoutDirection:SC.LAYOUT_HORIZONTAL,shouldResizeChildrenToFitDidChange:function(){this.invokeLater(function(){TestControls.mainPage.split_page.scroll.contentView.set("layout",{left:0,right:0,top:0,bottom:0})})}.observes("shouldResizeChildrenToFit"),addChild:function(){TestControls.mainPage.split_page.scroll.contentView.appendChild(TestControls.SplitColumn.create());if(this.get("shouldResizeChildrenToFit")){return}TestControls.mainPage.split_page.scroll.contentView.appendChild(SC.SplitDividerView.create())},removeChild:function(){var a=TestControls.mainPage.split_page.scroll.contentView,b=a.get("childViews");if(b.length>0){a.removeChild(b[b.length-1])}},children:[],allAllowIndirect:function(a,e){if(e!==undefined){this.get("children").setEach("allowsIndirectAdjustments",e);return e}else{if(!this.get("children")){return NO}var c=this.get("children").everyProperty("allowsIndirectAdjustments",YES),b=this.get("children").everyProperty("allowsIndirectAdjustments",NO);if(c){return YES}if(b){return NO}return SC.MIXED_STATE}}.property("children","children.@each.allowsIndirectAdjustments").cacheable(),allCompensateForMovement:function(a,e){if(e!==undefined){this.get("children").setEach("compensatesForMovement",e);return e}else{if(!this.get("children")){return NO}var c=this.get("children").everyProperty("compensatesForMovement",YES),b=this.get("children").everyProperty("compensatesForMovement",NO);if(c){return YES}if(b){return NO}return SC.MIXED_STATE}}.property("children","children.@each.compensatesForMovement").cacheable()});SC.stringsFor("en",{"Loc.Title":"Localized Title!","Loc.Label":"Localized Label!",Class:"Class",Welcome_tab:"Welcome",Collections_tab:"Collections",Collections2_tab:"Collections2",Buttons_tab:"Buttons",Panes_tab:"Panes",Forms_tab:"Forms",Icons_tab:"Icons",Title_body:"Sample Controls",Text_body:"SproutCore comes bundled with a wide array of controls that you can use in your own applications. Most of these controls can be created very easily using the built-in view helper functions. Consult the source code of this application for samples code to use in your own application.",Title_forms:"Forms",Text_forms:"SproutCore has built in support for form validation, and for buffering form input into a controller before it is committed to your backend model. The examples below show the built in validators and variety of controls that are supported.",FName_forms:"First Name",LName_forms:"Last Name",Email_forms:"Email",PNumber_forms:"Phone Number",CCard_forms:"Credit Card",Address_forms:"Address",Crazinnes_forms:"Crazinness",Submit_buttom_forms:"Submit",Cancel_buttom_forms:"Cancel",SChanges_buttom_forms:"Save Changes"});TestControls.Theme=SC.AceTheme.create({name:"test-controls"});SC.Theme.addTheme(TestControls.Theme);SC.defaultTheme="test-controls";TestControls.buttonsPage=SC.View.design({childViews:"scroll".w(),scroll:SC.ScrollView.design({delaysContentTouches:NO,contentView:SC.FormView.design({labelWidth:100,flowPadding:{left:20,top:30,bottom:40,right:20},classNames:["sample_controls"],childViews:"header style flags small normal huge jumbo icon space disclosureHeader disclosureClosed disclosureOpen".w(),header:SC.LabelView.design({fillWidth:YES,layout:{width:200,height:24},classNames:"header".w(),value:"Buttons"}),style:SC.FormView.row("Theme",SC.SegmentedView.design({controlSize:SC.LARGE_CONTROL_SIZE,flowSpacing:{bottom:20},align:"left",layout:{width:300,height:30},items:[{name:"Normal",value:"square"},{name:"Point Left",value:"point-left"},{name:"Point Right",value:"point-right"},{name:"Capsule",value:"capsule"}],itemTitleKey:"name",itemValueKey:"value",valueBinding:"TestControls.buttonsController.theme"})),flags:SC.FormView.row(SC.View.design(SC.FlowedLayout,{childViews:"shouldToggle shouldDisable shouldBeDefault shouldBeCancel".w(),isSpacer:YES,shouldToggle:SC.CheckboxView.design({layout:{width:100,height:24},title:"Toggleable",valueBinding:"TestControls.buttonsController.toggleable"}),shouldDisable:SC.CheckboxView.design({layout:{width:100,height:24},title:"Disable",valueBinding:"TestControls.buttonsController.disabled"}),shouldBeDefault:SC.CheckboxView.design({layout:{width:100,height:24},title:"Default",valueBinding:"TestControls.buttonsController.default"}),shouldBeCancel:SC.CheckboxView.design({layout:{width:100,height:24},title:"Cancel",valueBinding:"TestControls.buttonsController.cancel"})})),normal:SC.FormView.row(SC.ButtonView.design(SC.AutoResize,{controlSize:SC.REGULAR_CONTROL_SIZE,layout:{height:24,width:100},title:"Click Me",themeNameBinding:"TestControls.buttonsController.theme",buttonBehaviorBinding:"TestControls.buttonsController.buttonBehavior",isEnabledBinding:SC.Binding.not("TestControls.buttonsController.disabled"),isDefaultBinding:"TestControls.buttonsController.default",isCancelBinding:"TestControls.buttonsController.cancel"})),small:SC.FormView.row(SC.ButtonView.design(SC.AutoResize,{controlSize:SC.SMALL_CONTROL_SIZE,layout:{height:18,width:100},title:"Click Me",themeNameBinding:"TestControls.buttonsController.theme",buttonBehaviorBinding:"TestControls.buttonsController.buttonBehavior",isEnabledBinding:SC.Binding.not("TestControls.buttonsController.disabled"),isDefaultBinding:"TestControls.buttonsController.default",isCancelBinding:"TestControls.buttonsController.cancel"})),huge:SC.FormView.row(SC.ButtonView.design(SC.AutoResize,{controlSize:SC.HUGE_CONTROL_SIZE,layout:{height:30,width:100},title:"Click Me",themeNameBinding:"TestControls.buttonsController.theme",buttonBehaviorBinding:"TestControls.buttonsController.buttonBehavior",isEnabledBinding:SC.Binding.not("TestControls.buttonsController.disabled"),isDefaultBinding:"TestControls.buttonsController.default",isCancelBinding:"TestControls.buttonsController.cancel"})),jumbo:SC.FormView.row(SC.ButtonView.design(SC.AutoResize,{controlSize:SC.JUMBO_CONTROL_SIZE,layout:{height:44,width:100},title:"Click Me",themeNameBinding:"TestControls.buttonsController.theme",buttonBehaviorBinding:"TestControls.buttonsController.buttonBehavior",isEnabledBinding:SC.Binding.not("TestControls.buttonsController.disabled"),isDefaultBinding:"TestControls.buttonsController.default",isCancelBinding:"TestControls.buttonsController.cancel"})),icon:SC.FormView.row(SC.ButtonView.design({layout:{height:24,width:100},title:"Click Me",icon:"sc-icon-info-16",themeNameBinding:"TestControls.buttonsController.theme",buttonBehaviorBinding:"TestControls.buttonsController.buttonBehavior",isEnabledBinding:SC.Binding.not("TestControls.buttonsController.disabled"),isDefaultBinding:"TestControls.buttonsController.default",isCancelBinding:"TestControls.buttonsController.cancel"})),space:SC.View.design({fillWidth:YES,layout:{width:400,height:20}}),disclosureHeader:SC.LabelView.design({fillWidth:YES,layout:{width:400,height:24},classNames:"header".w(),value:"Disclosure Buttons"}),disclosureClosed:SC.FormView.row(SC.DisclosureView.design({layout:{height:24,width:100},title:"Disclosure Closed",value:NO})),disclosureOpen:SC.FormView.row(SC.DisclosureView.design({layout:{height:24,width:150},title:"Disclosure Open",value:YES}))})})});TestControls.checkboxesPage=SC.View.design({childViews:"form".w(),form:SC.FormView.design({classNames:["sample_controls"],layout:{left:20,top:40,right:20,bottom:40},childViews:"header small normal disabled multiple icon".w(),header:SC.LabelView.design({fillWidth:YES,layout:{width:200,height:24},classNames:"header".w(),value:"Checkboxes"}),small:SC.FormView.row(SC.CheckboxView.design({layout:{width:150,height:24},title:"Check Me",controlSize:SC.SMALL_CONTROL_SIZE})),normal:SC.FormView.row(SC.CheckboxView.design({layout:{width:150,height:24},title:"Check Me"})),disabled:SC.FormView.row(SC.CheckboxView.design({layout:{width:150,height:24},isEnabled:NO,title:"Don't Check Me"})),multiple:SC.FormView.row(SC.CheckboxView.design({layout:{width:150,height:24},value:[YES,NO],title:"Multiple? Really?"})),icon:SC.FormView.row(SC.CheckboxView.design({layout:{width:150,height:24},value:[YES,NO],title:"Icon",icon:"sc-icon-info-16"}))})});TestControls.flowLayoutPage=SC.View.design({childViews:"form".w(),form:SC.FormView.design({classNames:["sample_controls"],layout:{left:20,top:40,right:20,bottom:40},childViews:"header normal vertical".w(),header:SC.LabelView.design({fillWidth:YES,layout:{width:300,height:24},classNames:"header".w(),value:"Flow Layout"}),normal:SC.FormView.row(SC.View.extend(SC.Animatable,SC.FlowedLayout,SC.AutoMixin,{isSpacer:YES,init:function(){arguments.callee.base.apply(this,arguments);this.style.overflow="visible";SC.Timer.schedule({target:this,action:"hideOne",interval:1000,repeats:YES})},hideOne:function(){if(this._hasHidden){this.b.set("isHidden",NO)}else{this.b.set("isHidden",YES)}this._hasHidden=!this._hasHidden},autoMixins:[SC.Animatable,{transitions:{left:0.25,top:0.25,width:0.25,opacity:0.25}}],childViews:"a s b s2 c d".w(),layout:{width:600},align:SC.ALIGN_RIGHT,layoutDirection:SC.LAYOUT_HORIZONTAL,defaultFlowSpacing:{left:10,top:10,right:10,bottom:0},a:SC.ButtonView.design({flowSpacing:{top:5,left:4,right:3,bottom:2},layout:{width:150,height:24},title:"a"}),s:SC.View.design({isSpacer:YES,spaceUnits:2,backgroundColor:"gray",layout:{width:0,height:24}}),b:SC.ButtonView.design({layout:{width:190,height:24},title:"b",isHiddenDidChange:function(){this.adjust("opacity",this.get("isHidden")?0:1);this.set("useAbsoluteLayout",this.get("isHidden"))}.observes("isHidden")}),s2:SC.View.design({isSpacer:YES,spaceUnits:1,backgroundColor:"gray",layout:{width:0,height:24}}),c:SC.ButtonView.design({layout:{width:120,height:24},title:"c"}),d:SC.ButtonView.design({layout:{width:200,height:24},title:"d"})})),vertical:SC.FormView.row(SC.View.extend(SC.FlowedLayout,{layout:{height:100},childViews:"a s b s2 c d".w(),isSpacer:YES,layoutDirection:SC.LAYOUT_VERTICAL,align:SC.ALIGN_CENTER,defaultFlowSpacing:{left:10,top:10,right:10,bottom:0},a:SC.ButtonView.design({flowSpacing:{top:5,left:4,right:3,bottom:2},layout:{width:150,height:24},title:"a"}),s:SC.View.design({fillWidth:YES,isSpacer:YES,spaceUnits:2}),b:SC.ButtonView.design({layout:{width:190,height:24},title:"b"}),s2:SC.View.design({fillWidth:YES,isSpacer:YES,spaceUnits:1}),c:SC.ButtonView.design({layout:{width:120,height:24},title:"c"}),d:SC.ButtonView.design({layout:{width:200,height:24},title:"d"})}))})});TestControls.listPage=SC.View.design({childViews:"scroll".w(),scroll:SC.ScrollView.design({backgroundColor:"white",contentView:SC.ListView.design({hasContentIcon:YES,hasContentRightIcon:YES,contentIconKey:"icon",contentRightIconKey:"rightIcon",contentCheckboxKey:"isChecked",contentUnreadCountKey:"unread",classNames:["big-list"],rowHeight:44,content:function(){var a=0,b=[];for(a=0;a<1000;a++){b.push(SC.Object.create({title:"Item "+a,icon:"sc-icon-document-16",unread:a,rightIcon:"sc-icon-info-16",isChecked:YES}))}return b}.property().cacheable(),contentValueKey:"title"})})});TestControls.progressPage=SC.View.design({childViews:"form".w(),form:SC.FormView.design({classNames:["sample_controls"],layout:{left:20,top:40,right:20,bottom:40},childViews:"header normal disabled".w(),header:SC.LabelView.design({fillWidth:YES,layout:{width:250,height:18},value:"Progress Bars",classNames:"header".w()}),normal:SC.FormView.row(SC.ProgressView.design({layout:{height:20,width:200}})),disabled:SC.FormView.row(SC.ProgressView.design({layout:{height:20,width:200},isEnabled:NO}))})});TestControls.radioPage=SC.View.design({childViews:"form".w(),form:SC.FormView.design({classNames:["sample_controls"],layout:{left:20,top:40,right:20,bottom:40},childViews:"header normal disabled multiple horizontal icon".w(),header:SC.LabelView.design({fillWidth:YES,layout:{width:250,height:18},value:"Radio Views",classNames:"header".w()}),normal:SC.FormView.row(SC.RadioView.design({layout:{width:150,height:60},items:[{title:"One",value:"one"},{title:"Two",value:"two"},{title:"Three",value:"three"}],itemTitleKey:"title",itemValueKey:"value",value:null})),disabled:SC.FormView.row(SC.RadioView.design({layout:{width:150,height:60},isEnabled:NO,items:[{title:"One",value:"one"},{title:"Two",value:"two"},{title:"Three",value:"three"}],itemTitleKey:"title",itemValueKey:"value",value:"one"})),multiple:SC.FormView.row(SC.RadioView.design({layout:{width:150,height:60},items:[{title:"One",value:"one"},{title:"Two",value:"two"},{title:"Three",value:"three"}],itemTitleKey:"title",itemValueKey:"value",value:["one","three"]})),horizontal:SC.FormView.row(SC.RadioView.design({layout:{width:450,height:20},layoutDirection:SC.LAYOUT_HORIZONTAL,items:[{title:"One",value:"one"},{title:"Two",value:"two"},{title:"Three",value:"three"}],itemTitleKey:"title",itemValueKey:"value",value:null})),icon:SC.FormView.row(SC.RadioView.design({layout:{width:150,height:60},items:[{title:"One",value:"one",icon:"sc-icon-info-16"},{title:"Two",value:"two"},{title:"Three",value:"three"}],itemTitleKey:"title",itemValueKey:"value",itemIconKey:"icon",value:null}))})});TestControls.selectPage=SC.View.design({childViews:"form".w(),form:SC.FormView.design({classNames:["sample_controls"],layout:{left:20,top:40,right:20,bottom:40},childViews:"header normal strings disabled".w(),header:SC.LabelView.design({fillWidth:YES,layout:{width:250,height:18},value:"Select View",classNames:"header".w()}),normal:SC.FormView.row(SC.SelectView.design({layout:{width:150,height:24},items:[{name:"Printer A",value:"printer:a"},{name:"Printer B",value:"printer:b"},{name:"Printer C",value:"printer:c"},{name:"Printer D",value:"printer:d"},{name:"Printer E",value:"printer:e"},{name:"Printer F",value:"printer:f"},{separator:YES,name:"none"},{name:"MICR 1",value:"printer:m1"},{name:"MICR 2",value:"printer:m2"},{separator:YES,name:"Hi"},{name:"This name is Really Really Long, OK?",value:"LONG"}],itemTitleKey:"name",itemValueKey:"value",itemSeparatorKey:"separator",value:"printer:a",valueBinding:"TestControls.buttonsController.selectedValue"})),strings:SC.FormView.row(SC.SelectView.design({layout:{width:150,height:24},items:["printer:a","printer:b","printer:c","printer:d","printer:e","printer:f","printer:m1","printer:m2","LONG"],value:"printer:a",valueBinding:"TestControls.buttonsController.selectedValue"})),disabled:SC.FormView.row(SC.SelectView.design({layout:{width:150,height:24},controlSize:SC.REGULAR_CONTROL_SIZE,isEnabled:NO,items:[{name:"Printer A",value:"printer:a"},{name:"Printer B",value:"printer:b"},{name:"Printer C",value:"printer:c"},{separator:YES,name:"none"},{name:"Printer D",value:"printer:d"},{name:"Printer E",value:"printer:e"},{name:"Printer F",value:"printer:f"},{name:"MICR 1",value:"printer:m1"},{name:"MICR 2",value:"printer:m2"}],itemTitleKey:"name",itemValueKey:"value",itemSeparatorKey:"separator",value:null}))})});TestControls.segmentedPage=SC.View.design({childViews:"form".w(),form:SC.FormView.design({classNames:["sample_controls"],layout:{left:20,top:40,right:20,bottom:40},childViews:"header small normal large jumbo disabled multiple multiple_side_by_side overflow".w(),header:SC.LabelView.design({fillWidth:YES,layout:{width:300,height:24},classNames:"header".w(),value:"Segmented Views "}),small:SC.FormView.row(SC.SegmentedView.design({allowsEmptySelection:YES,layout:{left:0,width:350,height:18,centerY:0},align:SC.ALIGN_LEFT,controlSize:SC.SMALL_CONTROL_SIZE,items:[{title:"One",value:"one"},{title:"Two",value:"two"},{title:"Three",value:"three"}],itemTitleKey:"title",itemValueKey:"value",value:null})),normal:SC.FormView.row(SC.SegmentedView.design({allowsEmptySelection:YES,layout:{left:0,width:350,height:24,centerY:0},align:SC.ALIGN_LEFT,controlSize:SC.REGULAR_CONTROL_SIZE,items:[{title:"One",value:"one"},{title:"Two",value:"two"},{title:"Three",value:"three"}],itemTitleKey:"title",itemValueKey:"value",value:null})),large:SC.FormView.row(SC.SegmentedView.design({allowsEmptySelection:YES,layout:{left:0,width:350,height:30,centerY:0},align:SC.ALIGN_LEFT,controlSize:SC.LARGE_CONTROL_SIZE,items:[{title:"One",value:"one"},{title:"Two",value:"two"},{title:"Three",value:"three"}],itemTitleKey:"title",itemValueKey:"value",value:null})),jumbo:SC.FormView.row(SC.SegmentedView.design({allowsEmptySelection:YES,layout:{left:0,width:350,height:44,centerY:0},align:SC.ALIGN_LEFT,controlSize:SC.JUMBO_CONTROL_SIZE,items:[{title:"One",value:"one"},{title:"Two",value:"two"},{title:"Three",value:"three"}],itemTitleKey:"title",itemValueKey:"value",value:null})),disabled:SC.FormView.row(SC.SegmentedView.design({layout:{left:0,width:350,height:24,centerY:0},align:SC.ALIGN_LEFT,isEnabled:NO,items:[{icon:"sc-icon-info-16",title:"One",value:"one"},{title:"Two",value:"two"},{title:"Three",value:"three"}],itemTitleKey:"title",itemValueKey:"value",itemIconKey:"icon",value:"one"})),multiple:SC.FormView.row(SC.SegmentedView.design({allowsEmptySelection:YES,allowsMultipleSelection:YES,layout:{left:0,width:350,height:24,centerY:0},align:SC.ALIGN_LEFT,items:[{title:"One",value:"one"},{title:"Two",value:"two"},{title:"Three",value:"three"}],itemTitleKey:"title",itemValueKey:"value",value:["one","three"]})),multiple_side_by_side:SC.FormView.row(SC.SegmentedView.design({allowsEmptySelection:YES,allowsMultipleSelection:YES,layout:{left:0,width:350,height:24,centerY:0},align:SC.ALIGN_LEFT,items:[{title:"One",value:"one"},{title:"Two",value:"two"},{title:"Three",value:"three"}],itemTitleKey:"title",itemValueKey:"value",value:["one","two"]})),overflow:SC.FormView.row(SC.SegmentedView.design({layout:{left:0,width:350,height:24,centerY:0},align:SC.ALIGN_LEFT,items:[{title:"One",value:"one"},{title:"Two",value:"two"},{title:"Three",value:"three"},{title:"Four",value:"four"},{title:"Five",value:"five"},{title:"Six",value:"six"},{title:"Seven",value:"seven"},{title:"Eight",value:"eight"}],itemTitleKey:"title",itemValueKey:"value",value:null}))})});TestControls.slidersPage=SC.View.design({childViews:"form".w(),form:SC.FormView.design({classNames:["sample_controls"],layout:{left:20,top:40,right:20,bottom:40},childViews:"header small normal jumbo disabled".w(),header:SC.LabelView.design({fillWidth:YES,layout:{width:250,height:18},value:"Sliders",classNames:"header".w()}),small:SC.FormView.row(SC.SliderView.design({layout:{width:150,height:14},controlSize:SC.SMALL_CONTROL_SIZE,minimum:0,maximum:10,value:2})),normal:SC.FormView.row(SC.SliderView.design({layout:{width:150,height:16},minimum:0,maximum:10,value:2})),jumbo:SC.FormView.row(SC.SliderView.design({controlSize:SC.JUMBO_CONTROL_SIZE,layout:{width:150,height:22},minimum:0,maximum:10,value:2})),disabled:SC.FormView.row(SC.SliderView.design({layout:{width:150,height:16},isEnabled:NO,minimum:0,maximum:10,value:2}))})});TestControls.textFieldPage=SC.View.design({childViews:"form".w(),form:SC.ScrollView.design({contentView:SC.FormView.design({theme:"iphone-form",classNames:["sample_controls"],layout:{left:20,top:40,right:20,bottom:40},childViews:"header normal autoResize textArea textAreaAutoResize disabled".w(),header:SC.LabelView.design({layout:{width:200,height:44},classNames:"header".w(),value:"Text Fields",fillWidth:YES}),normal:SC.FormView.row(SC.TextFieldView.design({layout:{left:0,width:150,height:44,centerY:0},value:"Text",isSpacer:YES}),{classNames:["first"]}),autoResize:SC.FormView.row(SC.TextFieldView.design(SC.AutoResize,{layout:{left:0,width:150,height:44,centerY:0},value:"Hello, World!"})),textArea:SC.FormView.row(SC.TextFieldView.design({layout:{left:0,width:150,height:144,centerY:0},value:"Hello, World!",isTextArea:YES,isSpacer:YES})),textAreaAutoResize:SC.FormView.row(SC.TextFieldView.design(SC.AutoResize,{layout:{left:0,width:150,height:144,maxWidth:200,centerY:0},value:"Hello, World!",isTextArea:YES,shouldResizeHeight:YES})),disabled:SC.FormView.row(SC.TextFieldView.design({layout:{left:0,width:150,height:44,centerY:0},isEnabled:NO,value:"Disabled",isSpacer:YES}))})})});TestControls.scrollPage=SC.View.design({childViews:"scroll".w(),scroll:SC.ScrollView.design({contentView:SC.FormView.design({flowPadding:{top:0,bottom:100,right:0,left:0},classNames:["sample_controls"],layout:{left:20,top:40,right:20,bottom:40},childViews:"header list incrementalList imageList".w(),header:SC.LabelView.design({fillWidth:YES,layout:{width:300,height:24},classNames:"header".w(),value:"Scroll Views"}),list:SC.FormView.row(SC.ScrollView.design({backgroundColor:"white",layout:{width:320,height:460},contentView:SC.ListView.design({computeNowShowing:function(){return this.get("allContentIndexes")},classNames:["big-list"],rowHeight:44,content:function(){var a=0,b=[];for(a=0;a<100;a++){b.push(SC.Object.create({title:"Item "+a}))}return b}.property().cacheable(),contentValueKey:"title"})})),incrementalList:SC.FormView.row(SC.ScrollView.design({backgroundColor:"white",layout:{width:320,height:460},contentView:SC.ListView.design({classNames:["big-list"],rowHeight:44,content:function(){var a=0,b=[];for(a=0;a<1000;a++){b.push(SC.Object.create({title:"Item "+a}))}return b}.property().cacheable(),contentValueKey:"title"})})),imageList:SC.FormView.row(SC.ScrollView.design({backgroundColor:"gray",canScale:YES,layout:{width:320,height:460},contentView:SC.ListView.design({classNames:["big-list"],rowHeight:44,content:function(){var a=0,b=[];for(a=0;a<1000;a++){b.push(SC.Object.create({title:"Item "+a}))}return b}.property().cacheable(),contentValueKey:"title"})}))})})});SC.mixin(SC.SplitDividerView.prototype,{wantsAcceleratedLayer:YES});TestControls.SplitColumn=SC.View.design(SC.SplitChild,{autoResizeStyle:SC.RESIZE_AUTOMATIC,size:100,minimumSize:100,backgroundColor:"white",wantsAcceleratedLayer:YES,compensatesForMovement:YES,childViews:"allowIndirect compensates resizeStyle".w(),allowIndirect:SC.CheckboxView.design({layout:{top:10,left:10,width:200,height:24},title:"Allow Indirect Adjustments",valueBinding:"*parentView.allowsIndirectAdjustments"}),compensates:SC.CheckboxView.design({layout:{top:40,left:10,width:200,height:24},title:"Compensates for Movement",valueBinding:"*parentView.compensatesForMovement"}),resizeStyle:SC.SelectView.design({layout:{left:10,top:70,width:120,height:24},items:[{title:"Fixed Size",value:SC.FIXED_SIZE},{title:"Manual Resize",value:SC.RESIZE_MANUAL},{title:"Auto Resize",value:SC.RESIZE_AUTOMATIC}],itemTitleKey:"title",itemValueKey:"value",value:SC.RESIZE_AUTOMATIC,valueBinding:"*parentView.autoResizeStyle"})});TestControls.splitPage=SC.View.design({childViews:"toolbar scroll".w(),toolbar:SC.ToolbarView.design(SC.FlowedLayout,SC.AutoMixin,{autoMixins:[{wantsAcceleratedLayer:YES}],align:SC.ALIGN_RIGHT,canWrap:NO,layout:{height:44,bottom:0},flowPadding:{top:7},defaultFlowSpacing:{right:5,left:5},childViews:"direction resize allAllowIndirect allCompensateForMovement spacer add remove".w(),direction:SC.SelectView.design({flowSpacing:{left:5,top:3,right:5},layout:{width:200,height:24},items:[{title:"Horizontal",value:SC.LAYOUT_HORIZONTAL},{title:"Vertical",value:SC.LAYOUT_VERTICAL}],itemTitleKey:"title",itemValueKey:"value",value:SC.LAYOUT_VERTICAL,valueBinding:"TestControls.splitController.layoutDirection"}),resize:SC.CheckboxView.design({flowSpacing:{top:6,left:5,right:5},layout:{width:170},title:"Resize Children to Fit",valueBinding:"TestControls.splitController.shouldResizeChildrenToFit"}),allAllowIndirect:SC.CheckboxView.design({flowSpacing:{top:6,left:5,right:5},layout:{width:150},title:"Allow Indirect",valueBinding:"TestControls.splitController.allAllowIndirect"}),allCompensateForMovement:SC.CheckboxView.design({flowSpacing:{top:6,left:5,right:5},layout:{width:200},title:"Compensate for Movement",valueBinding:"TestControls.splitController.allCompensateForMovement"}),spacer:SC.View.design({isSpacer:YES}),add:SC.ButtonView.design(SC.AutoResize,{layout:{height:30},controlSize:SC.HUGE_CONTROL_SIZE,autoResizeField:"title",title:"Add",target:"TestControls.splitController",action:"addChild"}),remove:SC.ButtonView.design(SC.AutoResize,{layout:{height:30},controlSize:SC.HUGE_CONTROL_SIZE,autoResizeField:"title",title:"Remove",target:"TestControls.splitController",action:"removeChild"})}),scroll:SC.ScrollView.design({borderStyle:SC.BORDER_NONE,layout:{bottom:44},contentView:SC.SplitView.design({init:function(){arguments.callee.base.apply(this,arguments);TestControls.splitController.bind("children",this,"childViews")},layoutDirectionBinding:"TestControls.splitController.layoutDirection",shouldResizeChildrenToFitBinding:"TestControls.splitController.shouldResizeChildrenToFit",childViews:"initial".w(),initial:TestControls.SplitColumn.design()})})});TestControls.tabPage=SC.View.design({childViews:"form".w(),form:SC.FormView.design({layout:{left:20,top:40,right:20,bottom:40},childViews:"header top topToolbar bottom overflow icon".w(),header:SC.LabelView.design({layout:{width:300,height:24},classNames:"header".w(),value:"Tab Views",fillWidth:YES}),top:SC.FormView.row(SC.TabView.design({layout:{width:300,height:100,centerY:0},items:["Item 1","Item 2","Item 3"],tabLocation:SC.TOP_LOCATION})),topToolbar:SC.FormView.row(SC.TabView.design({layout:{width:300,height:100,centerY:0},items:["Item 1","Item 2","Item 3"],tabLocation:SC.TOP_TOOLBAR_LOCATION})),bottom:SC.FormView.row(SC.TabView.design({layout:{width:300,height:100,centerY:0},items:["Item 1","Item 2","Item 3"],tabLocation:SC.BOTTOM_LOCATION})),overflow:SC.FormView.row(SC.TabView.design({layout:{width:300,height:100,centerY:0},items:["Item 1","Item 2","Item 3","Item 4","Item 5","Item 6","Item 7"]})),icon:SC.FormView.row(SC.TabView.design({layout:{width:300,height:100,centerY:0},items:[{title:"Item 1",icon:"sc-icon-info-16"},{title:"Item 2"},{title:"Item 3"}],itemTitleKey:"title",itemIconKey:"icon",tabLocation:SC.TOP_LOCATION}))})});TestControls.panelsPage=SC.View.design({childViews:"form".w(),form:SC.FormView.design({classNames:["sample_controls"],layout:{left:20,top:40,right:20,bottom:40},childViews:"header buttonCount alertType show".w(),header:SC.LabelView.design({layout:{width:250,height:18},value:"Alerts",classNames:"header".w()}),buttonCount:SC.FormView.row(SC.RadioView.design({layout:{height:24*3,width:200},items:[{title:"One Button",value:1},{title:"Two Buttons",value:2},{title:"Three Buttons",value:3}],itemTitleKey:"title",itemValueKey:"value",valueBinding:"TestControls.alertController.buttonCount"})),alertType:SC.FormView.row(SC.SelectView.design({layout:{height:24,width:200},items:[{title:"Error",value:"error"},{title:"Info",value:"info"},{title:"Plain",value:"plain"},{title:"Show",value:"show"},{title:"Warn",value:"warn"}],itemTitleKey:"title",itemValueKey:"value",valueBinding:"TestControls.alertController.alertType"})),show:SC.ButtonView.design({layout:{height:24,width:100},title:"Alert",target:TestControls.alertController,action:"showAlert"})})});sc_require("resources/progress_page");sc_require("resources/buttons_page");sc_require("resources/checkboxes_page");sc_require("resources/radio_page");sc_require("resources/select_page");sc_require("resources/segmented_page");sc_require("resources/sliders_page");sc_require("resources/text_field_page");sc_require("resources/flow_layout_page");sc_require("resources/scroll_page");sc_require("resources/split_page");sc_require("resources/list_page");sc_require("resources/tab_page");sc_require("resources/panels_page");TestControls.mainPage=SC.Page.create({mainPane:SC.MainPane.design(SC.Animatable,{childViews:"split".w(),wantsTouchIntercept:YES,split:SC.MasterDetailView.design({classNames:[window.navigator.standalone?"round-toolbars":"normal"],autoHideMaster:YES,pickerPane:SC.PickerPane.extend(SC.Animatable,{transitions:{opacity:{duration:0.25,timing:SC.Animatable.TRANSITION_EASE_IN_OUT,action:function(){if(this.style.opacity===0){this._call_when_done()}}}},style:{opacity:1},layout:{width:250,height:480},theme:"popover",append:function(){this.disableAnimation();this.adjust("opacity",1).updateLayout();this.enableAnimation();arguments.callee.base.apply(this,arguments)},remove:function(){this._call_when_done=arguments.callee.base;this.adjust("opacity",0)}}),masterView:SC.WorkspaceView.design({topToolbar:SC.ToolbarView.design({layout:{top:0,left:0,right:0,height:32},childViews:"label".w(),label:SC.LabelView.design({layout:{left:10,centerY:0,height:21,width:200},value:"Test Controls",classNames:"embossed".w()})}),contentView:SC.ScrollView.design({classNames:["sc-source-list-background"],contentView:SC.SourceListView.design({layout:{left:0,top:0,right:0,bottom:0},contentValueKey:"name",contentBinding:"TestControls.categoriesController.arrangedObjects",selectionBinding:"TestControls.categoriesController.selection"})})}),detailView:SC.WorkspaceView.design({themeName:"ace",themeNameBinding:"TestControls.categoryController.themeName",topToolbar:SC.ToolbarView.design({layout:{top:0,left:0,right:0,height:32},childViews:"showMaster label useDarkTheme".w(),showMaster:SC.ButtonView.design({layout:{left:7,centerY:0,height:30,width:100},controlSize:SC.HUGE_CONTROL_SIZE,isVisible:NO,isVisibleBinding:".parentView.masterIsHidden",title:"Tests",action:"toggleMasterPicker"}),label:SC.LabelView.design({layout:{left:120,centerY:0,height:21,width:200},value:"Test Controls",classNames:"embossed".w(),isVisible:NO,isVisibleBinding:SC.Binding.from(".parentView.masterIsHidden")}),useDarkTheme:SC.CheckboxView.design({layout:{right:10,centerY:0,height:18,width:150},title:"Use Dark Theme",valueBinding:"TestControls.categoryController.useDarkTheme"})}),contentView:SC.ContainerView.design({nowShowingBinding:"TestControls.categoryController.nowShowing"})})})}),welcome:SC.LabelView.design({escapeHTML:NO,classNames:"welcome-tab",value:"<h1>Test Controls</h1><p>SproutCore comes bundled with a wide array of controls that you can use in your own applications. Most of these controls can be created very easily using the built-in view helper functions. Consult the source code of this application for samples code to use in your own application.</p>"}),progress_page:TestControls.progressPage,buttons_page:TestControls.buttonsPage,checkboxes_page:TestControls.checkboxesPage,radio_page:TestControls.radioPage,select_page:TestControls.selectPage,sliders_page:TestControls.slidersPage,text_field_page:TestControls.textFieldPage,segmented_page:TestControls.segmentedPage,panels_page:TestControls.panelsPage,flow_layout_page:TestControls.flowLayoutPage,scroll_page:TestControls.scrollPage,split_page:TestControls.splitPage,list_page:TestControls.listPage,tab_page:TestControls.tabPage});TestControls.main=function main(){TestControls.getPath("mainPage.mainPane").append();TestControls.categoriesController.set("content",TestControls.rootCategory)};function main(){TestControls.main()};